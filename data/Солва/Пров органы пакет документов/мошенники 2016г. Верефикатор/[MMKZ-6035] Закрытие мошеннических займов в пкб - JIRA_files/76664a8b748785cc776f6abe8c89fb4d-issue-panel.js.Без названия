!function(e){function t(t){for(var r,s,o=t[0],l=t[1],u=t[2],d=0,f=[];d<o.length;d++)s=o[d],i[s]&&f.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(c&&c(t);f.length;)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={1:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;a.push([1143,0]),n()}({1143:function(e,t,n){n(77),e.exports=n(1144)},1144:function(e,t,n){"use strict";n(37);var r=s(n(0)),i=s(n(15)),a=s(n(1275));function s(e){return e&&e.__esModule?e:{default:e}}i.default.render(r.default.createElement(a.default,null),document.getElementById("todoapp"))},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(20));var i={},a={checklistCompletedFieldId:{},checklistContentYamlFieldId:{},clientKey:{},hideCompleted:{isBoolean:!0},hostBaseUrl:{},isAdmin:{isBoolean:!0},isProjectAdmin:{isBoolean:!0},issueId:{isInteger:!0},issueKey:{},panelPosition:{},prefetchedChecklists:{isJSON:!0},prefetchedItems:{isJSON:!0},projectId:{isInteger:!0},projectKey:{},readOnly:{isBoolean:!0},hideToolbar:{isBoolean:!0},permissionUsed:{},sentryDsn:{},serverUrl:{attributeName:"ap-local-base-url"},srvTime:{isInteger:!0},token:{},userAccountId:{},licenseActive:{isBoolean:!0},licenseMessage:{},appManageUrl:{},statusesEnabled:{isBoolean:!0},statusesHaveCheckbox:{isBoolean:!0},statuses:{isJSON:!0},completedTasksNum:{isInteger:!0},totalTasksNum:{isInteger:!0},isServiceDeskProject:{isBoolean:!0},globalStatusesOptionKey:{},projectStatusesOptionKey:{},multipleChecklistsEnabled:{isBoolean:!0},featureFlagMultipleChecklistsEnabled:{isBoolean:!0},isProVersion:{isBoolean:!0}},s=function(e){return e in i||(i[e]=o(e)),i[e]},o=function(e){var t=a[e]||{},n=t.attributeName||e,i=(0,r.default)("meta[name="+n+"]").attr("content");return t.isBoolean?"1"===i||"true"===i:t.isInteger?parseInt(i,10):i&&t.isJSON?JSON.parse(i):i};t.default={get checklistCompletedFieldId(){return s("checklistCompletedFieldId")},get checklistContentYamlFieldId(){return s("checklistContentYamlFieldId")},get clientKey(){return s("clientKey")},get hideCompleted(){return s("hideCompleted")},get hostBaseUrl(){return s("hostBaseUrl")},get isAdmin(){return s("isAdmin")},get isProjectAdmin(){return s("isProjectAdmin")},get issueId(){return s("issueId")},get issueKey(){return s("issueKey")},get panelPosition(){return s("panelPosition")},get prefetchedChecklists(){return s("prefetchedChecklists")},get prefetchedItems(){return s("prefetchedItems")},get projectId(){return s("projectId")},get projectKey(){return s("projectKey")},get readOnly(){return s("readOnly")},get hideToolbar(){return s("hideToolbar")},get permissionUsed(){return s("permissionUsed")},get sentryDsn(){return s("sentryDsn")},get serverUrl(){return s("serverUrl")},get srvTime(){return s("srvTime")},get token(){return s("token")},get userAccountId(){return s("userAccountId")},get licenseActive(){return s("licenseActive")},get licenseMessage(){return s("licenseMessage")},get appManageUrl(){return s("appManageUrl")},get statuses(){return s("statuses")},get statusesEnabled(){return s("statusesEnabled")},get statusesHaveCheckbox(){return s("statusesHaveCheckbox")},get getCompletedTasksNum(){return s("completedTasksNum")},get getTotalTasksNum(){return s("totalTasksNum")},get isServiceDeskProject(){return s("isServiceDeskProject")},get globalStatusesOptionKey(){return s("globalStatusesOptionKey")},get projectStatusesOptionKey(){return s("projectStatusesOptionKey")},get multipleChecklistsEnabled(){return s("multipleChecklistsEnabled")},get isMultipleChecklistsDefined(){var e=(0,r.default)('meta[name="multipleChecklistsEnabled"]').attr("content");return void 0!==e&&null!==e&&e.length>0},get featureFlagMultipleChecklistsEnabled(){return s("featureFlagMultipleChecklistsEnabled")},get isProVersion(){return s("isProVersion")},get isFreeVersion(){return!this.isProVersion},set token(e){i.token=e}},e.exports=t.default},1275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=I(n(1276)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=I(n(0)),s=I(n(14)),o=I(n(1290)),l=I(n(419)),u=I(n(20)),c=I(n(545)),d=I(n(610)),f=I(n(544)),p=I(n(1758)),h=I(n(53)),m=I(n(12)),g=I(n(21)),v=I(n(1766)),y=I(n(176)),E=n(43),b=I(n(940)),k=n(16),C=I(n(552)),_=I(n(73));function I(e){return e&&e.__esModule?e:{default:e}}var T=(0,r.default)(function(){l.default.adjustFrameHeight(),setTimeout(function(){c.default.setAppWidth(l.default.getWidth())},100)},100,{leading:!0}),O=a.default.createClass({displayName:"IssuePanelApp",mixins:[s.default.connect(f.default,"appData"),s.default.connect(p.default,"data"),s.default.connect(h.default,"usersData")],componentDidMount:function(){c.default.initialize(),c.default.setAppWidth(l.default.getWidth());var e=document.body;this.mutationObserver=new MutationObserver(T),this.mutationObserver.observe(e,{childList:!0,subtree:!0}),(0,u.default)(window).off("resize"),(0,u.default)(document).on("click",this.globalClickHandler),(0,u.default)(window).on("resize",T),AP.events.on("overwrite-checklist",function(e){var t=e.checklistId,n=e.items;d.default.overwriteChecklist(t,n)}),AP.events.on("permanently-hide-notification",function(e){c.default.permanentlyHideNotification(e)}),AP.events.on("update-local-checklist",function(e){var t=e.checklistId,n=e.checklistName,r=e.isDefaultForIssue,i=e.items;d.default.updateLocalChecklist(t,n,r,i)})},componentWillUnmount:function(){this.mutationObserver.disconnect(),(0,u.default)(document).off("click",this.globalClickHandler),(0,u.default)(window).off("resize",T),AP.events.off("overwrite-checklist"),AP.events.off("permanently-hide-notification"),AP.events.off("update-local-checklists")},render:function(){var e=this.state.data,t=e.checklists,n=e.hideCompleted,r=e.list,s=e.panelPosition,l=e.statuses,u=this.state.data,c=u.checklistsBusy,d=u.checklistsErrors,f=u.itemsByChecklist,p=u.showItemsLimitNotification,h=t.length>1,g=m.default.issueKey,y=m.default.readOnly,E=m.default.statusesEnabled,b=m.default.hideToolbar,k=m.default.statusesHaveCheckbox,C=this.getInfoNotifications(),_=m.default.isMultipleChecklistsDefined,I=m.default.multipleChecklistsEnabled,T=!1;_&&!1===I&&(T=!0),m.default.featureFlagMultipleChecklistsEnabled||(T=!0,I=!1);var O={hasMultipleChecklists:h,hideAddChecklistButton:T,hideCompleted:n,infoNotifications:[],issueKey:g,loadTemplateDisabled:p,multipleChecklistsEnabled:I,onHideCompletedItems:this.onHideCompletedItems,panelPosition:s,readOnly:y,hideToolbar:b,readOnlyMessage:this.getReadOnlyMessage(),statuses:l,statusesEnabled:E,statusesHaveCheckbox:k,usersByAccountId:this.state.usersData.byAccountId},P=t.map(function(e){var t=e.id,n=e.isDefaultForIssue,r=e.name,s=f[t]||[],l=c[t];"boolean"!=typeof l&&(l=!1);var u=i({},O,{errorMessages:d[t]||[],id:t,isBusy:l,isDefaultForIssue:Boolean(n),items:s,name:r});return h||(u.infoNotifications=C),a.default.createElement(o.default,i({},u,{key:u.id}))});return a.default.createElement("div",{className:"panel-position-"+s},h&&a.default.createElement(v.default,{allItems:r,errors:d["global-bar"]||[],hideAddChecklistButton:T,hideCompleted:n,infoNotifications:C,isBusy:Boolean(c["global-bar"]),multipleChecklistsEnabled:I,onAddChecklist:this.onAddChecklist,onHideCompletedItems:this.onHideCompletedItems,onRemoveTemplate:this.onRemoveTemplate,onToggleAllItems:this.onToggleAllItems,panelPosition:s,readOnly:y,hideToolbar:b,readOnlyMessage:this.getReadOnlyMessage(),statuses:l,statusesEnabled:E,statusesHaveCheckbox:k}),P)},onAddChecklist:function(){d.default.addChecklist(null)},onHideCompletedItems:function(){d.default.hideCompletedItems(!this.state.data.hideCompleted)},onRemoveTemplate:function(e){y.default.removeTemplate(e)},onToggleAllItems:function(e){d.default.toggleAllItems(e,null)},globalClickHandler:function(e){var t=document.querySelectorAll(".notification-arrow-box"),n=document.querySelectorAll(".notification-trigger"),r=e.target,i=!1;if(Array.prototype.forEach.call(n,function(e){e.contains(r)&&(i=!0)}),!i){var a=!0;Array.prototype.forEach.call(t,function(e){e.contains(r)&&(a=!1)}),a&&AP.events.emit("close-notifications")}},getReadOnlyMessage:function(){var e="You cannot edit the checklist.";return m.default.permissionUsed&&(e+=" You don't have \""+m.default.permissionUsed+'" permission.'),e},getInfoNotifications:function(){var e=this.state.data,t=e.itemsLimitNotificationId,n=e.showItemsLimitNotification,r=[];if(g.default.isFreeVersion()&&r.push({content:this.getItemsLimitNotificationContent(),customTrigger:{className:"notification-items-limit-icon",content:a.default.createElement(b.default,{primaryColor:k.colors.Y300})},iconTitle:"You have reached the limit for the number of items per issue",id:t,visible:n}),this.state.appData.displayReviewsNotification&&!n){var i=a.default.createElement("span",null,"ðŸ–"),s=g.default.isFreeVersion()?this.getReviewsNotificationContentForFreeVersion():this.getReviewsNotificationContentForProVersion();r.push({content:s,customTrigger:{className:"notification-reviews-icon",content:i},dontShowAgainProperty:"hideFirstReviewActionMessage",iconTitle:"Do you enjoy working with "+g.default.ADDON_NAME+"?"})}return r},getItemsLimitNotificationContent:function(){var e=g.default.getItemsLimitForFreeVersion(),t=this.state.data.list,n=_.default.getRealItems(t).length>e;return a.default.createElement("div",{className:"section-message section-message-warning"},a.default.createElement("div",{className:"section-message-left"},a.default.createElement(C.default,{primaryColor:k.colors.Y300})),a.default.createElement("div",{className:"section-message-right"},a.default.createElement("p",{className:"section-message-header"},"You have reached the limit for the number of items per issue"),a.default.createElement("p",null,n&&a.default.createElement("span",null,"Not all items are visible. "),a.default.createElement("span",null,"In Issue Checklist Free you can add and see up to ",e," items for a single issue. ")),a.default.createElement("p",null,a.default.createElement("span",null,"If you want to add more items please upgrade to Issue Checklist Pro. "),a.default.createElement("span",null,"The upgrade process preserves all checklist data. "),a.default.createElement("a",{href:E.upgradeToProUrl,target:"_blank"},"Read more"))))},getReviewsNotificationContentForFreeVersion:function(){return a.default.createElement("div",null,a.default.createElement("p",null,a.default.createElement("strong",null,"Do you enjoy working with ",g.default.ADDON_NAME,"?")),a.default.createElement("p",null,"Make our day and motivate us to work even harder ðŸ’ª by leaving a positive review. Thank you! ðŸ˜"),a.default.createElement("p",null,a.default.createElement("a",{href:E.marketplaceReviewsFreeUrl,target:"_blank"},"Write a review âœï¸")))},getReviewsNotificationContentForProVersion:function(){return a.default.createElement("div",null,a.default.createElement("p",null,a.default.createElement("strong",null,"Issue Checklist joins HeroCoders team ðŸŽ‰")),a.default.createElement("p",null,"We are a bigger team now and offer ",a.default.createElement("a",{href:E.herocodersVendorUrl,target:"_blank"},"more apps")," ðŸ’ª"),a.default.createElement("p",null,"Celebrate with us, write a review and get ",a.default.createElement("a",{href:E.mergeWithHeroCoders,target:"_blank"},a.default.createElement("b",null,"$15")," Amazon card"),"."),a.default.createElement("p",null,a.default.createElement("a",{href:E.marketplaceReviewsProUrl,target:"_blank"},"Write a review âœï¸")))}});t.default=O,e.exports=t.default},1276:function(e,t,n){var r=n(1277),i=n(70),a="Expected a function";e.exports=function(e,t,n){var s=!0,o=!0;if("function"!=typeof e)throw new TypeError(a);return i(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:s,maxWait:t,trailing:o})}},1277:function(e,t,n){var r=n(70),i=n(1278),a=n(606),s="Expected a function",o=Math.max,l=Math.min;e.exports=function(e,t,n){var u,c,d,f,p,h,m=0,g=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError(s);function E(t){var n=u,r=c;return u=c=void 0,m=t,f=e.apply(r,n)}function b(e){var n=e-h;return void 0===h||n>=t||n<0||v&&e-m>=d}function k(){var e=i();if(b(e))return C(e);p=setTimeout(k,function(e){var n=t-(e-h);return v?l(n,d-(e-m)):n}(e))}function C(e){return p=void 0,y&&u?E(e):(u=c=void 0,f)}function _(){var e=i(),n=b(e);if(u=arguments,c=this,h=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(k,t),g?E(e):f}(h);if(v)return clearTimeout(p),p=setTimeout(k,t),E(h)}return void 0===p&&(p=setTimeout(k,t)),f}return t=a(t)||0,r(n)&&(g=!!n.leading,d=(v="maxWait"in n)?o(a(n.maxWait)||0,t):d,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==p&&clearTimeout(p),m=0,u=h=c=p=void 0},_.flush=function(){return void 0===p?f:C(i())},_}},1278:function(e,t,n){var r=n(71);e.exports=function(){return r.Date.now()}},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),i=l(n(2)),a=l(n(610)),s=l(n(176)),o=l(n(611));function l(e){return e&&e.__esModule?e:{default:e}}var u=r.default.createClass({displayName:"AppChecklist",propTypes:{errorMessages:i.default.array.isRequired,hasMultipleChecklists:i.default.bool.isRequired,hideAddChecklistButton:i.default.bool.isRequired,hideCompleted:i.default.bool.isRequired,id:i.default.string.isRequired,infoNotifications:i.default.arrayOf(i.default.object).isRequired,isBusy:i.default.bool.isRequired,isDefaultForIssue:i.default.bool.isRequired,issueKey:i.default.string.isRequired,items:i.default.array.isRequired,loadTemplateDisabled:i.default.bool.isRequired,multipleChecklistsEnabled:i.default.bool.isRequired,name:i.default.string.isRequired,onHideCompletedItems:i.default.func.isRequired,panelPosition:i.default.string.isRequired,readOnly:i.default.bool.isRequired,hideToolbar:i.default.bool.isRequired,readOnlyMessage:i.default.string.isRequired,statuses:i.default.arrayOf(i.default.object).isRequired,statusesEnabled:i.default.bool.isRequired,statusesHaveCheckbox:i.default.bool.isRequired,usersByAccountId:i.default.object.isRequired},getHeaderProps:function(){return{errorMessages:this.props.errorMessages,hasMultipleChecklists:this.props.hasMultipleChecklists,hideAddChecklistButton:this.props.hideAddChecklistButton,hideCompleted:this.props.hideCompleted,infoNotifications:this.props.infoNotifications,isBusy:this.props.isBusy,list:this.getItems(),loadTemplateDisabled:this.props.loadTemplateDisabled,multipleChecklistsEnabled:this.props.multipleChecklistsEnabled,name:this.props.name,onAddChecklist:this.onAddChecklist,onAddItem:this.onAddItem,onAddMultipleItems:this.onAddMultipleItems,onChangeChecklistName:this.onChangeChecklistName,onDeleteChecklist:this.onDeleteChecklist,onHideCompletedItems:this.props.onHideCompletedItems,onLoadTemplate:this.onLoadTemplate,onRemoveTemplate:this.onRemoveTemplate,onShowEditor:this.onShowEditor,onToggleAllItems:this.onToggleAllItems,panelPosition:this.props.panelPosition,readOnly:this.props.readOnly,hideToolbar:this.props.readOnly,readOnlyMessage:this.props.readOnlyMessage,renderTopBar:!0,showDeleteChecklistButton:!this.props.isDefaultForIssue,statuses:this.props.statuses,statusesEnabled:this.props.statusesEnabled,statusesHaveCheckbox:this.props.statusesHaveCheckbox}},getItems:function(){return this.props.items},getListProps:function(){return{hideCompleted:this.props.hideCompleted,list:this.getItems(),onActualOrder:this.onActualOrder,onHideCompletedItems:this.props.onHideCompletedItems,onSaveItemSummary:this.onSaveItemSummary,onStatusChange:this.onStatusChange,onToggleItem:this.onToggleItem,onToggleAndSaveItemSummary:this.onToggleAndSaveItemSummary,onRemoveItem:this.onRemoveItem,readOnly:this.props.readOnly,hideToolbar:this.props.readOnly,readOnlyMessage:this.props.readOnlyMessage,renderConvertToIssue:!0,panelPosition:this.props.panelPosition,statuses:this.props.statuses,statusesEnabled:this.props.statusesEnabled,statusesHaveCheckbox:this.props.statusesHaveCheckbox}},onActualOrder:function(e,t,n){a.default.actualOrder(e,t,n,this.props.id)},onAddChecklist:function(){a.default.addChecklist(this.props.id)},onAddItem:function(e,t){a.default.addItem(e,this.props.id,t)},onAddMultipleItems:function(e,t){a.default.addMultipleItems(e,this.props.id,t)},onChangeChecklistName:function(e){a.default.changeChecklistName(this.props.id,e)},onDeleteChecklist:function(){a.default.deleteChecklist(this.props.id)},onSaveItemSummary:function(e,t){a.default.saveItemSummary(e,t,this.props.id)},onLoadTemplate:function(e,t){a.default.loadTemplate(e,t,this.props.id)},onRemoveItem:function(e){a.default.removeItem(e,this.props.id)},onRemoveTemplate:function(e){s.default.removeTemplate(e)},onShowEditor:function(){AP.dialog.create({key:"editor-dialog",width:"100%",height:"100%",header:"Editor Dialog",chrome:!1,customData:{checklistId:this.props.id,currentIssueKey:this.props.issueKey,isChecklistDefaultForIssue:this.props.isDefaultForIssue,statuses:this.props.statuses,statusesEnabled:this.props.statusesEnabled,usersByAccountId:this.props.usersByAccountId}})},onStatusChange:function(e,t){a.default.statusChange(e,t,this.props.id)},onToggleItem:function(e){a.default.toggleItem(e,this.props.id)},onToggleAndSaveItemSummary:function(e,t,n){a.default.toggleAndSaveItemSummary(e,t,n,this.props.id)},onToggleAllItems:function(e){a.default.toggleAllItems(e,this.props.id)},render:function(){return r.default.createElement(o.default,{headerProps:this.getHeaderProps(),items:this.getItems(),listProps:this.getListProps()})}});t.default=u,e.exports=t.default},1758:function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var i=O(n(19)),a=O(n(1015)),s=O(n(675)),o=O(n(1018)),l=O(n(237)),u=O(n(478)),c=O(n(177)),d=O(n(550)),f=O(n(1762)),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=O(n(14)),m=O(n(610)),g=O(n(12)),v=O(n(18)),y=O(n(58)),E=O(n(27)),b=O(n(17)),k=O(n(67)),C=O(n(294)),_=O(n(21)),I=O(n(55)),T=O(n(73));function O(e){return e&&e.__esModule?e:{default:e}}function P(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function S(){return g.default.serverUrl+"/rest/api/1/"+g.default.issueKey+"/task?issueId="+g.default.issueId+"&projectId="+g.default.projectId}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?"&checklistId="+e:"";return g.default.serverUrl+"/rest/api/1/bulk?issueId="+g.default.issueId+"&projectId="+g.default.projectId+t}function A(e,t){return(0,f.default)(e,function(e){return e.id===t})}function x(e,t){e.toggleDate=(new Date).getTime(),e.toggleUserAccountId=t.accountId}y.default.initBackgroundRefresh();var j=h.default.createStore({listenables:[m.default],checklists:g.default.prefetchedChecklists,checklistsBusy:{},checklistsErrors:{},itemsByChecklist:{},hideCompleted:g.default.hideCompleted,list:g.default.prefetchedItems,panelPosition:g.default.panelPosition,statuses:g.default.statuses,userAccountId:g.default.userAccountId,itemsLimitNotificationId:"items-limit-notification",showItemsLimitNotification:!1,onSaveItemSummary:function(e,t,n){var r=this;t=k.default.getValidatedSummary(t);var i=A(this.list,e);if(i&&i.summary!==t){var a=i.summary;i.summary=t,this.checklistActionStarted(n),this.doTrigger();var s={summary:i.summary},o=p({},i);this._editItem(i.id,s,o,n).then(function(e){r.updateStoreAndListeners(e)}).catch(function(e){i.summary=a,r.setChecklistError(n,e)}).finally(function(){r.makeChecklistNotBusy(n),r.doTrigger()})}},onToggleItem:function(e,t){var n=this,i=A(this.list,e);if(i){this.checklistActionStarted(t),this.doTrigger();var a=i.fixed,s=i.status,o=k.default.getValidatedStatus(s,!a,this.statuses);i.fixed=!a,i.status=o,this.doTrigger();var l=p({},i),u={fixed:i.fixed,status:o};v.default.getUser().then(function(e){x(u,e),x(l,e)}).finally(function(){n._editItem(i.id,u,l,t).then(function(e){n.updateStoreAndListeners(e)}).catch(function(e){i.fixed=a,i.status=s,n.setChecklistError(t,e)}).finally(function(){n.makeChecklistNotBusy(t),n.doTrigger()})})}else r.log("ERROR: onToggleItem: cannot find item to change in store")},onToggleAndSaveItemSummary:function(e,t,n,i){var a=this,s=A(this.list,e);if(s){this.checklistActionStarted(i),this.doTrigger(),t=k.default.getValidatedSummary(t);var o=s.fixed,l=s.summary,u=s.status,c=k.default.getValidatedStatus(u,!o,this.statuses);s.fixed=n,s.summary=t,s.status=c,this.doTrigger();var d={fixed:s.fixed,status:c,summary:s.summary},f=p({},s);v.default.getUser().then(function(e){x(d,e),x(f,e)}).finally(function(){a._editItem(s.id,d,f,i).then(function(e){a.updateStoreAndListeners(e)}).catch(function(e){s.fixed=o,s.summary=l,s.status=u,a.setChecklistError(i,e)}).finally(function(){a.makeChecklistNotBusy(i),a.doTrigger()})})}else r.log("ERROR: onToggleAndSaveItemSummary: cannot find item to change in store")},onStatusChange:function(e,t,n){var i=this,a=A(this.list,e),s=k.default.findStatusObjectByName(t,this.statuses);if(a)if(s){this.checklistActionStarted(n),this.doTrigger();var o=a.fixed,l=a.status;a.fixed=s.checked,a.status=t,this.doTrigger();var u={fixed:a.fixed,status:a.status},c=p({},a);v.default.getUser().then(function(e){x(u,e),x(c,e),i._editItem(a.id,u,c,n).then(function(e){i.updateStoreAndListeners(e)}).catch(function(e){a.fixed=o,a.status=l,i.setChecklistError(n,e)}).finally(function(){i.makeChecklistNotBusy(n),i.doTrigger()})})}else r.log('ERROR: onStatusChange: status "'+t+'" does not exist');else r.log("ERROR: onStatusChange: cannot find item in local store")},_editItem:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];return new b.default.Promise(function(a,s){var o=p({id:e},t),l={checklistId:n.getChecklistData(i).checklistIdParam,editedItem:o,fullItem:r};y.default.getAxiosJwt().then(function(e){return e.post(S(),l)}).then(function(e){y.default.update(e),a(e.data)}).catch(function(e){s(e)})})},getNewItemOrder:function(e){var t=this.itemsByChecklist[e]||[];return 0===t.length?0:Math.max.apply(Math,P(t.map(function(e){return e.order})))+1},onOverwriteChecklist:function(e,t){var n=this;this.checklistActionStarted(e),this.doTrigger();var r=this.getChecklistData(e).checklistIdParam,i={removeAllByChecklistId:r};v.default.getUser().then(function(e){i.inserts=t.map(function(t,n){var i=p({},t,{order:n,summary:k.default.getValidatedSummary(t.summary),checklistId:r});return x(i,e),i})}).finally(function(){y.default.getAxiosJwt().then(function(e){return e.put(w(),i)}).then(function(e){n.updateStoreAndListeners(e.data),y.default.update(e),AP.events.emit("overwrite-checklist-success")}).catch(function(t){var r=n.setChecklistError(e,t);AP.events.emit("overwrite-checklist-failure",{error:r})}).finally(function(){n.makeChecklistNotBusy(e),n.doTrigger()})})},onUpdateLocalChecklist:function(e,t,n,r){var i=this,a=this.checklists.find(function(t){return n?t.isDefaultForIssue:t.id===e}),s=this.list.filter(function(e){return k.default.getOriginalChecklistId(e,i.checklists)!==a.id});a.name=t,this.list=s.concat(r),this.updateStoreAndListeners()},getChecklistById:function(e){return this.checklists.find(function(t){return t.id===e})},getChecklistData:function(e){var t=this.getChecklistById(e),n=Boolean(t)&&t.isDefaultForIssue;return{checklist:t,checklistIdParam:k.default.getChecklistIdToSave(e,n),isDefaultForIssue:n}},onAddChecklist:function(e){var t=this,n=e||"global-bar";this.checklistActionStarted(n),this.doTrigger();var r="Checklist #"+(this.checklists.length+1),i=C.default.getValidatedChecklistName(r);y.default.getAxiosJwt().then(function(e){var t=g.default.serverUrl+"/rest/api/1/"+g.default.issueKey+"/checklist?issueId="+g.default.issueId,n={name:i};return e.post(t,n)}).then(function(e){y.default.update(e),t.updateStoreAndListeners(e.data)}).catch(function(e){t.setChecklistError(n,e)}).finally(function(){t.makeChecklistNotBusy(n),t.doTrigger()})},onChangeChecklistName:function(e,t){var n=this,r=C.default.getValidatedChecklistName(t),i=this.getChecklistData(e),a=i.checklist,s=i.isDefaultForIssue,o=a.name;a.name=r,this.checklistActionStarted(e),this.doTrigger(),y.default.getAxiosJwt().then(function(t){var n=function(e){return g.default.serverUrl+"/rest/api/1/"+g.default.issueKey+"/checklist/"+e+"?issueId="+g.default.issueId}(e),i={isDefaultForIssue:s,name:r};return t.put(n,i)}).then(function(e){y.default.update(e),n.updateStoreAndListeners(e.data)}).catch(function(t){a.name=o,n.setChecklistError(e,t)}).finally(function(){n.makeChecklistNotBusy(e),n.doTrigger()})},onDeleteChecklist:function(e){var t=this;this.checklistActionStarted(e),this.doTrigger(),y.default.getAxiosJwt().then(function(t){var n=function(e){return g.default.serverUrl+"/rest/api/1/"+g.default.issueKey+"/checklist/"+e+"?issueId="+g.default.issueId}(e);return t.delete(n)}).then(function(e){y.default.update(e),t.updateStoreAndListeners(e.data)}).catch(function(n){t.setChecklistError(e,n)}).finally(function(){t.makeChecklistNotBusy(e),t.doTrigger()})},onAddItem:function(e,t,n){var r=this,i=I.default.isChecklistSeparator(e.summary);if(_.default.isFreeVersion()&&!i&&this.isItemsLimitExceededOrEqual())return this.updateStoreAndListeners(),AP.events.emit("open-notification",{id:this.itemsLimitNotificationId}),void AP.events.emit("restore-last-pre-save-value-for-new-item",{fieldId:n});this.checklistActionStarted(t),this.doTrigger();var a={checklistId:this.getChecklistData(t).checklistIdParam,summary:k.default.getValidatedSummary(e.summary),description:e.description,fixed:e.fixed,status:e.status,order:this.getNewItemOrder(t)};v.default.getUser().then(function(e){x(a,e)}).finally(function(){y.default.getAxiosJwt().then(function(e){return e.put(S(),a)}).then(function(e){r.updateStoreAndListeners(e.data),y.default.update(e)}).catch(function(e){r.setChecklistError(t,e)}).finally(function(){r.makeChecklistNotBusy(t),r.doTrigger()})})},onAddMultipleItems:function(e,t,n){var r=this,i=e.filter(function(e){return!I.default.isChecklistSeparator(e.summary)}).length;if(_.default.isFreeVersion()&&T.default.getRealItems(this.list).length+i>_.default.getItemsLimitForFreeVersion())return this.showItemsLimitNotification=!0,this.doTrigger(),AP.events.emit("open-notification",{id:this.itemsLimitNotificationId}),void AP.events.emit("restore-last-pre-save-value-for-new-item",{fieldId:n});this.checklistActionStarted(t),this.doTrigger();var a=this.getChecklistData(t).checklistIdParam,s={inserts:[],updates:[],removals:[]},o=this.getNewItemOrder(t);(e||[]).forEach(function(e){s.inserts.push({checklistId:a,summary:k.default.getValidatedSummary(e.summary),description:e.description,fixed:e.fixed,status:e.status,order:o++})}),v.default.getUser().then(function(e){s.inserts.forEach(function(t){x(t,e)})}).finally(function(){y.default.getAxiosJwt().then(function(e){return e.put(w(a),s)}).then(function(e){r.updateStoreAndListeners(e.data),y.default.update(e),_.default.isFreeVersion()&&r.isItemsLimitExceededOrEqual()&&AP.events.emit("open-notification",{id:r.itemsLimitNotificationId})}).catch(function(e){r.setChecklistError(t,e)}).finally(function(){r.makeChecklistNotBusy(t),r.doTrigger()})})},onRemoveItem:function(e,t){var n=this;this.checklistActionStarted(t),this.doTrigger();var r=(0,d.default)(this.list);this.list=(0,c.default)(this.list,function(t){return t.id!==e}),this.updateStoreAndListeners(),y.default.getAxiosJwt().then(function(r){var i="checklistId="+n.getChecklistData(t).checklistIdParam+"&issueId="+g.default.issueId+"&projectId="+g.default.projectId,a=g.default.serverUrl+"/rest/api/1/"+g.default.issueKey+"/task/"+e+"?"+i;return r.delete(a)}).then(function(e){n.updateStoreAndListeners(e.data),y.default.update(e)}).catch(function(e){n.list=r,n.updateStoreAndListeners(),n.setChecklistError(t,e)}).finally(function(){n.makeChecklistNotBusy(t),n.doTrigger()})},onToggleAllItems:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n||"global-bar";this.checklistActionStarted(r),this.doTrigger();var i=(0,d.default)(this.list);this.list=(0,u.default)(this.list,function(r){return n&&k.default.getChecklistId(r,t.checklists)!==n||(r.fixed=e,r.status=k.default.getValidatedStatus(r.status,e,t.statuses)),r}),this.updateStoreAndListeners();var a={inserts:[],updates:[],removals:[]};v.default.getUser().then(function(e){t.list.forEach(function(r){n&&k.default.getChecklistId(r,t.checklists)!==n||(x(r,e),a.updates.push(p({},(0,l.default)(r,"id","fixed","status","toggleUserAccountId","toggleDate"))))})}).finally(function(){y.default.getAxiosJwt().then(function(e){var r=t.getChecklistData(n).checklistIdParam;return e.put(w(r),a)}).then(function(e){t.updateStoreAndListeners(e.data),y.default.update(e)}).catch(function(e){t.list=i,t.updateStoreAndListeners(),t.setChecklistError(r,e)}).finally(function(){t.makeChecklistNotBusy(r),t.doTrigger()})})},onActualOrder:function(e,t,n,r){var i=this;this.checklistActionStarted(r),this.doTrigger();var a=A(this.list,t),l=(0,d.default)(this.list),c={},f={},h={};this.list.forEach(function(e){c[e.id]=e.order}),e.forEach(function(e,t){f[e]=t}),(0,u.default)(f,function(e,t){e!==c[t]&&(h[t]=e)});var m=this.list.map(function(t){var n=t.order;return e.includes(t.id)&&(n=e.indexOf(t.id)),p({},t,{order:n})});if(this.list=(0,o.default)(m,["order"],["asc"]),this.doTrigger(),0===(0,s.default)(h))return this.makeChecklistNotBusy(r),void this.doTrigger();y.default.getAxiosJwt().then(function(e){var t=i.getChecklistData(r).checklistIdParam,s="issueId="+g.default.issueId+"&projectId="+g.default.projectId+"&itemDraggedByVisibleDragHandler="+n+"&checklistId="+t,o=g.default.serverUrl+"/rest/api/1/"+g.default.issueKey+"/taskorder?"+s;return e.post(o,{changes:h,fullDraggedItem:a})}).then(function(e){i.updateStoreAndListeners(e.data),y.default.update(e)}).catch(function(e){i.list=l,i.updateStoreAndListeners(),i.setChecklistError(r,e)}).finally(function(){i.makeChecklistNotBusy(r),i.doTrigger()})},onHideCompletedItems:function(e){var t=this;this.hideCompleted=e,this.doTrigger(),this.userAccountId&&y.default.getAxiosJwt().then(function(n){return n.post(g.default.serverUrl+"/rest/api/1/user/hideFilterEnabled?userAccountId="+t.userAccountId+"&issueId="+g.default.issueId+"&projectId="+g.default.projectId,{hideCompleted:e})}).then(function(){}).catch(function(e){r.log('Error saving "hide completed" state: '+JSON.stringify(t.getErrorFromResponse(e)))})},onLoadTemplate:function(e,t,n){var r=this;this.checklistActionStarted(n),this.doTrigger();var i={};v.default.getUser().then(function(e){x(i,e)}).finally(function(){var a=r.getChecklistData(n).checklistIdParam,s="toggleDate="+i.toggleDate+"&toggleUserAccountId="+i.toggleUserAccountId,o="issueId="+g.default.issueId+"&projectId="+g.default.projectId+"&append="+(t?1:0)+"&checklistId="+a,l=g.default.serverUrl+"/rest/api/1/"+g.default.issueKey+"/selecttemplate/"+e[0]+"?"+s+"&"+o;y.default.getAxiosJwt().then(function(e){return e.get(l)}).then(function(e){r.updateStoreAndListeners(e.data),y.default.update(e),_.default.isFreeVersion()&&r.isItemsLimitExceededOrEqual()&&AP.events.emit("open-notification",{id:r.itemsLimitNotificationId})}).catch(function(e){r.setChecklistError(n,e)}).finally(function(){r.makeChecklistNotBusy(n),r.doTrigger()})})},updateStoreAndListeners:function(e){e&&(this.checklists=e.checklists,this.list=e.items),this.populateItemsByChecklist(),_.default.isFreeVersion()&&(this.showItemsLimitNotification=this.isItemsLimitExceededOrEqual()),this.doTrigger()},populateItemsByChecklist:function(){var e=this;this.itemsByChecklist={};var t=[],n={};this.checklists.forEach(function(e){t.push(e.id),n[e.id]=e.order});var r=[],i={};this.list.forEach(function(a){a.defaultChecklistOrder=0,void 0===a.originalChecklistId&&(a.originalChecklistId=a.checklistId),a.originalChecklistId&&!t.includes(a.originalChecklistId)&&(void 0===i[a.originalChecklistId]&&(i[a.originalChecklistId]=Math.max.apply(Math,P(Object.values(i)).concat([0]))+1),a.defaultChecklistOrder=i[a.originalChecklistId],a.checklistId=null);var s=k.default.getChecklistId(a,e.checklists);a.checklistOrder=n[s],r.push(a)}),r=(0,a.default)(r,["checklistOrder","defaultChecklistOrder","order"]),_.default.isFreeVersion()&&(r=T.default.getItemsUpToLimit(r)),r.forEach(function(t){var n=k.default.getChecklistId(t,e.checklists);e.itemsByChecklist[n]||(e.itemsByChecklist[n]=[]),e.itemsByChecklist[n].push(t)})},getInitialState:function(){return this.updateStoreAndListeners(),this.getStateForComponents()},doTrigger:function(){this.trigger(this.getStateForComponents())},getStateForComponents:function(){return{checklists:this.checklists,checklistsBusy:this.checklistsBusy,checklistsErrors:this.checklistsErrors,hideCompleted:this.hideCompleted,itemsByChecklist:this.itemsByChecklist,itemsLimitNotificationId:this.itemsLimitNotificationId,list:this.list,panelPosition:this.panelPosition,showItemsLimitNotification:this.showItemsLimitNotification,statuses:this.statuses,userAccountId:this.userAccountId}},isItemsLimitExceededOrEqual:function(){return T.default.getRealItems(this.list).length>=_.default.getItemsLimitForFreeVersion()},makeChecklistNotBusy:function(e){this.checklistsBusy[e]=!1},checklistActionStarted:function(e){this.checklistsBusy[e]=!0,this.checklistsErrors[e]=[]},setChecklistError:function(e,t){r.log("Got an error from server:"),r.log(t),t.response&&r.log(t.response.data);var n=this.getErrorFromResponse(t);return this.checklistsErrors[e]=[n],n},getErrorFromResponse:function(e){var t=e.response||e,n=(0,i.default)(t,"status");if(n){var r=(0,i.default)(t,"data.message")||(0,i.default)(t,"data.error.message")||(0,i.default)(t,"data.error",""),a=(0,i.default)(t,"statusText")+". "+r;return 400===n?{title:"An error occurred",details:""+r}:401===n||401===(0,i.default)(t,"data.error.code")?{title:"You are not authorized (HTTP 401 received).",details:a}:403===n?{title:"HTTP 403 received",details:'Please make sure you have "Edit Issues" permission for the project.'}:404===n?{title:"Resource not found",details:"Please reload the page."}:502===n||503===n?{title:"Server response failure.",details:a}:{title:"HTTP status code "+n+" received",details:a}}return"ECONNABORTED"===t.code?{title:"Server did not respond in time",details:"Timeout of "+E.default.defaults.timeout+" ms exceeded."}:{title:"Unknown error occurred",details:"Please check your internet connection or try to reload the page."}}});t.default=j,e.exports=t.default}).call(this,n(10))},176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14)).default.createActions(["addTemplate","removeTemplate","undoRemoveTemplate","renameTemplate","listTemplates","setTemplateAsDefault","selectProjectSettings","updateTemplateData"]);t.default=r,e.exports=t.default},1762:function(e,t,n){var r=n(1763)(n(716));e.exports=r},1763:function(e,t,n){var r=n(264),i=n(208),a=n(182);e.exports=function(e){return function(t,n,s){var o=Object(t);if(!i(t)){var l=r(n,3);t=a(t),n=function(e){return l(o[e],e,o)}}var u=e(t,n,s);return u>-1?o[l?t[u]:u]:void 0}}},1766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=h(n(0)),a=(h(n(2)),h(n(547))),s=h(n(549)),o=h(n(42)),l=h(n(543)),u=n(535),c=h(u),d=h(n(35)),f=h(n(73)),p=h(n(542));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props,t=e.errors,n=e.hideAddChecklistButton,r=e.hideCompleted,f=e.isBusy,p=e.multipleChecklistsEnabled,h=e.readOnly,m=e.hideToolbar,g=this.props,v=g.onAddChecklist,y=g.onHideCompletedItems,E=g.readOnlyMessage,b=this.props,k=b.statuses,C=b.statusesEnabled,_=b.statusesHaveCheckbox,I=!n,T=void 0;t.length>0&&(T=i.default.createElement(l.default,{errorMessages:t,type:"error"}));var O=I?3:2,P=(0,d.default)({"bar-buttons":!0,"bar-2-buttons":2===O,"bar-3-buttons":3===O}),S="";return h?S=E:p||(S="Multiple checklists can be enabled in Global Settings"),i.default.createElement("div",{className:"bar"},i.default.createElement("div",{className:P},!m&&I&&i.default.createElement(a.default,{isDisabled:h||!p,onClick:v,title:S}),!m&&i.default.createElement(s.default,{hideCompleted:r,onClick:y}),!m&&i.default.createElement(c.default,{list:this.props.allItems,loadTemplateDisabled:!1,mode:u.DROPDOWN_MENU_GLOBAL_MODE,onLoadTemplate:function(){},onRemoveTemplate:this.props.onRemoveTemplate,onToggleAllItems:this.props.onToggleAllItems,onPasteChecklist:function(){},panelPosition:this.props.panelPosition,readOnly:h,readOnlyMessage:E,statuses:k,statusesEnabled:C,statusesHaveCheckbox:_})),i.default.createElement("div",{className:"global-bar-completion-badge-container"},this.renderCompletionBadge()),i.default.createElement("div",{className:"global-bar-elements bar-elements"},i.default.createElement("div",{className:"bar-element bar-element-spinner"},i.default.createElement(o.default,{visible:f,atlaskitSize:"small"})),i.default.createElement("div",{className:"bar-element bar-element-notification"},T),this.renderInfoNotifications()))}},{key:"renderCompletionBadge",value:function(){var e=this.props.allItems,t=f.default.getCheckedRealItemsNum(e)+" / "+f.default.getRealItems(e).length;return i.default.createElement(p.default,{appearance:"default",value:t})}},{key:"renderInfoNotifications",value:function(){return this.props.infoNotifications.map(function(e,t){return i.default.createElement("div",{className:"bar-element bar-element-notification",key:t},i.default.createElement(l.default,{content:e.content,customTrigger:e.customTrigger,dontShowAgainProperty:e.dontShowAgainProperty,iconTitle:e.iconTitle,id:e.id,showCloseButton:!0,type:"info",visible:e.visible}))})}}]),t}();t.default=m,e.exports=t.default},18:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(59)),i=c(n(66)),a=c(n(19));t.getUserProjectPermissions=f,t.getClientPluginVersion=p,t.getErrorMessage=h;var s=c(n(17)),o=c(n(21)),l=c(n(41)),u=c(n(27));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){var t=null;return function(){var n={accountId:"",displayName:""};return new s.default.Promise(function(r){t?r(t):AP.user.getCurrentUser(function(i){var a=i.atlassianAccountId;a?new s.default.Promise(function(t){AP.request({url:"/rest/api/2/myself",type:"GET",headers:o.default.getJiraGdprRequestHeaders(),success:function(e){var n=JSON.parse(e);t(n)},error:function(n,r,i){e.error(i),t({})}})}).then(function(e){a===e.accountId?(t={accountId:a,displayName:e.displayName},r(t)):r(n)}).catch(function(t){e.error(t),r(n)}):r(n)})})}}();function f(e,t){return t=(t||[]).join("%2C"),new s.default.Promise(function(n,r){AP.request({url:"/rest/api/2/mypermissions?projectId="+e+"&permissions="+t,type:"GET",dataType:"json",contentType:"application/json",headers:{"X-Atlassian-Token":"no-check"},success:function(e){n(JSON.parse(e))},error:function(e){r("failed to get permissions: "+h(e))}})})}function p(){return new s.default.Promise(function(t,n){AP.request({url:"/rest/atlassian-connect/1/addons/com.gebsun.plugins.jira.issuechecklist",type:"GET",dataType:"json",contentType:"application/json",headers:{"X-Atlassian-Token":"no-check"},success:function(n){e.log("plugin info: "+n);var r=JSON.parse(n).version.split("."),i={major:r[0],minor:r[1],patch:r[2]};t(i)},error:function(e,t){n("ERROR: "+t)}})})}function h(e){e=e||{};var t=(0,a.default)(e,"response",e);if((0,a.default)(t,"status")){var n=(0,a.default)(t,"data.error.message")||(0,a.default)(t,"data.error")||(0,a.default)(t,"statusText")||(0,a.default)(t,"responseText")||(0,a.default)(t,"status","Connection error occurred");return(0,i.default)(n)?n:JSON.stringify(n)}return"ECONNABORTED"===t.code?"Timeout of "+u.default.defaults.timeout+" ms exceeded.":"string"==typeof t?t:"Please check your internet connection or try to reload the page."}t.default={getUser:d,getUserProjectPermissions:f,getClientPluginVersion:p,getErrorMessage:h,isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode},splitMultilineText:function(e){return e?e.split(/[\r\n]+/).filter(function(e){return(0,r.default)(e).length>0}):[]},DUE_DATE_DASH_REGEXP:/(\b)(\d{4}-\d{2}-\d{2})(\b)/g,DUE_DATE_SLASH_REGEXP:/(\b)(\d{4}\/\d{2}\/\d{2})(\b)/g,DUE_DATE_SEPARATORS_REGEXP:/[-/]/g,EDITABLE_DUE_DATE_REGEXP:/\/\/([0-9-/]*)$/,EDITABLE_DUE_DATE_ENDING_REGEXP:/^([0-9-/]*)/,MENTION_REGEXP:l.default.MENTION_REGEXP,MENTION_INVALID_CHARACTERS:l.default.MENTION_INVALID_CHARACTERS,EDITABLE_MENTION_REGEXP:/(?:^|\s+)@([a-zA-Z0-9_.+:-]*)$/,EDITABLE_MENTION_ENDING_REGEXP:/^([a-zA-Z0-9_.+:-]*)/,ISSUE_KEY_REGEXP:/(\b)([A-Z][A-Z_0-9]+-[0-9]+)(\b)/g,LINK_REGEXP:/<a[^>]*href="([^"]*)"[^>]*>([^<]*)<\/a>/g}}).call(this,n(10))},184:function(e,t){},185:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default={_cache:{},get:function(e){return this._cache[e]},set:function(){1===arguments.length?this._setMultipleValues(arguments[0]):2===arguments.length&&this._setSingleValue.apply(this,arguments)},_setSingleValue:function(e,t){this._cache[e]=t},_setMultipleValues:function(e){this._cache=r({},this._cache,e)}},e.exports=t.default},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default={ADDON_KEY:"com.herocoders.plugins.jira.issuechecklist-free",ADDON_SIBLING_KEY:"com.gebsun.plugins.jira.issuechecklist",ADDON_NAME:"Issue Checklist Free",CHECKLIST_PANEL_LEFT_KEY:"issue-checklist-content",CHECKLIST_ISSUE_PROPERTY_KEY:"checklist",CHECKLIST_PROGRESS_OBSOLETE_FIELD_KEY:"issue-checklist-completion-field",getChecklistPanelLeftPropertyKey:function(){return this.ADDON_KEY+"_"+this.CHECKLIST_PANEL_LEFT_KEY},getSiblingChecklistPanelLeftPropertyKey:function(){return this.ADDON_SIBLING_KEY+"_"+this.CHECKLIST_PANEL_LEFT_KEY},defaultJiraRequestHeaders:{"X-Atlassian-Token":"nocheck","Content-Type":"application/json",Accept:"application/json"},getJiraGdprRequestHeaders:function(){return r({},this.defaultJiraRequestHeaders,{"x-atlassian-force-account-id":"true"})},getGlobalSettingsUrl:function(e){return e+"/plugins/servlet/ac/"+this.ADDON_KEY+"/ic-global-settings"},getManageJiraPluginUrl:function(e){return e+"/plugins/servlet/upm#manage/"+this.ADDON_KEY},getStatusesUrl:function(e){return e+"/plugins/servlet/ac/"+this.ADDON_KEY+"/ic-statuses"},isFreeVersion:function(){return!0},isProVersion:function(){return!this.isFreeVersion()},getItemsLimitForFreeVersion:function(){return 20}},e.exports=t.default},210:function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var i=h(n(198)),a=h(n(59)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=h(n(14)),l=h(n(453)),u=h(n(12)),c=h(n(18)),d=h(n(17)),f=h(n(211)),p=h(n(185));function h(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.createStore(s({},(0,f.default)(),{listenables:[l.default],_currentIssueKey:null,_fetchedIssues:{},doTrigger:function(){var e=this._mapToComponentsState();this.trigger(e)},getInitialState:function(){return this._mapToComponentsState()},_mapToComponentsState:function(){return{currentIssueKey:this._currentIssueKey,fetchedIssues:this._fetchedIssues}},onFindAndFetchIssues:function(e){var t=this,n=function(e){var t=[];return e.forEach(function(e){(e.match(c.default.ISSUE_KEY_REGEXP)||[]).forEach(function(e){var n=(0,a.default)(e);t.push(n)})}),t}(e),s=this._getTokensToFetch(n);0!==s.length&&(this._addToTokensBeingFetched(s),function(e){return new d.default.Promise(function(t,n){var i="key in ("+e.join(",")+")";r.log("fetchIssues: jql=",i),AP.request({url:"/rest/api/2/search?jql="+i+"&fields=summary,issuetype,status&validateQuery=none",type:"GET",contentType:"application/json",headers:{"X-Atlassian-Token":"no-check"},success:function(e){t(JSON.parse(e))},error:function(e,t,i){r.log("fetchIssues: failed:",e),Raven.captureException(i),n(i)}})})}(s).then(function(e){var n=e.issues,r=[];n&&n.forEach(function(e){var n=e.key,i=e.fields;t._fetchedIssues[n]={fields:i},r.push(n)}),t._addToFetchedTokens(r),t._addToNonexistentTokens((0,i.default)(s,r)),t.doTrigger()}).finally(function(){t._removeFromTokensBeingFetched(s)}))},onInitialize:function(){var e=p.default.get("currentIssueKey");this._currentIssueKey=e||u.default.issueKey,this.doTrigger()}})),e.exports=t.default}).call(this,n(10))},211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(198)),i=a(n(236));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function(){var e=[],t=[],n=[];return{_addToFetchedTokens:function(t){e=(0,i.default)([].concat(s(e),s(t)))},_addToNonexistentTokens:function(e){t=(0,i.default)([].concat(s(t),s(e)))},_addToTokensBeingFetched:function(e){n=(0,i.default)([].concat(s(n),s(e)))},_getExcludedTokens:function(){return[].concat(s(e),s(t),s(n))},_removeFromTokensBeingFetched:function(e){n=(0,r.default)(n,e)},_getTokensToFetch:function(e){var t=this._getExcludedTokens();return(0,r.default)(e,t)}}},e.exports=t.default},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){},i={adjustHeight:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;function s(){var n=Math.max(t,e.scrollHeight+l);n>t&&n++,e.style.height=n+"px",n<=t&&this.setHeight(e,t)}var o=parseInt(window.getComputedStyle(e).height,10),l=Math.abs(o-e.clientHeight);e.style.height=0,i?window.setTimeout(function(){s.call(n),a()},1):(s.call(this),a())},setHeight:function(e,t){e.style.height=t+"px"}};t.default=i,e.exports=t.default},268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceMentionTextWithAccountId=t.markInlineCode=t.editorContentToItems=t.markdownContentToItems=t.itemsToEditorContent=t.itemsToMarkdownContent=t.lineToItem=t.toggleSeparator=t.toggleItem=t.toggleDescription=void 0;var r=f(n(670)),i=f(n(672)),a=f(n(673)),s=f(n(59)),o=f(n(674)),l=n(55),u=f(l),c=f(n(72)),d=f(n(67));function f(e){return e&&e.__esModule?e:{default:e}}t.toggleDescription=function(e,t,n){var r=y(e),i=r.description;if(r.isDescription)return t?"* ["+d.default.getValidatedStatus(null,!1,n)+"] "+i:"* "+i;if(u.default.isChecklistSeparator(e)){var a=(0,o.default)(u.default.removeChecklistSeparator(e));return v(a)}var s=h(e,{},t,n).summary;return v(s)},t.toggleItem=function(e,t,n){var r=y(e),i=r.description,a=r.isDescription,s=d.default.getValidatedStatus(null,!1,n);if(a)return t?"* ["+s+"] "+i:"* "+i;if(u.default.isChecklistSeparator(e)){var l=(0,o.default)(u.default.removeChecklistSeparator(e));return t?"* ["+s+"] "+l:"* "+l}var c=h(e,{},t,n),f=c.fixed,p=c.summary;return t?"* ["+d.default.getValidatedStatus(null,!f,n)+"] "+p:f?"* "+p:"* [x] "+p},t.toggleSeparator=function(e,t,n){var r=y(e),i=r.description;if(r.isDescription){var a=u.default.createChecklistSeparator(i);return p(a)}if(u.default.isChecklistSeparator(e)){var s="*";return t&&(s="* ["+d.default.getValidatedStatus(null,!1,n)+"]"),u.default.replaceChecklistSeparator(e,s)}var o=h(e,{},t,n).summary,l=u.default.createChecklistSeparator(o);return p(l)};var p=function(e){var t="^"+l.SEPARATOR_MARKER+"(\\S)";return e.replace(new RegExp(t),function(e,t){return l.SEPARATOR_MARKER+" "+t})},h=t.lineToItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=arguments[3],i=!1,a=(0,s.default)(e),o=null;if(!a)return{fixed:!1,summary:""};if(a=(a=(a=(a=(a=(a=(a=function(e){var t="^"+l.SEPARATOR_MARKER+"(\\s)";return e.replace(new RegExp(t),function(){return l.SEPARATOR_MARKER})}(a=c.default.replaceMentionTextWithAccountId(a,t))).replace(/^\s*\*\s+/,"")).replace(/^\s*-(?!-)\s*/,"")).replace(/^\s*\+(?!\+)\s*/,"")).replace(/^\s*#{1,6}(?!#+)\s*/,"")).replace(/^\s*>(?!>)\s*/,"")).replace(/^\s*\[([^\]]*)]/,function(e,t){if(a.substring(e.length).startsWith("("))return e;if(n)if("x"===t)i=!0,o=d.default.getValidatedStatus(null,i,r);else{var s=d.default.findStatusObjectByName(t,r);i=!!s&&s.checked,o=d.default.getValidatedStatus(t,i,r)}else i="x"===t;return""}),!(a=(0,s.default)(a)))return{fixed:i,summary:""};if(0===(0,s.default)(a,"_-+=*").length)return{fixed:i,summary:""};var u={fixed:i,summary:a};return o&&(u.status=o),u},m=(t.itemsToMarkdownContent=function(e,t,n){return m(e,{},{},t,n)},t.itemsToEditorContent=function(e,t,n,r,i){var a=[],s=function(e){e.description&&e.description.split("\n").forEach(function(e){var r=c.default.replaceAccountIdWithMentionText(e,t,n);a.push(v(r))})};return e.forEach(function(e){var o=e.fixed,l=c.default.replaceAccountIdWithMentionText(e.summary,t,n);if(u.default.isChecklistSeparator(l))return a.push(p(l)),void s(e);var f="";r?f="["+d.default.getValidatedStatus(e.status,e.fixed,i)+"] ":o&&(f="[x] "),a.push("* "+f+l),s(e)}),a.join("\n")}),g=(t.markdownContentToItems=function(e,t,n,r){var i=(0,a.default)(e,/\r?\n/),s=g(i,{},n,r),o=(new Date).getTime();return s.forEach(function(e,n){s[n].summary=d.default.getValidatedSummary(e.summary),s[n].order=n,s[n].toggleDate=o,s[n].toggleUserAccountId=t}),s},t.editorContentToItems=function(e,t,n,r){var i=[],a=[],s=void 0;return e.forEach(function(o,l){var u=l===e.length-1,d=h(o,t,n,r),f=y(o),p=f.description,m=f.isDescription;m&&p&&a.push(c.default.replaceMentionTextWithAccountId(p,t)),s&&(u||d.summary&&!m)&&a.length>0&&(s.description=a.join("\n")),m||d.summary&&(a=[],s=d,i.push(s))}),i}),v=function(e){return">> "+e},y=function(e){var t=e.match(/^\s*>>(.*)/);return t?{description:(0,s.default)(t[1]),isDescription:!0}:{description:"",isDescription:!1}};t.markInlineCode=function(e,t,n){var a=t.ch,l=n.ch,u=e.substring(0,a),c=e.substring(a,l),d=e.substring(l);if(a===l){return{cursorPosition:u.length+1,updatedLine:u+"``"+d}}var f=c.length-(0,o.default)(c,"`").length,p=c.length-(0,i.default)(c,"`").length;if(f===p&&0!==p){var h=(0,s.default)(c,"`"),m={cursorPosition:(u+h).length,updatedLine:u+h+d};return a!==l&&(m.selectionStart=u.length,m.selectionEnd=(u+h).length),m}for(var g=0,v=10;v>0;v--){var y=(0,r.default)("`",v);if(-1!==c.indexOf(y)){g=v;break}}var E=(0,r.default)("`",g+1),b=u+E+c+E,k={cursorPosition:b.length,updatedLine:b+d};return a!==l&&(k.selectionStart=u.length,k.selectionEnd=b.length),k},t.replaceMentionTextWithAccountId=function(e,t){return c.default.replaceMentionTextWithAccountId(e,t)}},294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={getDefaultIssueChecklistId:function(){return"default-checklist"},getValidatedChecklistName:function(e){return e.substring(0,128)}},e.exports=t.default},37:function(e,t,n){"use strict";var r=s(n(27)),i=s(n(79)),a=n(12);function s(e){return e&&e.__esModule?e:{default:e}}n(80),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(64),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),a.sentryDsn&&(i.default.config(a.sentryDsn).install(),window.loadingErrors&&window.loadingErrors.forEach(function(e){return i.default.captureException(e)}),AP.user.getCurrentUser(function(e){var t=e.atlassianAccountId||"";i.default.setUserContext({id:t+"@"+a.clientKey})}),i.default.setExtraContext({hostBaseUrl:a.hostBaseUrl,clientKey:a.clientKey})),r.default.defaults.timeout=3e4},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MENTION_REGEXP:/(^|\s+)@([a-zA-Z0-9_.+:-]+)/g,MENTION_INVALID_CHARACTERS:/[^a-zA-Z0-9_.+:-]/g},e.exports=t.default},419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(514));var i=[".arrow-box",".dropdown-menu-dropdown",".calendar-popup-wrapper > div > div:nth-child(2) > div:first-child",".user-picker-wrapper > div",".todo-item-status > div > div > div > div:nth-child(3) > div"],a=function(e){var t=e.map(function(e){var t=document.querySelectorAll(e);return Array.prototype.map.call(t,function(e){if(e){var t=window.getComputedStyle(e);if(t&&"none"!==t.display)return e.getBoundingClientRect().bottom}return 0})}),n=(0,r.default)(t);return Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))},s={adjustFrameHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"todoapp",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;setTimeout(function(){var r=function(e){return document.getElementById(e).getBoundingClientRect().height}(e);r<n&&(r=n);var i=a(t)+15,s=Math.max(r,i);AP.resize("100%",s)},0)},getWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"todoapp";return document.getElementById(e).getBoundingClientRect().width}};t.default=s,e.exports=t.default},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(215)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(0)),s=(o(n(2)),o(n(68)));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"render",value:function(){var e=this.props,t=e.atlaskitSize,n=e.visible;if(t&&n)return a.default.createElement(s.default,{size:t});var i={visibility:this.props.visible?"visible":"hidden",display:this.props.visible?"inline-block":"none"};this.props.style&&(i=(0,r.default)(i,this.props.style));var o="aui-icon aui-icon-wait "+this.props.className;return a.default.createElement("span",{style:i,className:o},"Loading...")}}]),t}();t.default=l,e.exports=t.default},424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14)).default.createActions(["newItemFocusChange","itemFocusChange"]);t.default=r,e.exports=t.default},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="https://bit.ly";t.customFieldsDocumentation=r+"/2PSTqx4",t.customStatusesDocumentation=r+"/2MSiYZc",t.editorDocumentationUrl=r+"/2PNAHTs",t.documentationUrl=r+"/2JWpNXH",t.itemStatusDocumentation=r+"/36FVuhO",t.permissionsDocumentation=r+"/2WOlX8d",t.templatesPermissionsDocumentation=r+"/34Fa4nX",t.supportUrl=r+"/2N2bUL4",t.marketplaceProVersionUrl="https://marketplace.atlassian.com/apps/1213231/issue-checklist-pro?hosting=cloud&tab=overview",t.marketplaceReviewsFreeUrl="https://marketplace.atlassian.com/apps/1220209/issue-checklist-free?hosting=cloud&tab=reviews",t.marketplaceReviewsProUrl="https://marketplace.atlassian.com/apps/1213231/issue-checklist-pro?hosting=cloud&tab=reviews",t.herocodersVendorUrl="https://marketplace.atlassian.com/vendors/1215166",t.upgradeToProUrl=r+"/2qn5hZn",t.mergeWithHeroCoders=r+"/2kkb4wi",t.serviceDeskCustomerView=r+"/2WLKScH"},44:function(e,t,n){},453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14)).default.createActions(["findAndFetchIssues","initialize"]);t.default=r,e.exports=t.default},454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(444)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=f(n(0)),s=f(n(649)),o=f(n(527)),l=f(n(18)),u=n(62),c=f(n(1)),d=f(n(455));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default={getInitialState:function(){return i({calendarOffsetLeft:0,dateQuery:"",isCalendarPopupCancelled:!1,isDateIso:!1,showCalendar:!1},d.default.todayToCalendarState())},resetCalendarState:function(){return i({dateQuery:"",isCalendarPopupCancelled:!1,isDateIso:!1,showCalendar:!1},d.default.todayToCalendarState())},componentWillMount:function(){this.addExtraEventHandler(this.events.BLUR,this.handleBlurForCalendar),this.addExtraEventHandler(this.events.CURSOR_POSITION_CHANGE,this.updateCalendarData),this.addExtraEventHandler(this.events.FOCUS,this.handleFocusForCalendar),this.addExtraEventHandler(this.events.KEY_DOWN,this.handleKeyDownForCalendar),this.addExtraEventHandler(this.events.KEY_UP,this.handleKeyUpForCalendar),this.addExtraEventHandler(this.events.STATE_RESET,this.resetCalendarState)},componentDidUpdate:function(e,t){if(!t.showCalendar&&this.state.showCalendar){var n=this.computeItemContentOffset();this.setState({calendarOffsetLeft:n})}},getCalendarDateFromState:function(){var e=this.state.calendarDay,t=this.state.calendarMonth,n=this.state.calendarYear;return{day:e,month:t,year:n,iso:(0,c.default)(n+"-"+t+"-"+e,"YYYY-M-D").format("YYYY-MM-DD")}},getModifiedCalendarDateFromState:function(e){var t=this.getCalendarDateFromState();return d.default.modifyCalendarDate(t,e)},getDateQueryUnderCaret:function(){var e=this.findMatchUnderCaret(l.default.EDITABLE_DUE_DATE_REGEXP,l.default.EDITABLE_DUE_DATE_ENDING_REGEXP),t=e.matchContent,n=d.default.normalizeDateQuery(t),r=n.day,i=n.month,a=n.year,s=n.isDateIso,o=n.isValid;return{dateQuery:t,isDateIso:s,isDateStarted:e.isMatchFound&&o,day:r,month:i,year:a,textBefore:e.textBefore,textAfter:e.textAfter}},handleBlurForCalendar:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.state.showCalendar?200:0;clearTimeout(this.closeCalendarPopupTimeout),this.closeCalendarPopupTimeout=setTimeout(function(){e.setState({showCalendar:!1}),(0,r.default)(t)&&t()},n)},handleFocusForCalendar:function(){clearTimeout(this.closeCalendarPopupTimeout)},handleKeyDownForCalendar:function(e){this.isCalendarPopupActive()&&(e.which===u.KEY_DOWN&&(e.preventDefault(),this.updateInputElement(this.getModifiedCalendarDateFromState(7))),e.which===u.KEY_LEFT&&(e.preventDefault(),this.updateInputElement(this.getModifiedCalendarDateFromState(-1))),e.which===u.KEY_RIGHT&&(e.preventDefault(),this.updateInputElement(this.getModifiedCalendarDateFromState(1))),e.which===u.KEY_UP&&(e.preventDefault(),this.updateInputElement(this.getModifiedCalendarDateFromState(-7))))},handleKeyUpForCalendar:function(e){return!!this.isCalendarPopupActive()&&(e.which===u.KEY_RETURN?(this.onDateSelection(this.getCalendarDateFromState()),!0):e.which===u.KEY_ESCAPE&&(this.setState({isCalendarPopupCancelled:!0}),!0))},isCalendarPopupActive:function(){return!this.state.isCalendarPopupCancelled&&this.state.showCalendar},onCalendarNavigation:function(e){this.updateInputElement(e)},onDateSelection:function(e){this.updateInputElementAndFinish(e)},onPopupClick:function(){clearTimeout(this.closeCalendarPopupTimeout),this.getInputElement().focus()},updateInputElement:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.day,a=e.month,s=e.year,o=e.iso,l=this.state.isDateIso||r?o:d.default.reverseIsoDate(o),u=this.getInputElement(),c=this.getValueStateKey(),f=this.getDateQueryUnderCaret(),h=f.textBefore,m=f.textAfter,g=" "===m.substring(0,1),v=r&&!g;r&&(h=h.substring(0,h.length-2));var y=[h,l,v?" ":"",m],E=y.slice(0,2).join("").length+(r?1:0),b=y.join("");u.value=b,u.selectionStart=u.selectionEnd=E,this.setState((p(t={},c,b),p(t,"calendarDay",i),p(t,"calendarMonth",a),p(t,"calendarYear",s),p(t,"dateQuery",r?"":l),p(t,"showCalendar",!r),t),function(){setTimeout(function(){u.selectionStart=u.selectionEnd=E,n.adjustTextareaHeight()},0)})},updateInputElementAndFinish:function(e){this.updateInputElement(e,!0)},updateCalendarData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getDateQueryUnderCaret(),n=this.state.isCalendarPopupCancelled,r=t.isDateStarted;e&&(n=!1);var i={calendarDay:t.day,calendarMonth:t.month,calendarYear:t.year,dateQuery:t.dateQuery,isCalendarPopupCancelled:n,isDateIso:t.isDateIso,showCalendar:r};this.setState(i)},renderCalendar:function(){if(!this.isCalendarPopupActive())return null;var e=a.default.createElement("div",null,a.default.createElement(s.default,{day:this.state.calendarDay,month:this.state.calendarMonth,year:this.state.calendarYear,onChange:this.onCalendarNavigation,onSelect:this.onDateSelection})),t={left:this.state.calendarOffsetLeft+"px"};return a.default.createElement("div",{className:"calendar-popup-wrapper",style:t},a.default.createElement(o.default,{content:e,isOpen:!0,onContentClick:this.onPopupClick,position:"bottom left"}))}},e.exports=t.default},455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(656)),i=c(n(512)),a=c(n(657)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=c(n(1)),u=c(n(18));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){return{day:parseInt(e.format("D"),10),month:parseInt(e.format("M"),10),year:parseInt(e.format("Y"),10),iso:e.format("YYYY-MM-DD")}},f=function(e,t,n){return!("string"==typeof e&&e.length>4)&&(!("string"==typeof t&&t.length>2)&&!("string"==typeof n&&n.length>2))};t.default={modifyCalendarDate:function(e,t){var n=(0,l.default)(e.iso).add(t,"days");return d(n)},normalizeDateQuery:function(e){var t=d((0,l.default)()),n={day:t.day,month:t.month,year:t.year,isDateIso:!1,isValid:!1},c=e.match(u.default.DUE_DATE_SEPARATORS_REGEXP)||[];if(new Set(c).size>1)return n;if(0===e.length)return s({},n,{isDateIso:!0,isValid:!0});var p=e.split(u.default.DUE_DATE_SEPARATORS_REGEXP),h=o(p,3),m=h[0],g=h[1],v=h[2];if(p.some(function(e){return null!==e.match(/^0+$/)}))return n;var y=p.map(function(e){return parseInt(e,10)}),E=y.filter(a.default).length;if(1===E&&!(0,a.default)((0,i.default)(y))||E>1)return n;if(y.length>3)return n;var b=o(y,3),k=b[0],C=b[1],_=b[2],I=!1;if(m.length>2){if(!f(m,g,v))return n;var T=_;_=k,k=T,I=!0}else if(!f(v,g,m))return n;if((0,r.default)(k)&&0!==k||(k=t.day),(0,r.default)(C)&&0!==C||(C=t.month),(0,r.default)(_)&&0!==_||(_=t.year),_<1901)return n;if(_>9999)return n;var O=_+"-"+C+"-"+k;return(0,l.default)(O,"YYYY-M-D").isValid()?{day:k,month:C,year:_,isDateIso:I,isValid:!0}:n},reverseIsoDate:function(e){var t=e.split(u.default.DUE_DATE_SEPARATORS_REGEXP),n=o(t,3),r=n[0],i=n[1];return n[2]+"-"+i+"-"+r},todayToCalendarState:function(){var e=d((0,l.default)());return{calendarDay:e.day,calendarMonth:e.month,calendarYear:e.year}}},e.exports=t.default},456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(267)),i=a(n(419));function a(e){return e&&e.__esModule?e:{default:e}}t.default={events:{AFTER_INPUT:"after_input",BLUR:"blur",CURSOR_POSITION_CHANGE:"cursor_position_change",FOCUS:"focus",KEY_DOWN:"key_down",KEY_UP:"key_up",PRE_EDIT:"pre_edit",PRE_SAVE:"pre_save",STATE_RESET:"state_reset"},getInitialState:function(){var e=this;return this.extraEventHandlers={},Object.values(this.events).forEach(function(t){e.extraEventHandlers[t]=[]}),{}},componentWillMount:function(){this.addExtraEventHandler(this.events.AFTER_INPUT,this.onAfterInput),this.addExtraEventHandler(this.events.FOCUS,this.onItemFocus),this.addExtraEventHandler(this.events.BLUR,this.onItemBlur)},componentWillUnmount:function(){this.onItemBlur()},adjustTextareaHeight:function(){var e=this.getInputMinHeight();r.default.adjustHeight(this.getInputElement(),e)},addExtraEventHandler:function(e,t){this.extraEventHandlers[e].push(t)},executeExtraEventHandlers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.extraEventHandlers[e].map(function(e){return e.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))})},computeItemContentOffset:function(){var e=this.getInputElement().getBoundingClientRect(),t=this.getRootElement().getBoundingClientRect();return e.left-t.left},getCaretPosition:function(){var e=this.getInputElement(),t=e.selectionStart,n=e.selectionEnd;return"backward"===e.selectionDirection?t:n},getInputMinHeight:function(){return this.inputOriginalSize},findMatchNearCaret:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getCaretPosition(),r=this.getInputElement().value,i=void 0,a=(i=t?r.substring(0,n):r.substring(n)).match(e),s=null!==a,o=a&&a[1]?a[1]:"",l=void 0,u=void 0;return t?l=i.substring(0,i.length-o.length):u=i.substring(o.length),{isMatchFound:s,matchContent:o,textBefore:l,textAfter:u}},findMatchBeforeCaret:function(e){return this.findMatchNearCaret(e,!0)},findMatchAfterCaret:function(e){return this.findMatchNearCaret(e,!1)},findMatchUnderCaret:function(e,t){var n=this.findMatchBeforeCaret(e),r=this.findMatchAfterCaret(t),i=""+n.matchContent+r.matchContent;return{isMatchFound:n.isMatchFound,matchContent:i,textBefore:n.textBefore,textAfter:r.textAfter}},onAfterInput:function(){i.default.adjustFrameHeight()},onItemFocus:function(){var e=this;this.cursorPositionInterval=setInterval(function(){e.executeExtraEventHandlers(e.events.CURSOR_POSITION_CHANGE)},250)},onItemBlur:function(){clearInterval(this.cursorPositionInterval)}},e.exports=t.default},457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(265)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=f(n(458)),s=f(n(462)),o=f(n(0)),l=f(n(18)),u=n(62),c=f(n(72)),d=f(n(60));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default={getInitialState:function(){return{isMentionPickerCancelled:!1,mentionPickerOffsetLeft:0,mentionQuery:"",showMentionPicker:!1}},resetMentionPickerState:function(){return{isMentionPickerCancelled:!1,mentionQuery:"",showMentionPicker:!1}},componentWillMount:function(){this.mentionProvider=new s.default,this.addExtraEventHandler(this.events.BLUR,this.handleBlurForMentionPicker),this.addExtraEventHandler(this.events.CURSOR_POSITION_CHANGE,this.updateMentionData),this.addExtraEventHandler(this.events.KEY_DOWN,this.handleKeyDownForMentionPicker),this.addExtraEventHandler(this.events.KEY_UP,this.handleKeyUpForMentionPicker),this.addExtraEventHandler(this.events.PRE_EDIT,this.handleMentionsBeforeEdit),this.addExtraEventHandler(this.events.PRE_SAVE,this.handleMentionsBeforeSave),this.addExtraEventHandler(this.events.STATE_RESET,this.resetMentionPickerState)},componentDidUpdate:function(e,t){if(!t.showMentionPicker&&this.state.showMentionPicker){var n=this.computeItemContentOffset();this.setState({mentionPickerOffsetLeft:n})}var r=this.state.issuesData.currentIssueKey;!this.mentionProvider.getCurrentIssueKey()&&r&&this.mentionProvider.setCurrentIssueKey(r);var i=this.getMentionTextToAccountId();this.mentionProvider.setMentionTextToAccountId(i)},getMentionTextToAccountId:function(){return this.state.usersData.mentionTextToAccountId},getMentionText:function(e){var t=this.getMentionTextToAccountId(),n=i({},t),a=c.default.updateMentionText(e,n);return this.mentionProvider.setMentionTextToAccountId(n),(0,r.default)(t,n)||d.default.updateMentionTextToAccountId(n),a},handleMentionsBeforeEdit:function(e,t){return c.default.replaceAccountIdWithMentionText(e,t,i({},this.getMentionTextToAccountId()))},handleMentionsBeforeSave:function(e){return c.default.replaceMentionTextWithAccountId(e,i({},this.getMentionTextToAccountId()))},isMentionPickerActive:function(){return!this.state.isMentionPickerCancelled&&this.state.showMentionPicker&&this.mentionPicker&&this.mentionPicker.mentionsCount()>0},handleKeyUpForMentionPicker:function(e){return!!this.isMentionPickerActive()&&(e.which===u.KEY_RETURN?(this.mentionPicker.chooseCurrentSelection(),!0):e.which===u.KEY_ESCAPE&&(this.setState({isMentionPickerCancelled:!0}),!0))},handleKeyDownForMentionPicker:function(e){this.isMentionPickerActive()&&(e.which===u.KEY_DOWN&&(e.preventDefault(),this.mentionPicker.selectNext()),e.which===u.KEY_UP&&(e.preventDefault(),this.mentionPicker.selectPrevious()))},handleBlurForMentionPicker:function(){this.setState({showMentionPicker:!1})},getMentionQueryUnderCaret:function(){var e=this.findMatchUnderCaret(l.default.EDITABLE_MENTION_REGEXP,l.default.EDITABLE_MENTION_ENDING_REGEXP);return{isMentionStarted:e.isMatchFound,mentionQuery:e.matchContent,textBefore:e.textBefore,textAfter:e.textAfter}},updateMentionData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getMentionQueryUnderCaret(),n=t.isMentionStarted,r=t.mentionQuery,i=this.state.isMentionPickerCancelled,a=n;e&&(i=!1),!this.state.showMentionPicker&&a&&this.mentionProvider.fetchSpecialQueriesUsers(),this.setState({isMentionPickerCancelled:i,mentionQuery:r,showMentionPicker:a})},onUserSelection:function(e){var t,n=this,r=this.getInputElement(),i=this.getValueStateKey(),a=this.getMentionQueryUnderCaret(),s=a.textBefore,o=a.textAfter,l=!(" "===o.substring(0,1)),u=this.getMentionText(e),c=[s=s.substring(0,s.lastIndexOf("@")),"@",u,l?" ":"",o],d=c.slice(0,3).join("").length+1,f=c.join("");r.value=f,r.selectionStart=r.selectionEnd=d,this.setState((p(t={},i,f),p(t,"mentionQuery",""),p(t,"showMentionPicker",!1),t),function(){setTimeout(function(){r.selectionStart=r.selectionEnd=d,n.adjustTextareaHeight()},0)})},renderMentionPicker:function(){var e=this;return o.default.createElement(a.default,{offsetLeft:this.state.mentionPickerOffsetLeft,offsetTop:0,onSelection:this.onUserSelection,query:this.state.mentionQuery,refHandler:function(t){e.mentionPicker=t},resourceProvider:this.mentionProvider,show:this.state.showMentionPicker&&!this.state.isMentionPickerCancelled})}},e.exports=t.default},458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(229)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=u(n(420)),o=u(n(0)),l=u(n(2));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),a(t,[{key:"render",value:function(){var e=this,t=(0,r.default)(this.props,["ref","refHandler","show"]),n={left:this.props.offsetLeft+"px",top:this.props.offsetTop+"px"};return o.default.createElement("div",{className:"user-picker-wrapper",style:n},this.props.show&&o.default.createElement(s.default,i({ref:function(t){return e.props.refHandler(t)}},t)))}}]),t}();c.propTypes={offsetLeft:l.default.number.isRequired,offsetTop:l.default.number.isRequired,onSelection:l.default.func.isRequired,query:l.default.string,refHandler:l.default.func.isRequired,resourceProvider:l.default.object.isRequired,show:l.default.bool.isRequired},t.default=c,e.exports=t.default},462:function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(420),o=c(n(17)),l=c(n(60)),u=c(n(53));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{url:"/rest/api/2/user/picker"}));return e._currentIssueKey=null,e._lastAssignee=null,e._lastReporter=null,e._mentionTextToAccountId={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.MentionResource),a(t,[{key:"fetchSpecialQueriesUsers",value:function(){var e=this,t=new o.default.Promise(function(t){var n="/rest/api/2/issue/"+encodeURIComponent(e._currentIssueKey)+"?fields=assignee,reporter";AP.request({url:n,type:"GET",cache:!1,success:function(n){var r=JSON.parse(n).fields;r.assignee&&(e._lastAssignee=r.assignee),r.reporter&&(e._lastReporter=r.reporter),t(),e._specialQueriesUsersPromise=null},error:function(n,i,a){r.error(a),Raven.captureException(a,{tags:{mention_provider_initial_state_request_failed:!0}}),t(),e._specialQueriesUsersPromise=null}}),setTimeout(function(){t(),e._specialQueriesUsersPromise=null},5e3)});return this._specialQueriesUsersPromise=t,t}},{key:"getCurrentIssueKey",value:function(){return this._currentIssueKey}},{key:"_getSpecialQueriesUsersPromise",value:function(){return this._specialQueriesUsersPromise?this._specialQueriesUsersPromise:new o.default.Promise(function(e){e()})}},{key:"_addAssigneeAndReporter",value:function(e,t){var n=e.toLowerCase(),r=[];n?"assignee".startsWith(n)?r=[this._lastAssignee]:"reporter".startsWith(n)&&(r=[this._lastReporter]):r=[this._lastAssignee,this._lastReporter];var i=function(e,t){return Boolean(t.find(function(t){return t.accountId===e.accountId}))};r=r.filter(function(e){return Boolean(e)}).reduce(function(e,t){return i(t,e)||e.push(t),e},[]);var a=t.filter(function(e){return!i(e,r)});return r.concat(a)}},{key:"_mapUser",value:function(e){var t=e.accountId,n=e.displayName,r=this._lastAssignee&&this._lastAssignee.accountId===t,i=this._lastReporter&&this._lastReporter.accountId===t,a=e.avatarUrl;!a&&e.avatarUrls&&(a=e.avatarUrls["48x48"]);var s=[];return r&&s.push("assignee"),i&&s.push("reporter"),l.default.updateUser(e),{accountId:t,avatarUrl:a,displayName:n,hasAliases:r||i,id:t,lozenge:s.join(" / "),name:n}}},{key:"recordMentionSelection",value:function(){return new o.default.Promise(function(e){return e()})}},{key:"remoteInitialState",value:function(){var e=this;return new o.default.Promise(function(t){e.fetchSpecialQueriesUsers().then(function(){var n={query:"",mentions:e._addAssigneeAndReporter("",[]).map(function(t){return e._mapUser(t)})};t(e.getOrderedServiceResponse(n))})})}},{key:"remoteSearch",value:function(e){var t=this,n=this,i="query="+encodeURIComponent(e)+"&maxResults=10&showAvatar=true",a=this.config.url+"?"+i;return new o.default.Promise(function(i){t._getSpecialQueriesUsersPromise().then(function(){var s=u.default.usersByAccountId,o=t._mentionTextToAccountId[e];if(o){var l=s[o];if(l){var c=[n._mapUser(l)],d={query:e,mentions:c};return void i(n.getOrderedServiceResponse(d))}}AP.request({url:a,type:"GET",cache:!1,success:function(t){var r=JSON.parse(t).users,a=n._addAssigneeAndReporter(e,r).map(function(e){return n._mapUser(e)}),s={query:e,mentions:a};i(n.getOrderedServiceResponse(s))},error:function(t,n,a){r.error(a),Raven.captureException(a,{tags:{mention_provider_search_request_failed:!0}}),i({query:e,mentions:[]})}})})})}},{key:"setCurrentIssueKey",value:function(e){this._currentIssueKey=e}},{key:"setMentionTextToAccountId",value:function(e){this._mentionTextToAccountId=e}},{key:"transformServiceResponse",value:function(e){var t=e.mentions.map(function(e,t){return i({},e,{weight:t})});return i({},e,{mentions:t})}},{key:"getOrderedServiceResponse",value:function(e){return this.transformServiceResponse(e)}}]),t}();t.default=d,e.exports=t.default}).call(this,n(10))},463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(0)),a=(u(n(2)),u(n(34))),s=u(n(669)),o=u(n(533)),l=u(n(534));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.buttonsSpacing,n=e.onCancel,r=e.onSave,u=e.onSaveAsSeparator;return i.default.createElement("div",{className:"todo-save-options buttons-spacing-"+t,tabIndex:"1"},i.default.createElement("div",{className:"todo-save-options-button-container",title:"Save ToDo item"},i.default.createElement(a.default,{appearance:"default",className:"todo-save-options-button",iconBefore:i.default.createElement(o.default,{size:"small"}),onClick:r,spacing:t})),i.default.createElement("div",{className:"todo-save-options-button-container",title:"Add as separator (precedes item text with ---)"},i.default.createElement(a.default,{appearance:"default",className:"todo-save-options-button",iconBefore:i.default.createElement(s.default,{size:"small"}),onClick:u,spacing:t})),i.default.createElement("div",{className:"todo-save-options-button-container",title:"Cancel (press Esc)"},i.default.createElement(a.default,{appearance:"default",className:"todo-save-options-button",iconBefore:i.default.createElement(l.default,{size:"small"}),onClick:n,spacing:t})))}}]),t}();t.default=c,e.exports=t.default},468:function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(19)),a=o(n(17)),s=o(n(18));function o(e){return e&&e.__esModule?e:{default:e}}var l={UNKNOWN:"UNKNOWN",LEFT:"left",RIGHT:"right"},u="/rest/api/2/user/properties/com.gebsun.plugins.jira.issuechecklist.panel";function c(e){return new a.default.Promise(function(t,n){s.default.getUser().then(function(i){var a=i.accountId,s=encodeURIComponent(a);AP.request({url:u+"?accountId="+s,data:JSON.stringify({position:e}),type:"PUT",dataType:"json",contentType:"application/json",headers:{"X-Atlassian-Token":"no-check"},success:function(){t(e)},error:function(e,t){r.log("setPanelPosition: %s",t),n(t)}})})})}t.default={PANEL_POSITION:l,getPanelPosition:function(){return new a.default.Promise(function(e){s.default.getUser().then(function(t){var n=t.accountId,a=encodeURIComponent(n);AP.request({url:u+"?accountId="+a,type:"GET",dataType:"json",contentType:"application/json",headers:{"X-Atlassian-Token":"no-check"},success:function(t){try{if(r.log("getPanelPosition: data="+JSON.stringify(t)),t){var n=JSON.parse(t),a=(0,i.default)(n,"value.position");e(a)}else e(l.UNKNOWN)}catch(t){r.log("getPanelPosition error: "+t),e(l.UNKNOWN)}},error:function(){e(l.UNKNOWN)}})})})},setPanelPositionRight:function(){r.log("PanelInformation: setPanelPositionRight"),c(l.RIGHT).then(function(){AP.jira.refreshIssuePage()}).catch(function(e){r.log("_setChecklistPanelPositionRight: "+e)})},setPanelPositionLeft:function(){r.log("PanelInformation: setPanelPositionLeft"),c(l.LEFT).then(function(){AP.jira.refreshIssuePage()}).catch(function(e){r.log("_setChecklistPanelPositionLeft: "+e)})},clearPanelPosition:function(){return new a.default.Promise(function(e,t){s.default.getUser().then(function(n){var i=n.accountId,a=encodeURIComponent(i);AP.request({url:u+"?accountId="+a,type:"DELETE",headers:{"X-Atlassian-Token":"no-check"},success:function(){e()},error:function(e,n){r.log("clearPanelPosition: %s",n),t(n)}})})})}},e.exports=t.default}).call(this,n(10))},469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n(0)),a=(u(n(2)),u(n(684))),s=n(541),o=n(16),l=u(n(686));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)(function(e){var t=e.completed,n=e.total;return{progress:0===n?0:Math.floor(t/n*100),barColor:t===n?o.colors.green():(0,s.backgroundColor)({appearance:"primary"}),trailColor:(0,s.backgroundColor)({appearance:"default"})}})(function(e){var t=e.progress,n=e.barColor,a=e.trailColor,s={color:n,animation:100,height:"4px"};return i.default.createElement(l.default,r({completed:t},s,{style:{backgroundColor:a}}))});t.default=c,e.exports=t.default},472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(687)),i=s(n(0)),a=(s(n(2)),s(n(542)));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.completed,n=e.total,s=e.percent,o=void 0,l=void 0;return o=0===n?"default":t===n?"added":"primary",l=s?0===n?"0 / 0":(0,r.default)(100*t/n)+"%":t+" / "+n,i.default.createElement(a.default,{appearance:o,value:l})},e.exports=t.default},473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=u(a),o=u(n(35)),l=u(n(688));function u(e){return e&&e.__esModule?e:{default:e}}n(689);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"render",value:function(){var e=r({padding:"8px 8px 8px 8px",position:"absolute",zIndex:"10"},this.props.style),t=this.props.id+"-portal",n={};this.props.arrowLeft&&(n.left=this.props.arrowLeft),this.props.arrowTop&&(n.top=this.props.arrowTop);var i=void 0,a=void 0;if(this.props.orientation){var u="arrow-box-common-"+this.props.orientation,c="arrow-box-before-"+this.props.orientation,d="arrow-box-after-"+this.props.orientation;i=s.default.createElement("div",{className:(0,o.default)("arrow-box-common","arrow-box-before",u,c),style:n}),a=s.default.createElement("div",{className:(0,o.default)("arrow-box-common","arrow-box-after",u,d),style:n})}return s.default.createElement(l.default,{tabIndex:"0",style:e,className:"arrow-box "+this.props.className,portalId:t,id:this.props.id,onBlur:this.props.onBlur,onKeyUp:this.props.onKeyUp,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,ref:this.props.ref},i,s.default.createElement("div",{style:{overflowX:"auto"}},this.props.children),a)}}]),t}();t.default=c,e.exports=t.default},475:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(19)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e){return g=e,U};var s=h(n(998)),o=h(n(705)),l=h(n(706)),u=h(n(707)),c=h(n(1)),d=h(n(0)),f=h(n(18)),p=h(n(35));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=void 0,v="YYYY-MM-DD",y=["fields.summary","fields.issuetype.iconUrl","fields.status.name"],E="date",b="decorated_text",k="inline_code",C="issue",_="link",I="mention",T="new_line",O="text",P=new s.default({decodePercentEncoding:!0,email:!0,hashtag:!1,mention:!1,newWindow:!0,phone:!1,stripPrefix:!0,stripTrailingSlash:!0,truncate:!1,urls:!0});function S(e,t,n){var r=[];return e.forEach(function(e){if("string"==typeof e){for(var i=new RegExp(t,"g"),a=0,s=void 0;null!==(s=i.exec(e));){var o=n(s),l=o.token,u=o.tokenOffset,c=o.tokenLength,d=s.index+u,f=i.lastIndex=d+c;if(d>a){var p=e.substring(a,d);r.push(p)}r.push(l),a=f}if(a<e.length){var h=e.substring(a);r.push(h)}}else r.push(e)}),r}function w(e){var t=[],n=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"`",n=0,r=e;r.startsWith(t);)n+=t.length,r=r.substring(t.length);return n};return e.forEach(function(e){return function e(r){if("string"==typeof r){var i=r.indexOf("`");if(-1!==i){if(i>0){var a=r.substring(0,i),s=a.split("").reverse().join("");if(n(s,"\\")%2!=0){var o=r.indexOf("`",i+1),l=r.indexOf("\\",i+1),u=o;return-1!==l&&l<o&&(u=l),void(-1===u?t.push(r):(t.push(r.substring(0,u)),e(r.substring(u))))}t.push(a)}var c=n(r.substring(i)),d=r.substring(i+c),f=function(e,t){for(var n=0,r=0,i=0;i<e.length;i++){var a=e.charAt(i),s=e.charAt(i+1);if("`"===a){if(0===n&&(r=i),(n+=1)===t&&"`"!==s)return r}else n=0}return-1}(d,c);if(-1!==f){f>0&&t.push({text:d.substring(0,f),type:k});var p=d.substring(f+c);p.length>0&&e(p)}else t.push({text:d,type:k})}else t.push(r)}else t.push(r)}(e)}),t}function A(e){var t=e[2],n=(0,c.default)(t,v);return{token:n.isValid()?{isoDateString:n.format(v),text:t,type:E}:{text:t,type:O},tokenLength:t.length,tokenOffset:e[1].length}}function x(e){return{token:{attributes:{href:e[1]},text:e[2],type:_},tokenLength:e[0].length,tokenOffset:0}}function j(e){return{token:{attributes:{href:e[2]},text:e[1],type:_},tokenLength:e[0].length,tokenOffset:0}}function N(e){var t=e[2];return{token:{mentionContent:t,type:I},tokenLength:t.length+1,tokenOffset:e[1].length}}function M(){return{token:{type:T},tokenLength:1,tokenOffset:0}}function D(e){return"string"==typeof e?{text:e,type:O}:e}function R(e){return function(t){var n=a(t,2),r=n[0],i=n[1],s=t[2],o=b;return i.length>0&&(o=O,s=(s=r.replace(/\\(?!\\)/g,"")).replace("\\\\","\\")),{token:{decorationType:e.decorationType,text:s,type:o},tokenLength:r.length,tokenOffset:0}}}var U={linkify:function(e,t){var n=function(e){return function(t){var n=e[t]||{};return y.every(function(e){return Boolean((0,r.default)(n,e))})?n:null}}(t),a=w([e]);return(a=(a=S(a=S(a=S(a=S(a=S(a=S(a=S(a=S(a=S(a=S(a=S(a=(a=S(a,"!?\\[([^\\]]*)]\\(([^)]*)\\)",j)).map(function(e){return"string"==typeof e?P.link(e):e}),f.default.LINK_REGEXP.source,x),f.default.ISSUE_KEY_REGEXP.source,function(e){return function(e,t){var n=e[2],r=t(n);if(r)return{token:{href:g+"/browse/"+n,issue:r,issueKey:n,type:C},tokenLength:n.length,tokenOffset:e[1].length};var i=e[0];return{token:i,tokenLength:i.length,tokenOffset:0}}(e,n)}),f.default.DUE_DATE_DASH_REGEXP.source,A),f.default.DUE_DATE_SLASH_REGEXP.source,A),f.default.MENTION_REGEXP.source,N),"\\n",M),"(\\\\{0,1})_([^_]+)_(?!_)",R({decorationType:"italic"})),"(\\\\{0,1})\\*([^\\*]+)\\*(?!\\*)",R({decorationType:"italic"})),"(\\\\{0,1})__([^_]+)__(?!_)",R({decorationType:"bold"})),"(\\\\{0,1})\\*\\*([^\\*]+)\\*\\*(?!\\*)",R({decorationType:"bold"})),"(\\\\{0,1})~~([^~]+)~~(?!~)",R({decorationType:"line-through"}))).map(D)).map(function(e,t){if(e.type===E)return d.default.createElement(l.default,{isoDateString:e.isoDateString,originalDateString:e.text,key:t});if(e.type===b){var n=(0,p.default)(m({"todo-item-token-text":!0},"todo-item-token-text-"+e.decorationType,!0));return d.default.createElement("span",{key:t,className:n},e.text)}if(e.type===k){var r=(0,p.default)(m({"todo-item-token-text":!0},"todo-item-token-text-inline-code",!0));return d.default.createElement("span",{key:t,className:r},e.text)}return e.type===C?d.default.createElement(o.default,{href:e.href,key:t,issue:e.issue,issueKey:e.issueKey}):e.type===_?d.default.createElement("a",i({key:t},e.attributes,{rel:"noopener",target:"_blank",className:"todo-item-token-link"}),e.text):e.type===I?d.default.createElement(u.default,{hostBaseUrl:g,isUserMention:!0,key:t,mentionContent:e.mentionContent}):e.type===T?d.default.createElement("br",{key:t}):e.type===O?d.default.createElement("span",{key:t,className:"todo-item-token-text"},e.text):void 0})}};e.exports=t.default},53:function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(237)),a=g(n(198)),s=g(n(236)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=g(n(14)),u=g(n(17)),c=g(n(60)),d=g(n(18)),f=g(n(12)),p=g(n(211)),h=g(n(185)),m=g(n(72));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e,t){return new u.default.Promise(function(n,r){AP.request({url:"/rest/api/2/user/bulk?"+e+"&startAt="+t+"&maxResults=200",type:"GET",cache:!1,success:function(e){n(JSON.parse(e))},error:function(e,t,n){r(n)}})})};t.default=l.default.createStore({listenables:[c.default],accountIdTokens:(0,p.default)(),currentUser:null,isProjectAdmin:!1,mentionTextToAccountId:{},usersByAccountId:{},mapToComponentsState:function(){return o({byAccountId:this.usersByAccountId},(0,i.default)(this,"currentUser","isProjectAdmin","mentionTextToAccountId"))},doTrigger:function(){var e=this.mapToComponentsState();this.trigger(e)},getInitialState:function(){return this.mapToComponentsState()},onFetchUsersByAccountIds:function(e){var t=this,n=this.accountIdTokens._getTokensToFetch(e);(function(e,t,n,r){var i=e.filter(function(e){return Boolean(e)});if(0===i.length)return new u.default.Promise(function(e){e([])});r._addToTokensBeingFetched(i);var s=i.map(function(e){return t+"="+encodeURIComponent(e)}).join("&"),o=new u.default.Promise(function(e){var t=0,n=[];(function e(){return v(s,t).then(function(r){var i=r.values.filter(function(e){return Boolean(e)});if(n=n.concat(i),!r.isLast)return t+=r.maxResults,e()})})().catch(function(e){Raven.captureException(e)}).finally(function(){e(n)})});return new u.default.Promise(function(e){o.then(function(t){var s=[];t.forEach(function(e){s.push(e[n])}),r._removeFromTokensBeingFetched(s),r._addToNonexistentTokens((0,a.default)(i,s)),e(t)})})})((0,s.default)(n),"accountId","accountId",this.accountIdTokens).then(function(e){e.forEach(function(e){t.updateUser(e)}),e.length>0&&t.doTrigger()})},onFetchUsersForMentions:function(e){var t=function(e){var t=[];return e.forEach(function(e){for(var n=new RegExp(d.default.MENTION_REGEXP.source,"g"),r=void 0;null!==(r=n.exec(e));){var i=r[2];t.push(i)}}),(0,s.default)(t)}(e);this.onFetchUsersByAccountIds(t)},onInitialize:function(){var e=this,t=h.default.get("currentUser"),n=new u.default.Promise(function(e,n){t?e(t):d.default.getUser().then(e).catch(n)});this.isProjectAdmin=f.default.isProjectAdmin||f.default.isAdmin,n.then(function(t){e.currentUser=t}).catch(function(e){r.error("getUser error: %s",e)}).finally(function(){e.doTrigger()})},onUpdateMentionTextToAccountId:function(e){this.mentionTextToAccountId=e,this.doTrigger()},onUpdateUser:function(e){this.updateUser(e),this.doTrigger()},updateUser:function(e){var t=e.accountId,n=this.usersByAccountId[t]||{},r=o({},n,e);this.usersByAccountId[t]=r,this.accountIdTokens._addToFetchedTokens([t]),m.default.updateMentionText(r,this.mentionTextToAccountId)}}),e.exports=t.default}).call(this,n(10))},535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DROPDOWN_MENU_GLOBAL_MODE=t.DROPDOWN_MENU_DEFAULT_MODE=t.DROPDOWN_MENU_CHECKLIST_MODE=void 0;var r=E(n(675)),i=E(n(177));n(676);var a=E(n(0)),s=E(n(2)),o=E(n(14)),l=E(n(35)),u=E(n(20)),c=n(681),d=E(n(683)),f=n(43),p=E(n(12)),h=E(n(468)),m=E(n(73)),g=E(n(210)),v=E(n(53)),y=E(n(21));function E(e){return e&&e.__esModule?e:{default:e}}var b=t.DROPDOWN_MENU_CHECKLIST_MODE="checklist",k=t.DROPDOWN_MENU_DEFAULT_MODE="default",C=t.DROPDOWN_MENU_GLOBAL_MODE="global",_=a.default.createClass({displayName:"DropdownMenu",propTypes:{deleteChecklistOptionProps:s.default.object,editorOptionProps:s.default.object,list:s.default.arrayOf(s.default.object).isRequired,loadTemplateDisabled:s.default.bool.isRequired,mode:s.default.string.isRequired,onLoadTemplate:s.default.func.isRequired,onRemoveTemplate:s.default.func.isRequired,onToggleAllItems:s.default.func.isRequired,onPasteChecklist:s.default.func.isRequired,panelPosition:s.default.string,readOnly:s.default.bool.isRequired,readOnlyMessage:s.default.string.isRequired,statuses:s.default.arrayOf(s.default.object).isRequired,statusesEnabled:s.default.bool.isRequired,statusesHaveCheckbox:s.default.bool.isRequired},mixins:[o.default.connect(g.default,"issuesData"),o.default.connect(v.default,"usersData")],getInitialState:function(){return{id:""+Math.random()}},_moveChecklist:function(){this._isPanelOnLeft()?h.default.setPanelPositionRight():h.default.setPanelPositionLeft()},_copyChecklist:function(){if(this.props.list.length>0){var e=m.default.getItemsAsText(this.props.list);this._copyToClipboard(e),AP.flag.create({type:"success",close:"auto",body:"Checklist has been copied to the clipboard"})}},_copyChecklistAsYaml:function(){if(this.props.list.length>0){var e=(0,c.getYamlText)(this.props.list,this.props.statusesEnabled,this.props.statuses);this._copyToClipboard(e),AP.flag.create({type:"success",close:"auto",body:"Checklist has been copied to the clipboard as YAML text"})}},_pasteChecklist:function(){this.props.onPasteChecklist(),this._isPanelOnLeft()&&AP.flag.create({type:"warning",close:"manual",title:"Paste the checklist to the blue input field",body:"Jira apps cannot access the clipboard data. Please paste the checklist directly to the blue New Item field."})},_copyToClipboard:function(e){var t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-9999px",t.setAttribute("readonly",""),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},_isPanelOnLeft:function(){return this.props.panelPosition!==h.default.PANEL_POSITION.RIGHT},_completeUncompleteAll:function(e){if(!(e.length<=0)){var t=m.default.getRealItems(e),n=(0,i.default)(t,function(e){return e.fixed}).length<t.length;this.props.onToggleAllItems(n)}},onTriggerClick:function(e){e.preventDefault(),this.triggerButton.getAttribute("aria-disabled")},getTriggerId:function(){return"checklist-menu-trigger-"+this.state.id},getDropdownId:function(){return"checklist-menu-popup-"+this.state.id},render:function(){var e=this,t=this.props,n=t.loadTemplateDisabled,r=t.mode,i=r===k,s=i||r===b,o=i||r===C,u=0===this.props.list.length,c=(0,l.default)({disabled:u}),p=!1,h="Save checklist as a template for later usage";if(u&&(h="No ToDo items defined. Nothing to save"),y.default.isFreeVersion()){var g=y.default.getItemsLimitForFreeVersion();m.default.getRealItems(this.props.list).length>g&&(p=!0,h="The checklist cannot be saved as a template because it has more items than the allowed limit of "+g+" items per issue.")}var v=u||p,E=(0,l.default)({disabled:v}),_=n?"Cannot load a template because you have reached the limit for the number of items per issue":"Load predefined checklist to the issue",I=(0,l.default)({disabled:n}),T=void 0;if(this.props.panelPosition){var O=void 0,P=void 0,S=void 0;this._isPanelOnLeft()?(O="Move checklist to the right",P="Move checklist beneath Dates and Time Tracking panels (current user only)",S="aui-icon aui-icon-small aui-iconfont-arrows-right"):(O="Move checklist to the left",P="Move checklist beneath Description and Attachments (current user only)",S="aui-icon aui-icon-small aui-iconfont-arrows-left"),T=a.default.createElement("a",{onClick:this._moveChecklist,title:P},a.default.createElement("span",{className:S}),"Â ",O)}var w=u?"No checklist items defined. Nothing to complete":'Toggle "completed" status for all ToDo items',A=a.default.createElement("li",null,a.default.createElement("a",{className:c,title:w,"aria-disabled":u.toString(),onClick:function(){e._completeUncompleteAll(e.props.list)}},"Toggle all items")),x=this.props.readOnly?this.props.readOnlyMessage:"";return a.default.createElement("div",{className:"bar-button-container"},a.default.createElement("button",{id:this.getTriggerId(),"aria-expanded":"false","aria-owns":this.getDropdownId(),"aria-haspopup":"true",title:x,className:"aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless dropdown-menu-trigger","aria-disabled":this.props.readOnly?"true":"false",onClick:this.onTriggerClick,ref:function(t){e.triggerButton=t}},a.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-more"})),a.default.createElement("div",{id:this.getDropdownId(),className:"aui-style-default aui-dropdown2 dropdown-menu-dropdown","aria-hidden":"true"},a.default.createElement("div",{className:"aui-dropdown2-section"},a.default.createElement("div",{className:"aui-dropdown2-heading"},a.default.createElement("strong",null,"Template")),s&&a.default.createElement("ul",{className:"aui-list-truncate"},a.default.createElement("li",null,a.default.createElement("a",{"aria-disabled":n.toString(),className:I,onClick:this.openLoadTemplateDialog,title:_},"Load template"))),s&&a.default.createElement("ul",{className:"aui-list-truncate"},a.default.createElement("li",null,a.default.createElement("a",{"aria-disabled":v.toString(),className:E,onClick:this.openSaveTemplateDialog,title:h},"Save as template"))),o&&a.default.createElement("ul",{className:"aui-list-truncate"},a.default.createElement("li",null,a.default.createElement("a",{onClick:this.openManageTemplateDialog,title:"View, delete or set template default"},"Manage templates")))),a.default.createElement("div",{className:"aui-dropdown2-section"},a.default.createElement("div",{className:"aui-dropdown2-heading"},a.default.createElement("strong",null,"Checklist")),a.default.createElement("ul",{className:"aui-list-truncate"},s&&a.default.createElement("div",null,a.default.createElement("li",null,a.default.createElement("a",{"aria-disabled":u.toString(),className:c,onClick:this._copyChecklist,title:u?"No checklist items defined. Nothing to copy":"Copy checklist to the clipboard"},"Copy checklist")),a.default.createElement("li",null,a.default.createElement("a",{"aria-disabled":u.toString(),className:c,onClick:this._copyChecklistAsYaml,title:u?"No checklist items defined. Nothing to copy":"Copy checklist as YAML to the clipboard"},"Copy checklist as YAML")),this.renderDeleteChecklistOption(),this.renderEditorOption(),a.default.createElement("li",null,a.default.createElement("a",{onClick:this._pasteChecklist,title:"Paste checklist from the clipboard"},"Paste checklist"))),A)),o&&a.default.createElement("div",{className:"aui-dropdown2-section"},a.default.createElement("div",{className:"aui-dropdown2-heading"},a.default.createElement("strong",null,"Search Issues For")),a.default.createElement("ul",{className:"aui-list-truncate"},a.default.createElement("li",null,a.default.createElement("a",{href:d.default.hasChecklistItems,target:"_top",title:"Search for issues having ToDo items"},"Any items")),a.default.createElement("li",null,a.default.createElement("a",{href:d.default.hasActiveChecklistItems,target:"_top",title:"Search for issues with uncompleted ToDo items"},"Uncompleted items")),a.default.createElement("li",null,a.default.createElement("a",{href:d.default.activeChecklistItems,target:"_top",title:"Search for issues with given number of uncompleted ToDo items"},"Number of uncompleted items")),a.default.createElement("li",null,a.default.createElement("a",{href:d.default.checklistItems,target:"_top",title:"Search for issues with given ToDo item text"},"Item text")))),o&&a.default.createElement("div",{className:"aui-dropdown2-section"},a.default.createElement("ul",null,a.default.createElement("li",null,T),a.default.createElement("li",null,a.default.createElement("a",{href:f.documentationUrl,target:"_blank",title:"Open documentation in a separate tab"},a.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-help"}),"Â  Documentation")),a.default.createElement("li",null,a.default.createElement("a",{href:f.supportUrl,target:"_blank",title:"Open feedback form in a separate tab"},a.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-feedback"}),"Â  Get help or share feedback"))))))},renderDeleteChecklistOption:function(){var e=this.props.deleteChecklistOptionProps;return(0,r.default)(e)?this.renderSingleOption(e,"Delete checklist"):null},renderEditorOption:function(){var e=this.props.editorOptionProps;return(0,r.default)(e)?this.renderSingleOption(e,"Edit in editor"):null},renderSingleOption:function(e,t){var n=e.isDisabled,r=e.onClick,i=e.title;return a.default.createElement("li",null,a.default.createElement("a",{"aria-disabled":n.toString(),className:n?"disabled":"",onClick:r,title:i},t))},openSaveTemplateDialog:function(e){var t=this;(0,u.default)(e.target).hasClass("disabled")||(AP.dialog.create({key:"add-template-dialog",width:"520px",height:"220px",header:"Save Template",chrome:!1,customData:{meta:p.default}}),AP.events.offAll("send-parameters"),AP.events.once("send-parameters",function(){AP.events.emit("receive-parameters",{items:t.props.list})}))},openLoadTemplateDialog:function(e){var t=this;if(!(0,u.default)(e.target).hasClass("disabled")){var n="selectTemplateDialogClosed";AP.events.offAll(n),AP.events.once(n,function(e){var n=e.selectedTemplateId;n&&0!==n.length&&t.props.onLoadTemplate(n,e.append)}),AP.dialog.create({key:"select-template-dialog",width:"675px",height:"610px",header:"Load Template",chrome:!1,customData:{multiSelect:!1,event:n,currentChecklistHasItems:this.props.list.length>0}})}},openManageTemplateDialog:function(){var e=this,t="removeTemplateDialogClosed";AP.events.offAll(t),AP.events.once(t,function(t){t&&t.length&&e.props.onRemoveTemplate(t)}),AP.dialog.create({key:"manage-template-dialog",width:"890px",height:"610px",header:"Manage Templates",chrome:!1,customData:{currentIssueKey:this.state.issuesData.currentIssueKey,currentUser:this.state.usersData.currentUser,isProjectAdmin:this.state.usersData.isProjectAdmin,projectId:p.default.projectId,statuses:this.props.statuses,statusesEnabled:this.props.statusesEnabled,statusesHaveCheckbox:this.props.statusesHaveCheckbox}})}});t.default=_},543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),i=f(n(2)),a=f(n(35)),s=n(16),o=f(n(473)),l=f(n(14)),u=f(n(544)),c=f(n(34)),d=n(546);function f(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createClass({displayName:"notification",propTypes:{content:i.default.element,customTrigger:i.default.shape({className:i.default.string,content:i.default.element}),dontShowAgainProperty:i.default.string,errorMessages:i.default.arrayOf(i.default.shape({title:i.default.string.isRequired,details:i.default.string.isRequired})),iconTitle:i.default.string,id:i.default.string,showCloseButton:i.default.bool,type:i.default.string.isRequired,visible:i.default.bool},mixins:[l.default.connect(u.default,"appData")],getInitialState:function(){return{dontShowAgainChecked:!1,id:this.props.id?this.props.id:""+Math.random(),isOpen:!1,visible:void 0===this.props.visible||this.props.visible}},componentDidMount:function(){AP.events.on("close-notifications",this.onCloseNotificationsEvent),AP.events.on("open-notification",this.onOpenNotificationEvent)},componentDidUpdate:function(e){var t=e.visible,n=this.props.visible;t!==n&&this.setState({visible:n})},componentWillUnmount:function(){AP.events.off("close-notifications",this.onCloseNotificationsEvent),AP.events.off("open-notification",this.onOpenNotificationEvent)},render:function(){return this.state.visible?r.default.createElement("div",{className:"notification-wrapper"},this.renderTrigger(),this.renderMessage()):null},renderMessage:function(){if(!this.state.isOpen)return null;var e=this.props.content;"error"===this.props.type&&(e=this.renderContentForError());var t=this.iconNode.getBoundingClientRect(),n={padding:"12px"},i=this.state.appData.appWidth,a=Math.floor(.75*i),s=a+24+2,l=Math.floor((i-s)/2);n.top=t.bottom+10+"px",n.width=a+"px",n.left=l+"px";var u=i-t.right-l+Math.floor(t.width/2)-2;return t.right<l?(u=s-Math.floor(t.width/2)-2,n.left=t.left+"px"):t.left>l+s&&(u=Math.floor(t.width/2)-2,n.left=2*l+"px"),r.default.createElement(o.default,{arrowLeft:"calc(100% - "+u+"px)",className:"notification-arrow-box",id:this.state.id,orientation:"top",style:n},r.default.createElement("div",null,e,this.renderCloseSection()))},renderTrigger:function(){var e=this,t=this.getTriggerColor(),n=this.props.iconTitle,i=this.props.type;"error"===i&&(n=this.getIconTitleForError());var s=(0,a.default)({"aui-icon":!0,"aui-icon-small":!0,"aui-iconfont-error":"error"===i,"aui-iconfont-info":"info"===i,"aui-iconfont-warning":"warning"===i}),o=i,l={color:t};this.props.customTrigger&&(s=this.props.customTrigger.className,o=this.props.customTrigger.content,l={});var u=(0,a.default)({"notification-trigger":!0,"notification-trigger-error":"error"===i});return r.default.createElement("div",{className:u,onClick:this.onTriggerClick,title:n},r.default.createElement("span",{className:s,ref:function(t){e.iconNode=t},style:l},o))},renderContentForError:function(){var e=this.props.errorMessages.map(function(e,t){var n=0===t?0:"10px";return r.default.createElement("div",{key:t,style:{marginTop:n}},r.default.createElement("div",{style:{whiteSpace:"normal",paddingBottom:"5px"}},e.title),r.default.createElement("div",{style:{color:s.colors.R300,whiteSpace:"pre-wrap"}},e.details))});return r.default.createElement("div",null,e)},renderCloseSection:function(){var e=this;if(this.props.showCloseButton)return r.default.createElement("div",{className:"notification-close-section"},this.props.dontShowAgainProperty&&r.default.createElement("div",{className:"notification-close-checkbox-container"},r.default.createElement(d.CheckboxStateless,{isChecked:this.state.dontShowAgainChecked,label:"Don't show this again",onChange:function(t){e.setState({dontShowAgainChecked:t.target.checked})}})),r.default.createElement("div",{className:"notification-close-button-container"},r.default.createElement(c.default,{onClick:this.onCloseButtonClick},"Close")))},onCloseButtonClick:function(){this.props.dontShowAgainProperty&&this.state.dontShowAgainChecked&&AP.events.emit("permanently-hide-notification",this.props.dontShowAgainProperty),this.setState({isOpen:!1})},onOpenNotificationEvent:function(e){var t=e.id;this.state.id===t&&this.setState({isOpen:!0})},onCloseNotificationsEvent:function(){((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ignoreIds||[]).includes(this.state.id)||this.setState({isOpen:!1})},onTriggerClick:function(e){e.preventDefault(),!this.state.isOpen&&AP.events.emit("close-notifications",{ignoreIds:[this.state.id]}),this.setState({isOpen:!this.state.isOpen})},getIconTitleForError:function(){return this.props.errorMessages.map(function(e){return e.details}).join(" ")},getTriggerColor:function(){var e=this.props.type;return"error"===e?s.colors.R300:"info"===e?s.colors.B400:"warning"===e?s.colors.Y300:s.colors.N300}}),e.exports=t.default},544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(14)),i=l(n(545)),a=l(n(17)),s=l(n(691)),o=l(n(21));function l(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createStore({listenables:[i.default],state:{appWidth:0,displayReviewsNotification:!1},doTrigger:function(){this.trigger(this.state)},getInitialState:function(){return this.state},onInitialize:function(){var e=this;new a.default.Promise(function(e){o.default.isProVersion()?e(!1):s.default.getProperty("hideFirstReviewActionMessage").then(function(t){var n=Boolean(t);e(!n)}).catch(function(){e(!0)})}).then(function(t){e.state.displayReviewsNotification=t,e.doTrigger()})},onPermanentlyHideNotification:function(e){"hideFirstReviewActionMessage"===e&&(this.state.displayReviewsNotification=!1,this.doTrigger()),s.default.setProperty(e,!0)},onSetAppWidth:function(e){this.state.appWidth=e,this.doTrigger()}}),e.exports=t.default},545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14)).default.createActions(["initialize","permanentlyHideNotification","setAppWidth"]);t.default=r,e.exports=t.default},547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(0)),a=(l(n(2)),l(n(199))),s=l(n(695)),o=l(n(240));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.onClick,r=e.title||"Add another checklist",l=i.default.createElement(a.default,{isDisabled:t,onClick:n,spacing:"compact"},i.default.createElement(s.default,{size:"small"}));return t?i.default.createElement("div",{className:"bar-button-container"},i.default.createElement(o.default,{content:r},l)):i.default.createElement("div",{className:"bar-button-container",title:r},l)}}]),t}();t.default=u,e.exports=t.default},549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(0)),a=(o(n(2)),o(n(199))),s=o(n(991));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props,t=e.hideCompleted,n=e.onClick,r=(t?"Show":"Hide")+" completed items";return i.default.createElement("div",{className:"bar-button-container",title:r},i.default.createElement(a.default,{isSelected:t,onClick:n,spacing:"compact"},i.default.createElement(s.default,{size:"small"})))}}]),t}();t.default=l,e.exports=t.default},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.SEPARATOR_MARKER="---";t.default={isChecklistSeparator:function(e){return e.substring(0,r.length)===r},replaceChecklistSeparator:function(e,t){return this.isChecklistSeparator(e)?e.replace(r,t):e},removeChecklistSeparator:function(e){return this.isChecklistSeparator(e)?e.substring(r.length):e},createChecklistSeparator:function(e){return this.isChecklistSeparator(e)?e:r+e}}},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(19)),i=u(n(27)),a=u(n(218)),s=u(n(219)),o=u(n(17)),l=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)("1h"),d=(0,a.default)("10m"),f={"If-Modified-Since":"Mon, 26 Jul 1997 05:00:00 GMT"},p=null,h=0,m=0,g=0;function v(e){h++;var t=(0,r.default)(e,"headers.x-acpt");t&&(g=(new Date).getTime(),l.default.token=t)}function y(){var e=(new Date).getTime(),t=(0,s.default)(l.default.token);t.exp?e<1e3*t.exp-d?i.default.get("/heartbeat?upd="+h+"&res="+m+"&ts="+e+"&lr="+g+"&jwt="+l.default.token,{headers:f}).then(function(e){v(e)}).catch(function(){window.clearInterval(p)}):window.clearInterval(p):window.clearInterval(p)}t.default={initBackgroundRefresh:function(){p||(g=(new Date).getTime(),p=window.setInterval(y,c))},update:function(e){m++,e&&v(e)},getAxiosJwt:function(){return new o.default.Promise(function(e){var t=1e3*(0,s.default)(l.default.token).exp-d;(new Date).getTime()<t?e(l.default.token):AP.context.getToken(function(t){l.default.token=t,e(t)})}).then(function(e){return i.default.create({params:{jwt:e}})})}},e.exports=t.default},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14)).default.createActions(["fetchUsersByAccountIds","fetchUsersForMentions","initialize","updateUser","updateMentionTextToAccountId"]);t.default=r,e.exports=t.default},610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14)).default.createActions(["toggleItem","toggleAllItems","addItem","addMultipleItems","removeItem","saveItemSummary","toggleAndSaveItemSummary","actualOrder","hideCompletedItems","overwriteChecklist","updateLocalChecklist","statusChange","loadTemplate","addChecklist","changeChecklistName","deleteChecklist"]);t.default=r,e.exports=t.default},611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(229)),i=h(n(0)),a=h(n(14)),s=h(n(2)),o=n(16),l=h(n(210)),u=h(n(453)),c=h(n(53)),d=h(n(60)),f=h(n(645)),p=h(n(702));function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,r.default)(p.default.propTypes,"fetchedIssues","usersData"),g=i.default.createClass({displayName:"Checklist",mixins:[a.default.connect(l.default,"issuesData"),a.default.connect(c.default,"usersData")],propTypes:{headerProps:s.default.shape(f.default.propTypes).isRequired,items:s.default.arrayOf(s.default.object).isRequired,listProps:s.default.shape(m).isRequired},componentDidMount:function(){u.default.initialize(),d.default.initialize(),this.findAndFetchExternalData()},componentDidUpdate:function(){this.findAndFetchExternalData()},findAndFetchExternalData:function(){var e=this.props.items,t=e.map(function(e){return e.description}).filter(Boolean),n=e.map(function(e){return e.summary}),r=e.map(function(e){return e.toggleUserAccountId}),i=n.concat(t);u.default.findAndFetchIssues(i),d.default.fetchUsersByAccountIds(r),d.default.fetchUsersForMentions(i)},render:function(){return i.default.createElement(o.AtlaskitThemeProvider,null,i.default.createElement("div",null,i.default.createElement(f.default,this.props.headerProps),i.default.createElement(p.default,this.props.listProps)))}});t.default=g,e.exports=t.default},645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=b(n(0)),a=b(n(73)),s=b(n(2)),o=b(n(647)),l=b(n(42)),u=n(535),c=b(u),d=b(n(469)),f=b(n(472)),p=b(n(543)),h=b(n(694)),m=b(n(35)),g=b(n(547)),v=b(n(700)),y=b(n(549)),E=b(n(701));function b(e){return e&&e.__esModule?e:{default:e}}var k=i.default.createClass({displayName:"TodoHeader",propTypes:{errorMessages:s.default.arrayOf(s.default.object).isRequired,hasMultipleChecklists:s.default.bool.isRequired,hideAddChecklistButton:s.default.bool.isRequired,hideCompleted:s.default.bool.isRequired,infoNotifications:s.default.arrayOf(s.default.object).isRequired,isBusy:s.default.bool.isRequired,list:s.default.arrayOf(s.default.object).isRequired,loadTemplateDisabled:s.default.bool.isRequired,multipleChecklistsEnabled:s.default.bool.isRequired,name:s.default.string.isRequired,onAddChecklist:s.default.func.isRequired,onAddItem:s.default.func.isRequired,onAddMultipleItems:s.default.func.isRequired,onChangeChecklistName:s.default.func.isRequired,onDeleteChecklist:s.default.func.isRequired,onHideCompletedItems:s.default.func.isRequired,onLoadTemplate:s.default.func.isRequired,onRemoveTemplate:s.default.func.isRequired,onShowEditor:s.default.func.isRequired,onToggleAllItems:s.default.func.isRequired,panelPosition:s.default.string.isRequired,readOnly:s.default.bool.isRequired,readOnlyMessage:s.default.string.isRequired,hideToolbar:s.default.bool.isRequired,renderTopBar:s.default.bool.isRequired,showDeleteChecklistButton:s.default.bool.isRequired,statuses:s.default.arrayOf(s.default.object).isRequired,statusesEnabled:s.default.bool.isRequired,statusesHaveCheckbox:s.default.bool.isRequired},getInitialState:function(){return{placeholderText:null}},animateNewItemStart:function(){this.setState({placeholderText:"Paste the content of the clipboard here"})},animateNewItemStop:function(){this.setState({placeholderText:null})},render:function(){var e=this.props.hasMultipleChecklists,t=this.renderNewItemSection();return this.props.renderTopBar?i.default.createElement("header",{id:"header",style:{marginTop:"5px"}},e&&i.default.createElement(h.default,{onChange:this.props.onChangeChecklistName,name:this.props.name,readOnly:this.props.readOnly}),this.renderTopBar(),t):i.default.createElement("header",{id:"header"},t)},renderNewItemSection:function(){return this.props.readOnly?i.default.createElement("div",{className:"new-item-read-only-placeholder"}):i.default.createElement(o.default,{onAddItem:this.props.onAddItem,onAddMultipleItems:this.props.onAddMultipleItems,panelPosition:this.props.panelPosition,placeholderText:this.state.placeholderText,onResetPlaceholder:this.animateNewItemStop,statuses:this.props.statuses,statusesEnabled:this.props.statusesEnabled})},renderTopBar:function(){var e=this.props,t=e.isBusy,n=e.multipleChecklistsEnabled,s=e.readOnly,o=e.readOnlyMessage,p=e.hideToolbar,h=this.props,b=h.hasMultipleChecklists,k=h.hideAddChecklistButton,C=h.onAddChecklist,_=h.onShowEditor,I=this.props,T=I.hideCompleted,O=I.onHideCompletedItems,P=I.showDeleteChecklistButton,S=this.props,w=S.onDeleteChecklist,A=S.panelPosition,x=this.props,j=x.statuses,N=x.statusesEnabled,M=x.statusesHaveCheckbox,D=this.props.list,R=b?u.DROPDOWN_MENU_CHECKLIST_MODE:u.DROPDOWN_MENU_DEFAULT_MODE,U=!b&&!k,B=!b,L=t,F="right"===A,H="right"===A,K=s?o:"",q=s?o:"",V=s?o:"";K||n||(K="Add another checklist (this button can be enabled or hidden in Global Settings)");var Y=a.default.getCheckedRealItemsNum(D),z=a.default.getRealItems(D).length,G=1;U&&(G+=1),P&&!F&&(G+=1),H||(G+=1),B&&(G+=1);var W={isDisabled:s,onClick:w,title:V},J={isDisabled:s,onClick:_,title:q},X={hideCompleted:T,isDisabled:!1,onClick:O,title:""},Q={deleteChecklistOptionProps:F&&P?r({},W):{},editorOptionProps:H?r({},J):{}},$=(0,m.default)({"bar-buttons":!0,"bar-1-button":1===G,"bar-2-buttons":2===G,"bar-3-buttons":3===G,"bar-4-buttons":4===G}),Z=(0,m.default)({"bar-progress":!0,"bar-1-button":1===G,"bar-2-buttons":2===G,"bar-3-buttons":3===G,"bar-4-buttons":4===G});return i.default.createElement("div",{className:"bar"},i.default.createElement("div",{className:Z},i.default.createElement("div",{className:"bar-progress-bar"},i.default.createElement(d.default,{completed:Y,total:z})),i.default.createElement("div",{className:"bar-progress-badge"},i.default.createElement(f.default,{completed:Y,total:z}))),i.default.createElement("div",{className:$},!p&&U&&i.default.createElement(g.default,{isDisabled:s||!n,onClick:C,title:K}),!p&&!H&&i.default.createElement(v.default,J),!p&&B&&i.default.createElement(y.default,X),!p&&P&&!F&&i.default.createElement(E.default,W),!p&&i.default.createElement(c.default,r({},Q,{list:D,loadTemplateDisabled:this.props.loadTemplateDisabled,mode:R,onLoadTemplate:this.props.onLoadTemplate,onPasteChecklist:this.animateNewItemStart,onRemoveTemplate:this.props.onRemoveTemplate,onToggleAllItems:this.props.onToggleAllItems,panelPosition:this.props.panelPosition,readOnly:s,readOnlyMessage:o,statuses:j,statusesEnabled:N,statusesHaveCheckbox:M}))),i.default.createElement("div",{className:"bar-elements"},i.default.createElement("div",{className:"bar-element bar-element-spinner"},i.default.createElement(l.default,{visible:L,atlaskitSize:"small"})),i.default.createElement("div",{className:"bar-element bar-element-notification"},this.renderErrorNotification()),this.renderInfoNotifications()))},renderErrorNotification:function(){var e=this.props.errorMessages;return 0===e.length?null:i.default.createElement(p.default,{errorMessages:e,type:"error"})},renderInfoNotifications:function(){return this.props.infoNotifications.map(function(e,t){return i.default.createElement("div",{className:"bar-element bar-element-notification",key:t},i.default.createElement(p.default,{content:e.content,customTrigger:e.customTrigger,dontShowAgainProperty:e.dontShowAgainProperty,iconTitle:e.iconTitle,id:e.id,showCloseButton:!0,type:"info",visible:e.visible}))})}});t.default=k,e.exports=t.default},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=I(n(265)),i=I(n(212)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=I(n(454)),l=I(n(456)),u=I(n(457)),c=I(n(55)),d=I(n(267)),f=I(n(463)),p=I(n(0)),h=I(n(14)),m=I(n(2)),g=I(n(18)),v=n(62),y=I(n(210)),E=I(n(424)),b=I(n(17)),k=n(268),C=I(n(53)),_=I(n(35));function I(e){return e&&e.__esModule?e:{default:e}}function T(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var O=p.default.createClass({displayName:"NewItem",propTypes:{onAddItem:m.default.func.isRequired,onAddMultipleItems:m.default.func.isRequired,panelPosition:m.default.string.isRequired,placeholderText:m.default.string,onResetPlaceholder:m.default.func.isRequired,statuses:m.default.arrayOf(m.default.object).isRequired,statusesEnabled:m.default.bool.isRequired},mixins:[l.default,o.default,u.default,h.default.connect(y.default,"issuesData"),h.default.connect(C.default,"usersData")],inputOriginalSize:0,getInputElement:function(){return this.newInput},getRootElement:function(){return this.rootElement},getValueStateKey:function(){return"newValue"},getInitialState:function(){return{id:Math.random().toString(),lastPreSaveValue:"",newValue:""}},componentDidMount:function(){this.newInput.blur(),this.inputOriginalSize=36,AP.events.on("restore-last-pre-save-value-for-new-item",this.restoreLastPreSaveValue)},componentWillUnmount:function(){AP.events.off("restore-last-pre-save-value-for-new-item",this.restoreLastPreSaveValue)},componentDidUpdate:function(){this.props.placeholderText&&this.newInput.focus()},restoreLastPreSaveValue:function(e){var t=this,n=e.fieldId;this.state.id===n&&this.setState({newValue:this.state.lastPreSaveValue},function(){d.default.adjustHeight(t.getInputElement(),t.getInputMinHeight(),!0)})},handleKeyUp:function(e){this.executeExtraEventHandlers(this.events.KEY_UP,[e]).some(function(e){return e})||(e.which===v.KEY_RETURN&&this.saveExact(e),e.which===v.KEY_ESCAPE&&this.cancel())},handleKeyDown:function(e){e.which===v.KEY_RETURN&&e.preventDefault(),this.executeExtraEventHandlers(this.events.KEY_DOWN,[e])},handleBlur:function(){this.executeExtraEventHandlers(this.events.BLUR),E.default.newItemFocusChange(!1),this.props.placeholderText&&this.props.onResetPlaceholder()},handleFocus:function(){this.executeExtraEventHandlers(this.events.FOCUS),E.default.newItemFocusChange(!0),this.props.placeholderText&&(this.newInput.placeholder=this.props.placeholderText)},handleInput:function(e){var t=this,n=e.target,r=Math.abs(n.value.length-this.state.newValue.length)>1,i=n.value!==this.state.newValue;this.setState({newValue:n.value},function(){new b.default.Promise(function(e){var i=t.getInputMinHeight();t.state.newValue?d.default.adjustHeight(n,i,r,e):(d.default.setHeight(n,i),e())}).finally(function(){t.executeExtraEventHandlers(t.events.AFTER_INPUT),t.executeExtraEventHandlers(t.events.CURSOR_POSITION_CHANGE,[i])})}),this.props.onResetPlaceholder()},_save:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.default.setHeight(this.newInput,this.getInputMinHeight());var n=this.state.newValue;if(n){var r=g.default.splitMultilineText(n),o=(0,k.editorContentToItems)(r,this.mentionTextToAccountId,this.props.statusesEnabled,this.props.statuses).map(function(n){var r=n.summary;t&&!c.default.isChecklistSeparator(r)&&(r=c.default.createChecklistSeparator(r));var i=e.executeExtraEventHandlers(e.events.PRE_SAVE,[r]),o=s(i,1)[0];return a({},n,{summary:o})});1===o.length?this.props.onAddItem(o[0],this.state.id):o.length>1&&this.props.onAddMultipleItems(o,this.state.id),setTimeout(function(){e.newInput.focus()},1);var l=this.executeExtraEventHandlers(this.events.STATE_RESET);this.setState(i.default.apply(void 0,[{lastPreSaveValue:n,newValue:""}].concat(T(l))))}},saveExact:function(){this._save()},saveToDoItem:function(){this._save()},addAsSeparator:function(){this._save(!0)},cancel:function(){var e=this;d.default.setHeight(this.newInput,this.getInputMinHeight());var t=this.executeExtraEventHandlers(this.events.STATE_RESET),n=i.default.apply(void 0,[{newValue:""}].concat(T(t)));this.setState(n,function(){e.newInput&&e.newInput.focus()})},setNewInputRef:function(e){this.newInput=e},shouldComponentUpdate:function(e,t){return!(0,r.default)(this.state,t)||!(0,r.default)(this.props,e)},render:function(){var e=this,t=this.state.newValue.length>0&&p.default.createElement(f.default,{buttonsSpacing:"default",onCancel:this.cancel,onSave:this.saveToDoItem,onSaveAsSeparator:this.addAsSeparator}),n=(0,_.default)({"text-field":!0,"text-field-flashing":Boolean(this.props.placeholderText)}),r=(0,_.default)({"has-save-options":Boolean(t),"new-item-input-container":!0}),i=(0,_.default)({"new-item-save-options":!0}),a="right"===this.props.panelPosition?"Add ToDo item":"Add ToDo item or header text here...",s=p.default.createElement("textarea",{className:n,ref:this.setNewInputRef,placeholder:this.props.placeholderText||a,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onInput:this.handleInput,rows:1,value:this.state.newValue});return p.default.createElement("div",{ref:function(t){e.rootElement=t},className:"new-item"},p.default.createElement("div",{className:"new-item-inner"},p.default.createElement("div",{className:r},s),p.default.createElement("div",{className:i},t)),this.renderCalendar(),this.renderMentionPicker())}});t.default=O,e.exports=t.default},655:function(e,t,n){var r={"./af":296,"./af.js":296,"./ar":297,"./ar-dz":298,"./ar-dz.js":298,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":300,"./ar-ly.js":300,"./ar-ma":301,"./ar-ma.js":301,"./ar-sa":302,"./ar-sa.js":302,"./ar-tn":303,"./ar-tn.js":303,"./ar.js":297,"./az":304,"./az.js":304,"./be":305,"./be.js":305,"./bg":306,"./bg.js":306,"./bm":307,"./bm.js":307,"./bn":308,"./bn.js":308,"./bo":309,"./bo.js":309,"./br":310,"./br.js":310,"./bs":311,"./bs.js":311,"./ca":312,"./ca.js":312,"./cs":313,"./cs.js":313,"./cv":314,"./cv.js":314,"./cy":315,"./cy.js":315,"./da":316,"./da.js":316,"./de":317,"./de-at":318,"./de-at.js":318,"./de-ch":319,"./de-ch.js":319,"./de.js":317,"./dv":320,"./dv.js":320,"./el":321,"./el.js":321,"./en-au":322,"./en-au.js":322,"./en-ca":323,"./en-ca.js":323,"./en-gb":324,"./en-gb.js":324,"./en-ie":325,"./en-ie.js":325,"./en-il":326,"./en-il.js":326,"./en-nz":327,"./en-nz.js":327,"./eo":328,"./eo.js":328,"./es":329,"./es-do":330,"./es-do.js":330,"./es-us":331,"./es-us.js":331,"./es.js":329,"./et":332,"./et.js":332,"./eu":333,"./eu.js":333,"./fa":334,"./fa.js":334,"./fi":335,"./fi.js":335,"./fo":336,"./fo.js":336,"./fr":337,"./fr-ca":338,"./fr-ca.js":338,"./fr-ch":339,"./fr-ch.js":339,"./fr.js":337,"./fy":340,"./fy.js":340,"./gd":341,"./gd.js":341,"./gl":342,"./gl.js":342,"./gom-latn":343,"./gom-latn.js":343,"./gu":344,"./gu.js":344,"./he":345,"./he.js":345,"./hi":346,"./hi.js":346,"./hr":347,"./hr.js":347,"./hu":348,"./hu.js":348,"./hy-am":349,"./hy-am.js":349,"./id":350,"./id.js":350,"./is":351,"./is.js":351,"./it":352,"./it.js":352,"./ja":353,"./ja.js":353,"./jv":354,"./jv.js":354,"./ka":355,"./ka.js":355,"./kk":356,"./kk.js":356,"./km":357,"./km.js":357,"./kn":358,"./kn.js":358,"./ko":359,"./ko.js":359,"./ky":360,"./ky.js":360,"./lb":361,"./lb.js":361,"./lo":362,"./lo.js":362,"./lt":363,"./lt.js":363,"./lv":364,"./lv.js":364,"./me":365,"./me.js":365,"./mi":366,"./mi.js":366,"./mk":367,"./mk.js":367,"./ml":368,"./ml.js":368,"./mn":369,"./mn.js":369,"./mr":370,"./mr.js":370,"./ms":371,"./ms-my":372,"./ms-my.js":372,"./ms.js":371,"./mt":373,"./mt.js":373,"./my":374,"./my.js":374,"./nb":375,"./nb.js":375,"./ne":376,"./ne.js":376,"./nl":377,"./nl-be":378,"./nl-be.js":378,"./nl.js":377,"./nn":379,"./nn.js":379,"./pa-in":380,"./pa-in.js":380,"./pl":381,"./pl.js":381,"./pt":382,"./pt-br":383,"./pt-br.js":383,"./pt.js":382,"./ro":384,"./ro.js":384,"./ru":385,"./ru.js":385,"./sd":386,"./sd.js":386,"./se":387,"./se.js":387,"./si":388,"./si.js":388,"./sk":389,"./sk.js":389,"./sl":390,"./sl.js":390,"./sq":391,"./sq.js":391,"./sr":392,"./sr-cyrl":393,"./sr-cyrl.js":393,"./sr.js":392,"./ss":394,"./ss.js":394,"./sv":395,"./sv.js":395,"./sw":396,"./sw.js":396,"./ta":397,"./ta.js":397,"./te":398,"./te.js":398,"./tet":399,"./tet.js":399,"./tg":400,"./tg.js":400,"./th":401,"./th.js":401,"./tl-ph":402,"./tl-ph.js":402,"./tlh":403,"./tlh.js":403,"./tr":404,"./tr.js":404,"./tzl":405,"./tzl.js":405,"./tzm":406,"./tzm-latn":407,"./tzm-latn.js":407,"./tzm.js":406,"./ug-cn":408,"./ug-cn.js":408,"./uk":409,"./uk.js":409,"./ur":410,"./ur.js":410,"./uz":411,"./uz-latn":412,"./uz-latn.js":412,"./uz.js":411,"./vi":413,"./vi.js":413,"./x-pseudo":414,"./x-pseudo.js":414,"./yo":415,"./yo.js":415,"./zh-cn":416,"./zh-cn.js":416,"./zh-hk":417,"./zh-hk.js":417,"./zh-tw":418,"./zh-tw.js":418};function i(e){var t=a(e);return n(t)}function a(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=655},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(294));var i=1024,a=[{id:"1",name:"open",appearance:"default",checked:!1,isDefaultChecked:!1,isDefaultUnchecked:!0,order:0},{id:"2",name:"in progress",appearance:"inprogress",checked:!1,isDefaultChecked:!1,isDefaultUnchecked:!1,order:1},{id:"3",name:"done",appearance:"success",checked:!0,isDefaultChecked:!0,isDefaultUnchecked:!1,order:2},{id:"4",name:"skipped",appearance:"success",checked:!0,isDefaultChecked:!1,isDefaultUnchecked:!1,order:3}],s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e,a=o(),s=l(),c=u(e,n);return c?c.checked&&!t?i=s:!c.checked&&t&&(i=a):i=null,r?i:t?i||a:i||s},o=function(){return"done"},l=function(){return"open"},u=function(e,t){return t.find(function(t){return t.name===e})},c=function(e,t,n){var r=s(e.status,e.fixed,n),i=s(t.status,t.fixed,n);return e&&t&&r===i},d=function(e,t){return f(e)==f(t)},f=function(e){return"string"==typeof e?e.substring(0,4096):e};function p(e){return"string"==typeof e?e.substr(0,i).replace(/\r?\n|\r/gm,""):e}t.default={areDescriptionsEqual:d,areItemsEqual:function(e,t,n){return e&&t&&p(e.summary)===p(t.summary)&&e.fixed===t.fixed&&c(e,t,n)&&d(e.description,t.description)},areStatusesEqual:c,getDefaultUncheckedStatusName:l,findStatusObjectByName:u,getChecklistId:function(e,t){var n=e.checklistId;return n||t.find(function(e){return e.isDefaultForIssue}).id},getChecklistIdToSave:function(e,t){return e===r.default.getDefaultIssueChecklistId()?null:t?null:e},getOriginalChecklistId:function(e,t){var n=e.originalChecklistId;return n||t.find(function(e){return e.isDefaultForIssue}).id},getValidatedDescription:f,getValidatedStatus:s,getValidatedSummary:p,ITEM_SUMMARY_MAX_LENGTH:i,ITEM_DESCRIPTION_MAX_LENGTH:4096,DEFAULT_STATUSES:a},e.exports=t.default},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getYamlText=u;var r=l(n(73)),i=l(n(965)),a=l(n(21)),s=n(268),o=n(67);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){if(0===e.length)return"";var r=e.map(function(e){var r={text:e.summary,checked:e.fixed};return e.description&&(r.description=e.description),t&&(r.status=(0,o.getValidatedStatus)(e.status,e.fixed,n)),r});return i.default.safeDump({items:r})}t.default={createCustomFieldsJson:function(e,t,n,i,o,l){var c=a.default.ADDON_KEY+"__"+a.default.CHECKLIST_PROGRESS_OBSOLETE_FIELD_KEY,d=r.default.getProgressText(e),f=t,p=r.default.getCompletedText(e),h=n,m=u(e,o,l),g=i,v=function(e,t,n){return(0,s.itemsToMarkdownContent)(e,t,n)}(e,o,l),y=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},c,d);return f&&(y[f]=p),h&&(y[h]=m),g&&(y[g]=v),y}}},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);t.default={activeChecklistItems:r.hostBaseUrl+"/issues/?jql=activeChecklistItems%20>%200",hasActiveChecklistItems:r.hostBaseUrl+'/issues/?jql=hasActiveChecklistItems%20%3D%20"true"',hasChecklistItems:r.hostBaseUrl+'/issues/?jql=hasChecklistItems%20%3D%20"true"',checklistItems:r.hostBaseUrl+'/issues/?jql=checklistItems%20~%20"example checklist item text you want to search for"'},e.exports=t.default},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(229)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=l(a),o=l(n(15));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.portalElement=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"componentDidMount",value:function(){var e=this.props.portalId&&document.getElementById(this.props.portalId);e||((e=document.createElement("div")).id=this.props.portalId,document.body.appendChild(e)),this.portalElement=e,this.componentDidUpdate()}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.portalElement)}},{key:"componentDidUpdate",value:function(){var e=(0,r.default)(this.props,["portalId"]);o.default.render(s.default.createElement("div",e,this.props.children),this.portalElement)}},{key:"render",value:function(){return null}}]),t}();t.default=u,e.exports=t.default},689:function(e,t,n){},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(19)),i=o(n(17)),a=o(n(18)),s=o(n(21));function o(e){return e&&e.__esModule?e:{default:e}}var l=["hideCustomFieldsMigrationMessage","hideFirstReviewActionMessage"],u=function(e,t){var n=encodeURIComponent(e);return"/rest/api/2/user/properties/"+s.default.ADDON_KEY+"."+t+"?accountId="+n},c=function(e,t){return function(n){Raven.captureException(n,{tags:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e+"_user_property_"+t,!0)})}},d=function(e){if(!l.find(function(t){return t===e}))throw new Error("Incorrect property name: "+e)};t.default={availableProperties:l,deleteProperty:function(e){d(e);var t=c("DELETE",e);return new i.default.Promise(function(n,r){a.default.getUser().then(function(i){AP.request({url:u(i.accountId,e),type:"DELETE",contentType:"application/json",success:function(){n()},error:function(e,n,i){t(i),r(i)}})})})},getProperty:function(e){d(e);var t=c("GET",e);return new i.default.Promise(function(n,i){var s=function(e){t(e),i(e)};a.default.getUser().then(function(t){AP.request({url:u(t.accountId,e),type:"GET",cache:!1,success:function(e){if(e){var t=void 0;try{t=JSON.parse(e)}catch(e){return void s(e)}var i=(0,r.default)(t,"value.propertyValue");void 0!==i?n(i):s(new Error("Request succeeded but the value is undefined"))}else s(new Error("Request succeeded but got empty response"))},error:function(e,t,r){401!==e.status?404===e.status?n(null):s(r):i(r)}})})})},setProperty:function(e,t){d(e);var n=c("PUT",e);return new i.default.Promise(function(r,i){a.default.getUser().then(function(a){AP.request({url:u(a.accountId,e),type:"PUT",data:JSON.stringify({propertyValue:t}),contentType:"application/json",success:function(){r()},error:function(e,t,r){n(r),i(r)}})})})}},e.exports=t.default},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(0)),a=(u(n(2)),u(n(34))),s=u(n(533)),o=u(n(534)),l=n(62);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={editValue:n.props.name,isEditing:!1},n.inputRef=null,n.onCancel=n.onCancel.bind(n),n.onInputChange=n.onInputChange.bind(n),n.onKeyUp=n.onKeyUp.bind(n),n.onSave=n.onSave.bind(n),n.onTextViewClick=n.onTextViewClick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidUpdate",value:function(e){e.name!==this.props.name&&this.setState({editValue:this.props.name})}},{key:"render",value:function(){return this.state.isEditing?this.renderEditView():this.renderTextView()}},{key:"renderEditView",value:function(){var e=this,t=this.state.editValue.length>0;return i.default.createElement("div",{className:"checklist-name-edit-view"},i.default.createElement("div",{className:"checklist-name-edit-input-container"},i.default.createElement("input",{className:"text-field",onBlur:this.onSave,onChange:this.onInputChange,onKeyUp:this.onKeyUp,ref:function(t){e.inputRef=t},type:"text",value:this.state.editValue})),t&&i.default.createElement("div",{className:"checklist-name-edit-buttons-container"},i.default.createElement(a.default,{appearance:"default",className:"checklist-name-edit-button",iconBefore:i.default.createElement(s.default,{size:"small"}),onClick:this.onSave,spacing:"default"}),i.default.createElement(a.default,{appearance:"default",className:"checklist-name-edit-button",iconBefore:i.default.createElement(o.default,{size:"small"}),onClick:this.onCancel,spacing:"default"})))}},{key:"renderTextView",value:function(){var e=this.props.readOnly?"":"Click to rename",t="checklist-name-text-view-header";return t+=this.props.readOnly?"-read-only":"",i.default.createElement("div",{className:"checklist-name-text-view",onClick:this.onTextViewClick,title:e},i.default.createElement("div",{className:t},this.props.name))}},{key:"onCancel",value:function(){this.setState({editValue:this.props.name,isEditing:!1})}},{key:"onKeyUp",value:function(e){e.which===l.KEY_RETURN&&this.onSave(),e.which===l.KEY_ESCAPE&&this.onCancel()}},{key:"onSave",value:function(){this.state.editValue?(this.props.onChange(this.state.editValue),this.setState({isEditing:!1})):this.onCancel()}},{key:"onInputChange",value:function(e){this.setState({editValue:e.target.value})}},{key:"onTextViewClick",value:function(){var e=this;this.props.readOnly||this.setState({isEditing:!0},function(){var t=e.state.editValue.length;e.inputRef.focus(),e.inputRef.setSelectionRange(t,t)})}}]),t}();t.default=c,e.exports=t.default},700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(0)),a=(o(n(2)),o(n(199))),s=o(n(990));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isDisabled,r=t.onClick,o=t.title||"Edit checklist in editor";return i.default.createElement("div",{className:"bar-button-container",title:o},i.default.createElement(a.default,{innerRef:function(t){return e.button=t},isDisabled:n,onClick:function(){e.button.focus(),r()},spacing:"compact"},i.default.createElement(s.default,{size:"small"})))}}]),t}();t.default=l,e.exports=t.default},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(0)),a=(o(n(2)),o(n(199))),s=o(n(474));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.onClick,r=e.title||"Delete checklist";return i.default.createElement("div",{className:"bar-button-container",title:r},i.default.createElement(a.default,{isDisabled:t,onClick:n,spacing:"compact"},i.default.createElement(s.default,{size:"small"})))}}]),t}();t.default=l,e.exports=t.default},702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(550)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=p(n(20));n(992),n(995);var s=p(n(34)),o=p(n(35)),l=p(n(0)),u=(p(n(2)),p(n(703))),c=p(n(18)),d=p(n(55)),f=p(n(67));function p(e){return e&&e.__esModule?e:{default:e}}n(44);var h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.$listElement=null,e.state={pointerEventsDisabled:!1},e.handleDragStart=e.handleDragStart.bind(e),e.handleDrop=e.handleDrop.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),i(t,[{key:"componentDidMount",value:function(){this.$listElement.sortable({start:this.handleDragStart,stop:this.handleDrop,cancel:".todo-item-description-content",containment:"parent",cursor:"move",axis:"y",scroll:!1,handle:".todo-item-inner.draggable",tolerance:"pointer"}),this.$listElement.sortable("enable")}},{key:"componentWillUnmount",value:function(){this.$listElement.sortable("destroy")}},{key:"handleDragStart",value:function(e){var t=(0,a.default)(e.originalEvent.target).hasClass("visible-drag-handler");this.$listElement.data("last-drag-by-visible-handler",t)}},{key:"handleDrop",value:function(e,t){var n=this,r=(0,a.default)(t.item).data("id"),i=this.$listElement.children().get().map(function(e){return e.getAttribute("data-id")}),s=this.$listElement.data("last-drag-by-visible-handler");c.default.isIE11()&&(this.$listElement.sortable("cancel"),this.setState({pointerEventsDisabled:!0},function(){setTimeout(function(){n.setState({pointerEventsDisabled:!1})},0)})),this.props.onActualOrder(i,r,s)}},{key:"render",value:function(){var e=this,t=this.props.list,n=t,i=void 0;if(this.props.hideCompleted){var c=function(e){var t=(0,r.default)(e),n=void 0,i=void 0;return t.forEach(function(e){d.default.isChecklistSeparator(e.summary)?(n=e).fixed=!1:(i&&d.default.isChecklistSeparator(i.summary)&&(i.fixed=!0),n&&!e.fixed&&(n.fixed=!1)),i=e}),{hiddenItemsNum:t.reduce(function(e,t){return t.fixed&&!d.default.isChecklistSeparator(t.summary)?e+1:e},0),uncompletedItems:t.filter(function(e){return!e.fixed})}}(t),p=c.hiddenItemsNum;n=c.uncompletedItems,p>0&&(i=l.default.createElement(s.default,{appearance:"subtle",onClick:function(){e.props.onHideCompletedItems(!e.props.hideCompleted)}},"Show (",p,") completed ",p>1?"items":"item"))}var h=(0,o.default)({hidden:t<1,"aui-page-panel-inner":1}),m=(0,o.default)({"item-details":!0,"pointer-events-disabled":this.state.pointerEventsDisabled});return l.default.createElement("section",{id:"main",className:h},l.default.createElement("div",{className:"aui-group"},l.default.createElement("div",{className:"aui-item"},l.default.createElement("ul",{id:"todo-list",className:m,ref:function(t){e.$listElement=(0,a.default)(t)}},n.map(function(t){return l.default.createElement(u.default,{description:t.description,key:t.id,id:t.id,isComplete:t.fixed,label:t.summary,onSaveItemSummary:e.props.onSaveItemSummary,onStatusChange:e.props.onStatusChange,onToggleItem:e.props.onToggleItem,onToggleAndSaveItemSummary:e.props.onToggleAndSaveItemSummary,onRemoveItem:e.props.onRemoveItem,readOnly:e.props.readOnly,readOnlyMessage:e.props.readOnlyMessage,status:f.default.getValidatedStatus(t.status,t.fixed,e.props.statuses),statuses:e.props.statuses,statusesEnabled:e.props.statusesEnabled,statusesHaveCheckbox:e.props.statusesHaveCheckbox,toggleDate:t.toggleDate,toggleUser:t.toggleUser,renderConvertToIssue:e.props.renderConvertToIssue,panelPosition:e.props.panelPosition,toggleUserAccountId:t.toggleUserAccountId})})),i)))}}]),t}();t.default=h,e.exports=t.default},703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=D(n(19)),i=D(n(212)),a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=D(n(20)),o=D(n(0)),l=D(n(2)),u=D(n(35)),c=D(n(15)),d=D(n(14)),f=n(546),p=n(16),h=n(62),m=D(n(17)),g=D(n(474)),v=D(n(996)),y=D(n(997)),E=n(704),b=n(709),k=D(n(424)),C=D(n(55)),_=D(n(12)),I=D(n(475)),T=D(n(713)),O=D(n(463)),P=D(n(473)),S=D(n(267)),w=D(n(454)),A=D(n(456)),x=D(n(457)),j=D(n(210)),N=D(n(53));n(714);var M=D(n(468));function D(e){return e&&e.__esModule?e:{default:e}}function R(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var U=(0,I.default)(_.default.hostBaseUrl),B=o.default.createClass({displayName:"TodoItem",propTypes:{description:l.default.string,id:l.default.string.isRequired,isComplete:l.default.bool.isRequired,label:l.default.string.isRequired,onSaveItemSummary:l.default.func.isRequired,onStatusChange:l.default.func.isRequired,onToggleItem:l.default.func.isRequired,onToggleAndSaveItemSummary:l.default.func.isRequired,onRemoveItem:l.default.func.isRequired,readOnly:l.default.bool.isRequired,readOnlyMessage:l.default.string.isRequired,status:l.default.string.isRequired,statuses:l.default.arrayOf(l.default.object).isRequired,statusesEnabled:l.default.bool.isRequired,statusesHaveCheckbox:l.default.bool.isRequired,toggleDate:l.default.number,toggleUser:l.default.string,toggleUserAccountId:l.default.string,renderConvertToIssue:l.default.bool.isRequired,panelPosition:l.default.string},mixins:[A.default,w.default,U,x.default,d.default.connect(j.default,"issuesData"),d.default.connect(N.default,"usersData")],inputOriginalSize:30,getInputElement:function(){return this.editInput},getRootElement:function(){return this.rootElement},getValueStateKey:function(){return"editValue"},getInitialState:function(){return{isDeleted:!1,isEditing:!1,label:this.props.label}},componentWillReceiveProps:function(e){e.label!==this.state.label&&this.setState({label:e.label})},componentDidUpdate:function(e,t){var n=this,r=document.getElementById("readonly-box-"+this.props.id);r&&void 0===this.readOnlyMessageTimeout&&(setTimeout(function(){r.focus()},250),this.readOnlyMessageTimeout=setTimeout(function(){n.hideReadOnlyMessage()},15e3));var i=t.isEditing,a=this.state.isEditing;!i&&a&&this.adjustTextareaHeight()},hideReadOnlyMessage:function(){clearTimeout(this.readOnlyMessageTimeout),this.readOnlyMessageTimeout=void 0,this.setState({itemRect:null})},handleToggle:function(e){e.stopPropagation(),this.props.onToggleItem(this.props.id)},handleStatusChange:function(e){this.props.onStatusChange(this.props.id,e)},handleEditStart:function(e){if(![e.target,e.target.parentNode,e.target.parentNode.parentNode].some(function(e){return"a"===e.tagName.toLowerCase()})){e.preventDefault();var t=this.state,n=t.label,r=t.usersData.byAccountId,i=this.executeExtraEventHandlers(this.events.PRE_EDIT,[n,r]),s=a(i,1)[0];this.setState({isEditing:!0,editValue:s},function(){this.editInput.focus()})}},handleKeyUp:function(e){if(e.preventDefault(),e.stopPropagation(),!this.executeExtraEventHandlers(this.events.KEY_UP,[e]).some(function(e){return e}))if(e.which===h.KEY_RETURN&&this.state.editValue)this.editInput.blur();else if(e.which===h.KEY_ESCAPE){k.default.itemFocusChange(!1),this.executeExtraEventHandlers(this.events.BLUR);var t=this.executeExtraEventHandlers(this.events.STATE_RESET);this.setState(i.default.apply(void 0,[{isEditing:!1}].concat(R(t))))}},handleFocus:function(){this.executeExtraEventHandlers(this.events.FOCUS),k.default.itemFocusChange(!0)},handleBlur:function(e){var t=this;e.preventDefault(),e.stopPropagation(),k.default.itemFocusChange(!1),this.executeExtraEventHandlers(this.events.BLUR,[function(){t.saveExact()}])},_save:function(e){if(e&&this.state.isEditing){var t=this.executeExtraEventHandlers(this.events.PRE_SAVE,[e]),n=a(t,1)[0];this.props.onSaveItemSummary(this.props.id,n),this.setState({label:n})}this.executeExtraEventHandlers(this.events.BLUR);var r=this.executeExtraEventHandlers(this.events.STATE_RESET);this.setState(i.default.apply(void 0,[{isEditing:!1}].concat(R(r)))),k.default.itemFocusChange(!1)},saveAsToDo:function(){var e=this.state.editValue;this._save(C.default.removeChecklistSeparator(e))},saveAsSeparator:function(){var e=this.state.editValue;this._save(C.default.createChecklistSeparator(e))},saveExact:function(){var e=this.state.editValue;this._save(e)},deleteItem:function(e){e.preventDefault(),e.stopPropagation(),this.state.isDeleted||(this.setState({isDeleted:!0}),this.props.onRemoveItem(this.props.id))},cancel:function(e){e.preventDefault(),e.stopPropagation(),this.executeExtraEventHandlers(this.events.BLUR);var t=this.executeExtraEventHandlers(this.events.STATE_RESET);this.setState(i.default.apply(void 0,[{isEditing:!1}].concat(R(t)))),k.default.itemFocusChange(!1)},handleReadOnlyClick:function(){this.props.readOnly&&this.setState({itemRect:this.rootElement.getBoundingClientRect()})},handleKeyDown:function(e){e.which===h.KEY_RETURN&&e.preventDefault(),this.executeExtraEventHandlers(this.events.KEY_DOWN,[e])},handleChange:function(e){var t=this,n=e.target,r=Math.abs(n.value.length-this.state.editValue.length)>1,i=n.value!==this.state.editValue;this.setState({editValue:n.value},function(){new m.default.Promise(function(e){var i=t.getInputMinHeight();t.state.editValue?S.default.adjustHeight(n,i,r,e):(S.default.setHeight(n,i),e())}).finally(function(){t.executeExtraEventHandlers(t.events.AFTER_INPUT),t.executeExtraEventHandlers(t.events.CURSOR_POSITION_CHANGE,[i])})})},isDraggable:function(){return!(this.state.isEditing||this.state.isDeleted||this.props.readOnly)},convertToIssue:function(){var e=this;AP.jira.openCreateIssueDialog(function(t){if(t&&t[0]&&t[0].key){var n="(Converted to "+t[0].key+") "+e.props.label;e.props.onToggleAndSaveItemSummary(e.props.id,n,!0),e.props.panelPosition!==M.default.PANEL_POSITION.RIGHT&&setTimeout(function(){AP.flag.create({type:"success",close:"auto",body:"Checklist item has been converted to a "+t[0].fields.issuetype.name+" and marked completed"})},1800)}},{pid:_.default.projectId,fields:{summary:this.props.label,description:"Created from checklist item in "+_.default.issueKey}})},render:function(){var e=this,t=(0,u.default)({completed:this.props.isComplete,editing:this.state.isEditing,"statuses-disabled":!this.props.statusesEnabled,"todo-item":!0}),n=void 0;this.state.isEditing&&this.state.editValue.length>0&&(n=o.default.createElement(O.default,{buttonsSpacing:"compact",onCancel:this.cancel,onSave:this.saveAsToDo,onSaveAsSeparator:this.saveAsSeparator}));var i=this.props,a=i.toggleDate,l=i.toggleUser,d=i.toggleUserAccountId,h=null;if(a&&(l||d)){var m=this.state.usersData.byAccountId,k=(0,r.default)(m,d+".displayName",l),_=new Date(parseInt(a,10)),I=_.getMinutes()<10?"0"+_.getMinutes():_.getMinutes(),P=s.default.datepicker.formatDate("d M yy ",_)+_.getHours()+":"+I,S=this.props.isComplete?"Checked":"Unchecked";h=k?S+" by "+k+" on "+P:S+" on "+P}var w=void 0,A=void 0,x=void 0,j=void 0;this.props.readOnly||(A=o.default.createElement("span",{className:"item-action-button",onClick:this.handleEditStart,title:"Edit item"},o.default.createElement(v.default,{size:"medium"})),j=o.default.createElement("span",{className:"item-action-button",onClick:this.deleteItem,title:"Delete item"},o.default.createElement(g.default,{size:"medium"})),this.props.renderConvertToIssue&&(x=o.default.createElement("span",{className:"item-action-button",onClick:this.convertToIssue,title:"Convert item to Jira issue"},o.default.createElement(y.default,{size:"medium"}))),this.props.statusesEnabled&&(w=o.default.createElement("span",{className:"item-action-button drag-handler",title:"Click anywhere on an item and drag it to reorder your tasks."},o.default.createElement("span",null),o.default.createElement("span",null),o.default.createElement("span",null),o.default.createElement("span",null),o.default.createElement("span",null),o.default.createElement("span",null),o.default.createElement("span",null),o.default.createElement("span",null),o.default.createElement("span",null))));var N=this.isDraggable(),M=void 0,D=void 0,R=void 0;if(this.props.statusesEnabled||(R=o.default.createElement("span",{className:"visible-drag-handler",title:"Click anywhere on an item and drag it to reorder your tasks."})),this.state.isEditing){var U=(0,u.default)({"is-real-item":!C.default.isChecklistSeparator(this.state.label),"todo-item-edit-section":!0}),B=(0,u.default)({"has-save-options":Boolean(n),"todo-item-input-container":!0});D=o.default.createElement("div",{className:"edit-container todo-item-text-container"},o.default.createElement("div",{className:U},o.default.createElement("div",{className:B},o.default.createElement(T.default,{ref:function(t){e.editInput=c.default.findDOMNode(t)},className:"text-field edit-item-field",value:this.state.editValue,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange})),o.default.createElement("div",{className:"todo-item-save-options"},n)))}else this.editInput=null;var L={display:"table",width:"100%",height:"30px"},F=this.props.description&&o.default.createElement(E.TodoItemDescription,{description:this.props.description,fetchedIssues:this.state.issuesData.fetchedIssues,forSeparator:C.default.isChecklistSeparator(this.state.label)});if(C.default.isChecklistSeparator(this.state.label))this.state.isEditing||(D=o.default.createElement("div",{className:"todo-item-text-container"},o.default.createElement("span",{className:"separator-content",onClick:this.props.readOnly?this.handleReadOnlyClick:this.handleEditStart},this.linkify(C.default.removeChecklistSeparator(this.state.label),this.state.issuesData.fetchedIssues),o.default.createElement("span",{className:"separator-content-line-separator",key:"line-separator"})),F,o.default.createElement("div",{className:"hover-options",style:this.props.style},w,j,A))),M=o.default.createElement("div",{className:"view",style:{display:"table-cell"}},o.default.createElement("div",{style:L},R,D));else{this.state.isEditing||(D=o.default.createElement("div",{className:"todo-item-text-container"},o.default.createElement("span",{className:"item-content",onClick:this.props.readOnly?this.handleReadOnlyClick:this.handleEditStart},this.linkify(this.state.label,this.state.issuesData.fetchedIssues)),F,o.default.createElement("span",{className:"hover-options",style:this.props.style},w,j,x,A)));var H=o.default.createElement("div",{className:"todo-item-checkbox"},o.default.createElement(f.CheckboxStateless,{isChecked:this.props.isComplete,onChange:this.props.readOnly?this.handleReadOnlyClick:this.handleToggle})),K=o.default.createElement(b.TodoItemStatus,{onChange:this.handleStatusChange,onClick:function(){e.props.readOnly&&e.handleReadOnlyClick()},readOnly:this.props.readOnly,statuses:this.props.statuses,statusName:this.props.status}),q=void 0;q=this.props.statusesHaveCheckbox?o.default.createElement("div",{className:"todo-item-toggle-elements-container"},H,K):this.props.statusesEnabled?K:H,M=o.default.createElement("div",{className:"view",title:h,style:{display:"table-cell"}},o.default.createElement("div",{style:L},R,o.default.createElement("div",{style:{display:"table-cell",verticalAlign:"top",paddingTop:"3px"}},q),D))}var V=(0,u.default)("todo-item-inner",{draggable:N}),Y={};return this.props.isComplete&&!this.state.isEditing&&(Y.color=p.colors.N90),o.default.createElement("li",{className:t,"data-id":this.props.id,style:Y,ref:function(t){e.rootElement=t}},o.default.createElement("div",{className:V},M,this.renderReadOnlyMessage()),this.renderCalendar(),this.renderMentionPicker())},renderReadOnlyMessage:function(){var e=this.state.itemRect;if(!e)return null;var t=Math.floor(.7*e.width),n=Math.floor((e.width-t)/2),r={left:e.left+n+"px",top:e.top-10+"px",maxWidth:t+"px"};return o.default.createElement(P.default,{id:"readonly-box-"+this.props.id,onBlur:this.hideReadOnlyMessage,style:r},o.default.createElement("p",null,this.props.readOnlyMessage))}});t.default=B,e.exports=t.default},704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TodoItemDescription=void 0;var r=d(n(0)),i=d(n(2)),a=d(n(475)),s=d(n(12)),o=d(n(34)),l=d(n(242)),u=d(n(999)),c=d(n(35));function d(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)(s.default.hostBaseUrl);t.TodoItemDescription=r.default.createClass({displayName:"TodoItemDescription",propTypes:{description:i.default.string.isRequired,fetchedIssues:i.default.object.isRequired,forSeparator:i.default.bool.isRequired},mixins:[f],getInitialState:function(){return{isExpanded:!1}},onTriggerClick:function(){this.setState({isExpanded:!this.state.isExpanded})},render:function(){var e=this.state.isExpanded?"Hide":"Show",t=this.state.isExpanded?r.default.createElement(l.default,null):r.default.createElement(u.default,null),n=(0,c.default)({"todo-item-description-content":!0,hidden:!this.state.isExpanded});return r.default.createElement("div",{className:"todo-item-description"},r.default.createElement(o.default,{appearance:"link",className:"todo-item-description-trigger",iconAfter:t,onClick:this.onTriggerClick,spacing:"compact"},e," description"),r.default.createElement("div",{className:n},this.linkify(this.props.description,this.props.fetchedIssues)))}})},705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(19)),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(0));s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),i(t,[{key:"getLozengeClasses",value:function(){var e=["aui-lozenge aui-lozenge-subtle","jira-macro-single-issue-export-pdf"],t={green:"aui-lozenge-success","blue-gray":"aui-lozenge-complete",yellow:"aui-lozenge-current"},n=(0,r.default)(this.props.issue,"fields.status.statusCategory.colorName");return n&&t[n]&&e.push(t[n]),e}},{key:"render",value:function(){var e=this.props.issue.fields,t=this.getLozengeClasses();return a.default.createElement("span",{className:"jira-issue-macro","data-jira-key":this.props.issueKey},a.default.createElement("a",{href:this.props.href,className:"jira-issue-macro-key issue-link",title:e.summary,target:"_blank"},a.default.createElement("img",{className:"icon",src:e.issuetype.iconUrl}),this.props.issueKey),a.default.createElement("span",{className:t.join(" ")},e.status.name))}}]),t}();t.default=o,e.exports=t.default},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(74)),a=o(n(1)),s=o(n(0));o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),r(t,[{key:"getAppearance",value:function(){var e=(0,a.default)(this.props.isoDateString),t=(0,a.default)().startOf("day");return e.isBefore(t)?"moved":"inprogress"}},{key:"render",value:function(){var e=this.getAppearance();return s.default.createElement(i.default,{appearance:e,isBold:!1},this.props.originalDateString)}}]),t}();t.default=l,e.exports=t.default},707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(s(n(2)),s(n(0))),a=s(n(708));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){return this.props.isUserMention?i.default.createElement(a.default,{hostBaseUrl:this.props.hostBaseUrl,userIdentifier:this.props.mentionContent}):i.default.createElement("span",null,"@",this.props.mentionContent)}}]),t}();t.default=o,e.exports=t.default},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(74)),i=(o(n(2)),o(n(0))),a=o(n(14)),s=o(n(53));function o(e){return e&&e.__esModule?e:{default:e}}var l=i.default.createClass({displayName:"UserMention",mixins:[a.default.connect(s.default,"usersData")],getRenderData:function(){var e=this.props.userIdentifier,t=this.state.usersData.byAccountId[e];return t?{isValidUser:!0,textToRender:t.displayName}:{isValidUser:!1,textToRender:e}},render:function(){var e=this.getRenderData(),t=e.isValidUser,n=e.textToRender;if(!t)return i.default.createElement("span",{className:"todo-item-token-text"},"@",n);var a=encodeURIComponent(this.props.userIdentifier),s=this.props.hostBaseUrl+"/secure/ViewProfile.jspa?accountId="+a;return i.default.createElement("a",{href:s,className:"todo-item-user-mention-link",target:"_blank"},i.default.createElement(r.default,{appearance:"default",isBold:!0},"@",n))}});t.default=l,e.exports=t.default},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TodoItemStatus=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=d(n(0)),a=(d(n(2)),n(270)),s=d(a),o=d(n(34)),l=d(n(74)),u=d(n(35)),c=d(n(242));function d(e){return e&&e.__esModule?e:{default:e}}t.TodoItemStatus=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dropdownPosition:"right middle",isOpen:!1},n.onOpenChange=n.onOpenChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.rootElement.getBoundingClientRect().top;32*this.getStatuses().length/2>e+20&&this.setState({dropdownPosition:"right top"})}},{key:"getLozengeTrigger",value:function(){var e=this.props,t=e.statuses,n=e.statusName,r=(t.find(function(e){return e.name===n})||{appearance:"default"}).appearance;return i.default.createElement("span",{className:"todo-item-status-lozenge",title:n},i.default.createElement(l.default,{appearance:r,isBold:!1},n))}},{key:"onOpenChange",value:function(e){var t=!this.props.readOnly&&e.isOpen;this.setState({isOpen:t}),this.props.onClick(e)}},{key:"render",value:function(){var e=this,t=this.getStatuses().map(function(t){var n=t.appearance,r=t.name;return i.default.createElement(a.DropdownItem,{isDisabled:!1,isSelected:e.props.statusName===r,key:r,onClick:function(){e.props.statusName!==r&&e.props.onChange(r)}},i.default.createElement(l.default,{appearance:n,isBold:!1},r))}),n=(0,u.default)({"todo-item-status":!0,"todo-item-status-open":this.state.isOpen}),r=i.default.createElement(o.default,{iconBefore:i.default.createElement(c.default,null)},this.getLozengeTrigger());return i.default.createElement("div",{className:n,ref:function(t){return e.rootElement=t}},i.default.createElement(s.default,{onOpenChange:this.onOpenChange,position:this.state.dropdownPosition,shouldFlip:!1,trigger:r,triggerType:"default"},i.default.createElement(a.DropdownItemGroup,null,t)))}},{key:"getStatuses",value:function(){return this.props.readOnly?[]:this.props.statuses}}]),t}()},713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(15));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.createClass({displayName:"TodoInput",render:function(){return r.default.createElement("textarea",this.props)},componentDidMount:function(){var e=i.default.findDOMNode(this);if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}}});t.default=s,e.exports=t.default},714:function(e,t,n){},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(41));var i=function(e,t){var n=e.accountId,i=e.displayName,a=new RegExp(r.default.MENTION_INVALID_CHARACTERS.source,"g"),s=i.replace(a,""),o=s,l=function(e){return t[e]},u=function(e){return void 0===l(e)};if(!u(s)&&l(s)!==n)for(var c=2;c<1e3&&(!u(o=""+s+c)&&l(o)!==n);c++);return t[o]=n,o};t.default={updateMentionText:i,replaceAccountIdWithMentionText:function(e,t,n){var a=new RegExp(r.default.MENTION_REGEXP.source,"g");return e.replace(a,function(e,r,a){var s=t[a];return s?r+"@"+i(s,n):e})},replaceMentionTextWithAccountId:function(e,t){var n=new RegExp(r.default.MENTION_REGEXP.source,"g");return e.replace(n,function(e,n,r){var i=t[r];return i?n+"@"+i:e})}},e.exports=t.default},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(66)),i=l(n(177)),a=l(n(55)),s=l(n(67)),o=l(n(21));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(0,i.default)(e,function(e){return!a.default.isChecklistSeparator(e.summary)})}function c(e){return e.reduce(function(e,t){return t.fixed||e++,e},0)}function d(e){return c(u(e))}t.default={getRealItems:u,getItemsAsText:function(e){return e.reduce(function(e,t){return t&&t.summary&&(0,r.default)(t.summary)&&(e+=t.summary+"\r\n"),e},"")},hasRealItems:function(e){return u(e).length>0},getCheckedRealItemsNum:function(e){return function(e){return e.reduce(function(e,t){return t.fixed&&e++,e},0)}(u(e))},getProgressPercent:function(e){var t=u(e).length,n=d(e);return 0===t?0:Math.round((t-n)/t*100)},getProgressText:function(e){var t=u(e).length,n=d(e);return 0===t?"":"Checklist: "+(t-n)+"/"+t},getCompletedText:function(e){return d(e)>0?"Not Completed":"Completed"},getUncheckedRealItemsNum:d,hasActiveRealItems:function(e){return c(u(e))>0},areListsEqual:function(e,t,n){return!e&&!t||e&&0===e.length&&!t||t&&0===t.length&&!e||Boolean(e&&t&&e.length===t.length&&e.every(function(e,r){return s.default.areItemsEqual(e,t[r],n)}))},getItemsUpToLimit:function(e){if(o.default.isProVersion())return e;var t=o.default.getItemsLimitForFreeVersion(),n=[],r=0;return e.forEach(function(e){var i=e.summary;a.default.isChecklistSeparator(i)?n.push(e):(r+=1)<=t&&n.push(e)}),n},getItemsForCustomFields:function(e){return e.filter(function(e){return!e.checklistId})}},e.exports=t.default}});
//# sourceMappingURL=issue-panel.js.map