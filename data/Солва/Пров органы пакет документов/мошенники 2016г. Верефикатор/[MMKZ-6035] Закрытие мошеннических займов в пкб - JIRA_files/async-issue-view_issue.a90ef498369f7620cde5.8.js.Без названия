try{window.performance.mark("async-issue-view~issue.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./src/packages/issue-table/src/model/fields/json-fields/custom-fields/types.js":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a});var r="ONGOING",o="COMPLETED",i="PAUSED",a="com.atlassian.servicedesk:sd-sla-field"},"./src/packages/issue/fields/assignee/src/common/ui/assignee-avatar/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/@atlaskit/avatar/components/Avatar.js"),a=function(e){var t=e.url,n=e.name;return t?o.a.createElement(i.a,{size:"small",src:t,name:n}):o.a.createElement(i.a,{size:"small",name:n})};n.d(t,"a",function(){return a})},"./src/packages/issue/fields/components/field-heading/src/index.js":function(e,t,n){"use strict";var r=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),o=n("./node_modules/@atlaskit/theme/index.js"),i=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),a=n("./src/packages/issue/issue-view/src/feature-flags.js");function s(){var e=d(["\n    display: flex;\n    align-items: center;\n    margin-right: ","px;\n    height: ","px;\n"]);return s=function(){return e},e}function c(){var e=d(["\n    ",";\n    ",";\n"]);return c=function(){return e},e}function u(){var e=d(["\n    ",";\n    color: ",";\n"]);return u=function(){return e},e}function l(){var e=d(["\n    ",";\n    color: ",";\n    line-height: ","px;\n"]);return l=function(){return e},e}function f(){var e=d(["\n    margin-bottom: ","px !important;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n"]);return f=function(){return e},e}function p(){var e=d(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return p=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=Object(r.css)(p()),b=r.default.div(f(),.5*i.e),y=Object(r.css)(l(),o.typography.h300(),o.colors.N300,1.5*i.e),h=Object(r.css)(u(),o.typography.h200(),o.colors.N800),g=r.default.h2(c(),m,function(){return Object(a.z)()?h:y});r.default.div(s(),1.25*i.e,1.5*i.e);n.d(t,"a",function(){return b}),n.d(t,"b",function(){return g})},"./src/packages/issue/fields/components/user-picker/src/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/@atlaskit/user-picker/components/UserPicker.js"),a=n("./node_modules/rxjs/Rx.js"),s=n("./node_modules/lodash/noop.js"),c=n.n(s),u=n("./node_modules/lodash/uniq.js"),l=n.n(u);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d="USER_PICKER_EMPTY",m=[{id:"wongben",name:"Ben Wong",avatarUrl:"https://secure.gravatar.com/avatar/fb04c4bfc16eb79c46ff36b81c1edd0e?d=mm&s=48"},{id:"bhaswell",name:"Blake Haswell",avatarUrl:"https://secure.gravatar.com/avatar/360b7f812425d27dc16c6aaa4d44f9c5?d=mm&s=48",displayName:"The original one"},{id:"tian",name:"Tian Pu",avatarUrl:"https://secure.gravatar.com/avatar/8a70761fff105802fdd1d7164c15905b?d=mm&s=48"},{id:"dkerris",name:"Daniel Kerris",avatarUrl:"https://secure.gravatar.com/avatar/5ceac5754b9c13980c19cf6e6fef1e8b?d=mm&s=48"},{id:"dtang",name:"David Tang",avatarUrl:"https://secure.gravatar.com/avatar/70dead9d18dbac03a205c122041313f3?d=mm&s=48"},{id:"cfletcher",name:"Cameron Fletcher",avatarUrl:"https://secure.gravatar.com/avatar/905df358c5fe76aa63171d731c89c64d?d=mm&s=48"},{id:"bhaswell2",name:"Blake Has-unwell",avatarUrl:"https://secure.gravatar.com/avatar/360b7f812425d27dc16c6aaa4d44f9c5?d=mm&s=48"},{id:"bhaswell3",name:"Blake Hasnotwell",avatarUrl:"https://secure.gravatar.com/avatar/360b7f812425d27dc16c6aaa4d44f9c5?d=mm&s=48"},{id:"bhaswell4",name:"Blake Hamwell",avatarUrl:"https://secure.gravatar.com/avatar/360b7f812425d27dc16c6aaa4d44f9c5?d=mm&s=48"},{id:"bhaswell5",name:"Blake Hamsell",avatarUrl:"https://secure.gravatar.com/avatar/360b7f812425d27dc16c6aaa4d44f9c5?d=mm&s=48"},{id:"bhaswell6",name:"Blake HasAReallyLongLastNameWhichTakesALotOfSpace",avatarUrl:"https://secure.gravatar.com/avatar/360b7f812425d27dc16c6aaa4d44f9c5?d=mm&s=48"},{id:"bhaswell7",name:"BLAKE HAS CAPITAL LETTERS IN HIS NAME",avatarUrl:"https://secure.gravatar.com/avatar/360b7f812425d27dc16c6aaa4d44f9c5?d=mm&s=48"}];!function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}}({},m[0],{},{displayName:"Assign to me"});function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S={id:d,name:""},C=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,k(t).call(this,e))).state={suggestions:[],isDropdownVisible:!0,wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1},n.onChange=function(e){if(e&&!Array.isArray(e)&&!n.isCurrentValue(e)){var t=e.id,r=n.props.initialOptions.find(function(e){return e.id===t});r?n.props.onChange(r.id?r:null):t===d?n.props.onChange(null):n.props.onChange(e)}},n.onSuggestionSelect=function(e,t){n.setState({suggestions:[],wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1}),n.onChange(Array.isArray(e)?null:e),t?n.props.onSelection(t):n.props.onSelection()},n.onBlur=function(){n.setState({suggestions:[],isDropdownVisible:!1,wasFocused:!1,isLoading:!1,wasQueryCleared:!1}),n.state.wasCleared?n.onSuggestionSelect(S):n.props.onCancel()},n.onFocus=function(e){n.setState({isDropdownVisible:!0,isLoading:!0,wasFocused:!0,wasCleared:!1}),n.query$.next({query:"",sessionId:e})},n.onQueryChange=function(e,t){n.setState({wasFocused:!1,isLoading:!0,wasQueryCleared:!e}),n.query$.next({query:e||"",sessionId:t})},n.onClear=function(){n.setState({wasCleared:!0}),n.onChange(S)},n.getEmptyValue=function(){return n.props.emptyOption?v({},n.props.emptyOption,{id:d}):null},n.getInitialAndEmptyOptionSuggestions=function(){var e=n.props,t=e.initialOptions,r=e.emptyOption,o=n.state,i=o.wasFocused,a=o.wasQueryCleared,s=i&&t.length>0,c=r&&!s&&a,u=n.getEmptyValue(),l=c&&u?[u]:[];return[].concat(h(s?t:[]),l)},n.getSuggestions=function(){var e=n.getInitialAndEmptyOptionSuggestions(),t=l()(e.map(function(e){return e.id})),r=n.state.suggestions.filter(function(e){return!t.includes(e.id)});return[].concat(h(e),h(r)).map(function(e){var t=e.displayName,n=y(e,["displayName"]);return t?v({},n,{publicName:t}):n})},n.subscription=void 0,n.query$=void 0,n.handleSuggestions=function(e){if(n.state.isDropdownVisible){var t=n.state.wasFocused?e.filter(function(e){return!n.isCurrentValue(e)}):e;n.setState({isLoading:!1,suggestions:t})}},n.query$=new a.Subject,n.subscription=n.query$.debounceTime(300).switchMap(function(e){var t=e.query,r=e.sessionId;return n.props.fetchSuggestions(t,r).catch(function(){return[]})}).subscribe(n.handleSuggestions),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,r["Component"]),function(e,t,n){t&&j(e.prototype,t),n&&j(e,n)}(t,[{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"isCurrentValue",value:function(e){return e?this.props.value?e.id===this.props.value.id:e.id===d:null===this.props.value}},{key:"render",value:function(){var e=this.getSuggestions(),t=this.props.value||this.getEmptyValue();return o.a.createElement(i.a,{value:t,options:e,open:this.state.isDropdownVisible,fieldId:this.props.fieldId,menuMinWidth:this.props.menuMinWidth,menuPortalTarget:this.props.portalElement,width:this.props.width,appearance:"compact",isClearable:!!this.props.value,isDisabled:this.props.isDisabled,placeholder:this.props.placeholder,isLoading:this.state.isLoading&&this.state.isDropdownVisible,onBlur:this.onBlur,onClear:this.onClear,onFocus:this.onFocus,onInputChange:this.onQueryChange,onSelection:this.onSuggestionSelect})}}]),t}();C.displayName="UserPickerView",C.displayName="UserPickerView",C.defaultProps={isDisabled:!1,value:null,initialOptions:[],emptyOption:null,width:void 0,menuMinWidth:void 0,portalElement:void 0,fetchSuggestions:function(){return Promise.resolve([])},onChange:c.a,onCancel:c.a,onSelection:c.a};t.a=C},"./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n("./node_modules/lodash/noop.js"),i=n.n(o),a=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),s=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=n("./src/packages/platform/utils/fetch/src/utils.js"),u=n("./src/packages/platform/observability/product-analytics-bridge/src/index.js"),l=n("./src/packages/platform/controllers/tenant-context/src/index.js"),f=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),p=n("./src/packages/platform/observability/browser-metrics/src/index.js"),d=n("./src/packages/platform/utils/fetch/src/index.js");function m(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e,t){return{fields:b({},e,t)}},h=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,s,"next",e)}function s(e){m(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,o){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d.j)("".concat(o,"/rest/api/3/issue/").concat(t,"/"),{body:JSON.stringify(y(n,r))}));case 1:case"end":return e.stop()}},e)}));return function(t,n,r,o){return e.apply(this,arguments)}}(),g=function(e,t){var n=Object(p.a)(),r={key:"issue-field.save-value",reporters:[function(){return{fieldKey:e,fieldType:t}}]};return n.start(r),{stop:function(){return n.stop(r)},cancel:function(){return n.cancel(r.key)}}};function v(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return j});var j=function(e){var t=O(Object(l.m)(),1)[0].tenantContext.baseUrl||"",n=e.issueKey,o=e.fieldKey,p=e.fieldType,d=e.initialValue,m=e.saveField,b=void 0===m?h:m,y=e.onSubmit,j=void 0===y?i.a:y,w=e.onSuccess,k=void 0===w?i.a:w,E=e.onFailure,S=void 0===E?i.a:E,C=O(Object(f.c)({issueKey:n,fieldKey:o}),2),P=C[0],I=C[1].setFieldValue,x=void 0!==P?P:d,_=O(Object(r.useState)(null),2),M=_[0],T=_[1],A=O(Object(r.useState)(!1),2),D=A[0],L=A[1],N=Object(r.useCallback)(function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){v(i,r,o,a,s,"next",e)}function s(e){v(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(r,i,l){var f,d,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f={fieldKey:o,fieldType:p},d=g(Object(s.i)(o)(o),Object(s.i)(p)(p)),L(!0),T(null),e.prev=4,j(x,r,i,l),I(n,o,r),e.next=9,b(n,o,r,t);case 9:k(r),d.stop(),Object(u.t)(l,"field updated",f),Object(u.r)(l,"field updateSucceeded",f),e.next=24;break;case 15:e.prev=15,e.t0=e.catch(4),S(e.t0),I(n,o,x),T(e.t0),(m=e.t0 instanceof c.a)||s.h.safeError("issue-field.save-value","Failed to update field ".concat(o," of type ").concat(p),new a.a({event:e.t0,type:a.j,category:a.b,app:a.g,eventNameSuffix:a.f})),d.cancel(),Object(u.r)(l,"field updateFailed",{fieldKey:o,fieldType:p,isValidationError:m});case 24:L(!1);case 25:case"end":return e.stop()}},e,null,[[4,15]])}));return function(t,n,r){return e.apply(this,arguments)}}(),[o,p,j,x,I,n,b,t,k,S]);return[{value:x,loading:D,error:M},{saveValue:N}]}},"./src/packages/issue/fields/field-base/src/services/field-config-service/main.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n("./src/packages/platform/utils/fetch/src/index.js"),i=n("./src/packages/platform/controllers/tenant-context/src/index.js"),a=n("./node_modules/react-sweet-state/lib/esm/index.js"),s=n("./node_modules/reselect/lib/index.js");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var l=Object(a.c)({name:"issue-field-config",initialState:{},actions:{update:function(e,t){return function(){var n=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function n(r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(0,r.setState)(c({},e,t));case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}}}),f=Object(s.createSelector)(function(e,t){return e[t.issueKey]},function(e,t){return t.fieldKey},function(e,t){return null==e?e:e[t]?e[t]:null}),p=Object(a.b)(l,{selector:f});function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,s,"next",e)}function s(e){h(i,r,o,a,s,"throw",e)}a(void 0)})}}n.d(t,"a",function(){return j});var v=function(){return'\n  query fieldConfigurationQuery($issueKey: String) {\n    issue(issueIdOrKey: $issueKey, latestVersion: true, screen: "view") {\n      fields {\n        key\n        schema {\n          type\n          custom\n          customId\n          system\n          renderer\n        }\n        autoCompleteUrl\n        allowedValues\n        operations\n        required\n        editable\n        title\n      }\n    }\n  }'},O=function(){var e=g(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.i)("".concat(n,"/rest/graphql/1/"),{body:JSON.stringify({query:v(),variables:{issueKey:t}})});case 2:if(!((r=e.sent)&&r.data&&r.data.issue&&r.data.issue.fields)){e.next=5;break}return e.abrupt("return",r.data.issue.fields.reduce(function(e,t){return b({},e,y({},t.key,{autoCompleteUrl:t.autoCompleteUrl,allowedValues:t.allowedValues,isEditable:t.editable,isRequired:t.required,schema:t.schema,title:t.title}))},{}));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=new Set;return function(t,n){var o=d(p({issueKey:t,fieldKey:n}),2),a=o[0],s=o[1].update,c=d(Object(i.g)(),1)[0],u=Object(r.useCallback)(g(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.add(t),n.next=3,O(t,c);case 3:r=n.sent,s(t,r),e.delete(t);case 6:case"end":return n.stop()}},n)})),[c,t,s]);return Object(r.useEffect)(function(){void 0!==a||e.has(t)||u()},[t,a,u]),[a]}}()},"./src/packages/issue/fields/field-base/src/services/field-value-service/main.js":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return f});var r=n("./node_modules/react-sweet-state/lib/esm/index.js");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={setFieldValue:function(e,t,n){return function(r){var a=r.setState,s=r.getState;a(i({},e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},s()[e],i({},t,n))))}},setIssue:function(e,t){return function(n){(0,n.setState)(i({},e,t))}}},s=Object(r.c)({name:"issue-fields",initialState:{},actions:a}),c=Object(r.d)(s,{displayName:"FieldsValueActionsSubscriber",selector:null}),u=function(e,t){var n=t.issueKey,r=t.fieldKey;return e[n]&&e[n][r]},l=Object(r.b)(s,{selector:u}),f=Object(r.d)(s,{selector:u})},"./src/packages/issue/fields/security-level/src/common/ui/styled.js":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),o=n("./node_modules/@atlaskit/theme/index.js");function i(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    display: flex;\n    align-items: center;\n    color: ",";\n"]);return i=function(){return e},e}var a=r.default.div(i(),function(e){return e.isActive?o.colors.N0:e.hasSecurityLevel?o.colors.R400:null})},"./src/packages/issue/fields/status/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-intl/lib/index.es.js"),a=n("./node_modules/@atlaskit/select/PopupSelect/Select.js"),s=n("./node_modules/lodash/noop.js"),c=n.n(s),u=n("./src/packages/common-legacy-do-not-add-anything-new/src/blanket/index.js"),l=n("./src/packages/platform/observability/product-analytics-bridge/src/index.js"),f=n("./src/packages/issue/fields/status/src/common/ui/status-lozenge/index.js"),p=Object(i.defineMessages)({noPermission:{id:"issue-field-status.status-view.no-permission",defaultMessage:"You don't have permission to transition this issue",description:"Message shown to the user when they have tried to load a list of transitions and they don't have permission"},cannotLoadTransitions:{id:"issue-field-status.status-view.cannot-load-transitions",defaultMessage:"We couldn't load the statuses and transitions",description:"Message shown when we failed to load transitions from backend"}}),d=n("./node_modules/@atlaskit/spinner/Spinner/index.js"),m=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),b=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function y(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    padding: ","px;\n    text-align: center;\n"]);return y=function(){return e},e}var h=m.default.div(y(),b.e),g=function(){return o.a.createElement(h,null,o.a.createElement(d.a,null))};g.displayName="LoadingSpinner";var v=n("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),O=n.n(v),j=n("./node_modules/@atlaskit/theme/index.js");function w(){var e=E(["\n    display: inline-flex;\n    border-radius: 3px;\n    box-shadow: 0 0 0 0 ",";\n    animation: ",";\n"]);return w=function(){return e},e}function k(){var e=E(["\n    to {\n        box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);\n    }\n"]);return k=function(){return e},e}function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S=Object(m.keyframes)(k()),C=m.default.div(w(),j.colors.G400,function(e){return e.shouldShow?"".concat(S," 1.45s cubic-bezier(0.5, 0, 0, 1)"):"none"});function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=x(this,(e=_(t)).call.apply(e,[this].concat(o)))).state={shouldShow:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),function(e,t,n){t&&I(e.prototype,t),n&&I(e,n)}(t,[{key:"componentDidUpdate",value:function(e){e.status.statusCategory.id!==this.props.status.statusCategory.id&&this.setState({shouldShow:3===this.props.status.statusCategory.id})}},{key:"render",value:function(){return o.a.createElement(C,{shouldShow:this.state.shouldShow},this.props.children)}}]),t}();T.displayName="Pulse";var A=n("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),D=n("./node_modules/@atlaskit/button/components/Button.js");var L=function(e){return"\n    &:not(:active), &:disabled {\n        background: ".concat(e.background," !important;\n        color: ").concat(e.color," !important;\n    }\n    \n    &:hover:not(:active) {\n        background: ").concat(e.backgroundHover," !important;\n        color: ").concat(e.color," !important;\n    }\n")},N={default:{background:j.colors.N20A,backgroundHover:j.colors.N30A,color:j.colors.N400},todo:{background:j.colors.N40,backgroundHover:j.colors.N50,color:j.colors.N800},inProgress:{background:j.colors.B400,backgroundHover:j.colors.B500,color:j.colors.N0},done:{background:j.colors.G400,backgroundHover:j.colors.G500,color:j.colors.N0}},R=Object(A.a)(D.b,{target:"elro8wh0"})({name:"35ezg3",styles:"font-weight:600;"}),F=Object(A.a)(R,{target:"elro8wh1"})(function(e){return!e.isSelected&&L(N.default)},";"),V=Object(A.a)(R,{target:"elro8wh2"})(function(e){return!e.isSelected&&L(N.todo)},";"),U=Object(A.a)(R,{target:"elro8wh3"})(function(e){return!e.isSelected&&L(N.inProgress)},";"),B=Object(A.a)(R,{target:"elro8wh4"})(function(e){return!e.isSelected&&L(N.done)},";"),K=function(e){var t=function(e){switch(e){case 2:return V;case 3:return B;case 4:return U;default:return F}}(e.status.statusCategory.id);return o.a.createElement("div",{ref:e.targetRef},o.a.createElement(T,{status:e.status},o.a.createElement(t,{isDisabled:!e.isEditable,iconAfter:o.a.createElement(O.a,null)},e.status.name)))};K.displayName="StatusButton";var W=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),H=n.n(W),z=Object(i.defineMessages)({globalTransition:{id:"issue-field-status.status-view.transition.with-label.global-transition",defaultMessage:"Transition to",description:"Global transition button label. If button is clicked - status will change to the selected one"}});function q(){var e=Z(["\n    display: inline-flex;\n    align-items: center;\n"]);return q=function(){return e},e}function G(){var e=Z(["\n    flex-shrink: 0;\n    display: flex;\n"]);return G=function(){return e},e}function J(){var e=Z(["\n    flex-grow: 1;\n"]);return J=function(){return e},e}function Q(){var e=Z(["\n    display: flex;\n"]);return Q=function(){return e},e}function Z(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Y=m.default.div(Q()),$=m.default.span(J()),X=m.default.span(G()),ee=m.default.div(q()),te=function(e){return o.a.createElement(Y,null,o.a.createElement($,null,function(e,t){return e.isGlobal?t.formatMessage(z.globalTransition):e.name}(e.transition,e.intl)),o.a.createElement(X,null,o.a.createElement(ee,null,o.a.createElement(H.a,{label:"",size:"small"})),o.a.createElement(f.a,{status:e.transition.to})))};te.displayName="TransitionWithLabel";var ne=Object(i.injectIntl)(te),re=function(e){return o.a.createElement(f.a,{status:e.transition.to})};re.displayName="TransitionWithoutLabel";var oe,ie=function(e){return e.hasLabel?o.a.createElement(ne,{transition:e.transition}):o.a.createElement(re,{transition:e.transition})},ae=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),se="issue-field.status.fetch-transitions",ce="issue-field.status.post-transition",ue="issue-field.status.fetch-view-workflow";function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=[{id:"1",statusCategoryName:"UNDEFINED"},{id:"2",statusCategoryName:"TODO"},{id:"4",statusCategoryName:"IN_PROGRESS"},{id:"3",statusCategoryName:"DONE"}],pe=(le(oe={},"TODO",1),le(oe,"IN_PROGRESS",2),le(oe,"DONE",3),le(oe,"UNDEFINED",4),oe),de=function(e){var t=fe.find(function(t){return t.id===String(e)});return t?t.statusCategoryName:"UNDEFINED"},me=function(e,t){return function(e,t){return pe[de(e.to.statusCategory.id)]-pe[de(t.to.statusCategory.id)]}(e,t)||function(e,t){return(e.to.name||"").toLowerCase().localeCompare((t.to.name||"").toLowerCase())}(e,t)},be=Object(ae.a)(function(e,t){return e.filter(function(e){return!function(e,t){return e.isGlobal&&e.to.id===t}(e,t)})}),ye=function(e,t){return function(e){return e.sort(me)}(function(e,t){return be(e,t)}(e||[],t))},he=Object(ae.a)(function(e){return e.map(function(e){return{label:e.to.name,value:e.id,transition:e}})}),ge=function(e){return he(e)};function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=Object(l.a)("statusField",{onOpen:"openDropdown",onChange:"transitionSelected"})(a.a),Se=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=je(this,(e=we(t)).call.apply(e,[this].concat(o)))).state={isOpen:!1},n.onChildWrapperRefUpdate=function(e){n.childWrapperRef=e},n.onChange=function(e,t,r){Object(l.u)(r,"transitionSelectedStatusField",{hasScreen:e.transition.hasScreen}),n.props.onChange(e.transition,r)},n.onOpen=function(e){Object(l.u)(e,"openDropdownStatusField"),n.props.onOpen(e),n.setState({isOpen:!0})},n.onClose=function(){n.props.onClose(),n.setState({isOpen:!1})},n.childWrapperRef=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,r["Component"]),function(e,t,n){t&&Oe(e.prototype,t),n&&Oe(e,n)}(t,[{key:"componentDidUpdate",value:function(e){!0===e.isSaving&&!1===this.props.isSaving&&this.childWrapperRef&&this.childWrapperRef.children.length>0&&this.childWrapperRef.children[0].focus()}},{key:"renderLozenge",value:function(e){var t=e.isEditable,n=e.isSaving,r=e.error,i=e.targetRef,a=this.props.value;return n?o.a.createElement(u.a,{border:!1},o.a.createElement(f.b,{targetRef:i,status:a,error:r})):o.a.createElement(f.b,{status:a,error:r,isEditable:t,hasHoverState:!0,focused:this.state.isOpen,targetRef:i})}},{key:"renderButton",value:function(e){var t=e.isEditable,n=e.isSaving,r=e.targetRef,i=this.props.value;return n?o.a.createElement(u.a,null,o.a.createElement(K,{targetRef:r,isEditable:t,status:i})):o.a.createElement(K,{targetRef:r,isEditable:t,status:i})}},{key:"renderWithFocusWrapper",value:function(e){return o.a.createElement("div",{ref:this.onChildWrapperRefUpdate},e)}},{key:"renderTarget",value:function(e){var t=e.isEditable,n=e.isSaving,r=e.error,i=e.targetRef,a=this.props,s=a.appearance;if(a.value){if("lozenge"===s)return this.renderWithFocusWrapper(this.renderLozenge({isEditable:t,isSaving:n,error:r,targetRef:i}));if("button"===s)return this.renderWithFocusWrapper(this.renderButton({isEditable:t,isSaving:n,targetRef:i}))}return o.a.createElement("div",null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.footer,r=t.isLoading,i=t.isEditable,a=t.isSaving,s=t.error,c=t.value,u=t.intl.formatMessage,l=t.transitions,f=null!=l,d=ye(l,c.id),m=function(e){return e.every(function(e){return e.isGlobal})}(d||[]);return a||!i?this.renderTarget({isSaving:a,isEditable:i,error:s,targetRef:null}):o.a.createElement(Ee,{noOptionsMessage:function(){return u(f?p.noPermission:p.cannotLoadTransitions)},formatOptionLabel:function(e){return o.a.createElement(ie,{transition:e.transition,hasLabel:!m})},options:ge(d||[]),target:function(t){var n=t.ref;return e.renderTarget({isEditable:i,isSaving:a,error:s,targetRef:n})},isLoading:r,isDisabled:!i,searchThreshold:99999,onChange:this.onChange,onOpen:this.onOpen,onClose:this.onClose,closeMenuOnSelect:!1,components:{LoadingMessage:function(){return o.a.createElement(g,null)}},popperProps:{modifiers:{offset:{offset:"0, 8"},preventOverflow:{boundariesElement:"viewport"}},positionFixed:!0},footer:n})}}]),t}();Se.displayName="StatusView",Se.defaultProps={isEditable:!0,isSaving:!1,onChange:c.a,onOpen:c.a,onClose:c.a};var Ce=Object(i.injectIntl)(Se),Pe=n("./src/packages/platform/ui/error-boundary/src/main.js"),Ie=n("./src/packages/platform/ui/error-boundary/src/index.js"),xe=n("./src/packages/platform/utils/types/src/index.js"),_e=n("./src/packages/navigation-next/src/baskets/navigation/index.js"),Me=n("./src/packages/platform/controllers/tenant-context/src/index.js"),Te=n("./src/packages/platform/observability/browser-metrics/src/index.js"),Ae=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),De=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),Le=n("./src/packages/platform/utils/fetch/src/index.js"),Ne=n("./src/packages/platform/ui/flags/src/index.js"),Re=Object(i.defineMessages)({title:{id:"issue-field-status.services.flags.transition-failed-error.main.title",defaultMessage:"We couldn't update the status",description:"Occurs when a user tries to update an issue's status but fails to do so"},description:{id:"issue-field-status.services.flags.transition-failed-error.main.description",defaultMessage:"Check your network connection, then try reloading the issue.",description:"Occurs when a user tries to update an issue's status but fails to do so"}}),Fe=function(){return{type:"error",title:Re.title,description:Re.description,isAutoDismiss:!0}},Ve=Object(i.defineMessages)({title:{id:"issue-field-status.services.flags.validation-error.main.title",defaultMessage:"Transition failed",description:"Occurs when a user tries to update an issue's status but a validation error occurs"}}),Ue=function(e){return{type:"warning",title:Ve.title,description:{id:"issue-field.status.services.flags.validation-error.main.description",defaultMessage:e},isAutoDismiss:!0}};function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ze(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t,n){return t&&Ge(e.prototype,t),n&&Ge(e,n),e}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=Object(Te.a)(),Ye=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ze(this,qe(t).call(this,e))).componentDidUpdate=function(e){n.props.initialValue&&e.initialValue&&e.initialValue.id!==n.props.initialValue.id&&n.props.initialValue.id!==n.state.value.id&&n.setState({loading:!1,value:n.props.initialValue})},n.resetError=function(){return n.setState({error:null})},n.submit=function(e,t){var r=n.state.value,o=e.to;n.setState({loading:!0,value:o}),n.props.onSubmit(r,o,{transition:e},t)},n.success=function(e,t){n.setState({loading:!1,lastSavedValue:e}),n.props.onSuccess(e,t),Object(l.t)(t,"statusField transitioned","statusField")},n.failure=function(e,t){n.setState({error:e,loading:!1,value:n.state.lastSavedValue||n.props.value||n.props.initialValue}),n.props.onFailure();var r=e instanceof Le.b;r?n.props.flagService.showFlag(Ue(e.message)):n.props.flagService.showFlag(Fe()),Object(l.r)(t,"statusField postTransitionFailed",{validationError:r,message:e.message})},n.cancel=function(){n.setState({loading:!1,value:n.props.value||n.props.initialValue}),n.props.onEditCancel()},n.transitionStatus=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){He(i,r,o,a,s,"next",e)}function s(e){He(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,r){var o,i,a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.props,i=o.issueKey,a=o.baseUrl,s=o.xsrfToken,c=t.to,n.submit(t,r),e.prev=3,!t.hasScreen){e.next=8;break}new Ae.a(a,null,t.id,s,i).onDialogSuccess(function(){return n.success(c,r)}).onDialogCancel(n.cancel).show(),e.next=13;break;case 8:return Ze.start({key:ce}),e.next=11,Object(Le.i)("".concat(a,"/rest/api/2/issue/").concat(i,"/transitions"),{body:JSON.stringify({transition:t})});case 11:Ze.stop({key:ce}),n.success(c,r);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),Ze.cancel(ce),De.a.safeError(ce,e.t0),n.failure(e.t0,r);case 20:case"end":return e.stop()}},e,null,[[3,15]])}));return function(t,n){return e.apply(this,arguments)}}(),n.api={transitionStatus:n.transitionStatus,resetError:n.resetError};var r=e.value||e.initialValue;if(null==r)throw new Error("Either value or initialValue prop is required.");return n.state={value:r,lastSavedValue:r,loading:!1,error:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,r["Component"]),Je(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.loading||!e.value?null:{value:e.value}}}]),Je(t,[{key:"render",value:function(){return this.props.children(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.state,{},this.api))}}]),t}();Ye.displayName="StatusService",Ye.defaultProps={onSubmit:c.a,onSuccess:c.a,onFailure:c.a,onEditStart:c.a,onEditCancel:c.a};var $e=Object(Ne.withFlagService)(Ye),Xe=n("./node_modules/lodash/isEqual.js"),et=n.n(Xe),tt=n("./src/packages/platform/observability/analytics-web-react/src/index.js"),nt=n("./src/packages/issue/issue-view/src/common/util/errors/index.js");function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach(function(t){at(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=Object(Te.a)(),dt=function(e,t){return"".concat(e,"/rest/api/2/issue/").concat(t,"/transitions")},mt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=ut(this,(e=lt(t)).call.apply(e,[this].concat(o)))).state={loading:!1,data:null,error:null},n.fetch=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){st(i,r,o,a,s,"next",e)}function s(e){st(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){var r,o,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]&&a[1],n.setStateIfMounted({loading:!0}),o=[],r&&Object(l.r)(t,"statusField preFetchTransitions","statusField"),e.prev=4,pt.start({key:se}),e.next=8,Object(Le.c)(dt(n.props.baseUrl,n.props.issueKey));case 8:i=e.sent,o=i.transitions,pt.stop({key:se}),r?Object(l.r)(t,"statusField preFetchTransitionsSuccess","statusField",{count:o.length}):Object(l.t)(t,"statusField transitionsFetched","statusField",{count:o.length}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),pt.cancel(se),Object(nt.a)(e.t0)?Object(nt.b)(se,e.t0.toString(),e.t0):(De.a.safeError(se,e.t0),Object(l.r)(t,"statusField fetchTransitionsFailed")),o=null;case 19:o=et()(n.state.data,o)?n.state.data:o,n.setStateIfMounted({data:o,loading:!1});case 21:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}(),n.api={fetch:n.fetch},n.componentIsMounted=!1,n.setStateIfMounted=function(e){n.componentIsMounted&&n.setState(it({},e))},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,r["Component"]),function(e,t,n){t&&ct(e.prototype,t),n&&ct(e,n)}(t,[{key:"componentDidMount",value:function(){this.componentIsMounted=!0,this.props.preFetch&&this.props.createAnalyticsEvent&&this.fetch(this.props.createAnalyticsEvent({}),!0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.issueKey!==e.issueKey;(this.props.status!==e.status||t)&&this.setStateIfMounted({data:null}),e.isSaving&&!this.props.isSaving&&this.props.preFetch&&this.props.createAnalyticsEvent&&this.fetch(this.props.createAnalyticsEvent({}),!0)}},{key:"componentWillUnmount",value:function(){this.componentIsMounted=!1}},{key:"render",value:function(){return this.props.children(it({},this.state,{},this.api))}}]),t}();mt.displayName="BaseTransitionsQuery",mt.props={preFetch:!1};var bt=Object(tt.r)()(mt),yt=(n("./src/packages/platform/utils/fetch/src/utils.js"),n("./src/packages/issue/issue-view/src/common/util/entry/extract-project-key.js")),ht=n("./src/packages/platform/utils/constants/src/project-types.js"),gt=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js"),vt=function(e){return e===ht.j||function(){return Object(gt.b)("jsw.nextgen.workflows.milestone.1.enabled",!1)}()&&e===ht.k},Ot=function(e){var t=e.isSimplified,n=e.projectType;return void 0!==t&&(!t||vt(n))},jt=function(e){var t=e.key,n=e.havePermission;return"VIEW_READONLY_WORKFLOW"===t&&n||"ADMINISTER"===t&&n},wt=function(e){var t=e.key,n=e.havePermission;return"VIEW_READONLY_WORKFLOW"===t&&n};function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Pt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ct(i,r,o,a,s,"next",e)}function s(e){Ct(i,r,o,a,s,"throw",e)}a(void 0)})}}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e,t){return'\n    query nextGenViewWorkflowQuery {\n        permissions(issueKey:"'.concat(e,'", keys:["').concat("VIEW_READONLY_WORKFLOW",'", "').concat("ADMINISTER",'"]) {\n            key\n            havePermission\n        }\n        viewIssue(issueKey: "').concat(e,'") {\n            fields {\n                ... on IssueTypeField {\n                    fieldKey\n                    id\n                }\n            }\n        }\n        ').concat(t?'project(projectKey: "'.concat(t,'") {\n            projectId\n            simplified\n            type\n        }'):"","\n    }\n")},At=function(e,t,n,r){return Object(Le.c)(function(e){return"".concat(e,"/rest/gira/latest/")}(e),{method:"POST",body:JSON.stringify({query:Tt(t,n)})}).then(function(e){return function(e,t){var n=e.data;if(n&&n.permissions&&n.viewIssue){var r=n.permissions,o=n.project,i=n.viewIssue,a=o&&o.simplified||t?jt:wt,s=i.fields.find(function(e){return"issuetype"===e.fieldKey}),c={hasPermission:r.some(a),issueTypeId:Object(xe.toIssueTypeId)(s?s.id:"")};return o&&(c.projectId=Object(xe.toProjectId)(String(o.projectId)),c.projectType=Object(ht.m)(o.type),c.isSimplified=o.simplified),c}}(e,r)})},Dt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xt(this,_t(t).call(this,e))).fetch=Pt(regeneratorRuntime.mark(function e(){var t,r,o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.baseUrl,o=t.projectKey,i=t.issueKey,a=t.isSimplified,n.request(),e.prev=2,e.next=5,At(r,i,o,a);case 5:s=e.sent,n.success(s),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),De.a.safeError(ue,e.t0),n.failure(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,9]])})),n.request=function(){n.setState({error:void 0,loading:!0,data:void 0})},n.success=function(e){n.setState({loading:!1,data:e})},n.failure=function(e){n.setState({error:e,loading:!1})},n.state={data:void 0,loading:!1,error:void 0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(t,r["Component"]),function(e,t,n){t&&It(e.prototype,t),n&&It(e,n)}(t,[{key:"render",value:function(){return this.props.children(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach(function(t){St(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.state,{fetch:this.fetch}))}}]),t}();function Lt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach(function(t){Ft(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Dt.displayName="ViewWorkflowService";var Vt={data:void 0,loading:!1,error:void 0,fetch:c.a},Ut=function(e){var t=e.ViewWorkflowService,n=e.ContainerContextSubscriber,r=e.baseUrl,i=e.issueKey,a=e.children,s=i?Object(yt.a)(i):null;return i&&s?o.a.createElement(n,null,function(e){var n=function(e,t){if(e&&e.project){var n=e.project;if(n.key===t)return{projectId:Object(xe.toProjectId)(n.id.toString()),projectType:n.type,isSimplified:n.isSimplified}}}(e.data,s);return n&&!Ot(n)?a(Rt({},Vt)):o.a.createElement(t,{baseUrl:r,issueKey:i,projectKey:n?void 0:s,isSimplified:n&&n.isSimplified},function(e){var t=e.data,r=Lt(e,["data"]),o=n||t?Rt({},n,{},t):void 0;return a(Rt({data:o},r))})}):a(Rt({},Vt))};Ut.displayName="ViewWorkflowContextService",Ut.defaultProps={ViewWorkflowService:Dt};var Bt=Ut,Kt=Object(i.defineMessages)({errorMessage:{id:"issue-field-status.common.view-workflow.error.error-message",defaultMessage:"Couldn\u2019t find the workflow.",description:"Error message that indicates that the view workflow permission could not be loaded"},tryAgain:{id:"issue-field-status.common.view-workflow.error.try-again",defaultMessage:"Try again",description:"Subtle link to reload the View Workflow permission"}});function Wt(){var e=qt(["\n    margin-right: ","px;\n"]);return Wt=function(){return e},e}function Ht(){var e=qt(["\n    display: flex;\n    flex-grow: 1;\n    height: 100%;\n"]);return Ht=function(){return e},e}function zt(){var e=qt(["\n    height: ","px;\n    border-top: 2px solid ",";\n    display: flex;\n    align-items: center;\n    padding: 0 ","px;\n    justify-content: center;\n"]);return zt=function(){return e},e}function qt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Gt=m.default.div(zt(),6*b.e,j.colors.N40,1.5*b.e),Jt=m.default.div(Ht()),Qt=m.default.div(Wt(),b.e);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=$t(this,(e=Xt(t)).call.apply(e,[this].concat(o)))).onRetry=function(e,t){Object(l.u)(t,"retryViewWorkflowButton"),n.props.onRetry(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,r["Component"]),function(e,t,n){t&&Yt(e.prototype,t),n&&Yt(e,n)}(t,[{key:"render",value:function(){var e=this.props.intl.formatMessage;return o.a.createElement(l.b,{sourceName:"viewWorkflowError",sourceType:l.m},o.a.createElement(Gt,null,o.a.createElement(Qt,null,e(Kt.errorMessage)),o.a.createElement(Jt,null,o.a.createElement(D.b,{appearance:"link",spacing:"none",onClick:this.onRetry},e(Kt.tryAgain))),o.a.createElement(l.f,null)))}}]),t}();tn.displayName="Error";var nn=Object(i.injectIntl)(tn),rn=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),on=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/create-event.js"),an=n("./src/packages/wrm/src/index.js"),sn=n("./node_modules/@atlaskit/tooltip/components/Tooltip.js"),cn=Object(i.defineMessages)({viewWorkflow:{id:"issue-field-status.common.view-workflow.button.view-workflow",defaultMessage:"View workflow",description:"Footer action item to view the workflow in the status view dropdown"}});function un(){var e=pn(["\n    color: ",";\n    text-align: left;\n    padding: 0 ",";\n"]);return un=function(){return e},e}function ln(){var e=pn(["\n    display: flex;\n    flex-grow: 1;\n    height: 100%;\n"]);return ln=function(){return e},e}function fn(){var e=pn(["\n    height: ","px;\n    border-top: 2px solid ",";\n"]);return fn=function(){return e},e}function pn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dn=m.default.div(fn(),6*b.e,j.colors.N40),mn=m.default.div(ln()),bn="".concat(1.5*b.e,"px"),yn=m.default.div(un(),function(e){return e.isDisabledColor?j.colors.N70:j.colors.N900},bn),hn=function(e){var t=e.content,n=e.children;return t?o.a.createElement(sn.a,{tag:"span",content:t},n):n},gn=function(e){var t=e.isDisabled,n=e.isLoading,r=e.isInitialLoading,i=e.onClick,a=e.onMount,s=e.tooltipContent,c=e.intl;return o.a.createElement(dn,null,o.a.createElement(l.k,{onMount:a}),o.a.createElement(hn,{content:s},o.a.createElement(mn,null,o.a.createElement(D.b,{"data-test-id":"issue-field-status.common.ui.view-workflow.button.view-workflow",shouldFitContainer:!0,appearance:"subtle",spacing:"none",isDisabled:t,isLoading:n,onClick:i},o.a.createElement(yn,{isDisabledColor:t&&!r},c.formatMessage(cn.viewWorkflow))))))};gn.displayName="ViewWorkflowButton";var vn=Object(i.injectIntl)(gn),On=Object(i.defineMessages)({noPermission:{id:"issue-field-status.common.view-workflow.no-permission",defaultMessage:"You don't have permission to view this workflow.",description:"Tooltip message indicating why the user cannot view the workflow"},loading:{id:"issue-field-status.common.view-workflow.loading",defaultMessage:"Looks like your connection is slow. We\u2019re still finding this workflow.",description:'Initial load tooltip message indicating why "View Workflow" button is in a disabled state'}}),jn=n("./node_modules/@atlaskit/analytics-next/dist/esm/withAnalyticsEvents.js"),wn=function(e){if(e.data&&e.data.viewIssue&&e.data.viewIssue.workflow)return{workflowName:e.data.viewIssue.workflow.name,currentStepId:e.data.viewIssue.workflow.step.id};throw new Error("TransformError")},kn=function(e,t){return Object(Le.i)("".concat(e,"/rest/gira/1/"),{body:JSON.stringify({query:"\nquery classicViewWorkflowQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        workflow {\n            name\n            step {\n                id\n            }\n        }\n    }\n}\n",variables:{issueKey:t}})}).then(wn)};function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function In(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Pn(i,r,o,a,s,"next",e)}function s(e){Pn(i,r,o,a,s,"throw",e)}a(void 0)})}}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _n(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var An=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=_n(this,(e=Mn(t)).call.apply(e,[this].concat(o)))).state={data:void 0,error:void 0,loading:!1},n.load=In(regeneratorRuntime.mark(function e(){var t,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.onLoading(),t=n.props,r=t.baseUrl,o=t.issueKey,e.prev=2,n.fireAnalytics(),e.next=6,kn(r,o);case 6:i=e.sent,n.onLoadSucceeded(i),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),De.a.safeError("issue-field.status.classic-view-workflow-service.fetch","Failed to fetch classic view workflow data.",{errorReason:e.t0.message&&"TransformError"===e.t0.message?"transform":"fetch"}),n.onLoadFailed(e.t0);case 14:case"end":return e.stop()}},e,null,[[2,10]])})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,r["Component"]),function(e,t,n){t&&xn(e.prototype,t),n&&xn(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.shouldLoadOnMount&&this.load()}},{key:"onLoading",value:function(){this.setState({data:void 0,error:void 0,loading:!0})}},{key:"onLoadSucceeded",value:function(e){this.setState({data:e,error:void 0,loading:!1})}},{key:"onLoadFailed",value:function(e){this.setState({data:void 0,error:e,loading:!1})}},{key:"fireAnalytics",value:function(){var e=this.props.createAnalyticsEvent({action:"requested"});Object(l.r)(e,"classicViewWorkflowData requested")}},{key:"render",value:function(){return this.props.children(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach(function(t){Cn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.state,{retry:this.load}))}}]),t}();An.displayName="ClassicViewWorkflowService",An.defaultProps={shouldLoadOnMount:!0};var Dn=Object(jn.a)()(An),Ln=Object(i.defineMessages)({title:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.title",defaultMessage:"We couldn't load the workflow",description:"Error is shown when View workflow modal code cannot be loaded, or modal itself cannot be rendered"},description:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.description",defaultMessage:"Check your connection, then try reloading the page.",description:"Error is shown when View workflow modal code cannot be loaded, or modal itself cannot be rendered"}}),Nn={loadModalError:function(){return{type:"error",title:Ln.title,description:Ln.description}}};function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Vn(this,(e=Un(t)).call.apply(e,[this].concat(o)))).state={isLoadingModal:!1,isRefetching:!1,isModalMounted:!1},n.modalApi=void 0,n.onClick=function(e,t,r,o){Object(l.u)(e,"viewWorkflowTrigger",{isSimplifiedProject:!1}),n.modalApi&&r&&o&&(n.setState({isLoadingModal:!0,isRefetching:!1}),n.modalApi.then(function(e){e.showDialog(r,o),window.dispatchEvent(Object(on.a)("resize")),n.setState({isModalMounted:!0})}).catch(function(){t&&t(Nn.loadModalError()),n.setState({isLoadingModal:!1})}))},n.onRetry=function(e,t){return e.stopPropagation(),n.setState({isRefetching:!0}),t().then(function(){return n.setState({isRefetching:!1})})},n.onMount=function(e){var t=n.props.hasPermission;Object(l.r)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!1})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,r["Component"]),function(e,t,n){t&&Fn(e.prototype,t),n&&Fn(e,n)}(t,[{key:"componentDidMount",value:function(){var e="workflow-designer/view-classic-project-workflow";this.modalApi=Object(rn.a)({name:e,tentatives:0,shouldLogError:!1}).catch(function(){return Object(an.c)(["wr!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"]),Object(rn.a)({name:e})})}},{key:"getTooltipMessage",value:function(e){var t=this.props,n=t.isServiceRefetching,r=t.intl,o=t.hasPermission;return n||e?r.formatMessage(On.loading):o?"":r.formatMessage(On.noPermission)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isServiceLoading,r=t.isServiceRefetching,i=t.issueKey,a=t.baseUrl,s=t.hasPermission,c=t.FlagServiceSubscriber,u=t.ClassicViewWorkflowService,l=this.state,f=l.isLoadingModal,p=l.isModalMounted,d=l.isRefetching,m=f&&!p,b=!s||m,y=m||r||d;return o.a.createElement(c,null,function(t){var r=t.showFlag;return o.a.createElement(u,{issueKey:i,baseUrl:a,shouldLoadOnMount:s},function(t){var i=t.data,a=t.error,s=t.loading,c=t.retry;if(a)return o.a.createElement(nn,{onRetry:function(t){e.onRetry(t,c)}});var u=i?i.workflowName:null,l=i?i.currentStepId:null;return o.a.createElement(vn,{onMount:e.onMount,tooltipContent:e.getTooltipMessage(n||s),isDisabled:b||s,isLoading:y,isInitialLoading:n||s,onClick:function(t,n){return e.onClick(n,r,u,l)}})})})}}]),t}();Kn.displayName="ViewWorkflowClassic",Kn.defaultProps={ClassicViewWorkflowService:Dn,FlagServiceSubscriber:Ne.FlagServiceSubscriber};var Wn=Object(i.injectIntl)(Kn);function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t){return!t||"object"!==Hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=qn(this,(e=Gn(t)).call.apply(e,[this].concat(o)))).state={isLoadingModal:!1},n.onMount=function(e){var t=n.props.hasPermission;Object(l.r)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!0})},n.onClick=function(e,t){Object(l.u)(t,"viewWorkflowTrigger",{isSimplifiedProject:!0}),n.setState({isLoadingModal:!0});var r=n.props,o=r.issueTypeId,i=void 0===o?Object(xe.toIssueTypeId)(""):o,a=r.projectId,s=void 0===a?Object(xe.toProjectId)(""):a;(0,r.onOpenModal)(i,s)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(t,r["Component"]),function(e,t,n){t&&zn(e.prototype,t),n&&zn(e,n)}(t,[{key:"getTooltipMessage",value:function(){var e=this.props,t=e.isServiceLoading,n=e.isServiceRefetching,r=e.hasPermission,o=e.intl;return t||n?o.formatMessage(On.loading):r?"":o.formatMessage(On.noPermission)}},{key:"render",value:function(){var e=this.props,t=e.isServiceLoading,n=e.isServiceRefetching,r=e.hasPermission,i=e.isModalMounted,a=this.state.isLoadingModal&&!i,s=!r||a,c=n||a,u=this.getTooltipMessage();return o.a.createElement(vn,{onMount:this.onMount,tooltipContent:u,isDisabled:s,isLoading:c,isInitialLoading:t,onClick:this.onClick})}}]),t}();Qn.displayName="ViewWorkflowSimplified",Qn.defaultProps={hasPermission:!1};var Zn=Object(i.injectIntl)(Qn);function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function er(e,t){return!t||"object"!==Yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rr=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=er(this,(e=tr(t)).call.apply(e,[this].concat(o)))).state={isWorkflowServiceRefetching:!1},n.onWorkflowServiceRefetch=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){$n(i,r,o,a,s,"next",e)}function s(e){$n(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),n.setState({isWorkflowServiceRefetching:!0}),e.next=4,r();case 4:n.setState({isWorkflowServiceRefetching:!1});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t)}(t,r["Component"]),function(e,t,n){t&&Xn(e.prototype,t),n&&Xn(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.baseUrl,r=t.issueKey,i=t.isModalMounted,a=t.onOpenModal,s=t.workflowServiceApi,c=this.state.isWorkflowServiceRefetching,u=s.data,l=s.loading,f=s.error,p=s.fetch;if(f)return o.a.createElement(nn,{onRetry:function(t){e.onWorkflowServiceRefetch(t,p)}});if(!u||!Ot(u))return null;var d=u.isSimplified,m=u.projectId,b=u.issueTypeId,y=u.hasPermission;return d?o.a.createElement(Zn,{projectId:m,issueTypeId:b,isModalMounted:i,hasPermission:y,isServiceLoading:l,isServiceRefetching:c,onOpenModal:a}):o.a.createElement(Wn,{baseUrl:n,issueKey:r,hasPermission:y,isServiceLoading:l,isServiceRefetching:c})}}]),t}();rr.displayName="ViewWorkflow";var or=n("./node_modules/react-async-component/commonjs/index.js"),ir=n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),ar=n("./src/packages/issue/workflow-readonly-modal/src/common/constants.js"),sr=Object(or.asyncComponent)({resolve:function(){return n.e(140).then(n.bind(null,"./src/packages/issue/workflow-readonly-modal/src/index.js"))},LoadingComponent:function(){return o.a.createElement(ir.a,{metricKey:ar.d})}});function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e,t){return!t||"object"!==cr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e,t){return(pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dr=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=lr(this,(e=fr(t)).call.apply(e,[this].concat(o)))).state={shouldMountWorkflow:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pr(e,t)}(t,r["Component"]),function(e,t,n){t&&ur(e.prototype,t),n&&ur(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.issueKey,n=e.issueTypeId,r=e.baseUrl,i=e.locale,a=e.cloudId,s=e.projectId,c=e.isOpen,u=e.onModalMounted,l=e.onClose;return this.state.shouldMountWorkflow&&o.a.createElement(sr,{onMounted:u,issueKey:t,issueTypeId:n,baseUrl:r,locale:i,isOpen:c,cloudId:a,projectId:s,onClose:l})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{shouldMountWorkflow:t.shouldMountWorkflow||e.isOpen}}}]),t}();dr.displayName="WorkflowModal";var mr=dr;function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t){return!t||"object"!==br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vr(e,t){return(vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Or=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=hr(this,(e=gr(t)).call.apply(e,[this].concat(o)))).state={isWorkflowModalOpen:!1,isWorkflowModalMounted:!1,issueTypeId:Object(xe.toIssueTypeId)(""),projectId:Object(xe.toProjectId)("")},n.onOpenModal=function(e,t){n.setState({isWorkflowModalOpen:!0,issueTypeId:e,projectId:t})},n.onCloseModal=function(){n.setState({isWorkflowModalOpen:!1})},n.onModalMounted=function(){n.setState({isWorkflowModalMounted:!0})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}(t,r["Component"]),function(e,t,n){t&&yr(e.prototype,t),n&&yr(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.issueKey,r=t.isEditable,i=t.isOptimistic,a=t.initialValue,s=t.appearance,c=t.onSubmit,u=t.onSuccess,l=t.onFailure,f=t.onEditStart,p=t.onEditCancel,d=t.value,m=t.TenantContextSubscriber,b=t.ContainerContextSubscriber,y=t.preFetchTransitions,h=t.ViewWorkflowContextService;return o.a.createElement(m,null,function(t){var m=t.tenantContext;return m?o.a.createElement($e,{value:d,initialValue:a,issueKey:n,baseUrl:m.baseUrl,onSubmit:c,onSuccess:u,onFailure:l,onEditStart:f,onEditCancel:p,xsrfToken:m.xsrfToken},function(t){var a=t.value,c=t.loading,u=t.transitionStatus,l=t.error,d=t.resetError;return o.a.createElement(bt,{issueKey:n,baseUrl:m.baseUrl,status:a,isSaving:c,preFetch:y},function(t){var y=t.data,g=t.loading,v=t.fetch;return o.a.createElement(h,{ContainerContextSubscriber:b,baseUrl:m.baseUrl,issueKey:n},function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce,{value:a,isEditable:r,isLoading:g,isSaving:!i&&c,appearance:s,transitions:y,onOpen:function(e){f(),v(e),t.data&&void 0!==t.data.hasPermission||t.fetch(),d()},onClose:p,onChange:u,error:l,footer:o.a.createElement(Pe.a,{id:"issue-field-view-workflow"},o.a.createElement(rr,{baseUrl:m.baseUrl,issueKey:n,workflowServiceApi:t,onOpenModal:e.onOpenModal,isModalMounted:e.state.isWorkflowModalMounted}))}),o.a.createElement(Ie.b,null,o.a.createElement(mr,{onModalMounted:e.onModalMounted,issueKey:n,issueTypeId:e.state.issueTypeId,baseUrl:m.baseUrl,locale:m.locale,cloudId:m.cloudId,projectId:e.state.projectId,isOpen:e.state.isWorkflowModalOpen,onClose:e.onCloseModal})))})})}):null})}}]),t}();Or.displayName="StatusField",Or.defaultProps={isOptimistic:!0,TenantContextSubscriber:Me.d,ContainerContextSubscriber:_e.b,ViewWorkflowContextService:Bt,preFetchTransitions:!1,onEditStart:c.a,onEditCancel:c.a,onSubmit:c.a,onSuccess:c.a,onFailure:c.a};var jr=n("./src/packages/issue/fields/status/src/ui/status-lozenge/index.js");n.d(t,"StatusView",function(){return Ce}),n.d(t,"StatusField",function(){return Or}),n.d(t,"StatusLozenge",function(){return jr.a}),n.d(t,"getStatusTransitionsUrl",function(){return dt})},"./src/packages/issue/fields/status/src/common/ui/status-lozenge/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/@atlaskit/lozenge/Lozenge/index.js"),a=n("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),s=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),c=n("./node_modules/@atlaskit/button/components/Button.js"),u=n("./node_modules/@atlaskit/theme/index.js");function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    > div > span {\n        vertical-align: text-bottom;\n        color: ",";\n        background-color: ",";\n        ",";\n    }\n"]);return f=function(){return e},e}var p={1:"default",2:"default",3:"success",4:"inprogress"},d={default:u.colors.N40,success:u.colors.G50,inprogress:u.colors.B50},m={default:u.colors.N500,success:u.colors.G500,inprogress:u.colors.B500},b={default:u.colors.N70,success:u.colors.G400,inprogress:u.colors.B400},y={default:u.colors.N800,success:u.colors.N0,inprogress:u.colors.N0},h=s.default.span(f(),function(e){return m[p[e.statusCategoryId]]},function(e){return d[p[e.statusCategoryId]]},function(e){return e.hasHoverState?"&:hover {\n                        color: ".concat(y[p[e.statusCategoryId]],";\n                        background-color: ").concat(b[p[e.statusCategoryId]],";\n                    }"):""}),g=Object(a.a)(function(e){e.focused;var t=l(e,["focused"]);return o.a.createElement(c.b,t)},{target:"e1dqx2ri0"})("margin:2px 0;width:100%;height:36px;padding:0 4px;border:2px solid ",function(e){return e.error?u.colors.R300:"transparent"},";cursor:",function(e){return e.isDisabled?"auto":void 0},";background-color:transparent;&:not(:disabled):hover{background-color:",u.colors.N30,";}",function(e){return e.focused?"box-shadow: 0 0 0 2px ".concat("rgba(38, 132, 255, 0.6)"):""},";"),v=function(e){return o.a.createElement(h,{hasHoverState:e.hasHoverState,statusCategoryId:e.status.statusCategory.id},o.a.createElement("div",{ref:e.targetRef,"data-test-id":"issue.fields.status.common.ui.status-lozenge.".concat(e.status.statusCategory.id)},o.a.createElement(i.a,null,e.status.name)))};v.displayName="StatusLozenge";var O=function(e){return o.a.createElement(g,{appearance:"subtle",error:e.error,isDisabled:!e.isEditable,focused:e.focused},o.a.createElement(v,e))};O.displayName="WrappedStatusLozenge",n.d(t,"a",function(){return v}),n.d(t,"b",function(){return O})},"./src/packages/issue/fields/status/src/ui/status-lozenge/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./src/packages/issue/fields/status/src/common/ui/status-lozenge/index.js"),a=function(e){var t=e.value||e.initialValue;return t?o.a.createElement(i.b,{status:t,isEditable:!1,hasHoverState:!1,focused:!1}):null};a.displayName="StatusLozenge",n.d(t,"a",function(){return a})},"./src/packages/issue/issue-glance/src/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),a=n.n(i),s=n("./node_modules/@atlaskit/tooltip/components/Tooltip.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),u=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),l=n("./src/packages/issue/fields/components/field-heading/src/index.js"),f=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),p=n("./node_modules/@atlaskit/theme/index.js"),d=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function m(){var e=w(["\n    position: absolute;\n    animation: "," 0.15s ease-in-out;\n"]);return m=function(){return e},e}function b(){var e=w(["\n    0% { right: -28px; }\n    100% { right: 0; }\n"]);return b=function(){return e},e}function y(){var e=w(["\n    position: absolute;\n    right: 0;\n    margin: 6px ","px ","px;\n    height: 26px;\n    width: 26px;\n    background: ",";\n    color: ",";\n    border-radius: 50%;\n    align-items: center;\n    padding: 2px 0 0 2px;\n"]);return y=function(){return e},e}function h(){var e=w(["\n    position: absolute;\n    right: 0;\n    width: ","px;\n    height: ","px;\n    background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, "," 25%);\n"]);return h=function(){return e},e}function g(){var e=w(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    flex: 1;\n    line-height: ","px;\n    padding-left: ","px;\n"]);return g=function(){return e},e}function v(){var e=w(["\n    overflow: hidden;\n    margin: ","px 0 ","px ","px;\n    height: ","px;\n    width: ","px;\n    align-items: center;\n"]);return v=function(){return e},e}function O(){var e=w(["\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    border-radius: 5px;\n    margin: 0 0 0 -","px;\n    &:hover {\n        background: ",";\n        cursor: pointer;\n    }\n    &:focus {\n        box-shadow: 0 0 0 2px ",";\n        outline: 0;\n        background: ",";\n    }\n"]);return O=function(){return e},e}function j(){var e=w(["\n    display: flex;\n    flex-direction: column;\n    margin-bottom: ","px;\n"]);return j=function(){return e},e}function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k=f.default.div(j(),3*d.e),E=f.default.div(O(),d.e,p.colors.N20,p.colors.B100,p.colors.N20),S=f.default.div(v(),d.e,d.e,d.e,3*d.e,3*d.e),C=f.default.div(g(),5*d.e,d.e),P=f.default.div(h(),7*d.e,5*d.e,p.colors.N20),I=f.default.div(y(),d.e,d.e/2,p.colors.N30,p.colors.N60),x=Object(f.keyframes)(b()),_=f.default.div(m(),x);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=N(this,(e=R(t)).call.apply(e,[this].concat(o)))).state={isHovering:!1},n.handleOpenGlancePanel=function(){var e=n.props,t=e.onClickPayload,r=e.title;(0,e.onOpenPanel)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{title:r}))},n.eventHandlers={onClick:n.handleOpenGlancePanel,onMouseEnter:function(){return n.setState({isHovering:!0})},onMouseLeave:function(){return n.setState({isHovering:!1})},onFocus:function(){return n.setState({isHovering:!0})},onBlur:function(){return n.setState({isHovering:!1})}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),function(e,t,n){t&&L(e.prototype,t),n&&L(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.Icon,r=e.content,i=r.length<=170?r:"".concat(r.substring(0,170).trim(),"\u2026");return o.a.createElement(k,null,t&&o.a.createElement(l.a,null,o.a.createElement(l.b,null,t)),o.a.createElement(s.a,{content:i},o.a.createElement(u.a,{onEnter:this.handleOpenGlancePanel},o.a.createElement(E,T({tabIndex:"0"},this.eventHandlers),n&&o.a.createElement(S,null,o.a.createElement(n,null)),o.a.createElement(C,null,r),this.state.isHovering&&o.a.createElement(c.a,{mountAnimation:_},o.a.createElement(P,null,o.a.createElement(I,null,o.a.createElement(a.a,{size:"medium",label:""}))))))))}}]),t}();V.displayName="Glance",V.displayName="Glance",V.defaultProps={Icon:null},n.d(t,"a",function(){return V})},"./src/packages/issue/issue-view/src/actions/attachment-viewer-action-creator.js":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n("./src/packages/issue/issue-view/src/actions/attachment-viewer-action-type.js"),o=function(e){return{type:r.b,payload:e}},i=function(){return{type:r.a}}},"./src/packages/issue/issue-view/src/actions/external-action-creator.js":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c});var r=n("./src/packages/issue/issue-view/src/actions/comment-action-creator.js"),o=n("./src/packages/issue/issue-view/src/actions/external-action-type.js"),i=function(e){return{type:o.d,payload:{fieldId:e}}},a=function(){return{type:o.a}},s=function(){return{type:o.b}},c=function(e){switch(e.type){case o.a:return Object(r.c)();case o.b:return function(){return{type:o.c}}();case o.d:return function(e){return{type:o.e,payload:{fieldId:e}}}(e.payload.fieldId);default:throw new Error("Unhandled external action type: ".concat(e.type))}}},"./src/packages/issue/issue-view/src/activity/comment/comment-visibility/assets/Error.svg":function(e,t,n){e.exports=n.p+"assets/Error.be0d40cfbcd6c064b92b9530fd4cf3ce.8.svg"},"./src/packages/issue/issue-view/src/activity/common/styles/index.js":function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return b}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return h});var r=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),o=n("./node_modules/@atlaskit/theme/index.js"),i=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function a(){var e=p(["\n        :hover {\n            color: inherit;\n        }\n    "]);return a=function(){return e},e}function s(){var e=p(["\n        color: ",";\n    "]);return s=function(){return e},e}function c(){var e=p(["\n    /*\n        Required because AkComment shifts the content too far over \n        Can be removed once a generic ActivityItem component is made in Ak\n    */\n    margin-left: -","px;\n"]);return c=function(){return e},e}function u(){var e=p(["\n    margin-left: ","px;\n"]);return u=function(){return e},e}function l(){var e=p(["\n    margin: ","px 0;\n"]);return l=function(){return e},e}function f(){var e=p(["\n    font-weight: 500;\n"]);return f=function(){return e},e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=r.default.span(f());d.displayName="Emphasise";var m=r.default.div(l(),3*i.e),b=r.default.span(u(),i.e);b.displayName="TimestampContainer";var y=r.default.span(c(),i.e/2),h={always:Object(r.css)(s(),o.colors.N500),whenDisplaySettingSwitchable:Object(r.css)(a())}},"./src/packages/issue/issue-view/src/activity/worklog/view/worklog-error/assets/generic-error.svg":function(e,t,n){e.exports=n.p+"assets/generic-error.0e9503ed3b498e5fd6f800cd2090df4c.8.svg"},"./src/packages/issue/issue-view/src/activity/worklog/view/worklog-items/empty-state/assets/stopwatch.svg":function(e,t,n){e.exports=n.p+"assets/stopwatch.f33e6f30d2f3a88bbcf3096adc7cb05f.8.svg"},"./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n("./node_modules/lodash/noop.js"),i=n.n(o),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),s=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/deferred-globals.js"),c=function(){return window.AJS&&window.AJS.dialog2},u=function(e,t){Object(s.b)().then(function(){return function(e,t){c()&&window.AJS.dialog2.on(e,t)}(e,t)}).catch(i.a)},l=function(e,t){Object(s.b)().then(function(){return function(e,t){c()&&window.AJS.dialog2.off(e,t)}(e,t)}).catch(i.a)};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return y});var y=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=d(this,(e=m(t)).call.apply(e,[this].concat(o)))).state={stackIndex:0},n.incrementStackIndex=function(){n.setState({stackIndex:n.state.stackIndex+1})},n.decrementStackIndex=function(){n.setState({stackIndex:n.state.stackIndex-1})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;Object(a.a)({name:"jira/util/events"}).then(function(t){var n=t.bind;n("beforeShow",e.incrementStackIndex),n("Dialog.hide",e.decrementStackIndex)}).catch(i.a),u("show",this.incrementStackIndex),u("hide",this.decrementStackIndex)}},{key:"componentWillUnmount",value:function(){var e=this;Object(a.a)({name:"jira/util/events"}).then(function(t){var n=t.unbind;n("beforeShow",e.incrementStackIndex),n("Dialog.hide",e.decrementStackIndex)}).catch(i.a),l("show",this.incrementStackIndex),l("hide",this.decrementStackIndex)}},{key:"render",value:function(){return this.props.children(this.state.stackIndex)}}]),t}();y.displayName="AuiModalStackIndex"},"./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-action-creator.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-action-type.js"),o=function(e){return{type:r.a,payload:e}}},"./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/lodash/isFunction.js"),a=n.n(i),s=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=function(e,t,n){var i=a()(e)?e:function(){return e||null},u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,m(t).call(this,e))).startTime=void 0,n.mountTime=void 0,n.startTime=c.d.now(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(t,[{key:"componentDidMount",value:function(){this.mountTime=c.d.now()}},{key:"componentWillUnmount",value:function(){var e=c.d.now(),t=e-this.startTime,r=this.mountTime-this.startTime,o=e-this.mountTime;t>0&&this.props.onWillUnmount(t,r,o,n)}},{key:"render",value:function(){return i()}}]),t}();u.displayName="LoadingWrapper",u.defaultProps={onWillUnmount:function(){}};var y=Object(s.a)(function(e){return{onWillUnmount:function(t,n,r,o){return e("loading-component",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({duration:t,initializationTime:n,mountingTime:r},o||{}))}}})(u);return o.a.createElement(y,{externalId:t})}},"./src/packages/issue/issue-view/src/common/component/logged-time/assets/stopwatch-glyph.svg":function(e,t,n){e.exports=n.p+"assets/stopwatch-glyph.abbc4afde0b6bdac7465517877d67af5.8.svg"},"./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js":function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return y});var r=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),o=n("./node_modules/@atlaskit/theme/index.js"),i=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function a(){var e=f(["\n    ",";\n    margin-left: ","px;\n    margin-top: 0;\n    flex-shrink: 0;\n"]);return a=function(){return e},e}function s(){var e=f(["\n    display: flex;\n    align-items: center;\n    ",";\n"]);return s=function(){return e},e}function c(){var e=f(["\n    ",";\n    line-height: ","px;\n    color: ",";\n    overflow-wrap: break-word;\n    min-width: 0;\n"]);return c=function(){return e},e}function u(){var e=f(["\n    display: flex;\n    justify-content: flex-start;\n    align-items: baseline;\n    max-width: 100%;\n"]);return u=function(){return e},e}function l(){var e=f(["\n    display: flex;\n    align-items: baseline;\n    flex-wrap: nowrap;\n    justify-content: ",";\n"]);return l=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var p=r.default.div(l(),function(e){return e.leftAlign?"normal":"space-between"}),d=r.default.div(u()),m=r.default.h2(c(),o.typography.h400(),3*i.e,o.colors.heading),b=r.default.div(s(),function(e){return e.leftAlign?"margin-left: ".concat(i.e,"px"):""}),y=r.default.div(a(),o.typography.h100(),i.e)},"./src/packages/issue/issue-view/src/common/component/smart-card/jira-smart-card-provider.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/@atlaskit/smart-card/dist/esm/index.js"),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/match-jira-url/index.js"),s=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-meta.js"),c=n("./src/packages/platform/services/issue/src/index.js"),u=n("./src/packages/platform/utils/constants/src/status-categories.js"),l=function(e,t){var n=e.fields.get(t);return n&&n.value},f=function(e){return e&&e.statusCategory&&e.statusCategory.id?function(e){switch(e){case u.IN_PROGRESS:return"inprogress";case u.DONE:return"success";default:return"default"}}(Object(u.statusCategoryForId)(e.statusCategory.id)):"default"};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e,n){var r;return d(this,t),(r=y(this,g(t).call(this,Object(s.a)("environment")))).baseUrl=void 0,r.dataProvider=void 0,r.baseUrl=e,r.dataProvider=n,r}return v(t,i["b"]),b(t,[{key:"fetchData",value:function(e){var n=this,r=Object(a.b)(e,window.location.host,this.baseUrl);return r?this.dataProvider.getIssue$(r).toPromise().then(function(t){var n=t.issue,r=t.error;if(n)return function(e,t){var n=t.key,r=l(t,"summary")||"",o="".concat(n).concat(r?": ".concat(r):""),i=l(t,"status")||{},a=i&&i.name,s=l(t,"issuetype")||{},c=s.name||"",u=s.iconUrl||"";return{meta:{visibility:"restricted",access:"granted",auth:[],definitionId:"jira-native-resolve"},data:{"@context":{"@vocab":"https://www.w3.org/ns/activitystreams#",atlassian:"https://schema.atlassian.com/ns/vocabulary#",schema:"http://schema.org/"},"@type":["atlassian:Task","Object"],name:o,tag:{name:a,appearance:f(i)},url:e,taskType:{"@type":["Object","atlassian:TaskType"],"@id":"https://www.atlassian.com/#JiraCustomTaskType",name:c},icon:{"@type":"Image",url:u},generator:{"@type":"Application","@id":"https://www.atlassian.com/#Jira",name:"Jira"}}}}(e,n);throw new Error(r)}).catch(function(){return h(g(t.prototype),"fetchData",n).call(n,e)}):h(g(t.prototype),"fetchData",this).call(this,e)}}]),t}(),w=function(e){function t(e){var n;return d(this,t),(n=y(this,g(t).call(this,e))).cardClient=void 0,n.cardClient=new j(e.baseUrl,e.dataProvider),n}return v(t,r["Component"]),b(t,[{key:"render",value:function(){return o.a.createElement(i.e,{client:this.cardClient},this.props.children)}}]),t}();w.displayName="JiraSmartCardClient";t.a=Object(c.fb)(w)},"./src/packages/issue/issue-view/src/common/component/timestamp/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react-intl/lib/index.es.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/lodash/flow.js"),a=n.n(i),s=n("./src/packages/platform/observability/analytics-web-react/src/index.js"),c=n("./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-action-creator.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js"),l=n("./node_modules/react/index.js"),f=n.n(l),p=n("./node_modules/@atlaskit/tooltip/components/Tooltip.js"),d=n("./node_modules/lodash/noop.js"),m=n.n(d),b=n("./src/packages/issue/issue-view/src/common/model/timestamp-display-setting-type.js"),y=function(e){return function(e){return(Date.now()-new Date(e))/864e5}(e)<8?b.b:b.a};function h(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    cursor: ",";\n\n    ",";\n    ",";\n"]);return h=function(){return e},e}var g=n("./node_modules/styled-components/dist/styled-components.browser.es.js").default.span(h(),function(e){return e.canSwitchDisplaySetting?"pointer":"default"},function(e){return e.extraStyles.always},function(e){var t=e.canSwitchDisplaySetting,n=e.extraStyles.whenDisplaySettingSwitchable;return t?n:""});function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}g.displayName="TimestampWrapper";var E=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=j(this,(e=w(t)).call.apply(e,[this].concat(i)))).onAbsoluteClick=function(e){n.props.onSwitchDisplaySetting(b.b),n.props.onAbsoluteTimestampClick(e)},n.onRelativeClick=function(e){n.props.onSwitchDisplaySetting(b.a),n.props.onRelativeTimestampClick(e)},n.formatAbsoluteTimestamp=function(){var e=n.props,t=e.intl,r=e.value,o=e.timeZone;return t.formatDate(r,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZone:o})},n.renderAbsolute=function(e){return f.a.createElement(g,{canSwitchDisplaySetting:e,onClick:e?n.onAbsoluteClick:m.a,extraStyles:n.props.extraStyles},n.formatAbsoluteTimestamp())},n.renderRelative=function(){return f.a.createElement(g,{canSwitchDisplaySetting:!0,onClick:n.onRelativeClick,extraStyles:n.props.extraStyles},f.a.createElement(p.a,{content:n.formatAbsoluteTimestamp(),position:n.props.tooltipPosition,tag:"span"},f.a.createElement(r.FormattedRelative,{value:n.props.value})))},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,l["Component"]),function(e,t,n){t&&O(e.prototype,t),n&&O(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.displaySetting,r=y(t)===b.b;return r&&n===b.b?this.renderRelative():this.renderAbsolute(r)}}]),t}();E.displayName="TimestampView",E.defaultProps={extraStyles:{},tooltipPosition:"top"},n.d(t,"a",function(){return S});var S=a()(r.injectIntl,Object(s.f)("button",{onRelativeTimestampClick:"clicked",onAbsoluteTimestampClick:"clicked"}),Object(s.s)({onRelativeTimestampClick:"relativeTime",onAbsoluteTimestampClick:"absoluteTime"}))(E);t.b=Object(o.connect)(function(e){return{displaySetting:Object(u.a)(e)}},{onSwitchDisplaySetting:c.a})(S)},"./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js":function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)})}}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var i=function(e,t,n){return function(){var r=o(regeneratorRuntime.mark(function r(o){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.next=3,e(o?o.collectionName:void 0);case 3:return r.t1=r.sent,r.t2=n,r.abrupt("return",{clientId:r.t0,token:r.t1,baseUrl:r.t2});case 6:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},a=function(e){return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}))}},"./src/packages/issue/issue-view/src/common/media/components/with-media-provider/with-media-provider.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js"),a=n("./src/packages/issue/issue-view/src/common/media/view-context/view-context-server.js"),s=n("./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js");function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e,t,n){var r=e.viewContext,o=e.uploadContext,i=e.userAuth;if(!r)throw new TypeError("mediaContext.viewContext was null. Check that the server response has been processed.");var u={viewMediaClientConfig:{authProvider:Object(s.a)(t,r.clientId,r.serviceHost)}};return o&&(u=l({},u,{uploadParams:{collection:o.collection},uploadMediaClientConfig:{authProvider:Object(s.a)(t,o.clientId,o.serviceHost),userAuthProvider:i?Object(s.b)(l({},i,{baseUrl:o.serviceHost})):null,getAuthFromContext:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 65536,e.next=3,Object(a.a)(n,t,65536).toPromise();case 3:return r=e.sent,e.abrupt("return",{baseUrl:r.serviceHost,clientId:r.clientId,token:r.token||""});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})),u};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){var t,n;return n=t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=h(this,(e=g(n)).call.apply(e,[this].concat(o)))).setDropzoneRef=function(e){t.dropzoneRef=e},t.resolve=void 0,t.mediaProviderPromise=new Promise(function(e){t.resolve=e}),t.resolved=!1,t.dropzoneRef=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,r["Component"]),function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(n,[{key:"componentDidMount",value:function(){this.resolveMediaProviderPromise()}},{key:"componentDidUpdate",value:function(){this.resolveMediaProviderPromise()}},{key:"resolveMediaProviderPromise",value:function(){var e=this.props,t=e.mediaContext,n=e.tokenProvider,r=e.baseUrl;if(!this.resolved&&this.dropzoneRef&&t.viewContext){this.resolved=!0;var o=p(t,n,r);this.resolve(o)}}},{key:"render",value:function(){var t=this.props,n=(t.mediaContext,t.tokenProvider,b(t,["mediaContext","tokenProvider"]));return o.a.createElement("div",{ref:this.setDropzoneRef},o.a.createElement(e,m({mediaProvider:this.mediaProviderPromise},n)))}}]),n}(),t.displayName="WithMediaProvider(".concat(e.displayName||e.name,")"),n};t.a=function(e){return Object(i.a)(O(e))}},"./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./src/packages/common-legacy-do-not-add-anything-new/src/promise-provider/index.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.a=function(e){var t,n;return n=t=function(t){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=l(this,f(n).call(this,e))).viewTokenPromiseProvider=void 0,t.updateViewTokenPromise=function(e){var n=e.viewContext;n&&n.areTokenPermissionsUpToDate&&n.token?t.viewTokenPromiseProvider.resolve(n.token):t.viewTokenPromiseProvider.resetIfSettled()},t.tokenProvider=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",t.viewTokenPromiseProvider.get());case 2:if(!(r=t.props.mediaContext.uploadContext)){e.next=5;break}return e.abrupt("return",r.token);case 5:throw new Error("Upload token not available");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t.viewTokenPromiseProvider=new i.a,t.updateViewTokenPromise(e.mediaContext),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r["Component"]),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateViewTokenPromise(e.mediaContext)}},{key:"render",value:function(){return o.a.createElement(e,s({tokenProvider:this.tokenProvider},this.props))}}]),n}(),t.displayName="WithTokenProvider(".concat(e.displayName||e.name,")"),n}},"./src/packages/issue/issue-view/src/common/messages/time.js":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return s});var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-intl/lib/index.es.js");t.a=Object(i.defineMessages)({logWork:{id:"issue.common.messages.time.log-work",defaultMessage:"Log work",description:"Action or label for logging work"},timeInputPlaceholder:{id:"issue.common.messages.time.time-input-placeholder",defaultMessage:"e.g. 2w 4d 6h 45m",description:"Placeholder for a time input field"},exampleFormat:{id:"issue.common.messages.time.time-input-format-tooltip.example",defaultMessage:"Use the format: {formatExample}",description:"Tooltip with required input format"},weeks:{id:"issue.common.messages.time.time-input-format-tooltip.weeks",defaultMessage:"{w} = weeks",description:'Explaining the meaning of weeks in the locale. The final string will look like "w = weeks"'},days:{id:"issue.common.messages.time.time-input-format-tooltip.days",defaultMessage:"{d} = days",description:'Explaining the meaning of days in the locale. The final string will look like "d = days"'},hours:{id:"issue.common.messages.time.time-input-format-tooltip.hours",defaultMessage:"{h} = hours",description:'Explaining the meaning of hours in the locale. The final string will look like "h = hours"'},minutes:{id:"issue.common.messages.time.time-input-format-tooltip.minutes",defaultMessage:"{m} = minutes",description:'Explaining the meaning of minutes in the locale. The final string will look like "m = minutes"'}});var a=o.a.createElement(i.FormattedMessage,{id:"issue.common.messages.time.time-invalid-message",defaultMessage:"You need to log time in the format {timeString}.",values:{timeString:o.a.createElement("b",null,"2w 4d 6h 45m")},description:"The text shown when a user enters time that is in an invalid format"}),s="2w 4d 6h 45m"},"./src/packages/issue/issue-view/src/common/metrics/context/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return p});var r=n("./node_modules/react/index.js"),o=n("./src/packages/issue/issue-view/src/common/metrics/index.js");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){return function(t){e&&e.onReadyForUser&&e.onReadyForUser(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t).isInitialRender&&Object(o.j)(!0),Object(o.f)()}},c=function(e){return function(){e&&e.onInteractive&&e.onInteractive(),Object(o.e)()}},u=function(e){return{onPreviewRendered:s(e),onInteractive:c(e)}},l=null,f=function(e){return l=Object(r.createContext)(u(e))},p=function(){return l||Object(r.createContext)(u())}},"./src/packages/issue/issue-view/src/common/model/children-issues-type.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={create:"create",linkIssue:"linkIssue"}},"./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var r=n("./src/packages/issue/issue-view/src/common/model/view-mode-type.js"),o=n("./node_modules/query-string/index.js"),i=n.n(o),a=function(){return i.a.parse(window.location.search).view||""},s=function(){return a().includes("planning")},c=function(e){return e?e===r.b:s()||function(){return"detail"===a()}()}},"./src/packages/issue/issue-view/src/common/service/mentions/abstract-mention-provider.js":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("./node_modules/@atlaskit/mention/dist/esm/api/MentionResource.js"),o=n("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),i=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js"),a=n("./src/packages/issue/issue-view/src/common/service/mentions/user-transformer.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,f(t).call(this))).getQueryString=void 0,n.getUrl=void 0,n.shouldHighlightMention=void 0,n.lastSearchTime=void 0,n.activeSearches=void 0,n.baseUrl=void 0,n.baseUrl=e,n.lastSearchTime=0,n.activeSearches=new Set,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["a"]),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(t,[{key:"isFiltering",value:function(e){return this.activeSearches.has(e)}},{key:"filter",value:function(e,t){var n=this,r=Date.now();return this.search(e,t).then(function(t){n.activeSearches.delete(e),r>n.lastSearchTime&&(n.lastSearchTime=r,n._notifyListeners(t)),n._notifyAllResultsListeners(t)}).catch(function(t){e&&n.activeSearches.delete(e),n._notifyErrorListeners(t)})}},{key:"search",value:function(e,t){var n=this.getQueryString(e,t),r=this.getUrl(n);return this.activeSearches.add(e),Object(o.a)(r).mergeMap(function(e){return e.map(i.c)}).map(a.a).reduce(function(e,t){return[].concat(c(e),[t])},[]).map(function(t){return{query:e,mentions:t}}).toPromise()}}]),t}()},"./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js":function(e,t,n){"use strict";var r=n("./src/packages/issue/issue-view/src/feature-flags.js"),o=n("./node_modules/memoize-one/dist/memoize-one.esm.js");t.a=Object(o.a)(function(e){return function(t){return Object(r.x)()?"".concat(e,"/people/").concat(t):"".concat(e,"/secure/ViewProfile.jspa?accountId=").concat(t)}})},"./src/packages/issue/issue-view/src/common/service/mentions/index.js":function(e,t,n){"use strict";var r=n("./src/packages/issue/issue-view/src/common/service/mentions/issue-mention-provider.js"),o=n("./node_modules/query-string/index.js");n("./src/packages/issue/issue-view/src/common/service/mentions/abstract-mention-provider.js");var i=n("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),a=n("./node_modules/reselect/lib/index.js"),s=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),l=n("./src/packages/issue/issue-view/src/feature-flags.js"),f=n("./node_modules/@atlaskit/mention/dist/esm/api/TeamMentionResource.js"),p=n("./node_modules/@atlaskit/util-service-support/dist/esm/index.js"),d=n("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),m=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js"),b=n("./src/packages/issue/issue-view/src/common/service/mentions/user-transformer.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,s,"next",e)}function s(e){g(i,r,o,a,s,"throw",e)}a(void 0)})}}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=10,I=function(e){function t(e,n,r,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=E(this,S(t).call(this,i,a))).getUrl=function(e,t){var n=Object(o.stringify)(j({query:e,issueKey:s.issueKey,maxResults:P},t));return"".concat(s.baseUrl,"/rest/internal/2/user/mention/search?").concat(n)},s.baseUrl=void 0,s.issueKey=void 0,s.canBrowseUsers=void 0,s.baseUrl=e,s.issueKey=n,s.canBrowseUsers=r,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,f["a"]),function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(t,[{key:"remoteInitialStateTeamAndUsers",value:function(){var e=v(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"",n=this.remoteUserSearch("",t),r=this.canBrowseUsers?Object(d.a)("".concat(this.teamMentionConfig.url,"/bootstrap")).toPromise():Promise.resolve([]),this.handleBothRequests("",n,r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"remoteTeamSearch",value:function(){var e=v(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!this.canBrowseUsers){e.next=6;break}return o={path:"search",queryParams:j({query:t,limit:20},this.getQueryParamsOfTeamMentionConfig(n))},e.next=5,p.b.requestService(this.teamMentionConfig,o);case 5:r=e.sent;case 6:return e.abrupt("return",this.convertTeamResultToMentionResult(r,t));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"remoteUserSearch",value:function(e,t){var n=this.getUrl(e,t);return this.activeSearches.add("".concat(n,"?").concat(e)),Object(d.a)(n).mergeMap(function(e){return e.map(m.c)}).map(b.a).reduce(function(e,t){return[].concat(h(e),[t])},[]).map(function(t){return{query:e,mentions:t}}).toPromise()}},{key:"recordMentionSelection",value:function(e,t){}}]),t}(),x=Object(a.createSelector)(s.f,s.B,c.x,s.a,u.e,s.u,function(e,t,n,o,i,a){return Object(l.I)()&&!a?new I(e,t,i,{url:"".concat(e,"/rest/internal/2/user/mention/search"),shouldHighlightMention:function(e){return e.id===o}},{url:"/gateway/api/teams/mentions",teamHighlightEnabled:Object(l.J)(),createTeamPath:"".concat(e,"/jira/people/search#createTeam"),teamLinkResolver:function(e){return function(e){return e?"".concat(window.location.origin,"/jira/people/team/").concat(e,"?ref=jira$&src=issue"):""}(e)}}):new r.a(e,t,n)});n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return x})},"./src/packages/issue/issue-view/src/common/service/mentions/issue-mention-provider.js":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("./node_modules/query-string/index.js"),o=n("./src/packages/issue/issue-view/src/common/service/mentions/abstract-mention-provider.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=c(this,u(t).call(this,e))).getQueryString=function(e,t){return Object(r.stringify)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({query:e,issueKey:i.issueKey,maxResults:10},t))},i.getUrl=function(e){return"".concat(i.baseUrl,"/rest/internal/2/user/mention/search?").concat(e)},i.issueKey=void 0,i.loggedInUserId=void 0,i.shouldHighlightMention=function(e){return e.id===i.loggedInUserId},i.issueKey=n,i.loggedInUserId=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o["a"]),t}()},"./src/packages/issue/issue-view/src/common/service/mentions/user-transformer.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=e.id,n=e.displayName;return{id:t,name:n,mentionName:n,nickname:n,avatarUrl:e.avatarUrl}}},"./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e.mediaContext}},"./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),a=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),s=function(e){return Object(r.createSelector)(o.a,function(t){return t&&e?"".concat(t,":comment/").concat(e):null})},c=Object(r.createSelector)(i.h,a.i,function(e,t){return!(!e.canAddComments||!t)})},"./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=Object(r.createSelector)(o.H,function(e){return e.timestampDisplaySetting})},"./src/packages/issue/issue-view/src/common/styles/index.js":function(e,t,n){"use strict";var r=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),o=n("./node_modules/@atlaskit/theme/index.js");function i(){var e=p(["\n    ",";\n    max-height: ","ex;\n    ",";\n"]);return i=function(){return e},e}function a(){var e=p(["\n    ",";\n"]);return a=function(){return e},e}function s(){var e=p(["\n    font-size: 1em;\n    line-height: 1.714;\n    font-weight: normal;\n    margin-top: 1.143;\n    margin-bottom: 0;\n    letter-spacing: -0.005em;\n    overflow-y: auto;\n    overflow-x: hidden;\n    width: 100%;\n    height: auto;\n    white-space: pre-line;\n"]);return s=function(){return e},e}function c(){var e=p(["\n    ","::-webkit-scrollbar {\n        width: 8px;\n        background: transparent;\n    }\n\n    ","::-webkit-scrollbar-thumb {\n        background: #c1c1c1;\n        border-radius: 10px;\n    }\n"]);return c=function(){return e},e}function u(){var e=p(["\n    ",";\n"]);return u=function(){return e},e}function l(){var e=p(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return l=function(){return e},e}function f(){var e=p(["\n    color: ",";\n"]);return f=function(){return e},e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=r.default.span(f(),o.colors.N200),m=Object(r.css)(l()),b=r.default.div(u(),m),y=function(e){return Object(r.css)(c(),e,e)},h=Object(r.css)(s()),g=r.default.div(a(),h),v=r.default.div(i(),h,function(e){return 2.5*(e.maxRows?e.maxRows:2)},y("&")),O=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function j(){var e=k(["\n    margin-top: ",";\n"]);return j=function(){return e},e}function w(){var e=k(["\n    margin-top: ","px;\n"]);return w=function(){return e},e}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E=r.default.div(w(),function(e){return e.isCompactMode?2.5*O.e:5*O.e}),S=r.default.div(j(),function(e){return e.isCompactMode?null:"".concat(2.5*O.e,"px")});n.d(t,"c",function(){return d}),n.d(t,"g",function(){return m}),n.d(t,"b",function(){return b}),n.d(t,"h",function(){return y}),n.d(t,"f",function(){return g}),n.d(t,"e",function(){return v}),n.d(t,"d",function(){return E}),n.d(t,"a",function(){return S})},"./src/packages/issue/issue-view/src/common/util/dom-util/index.js":function(e,t,n){"use strict";var r=function(e){if(e){var t=getComputedStyle(e),n=(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0);return e.clientHeight-n}},o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||!e.parentElement)return null;var n=getComputedStyle(e),r=t&&"absolute"===n.position,o=/(auto|scroll)/;if("fixed"===n.position)return document.body;for(var i=e.parentElement;i;i=i&&i.parentElement){n=getComputedStyle(i);var a=r&&"static"===n.position;if(!a&&o.test(n.overflow+n.overflowY+n.overflowX))return i}return null};n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},"./src/packages/issue/issue-view/src/common/util/events/index.js":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return c});var r=function(e){return e&&e instanceof KeyboardEvent&&27===e.keyCode},o=function(e){return 13===e.keyCode},i=function(e){return 0===e.button},a=function(e){return i(e)&&!(e.metaKey||e.ctrlKey)},s=function(e){return 1===e.button},c=function(e){return i(e)&&(e.metaKey||e.ctrlKey)}},"./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js":function(e,t,n){"use strict";var r=n("./node_modules/lodash/flow.js"),o=n.n(r),i=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js");function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return function(n){return o.a.apply(void 0,[Object(i.a)({FallbackComponent:t})].concat(a(e),[function(n){return e.length?Object(i.a)({FallbackComponent:t})(n):n}]))(n)}}},"./src/packages/issue/issue-view/src/common/util/safe-component/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),s=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/node-env.js"),c=n("./src/packages/issue/issue-view/src/common/constants/index.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=function e(t){var n=this;h(this,e),this.logLocation=void 0,this.handleError=function(e,t){return a.h.safeError(n.logLocation,"An uncaught error has occurred in a React component",new i.a({eventNameSuffix:c.C,type:i.i,app:i.e,event:{message:e.message,stack:e.stack,componentStack:t}}))},this.callSafely=function(e,t){try{for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return t&&t.apply(e,o)}catch(e){n.handleError(e)}return null},this.logLocation="".concat("issue.error-boundary.").concat(t)},v=function(e){return!!e.prototype&&e.prototype.isReactComponent},O=function(e,t){var n=e,r=Object.getOwnPropertyDescriptor(n,"prototype");return Boolean(r&&r.value&&r.value[t])},j=["componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","componentDidUpdate"],w=function e(t,n,i){var c,u,l=i||function(e){return e.displayName||e.name||"UnsafeComponent"}(t),y=new g(i?"Fallback(".concat(l,")"):l);n&&function(e,t){var n=v(e)?e:e().type;if(n){var r=[];if(j.forEach(function(e){O(n,e)&&r.push(e)}),r.length){var o="The fallback component provided for '".concat(t,"' defines the following unsupported lifecycles methods:\n").concat("\t\t").concat(r.join("\n".concat("\t\t")));Object(s.a)()?console.warn(o):a.h.safeWarn("".concat("issue.error-boundary.").concat(t),o)}}}(n,l);var w=t;if(v(t)&&O(t,"componentWillUnmount")){var k=function(e){function n(){return h(this,n),p(this,m(n).apply(this,arguments))}return b(n,t),f(n,[{key:"componentWillUnmount",value:function(){y.callSafely(this,d(m(n.prototype),"componentWillUnmount",this))}}]),n}();k.displayName=l,w=k}var E={hadError:!1,isInternalRender:!1};return u=c=function(t){function i(){var e,t;h(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=p(this,(e=m(i)).call.apply(e,[this].concat(r)))).state=E,t}return b(i,r["Component"]),f(i,[{key:"componentDidCatch",value:function(e,t){y.handleError(e,t.componentStack),this.setState({hadError:!0,isInternalRender:!0})}},{key:"render",value:function(){if(this.state.hadError){if(!n)return null;var t=e(n,null,l);return o.a.createElement(t,this.props)}return o.a.createElement(w,this.props)}}]),i}(),c.displayName="".concat(function(){return i?"Fallback":n?"SafeWithFallback":"Safe"}(),"(").concat(l,")"),c.getDerivedStateFromProps=function(e,t){return t.hadError&&!t.isInternalRender?E:{isInternalRender:!1}},u},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return w(t,e.FallbackComponent)}}},"./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js":function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return f});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/model/field-config-types.js"),i=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),a=n("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js"),s=function(e){return!!e&&e.length>0},c=function(e){return e?[{value:!0}]:null},u=Object(i.e)(o.w),l=Object(r.createSelector)(u,function(e){return!!e&&function(e){if(e){var t=Object(a.a)(e);return s(t)}return!1}(e)}),f=Object(r.createSelector)(u,function(e){return e&&e.key})},"./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return f});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=n("./src/packages/issue/issue-view/src/configurations.js"),a=Object(o.p)(i.u),s=Object(r.createSelector)(a,function(e){return e&&e.value||null}),c=Object(r.createSelector)(a,function(e){return e&&e.allowedValues||[]}),u=Object(r.createSelector)(s,c,function(e,t){return e||t&&t.length>0}),l=Object(r.createSelector)(Object(o.y)(i.u),function(e){return e}),f=Object(r.createSelector)(s,c,l,function(e,t,n){return{hasSecurityLevel:null!=e,securityLevelAllowedValuesCount:t.length,hasSecurityLevelEditPermissions:n}})},"./src/packages/issue/issue-view/src/layout-descriptor/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/rxjs/Rx.js"),a=n("./node_modules/lodash/identity.js"),s=n.n(a),c=n("./node_modules/lodash/isEqual.js"),u=n.n(c),l=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),f=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),p=n("./src/packages/issue/issue-view/src/common/constants/index.js"),d=n("./src/packages/issue/issue-view/src/common/model/field-config-types.js"),m={type:d.l,key:d.l,payload:{}},b={context:{primaryContextItems:[m],secondaryContextItems:[]},content:{visibleContentItems:[],requestPanelContentItems:void 0}},y=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),h=n("./node_modules/lodash/isNull.js"),g=n.n(h),v=n("./node_modules/lodash/negate.js"),O=n.n(v),j=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),w=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),k=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),E=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),S=function(e){return{type:d.r,key:"".concat(d.r,"__").concat(e.appKey,"__").concat(e.moduleKey),payload:e}},C=n("./src/packages/issue/issue-view/src/common/model/layout-item-type.js"),P=function(e){switch(e.type){case d.h:return{type:e.type,key:"".concat(e.type,"__").concat(e.id),payload:{fieldId:e.id}};case d.g:case d.X:case d.o:case d.s:case d.q:case d.T:case d.J:case d.k:case d.hb:case d.jb:case d.u:case d.v:case d.a:case d.qb:case d.pb:case d.I:case d.ob:case d.N:case d.rb:case d.P:case d.kb:case d.db:case d.M:case d.tb:case d.nb:case d.O:case d.n:case d.x:case d.L:case d.sb:case d.S:case d.K:case d.U:case d.m:case d.mb:case d.R:case d.j:case d.cb:case d.b:case d.ab:case d.bb:case d.Q:case d.D:case d.F:case d.E:case d.C:case d.B:case d.e:case d.d:case d.Y:return{type:e.type,key:"".concat(e.type,"__").concat(e.id),payload:{fieldId:e.id}};case C.g:return{type:e.type,key:"".concat(e.type,"__").concat(e.id),payload:{tabId:e.id}};case d.H:case d.gb:case d.p:case d.W:case d.f:return{type:e.type,key:e.type};default:return null}},I=function(e){return{applicationRoles:Object(w.a)(e),permissions:Object(w.h)(e),isCompletedLoading:Object(j.l)(e),glances:Object(k.h)(e),visibleContentItems:Object(E.f)(e),requestContentItems:Object(E.e)(e),visibleContextItems:Object(E.g)(e),conditionallyVisibleContextItems:Object(E.a)(e)}},x=O()(g.a),_=n("./src/packages/platform/utils/constants/src/project-types.js"),M=n("./node_modules/lodash/partition.js"),T=n.n(M),A=n("./src/packages/issue/issue-view/src/feature-flags.js"),D=n("./node_modules/lodash/flow.js"),L=n.n(D),N=n("./node_modules/lodash/isEmpty.js"),R=n.n(N),F=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),V=n("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var W=function(e,t){var n=e.context,r=n.primaryContextItems,o=n.secondaryContextItems,i=o.filter(function(e){return e.type===t});if(i.length){var a=function(e,t){return e.filter(function(e){return e.type!==t})}(o,t);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{context:{primaryContextItems:[].concat(K(r),K(i)),secondaryContextItems:a}})}return e};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var J=new Set([d.Y,d.b]),Q=new Set([d.gb,d.H,d.Y]),Z=function(e,t){var n=J.has(e.type),r=e.payload&&e.payload.fieldId,o=n&&r?Object(F.u)(r,Object(F.s)(t)):null;return o&&function(e){var t=Object(V.a)(e);return R()(t)}(o)&&!Object(F.w)(o)},Y=function(e,t){var n=e.payload&&e.payload.fieldId||"";return e.type===d.ab&&function(e,t){var n=Object(F.c)(e)(t);return n&&n.length<=1}(n,t)},$=function(e,t){return Z(e,t)||function(e,t){return Q.has(e.type)&&!Object(w.f)(t)}(e,t)||Y(e,t)},X=function(e,t){var n=G(T()(e.context.primaryContextItems,function(e){return $(e,t)}),2),r=n[0],o=n[1],i=o.slice(0,7),a=o.slice(7);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{context:{primaryContextItems:i,secondaryContextItems:[].concat(q(r),q(a),q(e.context.secondaryContextItems))}})},ee=function(e,t){return L()(function(e){return Object(A.N)()?e:X(e,t)},function(e){return Object(A.N)()?e:W(e,d.p)},function(e){return Object(A.N)()?e:function(e){var t=e.context.secondaryContextItems;return t.find(function(e){return e.type===d.e})?W(e,d.e):Object(A.a)()&&t.find(function(e){return e.type===d.f})?W(e,d.f):e}(e)},function(e){return Object(A.N)()?e:W(e,C.g)})(e)},te=n("./node_modules/lodash/get.js"),ne=n.n(te),re=n("./src/packages/platform/utils/constants/src/status-categories.js"),oe=n("./src/packages/issue/issue-view/src/selectors/status-selector.js");function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach(function(t){se(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ue=function(e){if(Object(A.U)())return e;var t=e.context.primaryContextItems,n=t.slice(0,7),r=t.slice(7);return ae({},e,{context:{primaryContextItems:n,secondaryContextItems:[].concat(ce(r),ce(e.context.secondaryContextItems))}})},le=function(e){return e.type===d.Y},fe=function(e){return e.type!==d.Y},pe=function(e,t){var n=e.context.primaryContextItems,r=n.slice().filter(fe),o=n.find(le);if(Object(oe.b)(t)===re.DONE&&o){var i=o&&ne()(o,"payload.fieldId"),a=i&&Object(F.u)(i,Object(F.s)(t));ne()(a,"value",!1)&&r.unshift(o)}return ae({},e,{context:ae({},e.context,{primaryContextItems:r})})};function de(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach(function(t){ye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ge=new Set([d.W]),ve=function(e){var t=new Set([d.e,d.W]),n=e.context.primaryContextItems,r=e.content,o=he(T()(r.visibleContentItems,function(e){return t.has(e.type)}),2),i=o[0],a=o[1],s=he(r.requestPanelContentItems?T()(r.requestPanelContentItems,function(e){return t.has(e.type)}):[],2),c=s[0];return be({},e,{content:be({},r,{visibleContentItems:a,requestPanelContentItems:s[1]}),context:be({},e.context,{primaryContextItems:[].concat(de(n),de(c||[]),de(i))})})},Oe=function(e){var t=e.context.primaryContextItems,n=e.content,r=he(T()(n.visibleContentItems,function(e){return ge.has(e.type)}),2),o=r[0],i=r[1],a=he(n.requestPanelContentItems?T()(n.requestPanelContentItems,function(e){return ge.has(e.type)}):[],2),s=a[0];return be({},e,{content:be({},n,{visibleContentItems:i,requestPanelContentItems:a[1]}),context:be({},e.context,{primaryContextItems:[].concat(de(t),de(s||[]),de(o))})})},je=function(e){return Object(A.M)()?W(e,d.r):e},we=function(e){return Object(A.b)()?e.map(Oe):e.map(ve)},ke=function(e){return function(t){var n=t.layoutDescriptor$;return{layoutDescriptor$:we(n).map(function(t){return Object(j.s)(e)?function(e,t){return L()(pe,ue)(e,t)}(t,e):ee(t,e)}).map(je)}}},Ee=function(e){switch(Object(j.E)(e)){case _.j:return ke(e);case _.d:case _.k:default:return s.a}},Se=Object(y.a)(I),Ce=function(e,t){var n=Se(e),r=I(t);return u()(n,r)},Pe=function(e){var t=e.locationTransformer,n=e.store,r=i.Observable.create(function(e){var t=n.getState();return e.next(t),n.subscribe(function(){var r=n.getState();t!==r&&(t=r,e.next(t))})}).distinctUntilChanged(Ce);return{layoutDescriptor$:t({layoutDescriptor$:function(e){var t=e.state$.map(Ee).distinctUntilChanged();return function(e){var n=e.layoutDescriptor$;return{layoutDescriptor$:t.map(function(e){return e({layoutDescriptor$:n})}).share().switchMap(function(e){return e.layoutDescriptor$})}}}({state$:r})({layoutDescriptor$:function(e){return{layoutDescriptor$:e.state$.map(I).map(function(e){var t=!e.isCompletedLoading,n=e.glances,r=t?[m]:[];return{context:{primaryContextItems:e.visibleContextItems.map(P).concat(n.map(S)).concat(r).filter(x),secondaryContextItems:e.conditionallyVisibleContextItems.map(P).filter(x)},content:{visibleContentItems:e.visibleContentItems.map(P).filter(x),requestPanelContentItems:e.requestContentItems&&e.requestContentItems.map(P).filter(x)}}})}}({state$:r}).layoutDescriptor$}).layoutDescriptor$}).layoutDescriptor$}};function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae=Object(r.createContext)({layoutDescriptor:b}),De=Ae.Provider,Le=Ae.Consumer,Ne=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_e(this,Me(t).call(this,e))).state={layoutDescriptor:b},n.onError=function(e){f.h.safeError("issue.layout-descriptor.provider","Failed to create layout descriptor",new l.a({eventNameSuffix:p.C,type:l.i,app:l.e,event:e}))},n.getLayoutDescriptorObservable=function(){var e=n.props,t=e.store,r=e.locationTransformer,o=Pe({store:t,locationTransformer:r}).layoutDescriptor$.share();return function(){return o}}(),n.constructorSubscription=void 0,n.componentDidMountSubscription=void 0;var r=n.getLayoutDescriptorObservable();return n.constructorSubscription=r.filter(function(e,t){return 0===t}).subscribe(function(e){n.state={layoutDescriptor:e}},n.onError),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,r["Component"]),function(e,t,n){t&&xe(e.prototype,t),n&&xe(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this,t=this.getLayoutDescriptorObservable();this.componentDidMountSubscription=t.subscribe(function(t){u()(e.state.layoutDescriptor,t)||e.setState({layoutDescriptor:t})},this.onError),this.constructorSubscription.unsubscribe()}},{key:"componentWillUnmount",value:function(){this.componentDidMountSubscription.unsubscribe()}},{key:"render",value:function(){var e=this.props.children,t=this.state.layoutDescriptor;return o.a.createElement(De,{value:{layoutDescriptor:t}},e)}}]),t}();Ne.displayName="Provider",Ne.displayName="LayoutDescriptorProvider",Ne.defaultProps={locationTransformer:s.a},n.d(t,"b",function(){return Ne}),n.d(t,"a",function(){return Le})},"./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),a=Object(r.createSelector)(i.H,function(e){return e.assignIssueParentModal.isOpen}),s=Object(r.createSelector)(o.k,i.z,function(e,t){return[{id:e.issueId,key:e.issueKey,parentId:t&&t.id}]})},"./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=Object(r.createSelector)(o.c,function(e){return e&&e.viewScreenId})},"./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=n("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),a=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),s=Object(r.createSelector)(o.e,function(e){return e.confluenceAppLinks||[]}),c=Object(r.createSelector)(s,function(e){return e&&e.length>0}),u=Object(r.createSelector)(c,i.c,a.f,function(e,t,n){return e&&t&&n})},"./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return m}),n.d(t,"h",function(){return b}),n.d(t,"j",function(){return y}),n.d(t,"g",function(){return h}),n.d(t,"i",function(){return g});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=Object(r.createSelector)(o.e,function(e){return e.confluencePages}),a=Object(r.createSelector)(i,function(e){return e.createLinkedPage}),s=Object(r.createSelector)(a,function(e){return e.errorMessage}),c=Object(r.createSelector)(a,function(e){return e.isInvalid}),u=Object(r.createSelector)(a,function(e){return e.isLoading}),l=Object(r.createSelector)(a,function(e){return e.clickedCount>0}),f=Object(r.createSelector)(a,function(e){return e.clickedCount}),p=Object(r.createSelector)(i,function(e){return e&&e.linkedPages}),d=Object(r.createSelector)(i,function(e){return e&&e.mentionedPages}),m=Object(r.createSelector)(i,function(e){return!(!e||!e.isLinkingEnabled)}),b=Object(r.createSelector)(p,function(e){return e&&e.pages}),y=Object(r.createSelector)(d,function(e){return e&&e.pages}),h=Object(r.createSelector)(p,function(e){return e&&e.pageCount}),g=Object(r.createSelector)(d,function(e){return e&&e.pageCount})},"./src/packages/issue/issue-view/src/selectors/context-panel-selector.js":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=Object(r.createSelector)(o.H,function(e){return e.contextPanel}),a=Object(r.createSelector)(i,function(e){return e&&e.isContextPanelOpen}),s=Object(r.createSelector)(i,function(e){return e&&e.contextPanelItem})},"./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js":function(e,t,n){"use strict";n.d(t,"j",function(){return d}),n.d(t,"k",function(){return b}),n.d(t,"h",function(){return y}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return v}),n.d(t,"a",function(){return O}),n.d(t,"g",function(){return j}),n.d(t,"i",function(){return w}),n.d(t,"f",function(){return k}),n.d(t,"e",function(){return E});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/platform/utils/constants/src/project-types.js"),i=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),a=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),s=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),c=n("./src/packages/issue/issue-view/src/feature-flags.js"),u=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),l=n("./src/packages/issue/issue-view/src/selectors/request-type-selector.js"),f=n("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),p=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),d=Object(r.createSelector)(i.v,function(e){return!!e}),m=Object(r.createSelector)(s.c,s.b,function(e,t){return e||t}),b=Object(r.createSelector)(a.s,m,function(e,t){return t&&e}),y=Object(r.createSelector)(a.g,i.s,function(e,t){return!e&&!t}),h="show",g="hide",v="disabled_permission",O="disabled_no_request_type",j=Object(r.createSelector)(a.k,u.c,a.E,l.a,s.f,function(e,t,n,r,i){if(!e)return g;if(!t)return v;switch(n){case o.j:if(!Object(c.L)())return g;if(!i)return v;if(!r)return O}return h}),w=Object(r.createSelector)(a.k,u.c,i.u,l.a,s.f,j,function(e,t,n,r,o,i){return Object(c.P)()?i===h:e&&t&&(Object(c.L)()?!n||n&&o&&!!r:!n)}),k=Object(r.createSelector)(p.c,p.b,f.b,a.k,function(e,t,n,r){return!e&&!t&&n&&r}),E=Object(r.createSelector)(p.c,a.k,function(e,t){return e&&t})},"./src/packages/issue/issue-view/src/selectors/issue-types-selector.js":function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return p}),n.d(t,"a",function(){return d});var r=n("./node_modules/reselect/lib/index.js"),o=n("./node_modules/lodash/isEmpty.js"),i=n.n(o),a=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),s=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),c=Object(r.createSelector)(a.e,function(e){return e.issueTypes}),u=["summary","issuetype","parent","project"],l=function(e){return!!Object.keys(e).find(function(t){return!function(e){return u.find(function(t){return e===t})}(t)&&!e[t].hasDefaultValue&&e[t].required})},f=function(e){return i()(e.fields)||l(e.fields)},p=Object(r.createSelector)(c,s.f,a.p,function(e,t,n){var r=n&&t&&t.id;return e.filter(function(e){return!e.subtask&&e.id!==r})}),d=Object(r.createSelector)(a.H,function(e){return e.fetchIssueTypesStatus})},"./src/packages/issue/issue-view/src/selectors/request-type-selector.js":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/model/field-config-types.js"),i=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),a=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),s=function(e){return e&&e.value&&e.value.requestType&&e.value.requestType.id},c=(Object(r.createSelector)(Object(i.e)(o.cb),s),Object(r.createSelector)(Object(i.e)(o.cb),a.d,function(e,t){return e&&e.value&&e.value.requestType&&e.value.requestType.issueTypeId===t?e:null})),u=Object(r.createSelector)(c,s)},"./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js":function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=n("./src/packages/issue/issue-view/src/feature-flags.js"),a=n("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js"),s=Object(r.createSelector)(o.e,a.d,function(e,t){return Object(i.t)()?t.filter(function(e){return e.subtask}):e.subtaskTypes||[]}),c=Object(r.createSelector)(s,function(e){return e.length>=1}),u=Object(r.createSelector)(s,function(e){return!!e.find(a.b)})},"./src/packages/issue/issue-view/src/selectors/subtasks-selector.js":function(e,t,n){"use strict";var r=n("./node_modules/reselect/lib/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),a=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),s=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),c=n("./src/packages/issue/issue-view/src/common/model/project-validator-type.js"),u=Object(r.createSelector)(function(e){return e.validators},function(e){var t=e.projectHasSubtaskValidators;return function(e){return e.status===c.b&&e.value}(t)||function(e){return e.status===c.c||e.status===c.a}(t)}),l=n("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js");n.d(t,"c",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return b});var f=Object(r.createSelector)(s.f,function(e){return!(!e||!e.subtask)}),p=Object(r.createSelector)(i.e,function(e){return e.subtasks}),d=Object(r.createSelector)(p,function(e){return Object.keys(e).length>0}),m=Object(r.createSelector)(l.a,u,function(e,t){return e||t}),b=Object(r.createSelector)(a.h,f,l.b,m,o.s,o.o,o.u,i.s,function(e,t,n,r,o,i,a,s){return!(!e.canCreateSubtask||t||!n||!!r&&(o||i)||!(!a||!s))})},"./src/packages/issue/issue-view/src/utils/html-parsing-utils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e.replace('class="jira-issue-macro resolved"','class="jira-issue-macro"')}},"./src/packages/issue/issue-view/src/utils/parse-html-to-adf.js":function(e,t,n){"use strict";var r=n("./node_modules/@atlaskit/editor-jira-transformer/dist/esm/index.js"),o=n("./node_modules/@atlaskit/renderer/dist/esm/utils.js"),i=n("./src/packages/issue/issue-view/src/utils/html-parsing-utils.js"),a=new o.a(function(e){return new r.a(e)});t.a=function(e){return a.encode(Object(i.a)(e))}},"./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),s=n("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-action-creator.js"),c=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),l=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),f=n("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js"),p=n("./node_modules/react-async-component/commonjs/index.js"),d=Object(p.asyncComponent)({resolve:function(){return function(){return n.e(19).then(n.bind(null,"./src/packages/assign-issue-parent-modal/src/index.js"))}()}}),m=function(e){return o.a.createElement(a.e,null,e.isOpen&&o.a.createElement(d,e))};m.displayName="ModalHoc";t.a=Object(i.connect)(function(e){return{shouldHideUnassignOption:Object(l.d)(e),isOpen:Object(f.b)(e),issues:Object(f.a)(e),issueParents:Object(u.A)(e),issueHierarchyLevel:Object(l.e)(e),issueParentTypeIds:Object(l.f)(e),parentIssueTypeName:Object(l.g)(e)[0],locale:Object(c.D)(e),baseUrl:Object(c.f)(e),projectId:Object(u.B)(e),analyticsSource:"issue-view (".concat(Object(c.b)(e),")")}},function(e){return{onClose:function(){e(Object(s.d)())},onSubmit:function(t,n,r,o){e(Object(s.e)(t,r,o))}}})(m)},"./src/packages/issue/issue-view/src/views/banner/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react-redux/es/index.js"),o=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),a=function(e){var t=e.renderTopBanner,n=e.applicationKey,r=e.isProjectSimplified;return t?t(n,r):null};t.a=Object(r.connect)(function(e){return{applicationKey:Object(o.d)(e),isProjectSimplified:Object(i.s)(e)}},{})(a)},"./src/packages/issue/issue-view/src/views/changeboarding/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react-intl/lib/index.es.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/lodash/flow.js"),a=n.n(i),s=n("./src/packages/platform/observability/analytics-web-react/src/index.js"),c=n("./node_modules/react/index.js"),u=n.n(c),l=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/onboarding-wrapper/index.js"),f=function(e){return e.currentStep===e.totalSteps},p=function(e){return e.currentStep===e.totalSteps-1},d=n("./node_modules/@atlaskit/onboarding/components/Spotlight.js"),m=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),b=Object(r.defineMessages)({next:{id:"issue-changeboarding.simple-spotlight.next",defaultMessage:"Next",description:"Shown on button to go to the next step in onboarding feature tour"},done:{id:"issue-changeboarding.simple-spotlight.done",defaultMessage:"Done",description:"Shown on button at the last step in onboarding feature tour"}});function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h={dialogWidth:37.5*m.e,targetBgColor:"white",targetRadius:m.a,pulse:!0},g=function(e){var t=e.context,n=e.name,r=e.targetReplacement,o=e.children,i=e.intl,a=e.placement,s=e.onPrimaryActionClick;return u.a.createElement(d.a,y({},h,{actions:[{onClick:s,text:i.formatMessage(p(t)?b.done:b.next)}],dialogPlacement:a,key:n,target:n,targetReplacement:r,actionsBeforeElement:"".concat(t.currentStep+1,"/").concat(t.totalSteps)}),o)};g.displayName="SimpleSpotlight",g.defaultProps={targetReplacement:void 0};var v=g;function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var j=function(e){var t=e.isTourActive,n=e.recipe,r=e.recipeContext,o=e.onTourEnd,i=e.intl,a=n.stepsForContext(r),s=O(Object(c.useState)(0),2),p=s[0],d=s[1],m=Object(c.useMemo)(function(){return{currentStep:p,totalSteps:a.length,advanceStep:function(){return d(function(e){return e+1})}}},[d,a,p]);if(Object(c.useEffect)(function(){f(m)&&(d(0),o(r))},[o,r,m]),!t||f(m))return null;var b=a[m.currentStep],y=n.steps[b](r),h=u.a.createElement(v,{context:m,intl:i,onPrimaryActionClick:m.advanceStep,name:b,placement:y.placement,targetReplacement:y.targetReplacement},i.formatMessage(y.message));return u.a.createElement(l.a,{shouldRender:t},h)};j.displayName="Changeboarding";var w=j,k=n("./src/packages/issue/issue-view/src/actions/changeboarding-action-creator.js"),E=n("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),S=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),C=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),P=n("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),I=n("./node_modules/reselect/lib/index.js"),x=n("./src/packages/issue/issue-view/src/feature-flags.js"),_=n("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),M=n("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),T=n("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js"),A=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),D=Object(I.createSelector)(_.b,A.a,T.a,M.a,function(e,t,n,r){return Object(x.t)()?e||n||r:e||t||n||r}),L=n("./src/packages/issue/issue-view/src/views/constants.js"),N=Object(r.defineMessages)({quickAdds:{id:"changeboarding.bento.step.quickAdds",defaultMessage:"Quickly add attachments, issue links, subtasks, as well as Marketplace app content."},quickAddsWithNoPermissions:{id:"changeboarding.bento.step.quickAddsWithNoPermissions",defaultMessage:"For projects where you have permission, the quick-add buttons let you add attachments, linked issues, subtasks, and content from Atlassian Marketplace apps."},editAnyField:{id:"changeboarding.bento.step.editAnyField",defaultMessage:"A single screen for view and edit lets you click any field to update it."},showMore:{id:"changeboarding.bento.step.showMore",defaultMessage:"All the finer details of the issue are here when you need them."},showMoreWhenNoExpander:{id:"changeboarding.bento.step.showMoreWhenNoExpander",defaultMessage:'Looking for a field but can\'t see it? Fields without a value appear under "Show more".'},boardSidebar:{id:"changeboarding.bento.step.boardSidebar",defaultMessage:"Prefer to open issues as a sidebar? The choice is yours."},giveFeedback:{id:"changeboarding.bento.step.giveFeedback",defaultMessage:"You're part of the team! Leave feedback and help us build the best issue view."},next:{id:"changeboarding.bento.next",defaultMessage:"Next"},skip:{id:"changeboarding.bento.skip",defaultMessage:"Skip"},done:{id:"changeboarding.bento.done",defaultMessage:"Done"}}),R=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),F=n("./node_modules/@atlaskit/icon/glyph/attachment.js"),V=n.n(F),U=n("./node_modules/@atlaskit/icon/glyph/link.js"),B=n.n(U),K=n("./node_modules/@atlaskit/icon/glyph/more.js"),W=n.n(K),H=n("./node_modules/@atlaskit/icon/glyph/subtask.js"),z=n.n(H),q=n("./node_modules/@atlaskit/onboarding/styled/Target.js"),G=n("./node_modules/lodash/noop.js"),J=n.n(G),Q=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/index.js");function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    & button {\n        cursor: default;\n    }\n"]);return $=function(){return e},e}var X=R.default.div($()),ee=function(e,t){return u.a.createElement(Q.a,{key:e,id:e,icon:t,onClick:J.a})};ee.displayName="createItemView";var te=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){Y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({overflow:"hidden",backgroundColor:"white"},e,{height:5*m.e,width:20*m.e,display:"inline-flex",paddingLeft:m.e,paddingTop:m.e/2,borderRadius:m.a}),n=ee("ADD_ATTACHMENT_ID",u.a.createElement(V.a,{size:"medium"})),r=ee("SUB_TASK",u.a.createElement(z.a,{size:"medium"})),o=ee("LINK_ISSUE",u.a.createElement(B.a,{size:"medium"})),i=ee("MORE_ICON",u.a.createElement(W.a,{size:"medium"}));return u.a.createElement(q.a,{style:t},u.a.createElement(X,null,n,r,o,i))};te.displayName="QuickAddsReplacement";var ne=n("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/index.js"),re=Object(r.defineMessages)({timeTracking:{id:"changeboarding.bento.step.show-more.time-tracking",defaultMessage:"Time tracking"},originalEstimate:{id:"changeboarding.bento.step.show-more.original-estimate",defaultMessage:"Original estimate"},components:{id:"changeboarding.bento.step.show-more.components",defaultMessage:"Components"}});function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function se(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    & button {\n        cursor: default;\n    }\n"]);return se=function(){return e},e}var ce=R.default.div(se()),ue=function(e){var t=e.intl,n=ae(e,["intl"]),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach(function(t){ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({overflow:"hidden",color:"rgb(0, 82, 204)",backgroundColor:"white",paddingTop:m.e/2},n,{height:7*m.e,borderRadius:m.a}),o=[t.formatMessage(re.timeTracking),t.formatMessage(re.originalEstimate),t.formatMessage(re.components)];return u.a.createElement(q.a,{style:r},u.a.createElement(ce,null,u.a.createElement(ne.a,{visibleSecondaryContextItemNameList:o,fieldCount:o.length,onExpand:function(){}})))};ue.displayName="ShowMoreReplacementIntl";var le=Object(r.injectIntl)(ue),fe={stepsForContext:function(e){var t=[L.d];return e.isAssigneeVisible&&t.push(L.b),t.push(L.e),e.isBoardModalView&&t.push(L.a),e.isFeedbackEnabled&&t.push(L.c),t},steps:{QUICK_ADDS:function(e){var t=e.hasQuickAddPermissions?void 0:te;return{placement:"",message:e.hasQuickAddPermissions?N.quickAdds:N.quickAddsWithNoPermissions,targetReplacement:t}},EDIT_FIELD:function(){return{placement:"left top",message:N.editAnyField}},BOARD_SIDEBAR:function(){return{placement:"bottom center",message:N.boardSidebar}},GIVE_FEEDBACK:function(){return{placement:"bottom center",message:N.giveFeedback}},SHOW_MORE:function(e){return{placement:"top left",message:e.hasShowMoreLink?N.showMore:N.showMoreWhenNoExpander,targetReplacement:le}}}},pe=Object(r.injectIntl)(w);t.a=a()(Object(s.f)("button",{onTourEnd:"clicked"}),Object(s.s)({onTourEnd:function(e){return{name:"finishIssueChangeboardingTour",hasQuickAddPermissions:e.hasQuickAddPermissions,hasShowMoreLink:e.hasShowMoreLink}}}),Object(o.connect)(function(e,t){return{isTourActive:Object(P.c)(e),recipeContext:{isBoardModalView:Object(S.b)(e)&&"software-issue"===Object(S.b)(e).valueOf()&&!Object(E.b)(),hasQuickAddPermissions:D(e),hasShowMoreLink:Object(C.d)(e),isAssigneeVisible:Object(P.a)(e),isFeedbackEnabled:t.isFeedbackEnabled},recipe:fe}},{onTourEnd:k.d}))(pe)},"./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/@atlaskit/button/components/Button.js"),a=n("./node_modules/@atlaskit/icon/glyph/add.js"),s=n.n(a),c=n("./node_modules/lodash/noop.js"),u=n.n(c);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.onClick;return o.a.createElement("div",null,o.a.createElement("style",null,".squareButtonWithIcon { padding: 0 6px }"),o.a.createElement(i.b,{appearance:"subtle",spacing:"compact",iconBefore:o.a.createElement(s.a,{size:"small",label:t}),onClick:n,className:"squareButtonWithIcon"}))}}]),t}();b.displayName="SquareAddIconButton",b.defaultProps={onClick:u.a}},"./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/context/actions.js":function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"i",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"j",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"g",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"h",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"f",function(){return p});var r="state.context.SET_CONTEXT",o=function(e){return{type:r,payload:e}},i="state.context.SET_IS_ISSUE_VIEW_COMPLETE",a=function(e){return{type:i,payload:e}},s="state.context.REQUIRES_FULL_CREATE_CHECK",c=function(){return{type:s}},u="state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS",l=function(e){return{type:u,payload:{requiresFullCreate:e}}},f="state.context.REQUIRES_FULL_CREATE_CHECK_FAILED",p=function(){return{type:f}}},"./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/entities/actions.js":function(e,t,n){"use strict";n.d(t,"s",function(){return r}),n.d(t,"M",function(){return o}),n.d(t,"t",function(){return i}),n.d(t,"N",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"y",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"A",function(){return l}),n.d(t,"d",function(){return f}),n.d(t,"x",function(){return p}),n.d(t,"n",function(){return d}),n.d(t,"E",function(){return m}),n.d(t,"k",function(){return b}),n.d(t,"G",function(){return y}),n.d(t,"l",function(){return h}),n.d(t,"H",function(){return g}),n.d(t,"m",function(){return v}),n.d(t,"I",function(){return O}),n.d(t,"f",function(){return j}),n.d(t,"z",function(){return w}),n.d(t,"o",function(){return k}),n.d(t,"F",function(){return E}),n.d(t,"c",function(){return S}),n.d(t,"w",function(){return C}),n.d(t,"j",function(){return P}),n.d(t,"D",function(){return I}),n.d(t,"b",function(){return x}),n.d(t,"v",function(){return _}),n.d(t,"h",function(){return M}),n.d(t,"B",function(){return T}),n.d(t,"i",function(){return A}),n.d(t,"C",function(){return D}),n.d(t,"q",function(){return L}),n.d(t,"K",function(){return N}),n.d(t,"p",function(){return R}),n.d(t,"J",function(){return F}),n.d(t,"r",function(){return V}),n.d(t,"L",function(){return U}),n.d(t,"a",function(){return B}),n.d(t,"u",function(){return K});var r="state.entities.SET_ENTITIES",o=function(e){return{type:r,payload:e}},i="state.entities.UPDATE_ISSUE",a=function(e){return{type:i,payload:e}},s="state.entities.CREATE_CHILD_REQUEST",c=function(e,t){return{type:s,payload:{optimisticUiChildIssue:e},meta:{analyticsEvent:t}}},u="state.entities.CREATE_CHILD_SUCCESS",l=function(e,t,n){return{type:u,payload:{optimisticId:e,createdChild:t},meta:{analyticsEvent:n}}},f="state.entities.CREATE_CHILD_FAILURE",p=function(e){return{type:f,payload:{optimisticId:e,errorReason:"CREATE"}}},d="state.entities.LINK_CHILD_SUCCESS",m=function(e,t,n){return{type:d,payload:{issueId:e,linkedChild:t},meta:{analyticsEvent:n}}},b="state.entities.LINKING_ISSUE_FAILURE",y=function(e,t){return{type:b,payload:{createdChild:e,optimisticId:t}}},h="state.entities.LINKING_ISSUE_RETRY",g=function(e,t){return{type:h,payload:{issueId:e},meta:{analyticsEvent:t}}},v="state.entities.LINKING_ISSUE_RETRY_FAILURE",O=function(e){return{type:v,payload:{issueId:e}}},j="state.entities.CREATE_CHILD_RETRY",w=function(e,t){return{type:j,payload:{optimisticId:e},meta:{analyticsEvent:t}}},k="state.entities.LINK_PARENT_FAILURE",E=function(e){return{type:k,payload:{optimisticId:e,errorReason:"LINK_PARENT"}}},S="state.entities.CHILD_CREATED_IN_FULL_DIALOG",C=function(e,t,n){return{type:S,payload:{optimisticId:e,createdChild:t},meta:{analyticsEvent:n}}},P="state.entities.FETCH_SINGLE_CHILD_SUCCESS",I=function(e){return{type:P,payload:{childIssue:e}}},x="state.entities.CANCEL_OPTIMISTIC_CHILD",_=function(e){return{type:x,payload:{optimisticId:e}}},M="state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST",T=function(){return{type:M}},A="state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS",D=function(e){return{type:A,payload:{issues:e}}},L="state.entities.REORDER_CHILDREN_REQUEST",N=function(e,t,n,r,o){return{type:L,payload:{currentOrder:e,newOrder:t,currentIndex:n,newIndex:r},meta:{analyticsEvent:o}}},R="state.entities.REORDER_CHILDREN_FAILED",F=function(e,t,n,r){return{type:R,payload:{originalOrder:e,newOrder:t,originalIndex:n,newIndex:r}}},V="state.entities.REORDER_CHILDREN_SUCCESS",U=function(e){return{type:V,payload:{newOrder:e}}},B="state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST",K=function(e,t){return{type:B,payload:e,meta:{analyticsEvent:t}}}},"./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/index.js":function(e,t,n){"use strict";(function(e){var r=n("./src/packages/common-legacy-do-not-add-anything-new/src/tangerine/state/initiate.js"),o=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/reducer.js");t.a=function(t,i,a){return Object(r.a)({appName:"".concat(i,"-child-issues-panel-").concat(a),rootReducer:o.default,rootEpic:t,hotReducerReplacement:function(t){return e.hot.accept("./reducer",function(){return t(n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/reducer.js").default)})}})}}).call(this,n("./node_modules/webpack/buildin/harmony-module.js")(e))},"./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/reducer.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/redux/es/index.js"),o=n("./node_modules/lodash/noop.js"),i=n.n(o),a=n("./src/packages/platform/utils/constants/src/supported-locales.js"),s=n("./src/packages/platform/utils/types/src/index.js"),c=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/context/actions.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={baseUrl:Object(s.toBaseUrl)(""),locale:a.b,user:null,childIssuesPanelType:null,supportsIssueCreation:!1,requiresFullCreate:!1,parentKey:null,customFieldIdRank:null,epicLinkFieldKey:null,parentId:null,projectId:null,messages:null,onNavigateToNewIssue:i.a,onChange:i.a,isIssueViewComplete:!1},d=n("./node_modules/lodash/find.js"),m=n.n(d),b=n("./src/packages/issue/issue-view/src/common/model/children-issues-type.js"),y=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/entities/actions.js");function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={issues:[],issueTypes:[]},w=n("./src/packages/issue/issue-view/src/reducers/fetch-issue-types-status-reducer.js"),k=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/ui/actions.js");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P={addClickCount:0,hideDone:!1,selectedIssueType:null,childPanelView:k.a.InlineCreate,childCreateSummary:"",fetchIssueTypesStatus:w.c};t.default=Object(r.combineReducers)({context:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.d:case c.c:return l({},e,{},t.payload);case c.b:return l({},e,{requiresFullCreate:!0});case c.e:return l({},e,{isIssueViewComplete:t.payload});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.g:return S({},e,{addClickCount:e.addClickCount+1});case k.b:return S({},e,{addClickCount:0,childPanelView:k.a.InlineCreate,childCreateSummary:""});case k.e:return S({},e,{childPanelView:t.view});case k.d:return S({},e,{childCreateSummary:t.summary});case k.h:return S({},e,{hideDone:!e.hideDone});case k.c:return S({},e,{selectedIssueType:t.payload});case k.f:return S({},e,{fetchIssueTypesStatus:t.payload});default:return e}},entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.s:var n=t.payload,r=n.issueTypes,o=n.issues;return v({},e,{issues:o,issueTypes:r});case y.t:var i=t.payload,a=h(e.issues),s=a.findIndex(function(e){return e.id===i.id});return a[s]=i,v({},e,{issues:a});case y.e:var c=v({},t.payload.optimisticUiChildIssue,{isLoading:!0,errorType:void 0});return v({},e,{issues:e.issues.filter(function(e){return e.id!==c.id}).concat(c)});case y.g:var u=t.payload,l=u.optimisticId,f=u.createdChild;return v({},e,{issues:e.issues.filter(function(e){return e.id!==l}).concat(f)});case y.j:var p=t.payload.childIssue;return v({},e,{issues:e.issues.map(function(e){return e.id===p.id?p:e})});case y.d:var d=t.payload.optimisticId;return v({},e,{issues:e.issues.map(function(e){return e.id===d?v({},e,{errorType:b.a.create,isLoading:!1}):e})});case y.k:var g=t.payload,O=g.optimisticId,w=g.createdChild;return v({},e,{issues:e.issues.filter(function(e){return e.id!==O}).concat(v({},w,{errorType:b.a.linkIssue,isLoading:!1}))});case y.f:var k=t.payload.optimisticId;return v({},e,{issues:e.issues.map(function(e){return e.id===k?v({},e,{errorType:void 0,isLoading:!0}):e})});case y.l:var E=t.payload.issueId;return v({},e,{issues:e.issues.map(function(e){return e.id===E?v({},e,{errorType:void 0,isLoading:!0}):e})});case y.m:var S=t.payload.issueId;return v({},e,{issues:e.issues.map(function(e){return e.id===S?v({},e,{errorType:b.a.linkIssue,isLoading:!1}):e})});case y.o:case y.b:var C=t.payload.optimisticId;return v({},e,{issues:e.issues.filter(function(e){return e.id!==C})});case y.i:var P=t.payload.issues;return v({},e,{issues:e.issues.map(function(e){return v({},e,{},m()(P,function(t){return t.id===e.id}))})});case y.q:case y.r:var I=t.payload.newOrder;return v({},e,{issues:I});case y.p:var x=t.payload.originalOrder;return v({},e,{issues:x});case y.a:var _={id:t.payload.issueId,issueKey:t.payload.issueKey,issueSummary:t.payload.issueSummary,issueTypeIconUrl:t.payload.issueTypeIconUrl,assigneeUrl:null,assigneeDisplayName:null,isLoading:!0,errorType:void 0};return v({},e,{issues:e.issues.filter(function(e){return e.id!==_.id}).concat(_)});default:return e}}})},"./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/ui/actions.js":function(e,t,n){"use strict";n.d(t,"g",function(){return r}),n.d(t,"n",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"i",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"l",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"k",function(){return f}),n.d(t,"h",function(){return p}),n.d(t,"o",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"j",function(){return b}),n.d(t,"f",function(){return y}),n.d(t,"m",function(){return h});var r="state.ui.SHOW_INLINE_CREATE",o=function(){return{type:r}},i="state.ui.HIDE_ADD_CHILD_ISSUE",a=function(){return{type:i}},s="state.ui.SET_CHILD_PANEL_VIEW",c=Object.freeze({InlineCreate:"InlineCreate",AddExistingIssue:"AddExistingIssue"}),u=function(e){return{type:s,view:e}},l="state.ui.SET_CHILD_CREATE_SUMMARY",f=function(e){return{type:l,summary:e}},p="state.ui.TOGGLE_HIDE_DONE",d=function(){return{type:p}},m="state.ui.SELECTED_ISSUE_TYPE_CHANGED",b=function(e){return{type:m,payload:e}},y="state.ui.SET_FETCH_ISSUE_TYPES_STATUS",h=function(e){return{type:y,payload:e}}},"./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e.displayName||e.name||"Component"}},"./src/packages/issue/issue-view/src/views/common/experience-tracking/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/index.js"),s=n("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),l=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js"),f=Object(i.connect)(function(e){return{experience:"editIssue",application:Object(s.b)(e),edition:Object(s.a)(e),analyticsSource:Object(c.b)(e)}},{})(a.b),p=Object(i.connect)(function(e,t){return{field:t.fieldId,isEditing:Object(u.z)(t.fieldId)(e)}},{})(a.a),d=function(e){return function(t){var n=function(n){return o.a.createElement(p,{fieldId:e},o.a.createElement(t,n))};return n.displayName="WithEditExperienceTracker(".concat(Object(l.a)(t),")"),n}},m=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js");n.d(t,"a",function(){return f}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return m.c}),n.d(t,"f",function(){return m.e}),n.d(t,"c",function(){return m.b}),n.d(t,"b",function(){return m.a})},"./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/fields/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u});var r,o=n("./src/packages/issue/issue-view/src/common/model/field-config-types.js");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a="NEVER_TRACKING",s="requestDetailsPanel",c=(i(r={},o.o,"ALWAYS_TRACKING"),i(r,o.r,a),i(r,o.l,a),i(r,o.g,a),i(r,o.X,a),i(r,o.hb,a),i(r,o.jb,a),i(r,o.u,a),i(r,o.v,a),i(r,o.a,a),i(r,o.p,a),i(r,o.W,a),i(r,o.e,a),i(r,o.f,a),i(r,o.J,[s]),i(r,o.k,[s]),i(r,o.q,[s]),i(r,o.T,[s]),i(r,o.s,[s]),i(r,o.J,[s]),i(r,o.k,[s]),i(r,o.b,[s]),i(r,o.H,[s]),i(r,o.gb,[s]),i(r,o.pb,[s]),i(r,o.qb,[s]),i(r,o.R,[s]),i(r,o.I,[s]),i(r,o.ob,[s]),i(r,o.N,[s]),i(r,o.rb,[s]),i(r,o.P,[s]),i(r,o.kb,[s]),i(r,o.db,[s]),i(r,o.M,[s]),i(r,o.nb,[s]),i(r,o.O,[s]),i(r,o.tb,[s]),i(r,o.n,[s]),i(r,o.x,[s]),i(r,o.L,[s]),i(r,o.sb,[s]),i(r,o.m,[s]),i(r,o.K,[s]),i(r,o.U,[s]),i(r,o.mb,[s]),i(r,o.D,[s]),i(r,o.B,[s]),i(r,o.F,[s]),i(r,o.E,[s]),i(r,o.C,[s]),i(r,o.cb,[s]),i(r,o.bb,[s]),i(r,o.Q,[s]),i(r,o.Y,[s]),i(r,o.j,[s]),i(r,o.S,[s]),i(r,o.ab,[s]),i(r,o.h,[s]),r),u=function(e){var t=c[e];return void 0===t?a:t}},"./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),s=n("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),l=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),f=n("./src/packages/spa-apps/issue/src/feature-flags.js"),p=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js"),d=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/fields/index.js");function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"c",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"d",function(){return v}),n.d(t,"b",function(){return a.c}),n.d(t,"a",function(){return a.a});var h=Object(i.connect)(function(e){var t;return y(t={experience:"viewIssue"},Object(f.a)()?"experienceId":"key",Object(c.B)(e)),y(t,"application",Object(s.b)(e)),y(t,"edition",Object(s.a)(e)),y(t,"analyticsSource",Object(c.b)(e)),y(t,"isExperienceReady",Object(l.l)(e)&&function(e){return e.ui.viewMountStatus.hasIssueViewMounted}(e)),t},{})(a.e),g=function(e){return function(t){var n=function(n){return o.a.createElement(a.d,{location:e},function(e){var r=e.onExperienceSuccess;return o.a.createElement(t,b({onExperienceSuccess:r},n))})};return n.displayName="WithViewExperienceTracker(".concat(Object(p.a)(t),")"),n}},v=function(e){return function(t){var n=function(n){var r=n.fieldType,i=n.ownProps,s=r&&Object(d.c)(r);if(null==r||s===d.a)return o.a.createElement(t,i);var c=Array.isArray(s)?s:null,u=["field",r].concat(m(e?[e]:[])).join("-");return o.a.createElement(a.c,{location:u,parentProviders:c},o.a.createElement(t,i))};return n.displayName="WithFieldViewExperienceTracker(".concat(Object(p.a)(t)),Object(i.connect)(function(e,t){return{fieldType:Object(u.q)(t.fieldId)(e)}},null,function(e,t,n){return{fieldType:e.fieldType,ownProps:n}})(n)}}},"./src/packages/issue/issue-view/src/views/connect-field.js":function(e,t,n){"use strict";n.d(t,"b",function(){return j});var r=n("./node_modules/react-intl/lib/index.es.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./src/packages/platform/observability/analytics-web-react/src/index.js"),a=n("./src/packages/platform/utils/fetch/src/index.js"),s=n("./src/packages/issue/issue-view/src/common/model/loading-stage-type.js"),c=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),l=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),f=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),p=n("./src/packages/issue/issue-view/src/drafts/drafts-action-creator.js"),d=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-action-creator.js"),m=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),b=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),y=n("./node_modules/uuid/index.js"),h=n.n(y);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=Object(r.defineMessages)({defaultFallbackInvalidMessage:{id:"issue.field.default-fallback-invalid-message",defaultMessage:"The value could not be saved",description:""}}),w={transformFromStateValue:function(e,t,n){return e},transformToStateValue:function(e){return e},fallbackInvalidMessage:function(e){return e.formatMessage(j.defaultFallbackInvalidMessage)},additionalProps:function(e,t){return{}},additionalCallbacks:function(e){return{}},isOptimistic:!0,canContainMediaContent:!1,shouldSaveDraft:!1,saveField:function(e){var t=e.baseUrl,n=e.issueKey,r=e.fieldMetaKey,o=e.value,i=e.fieldEditSessionId,s=i?"".concat(t,"/rest/api/2/issue/").concat(n,"?fieldEditSessionId=").concat(i):"".concat(t,"/rest/api/2/issue/").concat(n);return Object(a.j)(s,{body:JSON.stringify({fields:O({},r,o)})})},shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,fieldId:""},k=function(e,t,n,r){return{baseUrl:e,projectKey:t,issueKey:n,fieldId:r}};t.a=function(e){return function(t,n){return function(a){var y=function(e){return{mapStateToProps:function(t,n){var r=e(t,n),o=v({},w,{},r),i=o.fieldId,a=o.transformFromStateValue,f=o.transformToStateValue,p=o.fallbackInvalidMessage,d=o.additionalProps,m=o.additionalCallbacks,y=o.isOptimistic,h=o.canContainMediaContent,g=o.saveField,O=o.shouldDiscardChangeOnFailure,j=o.shouldSaveDraft,E=o.onSaveFailureFlagType,S=o.onSaveSuccessFlagType,C={isRichTextField:Object(u.E)(i)(t),isOptimistic:y,canContainMediaContent:h,saveField:g,shouldDiscardChangeOnFailure:O,shouldSaveDraft:j,onSaveFailureFlagType:E,onSaveSuccessFlagType:S},P=Object(b.a)(k),I=Object(b.a)(f),x=Object(b.a)(a);return function(e,t){return v({fieldId:i,fieldOptions:C,memoizedTransformToStateValue:I,additionalCallbacks:m,label:Object(u.m)(i)(e),isEditable:Object(u.y)(i)(e)&&Object(l.u)(e)!==s.c,isEditing:Object(u.z)(i)(e),fieldEditSessionId:Object(u.f)(i)(e),invalidMessage:Object(u.j)(i,p(t.intl))(e),value:x(Object(u.h)(i)(e),P(Object(c.f)(e),Object(c.J)(e),Object(c.B)(e),i),t.intl),isWaiting:!y&&Object(u.B)(i)(e),isMobile:Object(c.s)(e)},d(e,t.intl))}},mapDispatchToProps:function(e){return{initFieldOptions:function(t){var n=t.fieldId,r=t.fieldOptions;return function(){return e(Object(d.f)(n,r))}},onEditRequest:function(t){var n=t.fieldId,r=t.fieldOptions;return function(){return e(Object(d.b)(n,r,h.a.v4()))}},onChange:function(t){var n=t.fieldId,r=t.fieldOptions,o=t.memoizedTransformToStateValue;return function(t){return e(Object(d.e)(n,o(t),r))}},onConfirm:function(t){var n=t.fieldId,r=t.fieldOptions,o=t.analyticsAttributeIdRetriever;return function(){var t,i=arguments.length>1?arguments.length<=0?void 0:arguments[0]:void 0,a=arguments.length?(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t]:void 0;return e(Object(d.d)(n,r,i,a,o))}},onBlur:function(t){var n=t.fieldId,r=t.fieldOptions;return function(){return e(Object(d.c)(n,r))}},onCancel:function(t){var n=t.fieldId,r=t.fieldOptions;return function(){e(Object(d.c)(n,r)),e(Object(p.b)({fieldId:n}))}},onPaste:function(t){var n=t.fieldId,r=t.fieldOptions;return function(t){return e(Object(d.g)(n,r,t))}},getAdditionalCallbacks:function(t){return(0,t.additionalCallbacks)(e)}}},mergeStateAndDispatchProps:function(e,t){var n=Object.keys(t).reduce(function(n,r){return n[r]=t[r](e),n},{}),r=t.getAdditionalCallbacks(e);return v({},e,{},n,{},r)}}}(t);return Object(f.a)([Object(i.f)("issueFields",{onConfirm:"updated"}),Object(i.e)(e),Object(o.connect)(y.mapStateToProps,y.mapDispatchToProps,y.mergeStateAndDispatchProps),r.injectIntl,Object(m.d)("connectField")],n)(Object(m.d)()(a))}}}("issueFields")},"./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg":function(e,t,n){e.exports=n.p+"assets/default-avatar.b7f1021e538053b2b6f8108284f2ffc4.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n("./src/packages/issue/issue-view/src/common/model/layout-item-type.js"),o=function(e,t,n){return e.reduce(function(e,o){var i=o.payload;if(o.type===r.g&&i&&i.tabId){var a=t[i.tabId];e.push(a.name)}return i&&i.fieldId&&n[i.fieldId]&&e.push(n[i.fieldId].title),e},[])},i=function(e,t){if(!e||e.length<=0)return"";if(1===e.length)return e[0];var n=e.slice(-1)[0],r=e.slice(0,-1);return"".concat(r.join(", ")," ").concat(t," ").concat(n)}},"./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-intl/lib/index.es.js"),a=n("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),s=n.n(a),c=n("./node_modules/@atlaskit/theme/index.js"),u=n("./node_modules/@atlaskit/tooltip/components/Tooltip.js"),l=n("./src/packages/platform/observability/product-analytics-bridge/src/index.js"),f=n("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js"),p=Object(i.defineMessages)({showMorePlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-plural",defaultMessage:"Show {fieldCount} more fields",description:"Show more string plural"},showMoreNotPlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-not-plural",defaultMessage:"Show {fieldCount} more field",description:"Show more string not plural"},showMoreAnd:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-and",defaultMessage:"and",description:"comma separated list with and at the end"},showMoreAltText:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-alt-text",defaultMessage:"Show more",description:"Show more fields alt text"}}),d=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),m=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),b=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function y(){var e=g(["\n    & > span {\n        color: ",";\n        & > span:first-child {\n            align-self: auto;\n            margin-left: ","px;\n            margin-right: ","px;\n        }\n    }\n\n    &&,\n    &:hover,\n    &:focus {\n        height: inherit;\n        text-align: left;\n    }\n"]);return y=function(){return e},e}function h(){var e=g(["\n    display: block;\n    margin-top: ","px;\n    margin-bottom: ","px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    color: ",";\n    font-size: ","px;\n    line-height: ",";\n"]);return h=function(){return e},e}function g(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=d.default.small(h(),-b.e/2,b.e/2,c.colors.N200,1.5*b.e,b.e/6),O=Object(d.default)(m.a)(y(),c.colors.B400,-b.e,-b.e/2);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w=function(e){var t=e.visibleSecondaryContextItemNameList,n=e.fieldCount,r=e.onExpand,a=e.intl,d=n>1?p.showMorePlural:p.showMoreNotPlural,m=Object(f.b)(t,a.formatMessage(p.showMoreAnd));return o.a.createElement(u.a,{content:m},o.a.createElement(O,{externalId:"showmorelink.expand",appearance:"subtle",iconBefore:o.a.createElement(s.a,{primaryColor:c.colors.B400,size:"large"}),alt:a.formatMessage(p.showMoreAltText),shouldFitContainer:!0,onClick:function(e,t){r(),Object(l.u)(t,"showMore")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-more-button.container"},o.a.createElement(i.FormattedMessage,j({},d,{values:{fieldCount:n}})),o.a.createElement(v,null,m)))};w.displayName="ShowMoreButton";var k=Object(i.injectIntl)(w);n.d(t,"a",function(){return k})},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/@atlaskit/onboarding/components/SpotlightTarget.js"),s=n("./node_modules/@atlaskit/page/GridColumn.js"),c=n("./node_modules/lodash/noop.js"),u=n.n(c),l=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),f=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),d=n("./src/packages/issue/issue-view/src/selectors/clickthrough-banner-selector.js"),m=n("./src/packages/issue/issue-view/src/views/common/modal-grid/modal-grid-view.js"),b=n("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),y=n("./src/packages/issue/issue-view/src/views/constants.js"),h=n("./src/packages/issue/issue-view/src/common/model/view-mode-type.js"),g=n("./node_modules/react-intl/lib/index.es.js"),v=n("./node_modules/lodash/flow.js"),O=n.n(v),j=n("./src/packages/platform/observability/analytics-web-react/src/index.js"),w=n("./node_modules/@atlaskit/button/components/Button.js"),k=n("./node_modules/@atlaskit/icon/glyph/arrow-left-circle.js"),E=n.n(k),S=n("./node_modules/@atlaskit/theme/index.js"),C=n("./src/packages/spa-router/index.js"),P=n("./src/packages/issue/issue-view/src/feature-flags.js"),I=Object(g.defineMessages)({back:{id:"issue.views.issue-base.foundation.back-button.back",defaultMessage:"Back",description:"A button that takes user back to the previous page"}}),x=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),_=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function M(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-right: ","px;\n    margin-left: -","px;\n"]);return M=function(){return e},e}var T=x.default.div(M(),1.5*_.e,1.5*_.e),A=O()(g.injectIntl,Object(j.s)({onClick:"backFromIssueView"}),Object(j.f)("button",{onClick:"clicked"}))(function(e){var t=e.url,n=e.intl.formatMessage;return o.a.createElement(T,null,o.a.createElement(w.b,{href:t,appearance:"subtle",onClick:e.onClick,component:Object(P.T)()&&__SPA__?C.a:void 0,iconBefore:o.a.createElement(E.a,{size:"small",primaryColor:S.colors.N300})},n(I.back)))}),D=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),L=n("./src/packages/issue/issue-view/src/actions/issue-navigation-action-creator.js"),N=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),R=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),F=n("./src/packages/issue/issue-view/src/configurations.js"),V=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),U=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),B=n("./src/packages/issue/issue-view/src/selectors/project-selector.js"),K=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/index.js"),W=n("./node_modules/@atlaskit/breadcrumbs/components/Breadcrumbs.js"),H=n("./node_modules/@atlaskit/breadcrumbs/components/BreadcrumbsItem.js"),z=n("./src/packages/platform/utils/types/src/index.js"),q=n("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-action-creator.js"),G=n("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js"),J=n("./node_modules/@atlaskit/dropdown-menu/components/item/DropdownItem.js"),Q=n("./node_modules/@atlaskit/dropdown-menu/components/group/DropdownItemGroup.js"),Z=n("./node_modules/@atlaskit/dropdown-menu/components/DropdownMenuStateless.js"),Y=n("./node_modules/@atlaskit/icon/glyph/edit-filled.js"),$=n.n(Y),X=n("./node_modules/@atlaskit/spinner/Spinner/index.js"),ee=n("./node_modules/@atlaskit/tooltip/components/Tooltip.js"),te=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),ne=n("./src/packages/platform/observability/product-analytics-bridge/src/index.js"),re=Object(g.defineMessages)({triggerTooltipAddEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-epic",defaultMessage:"{issueTypeName} - Add {target}",description:"Tooltip content for issue parent switcher trigger"},triggerTooltipChangeEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-epic",defaultMessage:"{issueTypeName} - Change {target}",description:"Tooltip content for issue parent switcher trigger"},triggerTooltipAddParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-parent",defaultMessage:"{issueTypeName}Add parent",description:"Tooltip content for issue parent switcher trigger"},triggerTooltipChangeParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-parent",defaultMessage:"{issueTypeName}Change parent",description:"Tooltip content for issue parent switcher trigger"},dropdownEmpty:{id:"issue.details.issue-parent-switcher-dropdown-empty",defaultMessage:"No {target} has been created in this project. Create your first ",description:"Message for issue parent switcher dropdown when no option is accessible. (The message ends with a space on purpose. There is a link-button with the text {target} after the space in UI which completes the sentence)"},dropdownTitleEpic:{id:"issue.details.issue-parent-switcher-dropdown-title-epic",defaultMessage:"Recent {target}",description:"Title for issue parent switcher dropdown"},removeEpic:{id:"issue.details.issue-parent-switcher-remove-epic",defaultMessage:"Remove {target}",description:"Dropdown item text for remove parent option"},viewEpics:{id:"issue.details.issue-parent-switcher-view-epics",defaultMessage:"View all {target}",description:"Dropdown item text for view parents option"},dropdownTitle:{id:"issue.details.issue-parent-switcher-dropdown-title",defaultMessage:"Recent parents",description:"Title for issue parent switcher dropdown"},removeParent:{id:"issue.details.issue-parent-switcher-remove-parent",defaultMessage:"Remove parent",description:"Dropdown item text for remove parent option"},viewParents:{id:"issue.details.issue-parent-switcher-view-parents",defaultMessage:"View all parents",description:"Dropdown item text for view parents option"}});function oe(){var e=se(["\n    width: ","px;\n    padding: ","px;\n\n    & button,\n    & span {\n        padding: 0;\n        margin: 0;\n        vertical-align: initial;\n    }\n"]);return oe=function(){return e},e}function ie(){var e=se(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    min-width: ","px;\n    min-height: ","px;\n    overflow: hidden;\n"]);return ie=function(){return e},e}function ae(){var e=se(["\n    border-bottom: 1px solid ",";\n"]);return ae=function(){return e},e}function se(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ce=x.default.div(ae(),S.colors.N30),ue=x.default.div(ie(),21*_.e,23.375*_.e),le=x.default.div(oe(),25*_.e,1.5*_.e);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(){window.WRM&&window.WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],function(){window.JIRA.Forms.createCreateIssueForm({}).asDialog({id:"software-create-issue-dialog"}).show()})},ve=Object(ne.a)("dropdownItem",{onClick:"clicked"})(J.a),Oe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=be(this,(e=ye(t)).call.apply(e,[this].concat(o)))).state={isOpen:Boolean(n.props.isOpen),isLoading:!n.props.issueParents.length},n.onOpenChange=function(e,t){var r=e.isOpen,o=e.event,i=n.props,a=i.clickRef,s=i.onOpenChange,c=i.onToggle,u=a&&a.current&&o&&a.current.button.contains(o.target);c(t),n.toggleMenu(r),s&&!u&&s(r)},n.onItemClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,o){var i=n.props,a=i.issues,s=i.onSelect,c=i.setIssueParent,u=i.onViewAllParentsClick,l=i.onClick;switch(e){case"add parent":case"change parent":c(a,t.parentId);break;case"remove parent":c(a);break;case"open modal":u();break;case"create parent":ge()}l(o.update({userAction:e})),s&&s(),!t.keepMenuOpen&&n.toggleMenu(!1)}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,r["Component"]),function(e,t,n){t&&me(e.prototype,t),n&&me(e,n)}(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.issueParents,r=t.isOpen;r!==e.isOpen&&r!==this.state.isOpen&&this.toggleMenu(r),n!==e.issueParents&&this.state.isLoading&&this.setState({isLoading:!1})}},{key:"getMessageContent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.props,o=r.issueTypeName,i=r.issueHierarchyLevel,a=r.intl.formatMessage,s="Epic"!==o?o:"".concat("Epic".toLowerCase()).concat(n?"s":"");return o&&0===i?a(e,{target:s}):a(t)}},{key:"getTooltipContent",value:function(){var e=this.props,t=e.isOrphan,n=e.issueTypeName,r=e.issueHierarchyLevel,o=e.intl.formatMessage;if(n&&0===r){var i="Epic"!==n?n:"Epic".toLowerCase();return o(t?re.triggerTooltipAddEpic:re.triggerTooltipChangeEpic,{issueTypeName:n,target:i})}return o(t?re.triggerTooltipAddParent:re.triggerTooltipChangeParent,{issueTypeName:n?"".concat(n," - "):""})}},{key:"toggleMenu",value:function(e){var t=this.props,n=t.issueParents,r=t.fetchIssueParents;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach(function(t){de(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({isOpen:e},e&&!n.length?{isLoading:!0}:{}),function(){e&&!n.length&&r()})}},{key:"renderTriggerButton",value:function(){var e=this.props,t=e.isDisabled,n=e.isOrphan,r=e.issueTypeName,i=e.issueTypeIconUrl,a=this.getTooltipContent(),s=o.a.createElement(w.b,{isDisabled:t,spacing:"compact",appearance:"subtle",iconBefore:!n&&i?o.a.createElement(te.a,{alt:r||"",url:i}):o.a.createElement($.a,{size:"small",label:a})});return n?s:o.a.createElement(ee.a,{position:"top",content:a,delay:0},s)}},{key:"renderIssueParentItem",value:function(e){var t=e.id,n=e.key,r=e.summary,i=e.issueType,a=i.name,s=i.iconUrl,c=o.a.createElement(te.a,{alt:a||"",url:s});return o.a.createElement(ve,{key:n,elemBefore:c,onClick:this.onItemClick("".concat(this.props.isOrphan?"add":"change"," parent"),{parentId:t})},n," ",r)}},{key:"renderDropdownItemGroup",value:function(){var e=this,t=this.props,n=t.issueParents,r=t.issueKey;if(this.state.isLoading)return o.a.createElement(ue,null,o.a.createElement(X.a,{size:"large"}));var i=n.length?n.filter(function(e){return e.key!==r}).slice(0,5):null;return i&&o.a.createElement(Q.a,{title:this.getMessageContent(re.dropdownTitleEpic,re.dropdownTitle)},i.map(function(t){return e.renderIssueParentItem(t)}))}},{key:"renderDropdownMenu",value:function(){var e=this.props,t=e.isOrphan,n=e.issueTypeName,r=e.issueHierarchyLevel,i=e.issueParents,a=e.intl.formatMessage,s=n&&"Epic"!==n?n:"Epic".toLowerCase();return 0!==r||this.state.isLoading||i.length?o.a.createElement(o.a.Fragment,null,o.a.createElement(ce,null,this.renderDropdownItemGroup()),o.a.createElement(Q.a,null,!t&&0===r&&o.a.createElement(ve,{onClick:this.onItemClick("remove parent")},this.getMessageContent(re.removeEpic,re.removeParent,!1)),o.a.createElement(ve,{onClick:this.onItemClick("open modal")},this.getMessageContent(re.viewEpics,re.viewParents)))):o.a.createElement(le,null,a(re.dropdownEmpty,{target:s}),o.a.createElement(w.b,{appearance:"link",spacing:"compact",onClick:this.onItemClick("create parent",{keepMenuOpen:!0})},s),".")}},{key:"render",value:function(){return o.a.createElement(Z.a,{isOpen:this.state.isOpen,trigger:this.renderTriggerButton(),onOpenChange:this.onOpenChange},this.renderDropdownMenu())}}]),t}();Oe.displayName="IssueParentSwitcher",Oe.displayName="IssueParentSwitcher",Oe.defaultProps={clickRef:null,isDisabled:!1,isOrphan:!1,issues:[],issueParents:[],isOpen:!1,issueKey:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,onOpenChange:u.a,onSelect:u.a,fetchIssueParents:u.a,setIssueParent:u.a,onViewAllParentsClick:u.a};var je=Object(g.injectIntl)(Oe),we=Object(p.a)([Object(j.s)({onToggle:"toggled",onClick:"clicked"}),Object(i.connect)(function(e){return{issues:Object(G.a)(e),issueParents:Object(f.A)(e)}},function(e){return{fetchIssueParents:function(){e(Object(q.b)())},setIssueParent:function(t,n){e(n?Object(q.f)(t,n):Object(q.i)(t))},onViewAllParentsClick:function(){e(Object(q.h)())}}})])(je),ke=n("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");var Ee=Object(ke.a)("div",{target:"e1s35eln0"})({name:"sgt9w1",styles:"display:flex;flex-grow:0;overflow:visible;"}),Se=Object(ke.a)("span",{target:"e1s35eln1"})("padding-right:",_.e,"px;display:flex;"),Ce=Object(ke.a)("span",{target:"e1s35eln2"})("border-radius:",_.a,"px;overflow:hidden;"),Pe=Object(ke.a)(w.b,{target:"e1s35eln3"})("opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(-8px,0);",Ee,":hover &{opacity:1;transform:translate(0,0);}"),Ie=Object(ke.a)(w.b,{target:"e1s35eln4"})("opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(-8px,0);",Ee,":hover &{opacity:1;transform:translate(0,0);}&:focus{opacity:1;transform:translate(0,0);}"),xe=Object(ke.a)("div",{target:"e1s35eln5"})("display:flex;margin-left:-",_.e/2,"px;"),_e=Object(g.defineMessages)({addParent:{id:"issue.details.add-parent",defaultMessage:"Add {target}",description:"Label text for add parent breadcrumb"},copy:{id:"issue.details.copy-to-clipboard",defaultMessage:"Copy the link to this issue",description:"Tooltip shown on hover"},rootProjectsLink:{id:"issue.details.root-projects-link",defaultMessage:"Projects",description:"Link to the Browse Projects JIRA page"}});function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=Ae(this,(e=De(t)).call.apply(e,[this].concat(i)))).state={isOpen:!1},n.breadcrumbsItemRef=Object(r.createRef)(),n.onOpenChange=function(e){e!==n.state.isOpen&&n.setState({isOpen:e})},n.onClick=function(e){e.preventDefault(),n.setState(function(e){return{isOpen:!e.isOpen}})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,r["Component"]),function(e,t,n){t&&Te(e.prototype,t),n&&Te(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.issueTypeName,n=e.intl.formatMessage,r=t&&"Epic"!==t?t:"Epic".toLowerCase();return o.a.createElement(xe,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-add-parent"},o.a.createElement(we,{clickRef:this.breadcrumbsItemRef,isOpen:this.state.isOpen,isOrphan:!0,issueTypeName:t,onOpenChange:this.onOpenChange}),o.a.createElement(H.a,{ref:this.breadcrumbsItemRef,text:Ot(n(_e.addParent,{target:r})),onClick:this.onClick,hasSeparator:!0}))}}]),t}();Ne.displayName="BreadcrumbAddParent",Ne.defaultProps={issueTypeName:"Epic"};var Re=Object(g.injectIntl)(Ne),Fe=n("./node_modules/@atlaskit/icon/glyph/copy.js"),Ve=n.n(Fe),Ue=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/view.js"),Be=n("./src/packages/issue/issue-view/src/actions/change-issue-type-action-creator.js"),Ke=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),We=n("./node_modules/reselect/lib/index.js"),He=Object(We.createSelector)(f.D,V.i,function(e,t){var n=e&&e.issueTypes||[];return t.length?n.filter(function(e){return t.includes(e.id)}):n}),ze=n("./node_modules/@atlaskit/droplist/components/Droplist.js"),qe=n("./node_modules/@atlaskit/item/components/Item.js"),Ge=n("./node_modules/@atlaskit/item/components/ItemGroup.js"),Je=Object(g.defineMessages)({changeType:{id:"issue.details.change-issue-type",defaultMessage:"{issueType} - Change issue type",description:""},changeTypeGroupName:{id:"issue.details.change-issue-type-groupname",defaultMessage:"Change Issue Type",description:""}});function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var et=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Ye(this,(e=$e(t)).call.apply(e,[this].concat(o)))).state={showList:n.props.isOpen},n.onOpenChange=function(e){var t=e.isOpen;n.setState({showList:!!t})},n.itemClick=function(e){return function(){n.props.changeIssueType(n.props.issueKey,n.props.issueId,n.props.currentType,e),n.setState({showList:!1})}},n.toggleList=function(e,t){var r=n.props.projectKey,o=n.state.showList;r&&(o?n.setState({showList:!1}):(n.props.toggleListAnalytics(t),n.props.loadIssueTypes(r),n.setState({showList:!0})))},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,r["Component"]),function(e,t,n){t&&Ze(e.prototype,t),n&&Ze(e,n)}(t,[{key:"createIssueTypeEntry",value:function(e,t){var n=o.a.createElement(te.a,{url:e.iconUrl,alt:e.name});return o.a.createElement(qe.a,{key:e.id,elemBefore:n,isDisabled:t,onClick:this.itemClick(e)},e.name)}},{key:"createTriggerButton",value:function(e,t,n){return o.a.createElement(ee.a,{position:"top",content:e.formatMessage(Je.changeType,{issueType:t&&t.name?t.name:""}),delay:0},o.a.createElement(w.b,{spacing:"compact",appearance:"subtle",onClick:this.toggleList,iconBefore:n}))}},{key:"renderIssueTypes",value:function(e){var n=this,r=this.props.currentType;if(e&&e.length>0){var o=e.filter(function(e){return e.id!==r.id}).filter(function(e){return t.filterSubTaskTypePredicate(r,e)}).map(function(e){return n.createIssueTypeEntry(e,!1)});return o.unshift(this.createIssueTypeEntry(r,!0)),o}return null}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.intl,r=e.issueTypes,i=e.currentType,a=null==r||0===r.length;return o.a.createElement(ze.a,{trigger:this.createTriggerButton(n,i,t),appearance:"default",position:"bottom left",isTriggerNotTabbable:!0,isLoading:a,onOpenChange:this.onOpenChange,isOpen:this.state.showList},o.a.createElement(Ge.a,{title:n.formatMessage(Je.changeTypeGroupName)},this.renderIssueTypes(r)))}}],[{key:"filterSubTaskTypePredicate",value:function(e,t){return!e.subtask||t.subtask}}]),t}();et.displayName="UnsafeIssueTypeChanger",et.displayName="IssueTypeChanger",et.defaultProps={isOpen:!1};var tt=Object(g.injectIntl)(Object(Ke.a)()(et)),nt=O()(Object(j.s)({toggleListAnalytics:"changeIssueTypeDropdown"}),Object(j.f)("change-issue-type",{changeIssueType:"changeIssueType"}),Object(i.connect)(function(e){return{issueTypes:He(e),currentType:Object(U.f)(e),projectKey:Object(f.C)(e),issueKey:Object(l.B)(e),issueId:Object(f.j)(e)}},function(e){return{loadIssueTypes:function(t){return e(Object(Be.b)(t))},changeIssueType:function(t,n,r,o,i){return e(Object(Be.f)(t,n,r,o,i))}}}))(tt),rt=Object(g.defineMessages)({uneditableIssueType:{id:"issue.details.uneditable-issue-type",defaultMessage:"{issueTypeName} - You cannot edit this issue type in this project.",description:"Tooltip content for changing uneditable issue type."}}),ot=Object(g.injectIntl)(Object(Ke.a)()(function(e){var t=e.intl,n=e.issueTypeIconUrl,r=e.issueTypeName;return o.a.createElement(ee.a,{position:"top",content:t.formatMessage(rt.uneditableIssueType,{issueTypeName:r}),truncate:!0,delay:0},o.a.createElement(w.b,{spacing:"compact",appearance:"subtle",iconBefore:o.a.createElement(te.a,{url:n}),isDisabled:!0}))})),it=function(e){var t=e.isSimplifiedProject,n=void 0!==t&&t,r=e.isIssueTypeFieldEditable,i=void 0!==r&&r,a=e.issueKey,s=void 0===a?Object(z.toIssueKey)(""):a,c=e.issueSummary,l=void 0===c?"":c,f=e.issueTypeName,p=void 0===f?"":f,d=e.issueTypeIconUrl,m=void 0===d?"":d,b=e.relativeIssueUrl,y=void 0===b?"":b,h=e.fullIssueUrl,g=void 0===h?"":h,v=e.onClick,O=void 0===v?u.a:v,j=e.onCopyClick,w=void 0===j?u.a:j,k=(0,e.intl.formatMessage)(_e.copy),E=o.a.createElement(H.a,{key:"issueKeyBreadcrumbItem",href:y,onClick:O,text:s,target:"_blank"}),S=i?o.a.createElement(nt,{key:"issueTypeChanger",icon:o.a.createElement(te.a,{url:m,alt:p})}):o.a.createElement(ot,{issueTypeName:p,issueTypeIconUrl:m}),C=n?o.a.createElement(ee.a,{content:"".concat(s,": ").concat(l),position:"top",delay:0},E):E,I=Object(P.p)()?Ie:Pe;return o.a.createElement(xe,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-current-issue-container"},S,C,o.a.createElement(Ue.a,{label:k,tooltipDelay:0,tooltipLabel:k,tooltipLabelPosition:"top",shouldFitContainer:!0,value:g,hideFieldText:!0,remountOnChange:!0,onCopyClick:w},o.a.createElement(I,{appearance:"subtle-link",iconBefore:o.a.createElement(Ve.a,{size:"small",label:k}),spacing:"compact"})))};it.displayName="BreadcrumbCurrentIssue";var at=Object(g.injectIntl)(it);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=ut(this,(e=lt(t)).call.apply(e,[this].concat(o)))).state={isHovered:!1},n.onHoveredChange=function(e){return function(){n.setState({isHovered:e})}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,r["Component"]),function(e,t,n){t&&ct(e.prototype,t),n&&ct(e,n)}(t,[{key:"renderBreadcrumbsItem",value:function(){var e=this.props,t=e.isSimplifiedProject,n=e.parentIssue,r=e.issueHierarchyLevel,i=e.onClick,a=n.key,s=n.summary,c=n.url;return o.a.createElement(ee.a,{content:"".concat(a,": ").concat(s),position:"top",delay:0},o.a.createElement(H.a,{href:c,onClick:i,text:t?Ot(0===r?s:a):a,truncationWidth:t?void 0:300,hasSeparator:!0}))}},{key:"render",value:function(){var e=this.props,t=e.isSimplifiedProject,n=e.isDisabled,r=e.parentIssue,i=e.issueHierarchyLevel,a=r.key,s=r.issueTypeName,c=r.issueTypeIconUrl,u=this.renderBreadcrumbsItem();return t?o.a.createElement(xe,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container",onMouseEnter:!n&&this.onHoveredChange(!0),onMouseLeave:!n&&this.onHoveredChange(!1)},o.a.createElement(we,{isDisabled:n,issueKey:a,issueTypeName:s,issueTypeIconUrl:this.state.isHovered?"":c,issueHierarchyLevel:i,onSelect:this.onHoveredChange(!1)}),u):o.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container"},u)}}]),t}();pt.displayName="BreadcrumbParentIssue",pt.defaultProps={isSimplifiedProject:!1,isDisabled:!0,issueHierarchyLevel:0,onClick:u.a};var dt=pt,mt=function(e){var t=e.isSimplifiedProject,n=void 0!==t&&t,r=e.shouldShowProjectLevelBreadcrumb,i=void 0!==r&&r,a=e.projectName,s=void 0===a?"":a,c=e.projectUrl,l=void 0===c?"":c,f=e.projectAvatarUrl,p=void 0===f?"":f,d=e.onClick,m=void 0===d?u.a:d,b=Boolean(i&&s&&l),y=o.a.createElement(te.a,{url:p,alt:s}),h=o.a.createElement(Se,null,o.a.createElement(Ce,null,y)),g=p&&(n?h:o.a.createElement(ee.a,{content:s,position:"top",delay:0},h)),v=o.a.createElement(H.a,{href:l,onClick:m,text:n?Ot(s):s,truncationWidth:n?void 0:0,iconBefore:g,hasSeparator:!0});return b&&(n?o.a.createElement(ee.a,{content:s,position:"top",delay:0},v):v)};function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){return e?e.length>27?"".concat(e.slice(0,27),"..."):e:""},jt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=ht(this,(e=gt(t)).call.apply(e,[this].concat(o)))).onClick=function(e){n.props.onClick(e)},n.onProjectClick=function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey)){e.preventDefault();var t=n.props,r=t.projectUrl,o=t.onProjectClick;r&&o(r)}},n.onParentClick=function(e){return function(t){if(!(t.ctrlKey||t.metaKey||t.shiftKey)){t.preventDefault();var r=n.props;(0,r.onParentClick)({childIssueKey:r.issueKey,parentIssueKey:Object(z.toIssueKey)(e),onIssueKeyChange:n.props.onIssueKeyChange})}}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,r["Component"]),function(e,t,n){t&&yt(e.prototype,t),n&&yt(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.onExperienceSuccess()}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,r=t.isSimplifiedProject,i=t.isLoadingComplete,a=t.shouldShowProjectLevelBreadcrumb,s=t.shouldShowRootProjectsBreadcrumb,c=t.projectName,u=t.projectUrl,l=t.projectAvatarUrl,f=t.parentIssues,p=t.isIssueTypeFieldEditable,d=t.issueKey,m=t.issueSummary,b=t.issueTypeName,y=t.issueTypeIconUrl,h=t.relativeIssueUrl,g=t.fullIssueUrl,v=t.onCopyClick,O=t.intl.formatMessage,j=t.canLinkToParent,w=t.issueHierarchyLevel,k=t.parentLevelIssueTypeNames,E=f.length>0,S=j&&!n&&i,C=r&&0===w&&S;return o.a.createElement(Ee,null,o.a.createElement(W.a,null,Object(P.B)()&&s&&o.a.createElement(H.a,{href:"/secure/BrowseProjects.jspa",text:O(_e.rootProjectsLink)}),o.a.createElement(mt,{isSimplifiedProject:r,shouldShowProjectLevelBreadcrumb:a,projectName:c,projectUrl:u,projectAvatarUrl:l,onClick:this.onProjectClick}),E?f.map(function(t,n){return o.a.createElement(dt,{key:n,isSimplifiedProject:r,isDisabled:!S,parentIssue:t,issueHierarchyLevel:w,onClick:e.onParentClick(t?t.key:"")})}):C&&o.a.createElement(Re,{issueTypeName:k[0]}),o.a.createElement(at,{isSimplifiedProject:r,isIssueTypeFieldEditable:p,issueKey:d,issueSummary:m,issueTypeName:b,issueTypeIconUrl:y,relativeIssueUrl:h,fullIssueUrl:g,onClick:this.onClick,onCopyClick:v})))}}]),t}();jt.displayName="IssueBreadcrumbs",jt.displayName="IssueBreadcrumbs",jt.defaultProps={error:null,isSimplifiedProject:!1,isLoadingComplete:!1,issueSummary:"",issueTypeName:"",issueTypeIconUrl:"",parentIssues:[],issueHierarchyLevel:0,onCopyClick:u.a,onExperienceSuccess:u.a,shouldShowRootProjectsBreadcrumb:!1};var wt=Object(p.a)([Object(j.d)("breadcrumbs",j.h.SCREEN),Object(K.f)("breadcrumbs"),Object(j.g)(function(e){return{attributes:{issueHierarchyLevel:Object(V.e)(e),analyticsSource:"issue-view (".concat(Object(l.b)(e),")")}}}),Object(j.s)({onCopyClick:"copyUrlLink"}),Object(D.a)(function(e){return{onClick:function(){e("full.issue.view")},onParentClick:function(){e("parent-issue.view")}}}),g.injectIntl,Object(i.connect)(function(e){var t=Object(f.s)(e);return{error:Object(f.g)(e),isSimplifiedProject:t,isLoadingComplete:Object(f.l)(e),issueKey:Object(l.B)(e),issueSummary:Object(R.o)(F.y)(e)||"",relativeIssueUrl:Object(U.g)(e),fullIssueUrl:Object(U.a)(e),issueTypeName:Object(U.e)(e),issueTypeIconUrl:Object(U.c)(e),parentIssues:Object(U.h)(t)(e),projectName:Object(B.e)(e),projectUrl:Object(N.j)(Object(l.f)(e),Object(l.J)(e)),projectAvatarUrl:Object(B.a)(e),isIssueTypeFieldEditable:Object(U.b)(e),canLinkToParent:Object(V.a)(e),issueHierarchyLevel:Object(V.e)(e),parentLevelIssueTypeNames:Object(V.g)(e),onIssueKeyChange:Object(l.G)(e)}},function(e){return{onParentClick:function(e){var t=e.childIssueKey,n=e.parentIssueKey;(0,e.onIssueKeyChange)({fromIssueKey:t,toIssueKey:n,meta:{location:"breadcrumbs"}})},onProjectClick:function(t){e(Object(L.c)(t))}}})])(jt),kt=n("./node_modules/@atlaskit/dropdown-menu/components/DropdownMenu.js"),Et=n("./node_modules/@atlaskit/icon/glyph/more.js"),St=n.n(Et);function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function It(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function xt(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    to {\n        box-shadow: 0 0 0 10px transparent;\n    }\n"]);return xt=function(){return e},e}var _t=Object(x.keyframes)(xt()),Mt=Object(g.defineMessages)({actionButton:{id:"issue.label-for-modal-action-button",defaultMessage:"Actions",description:"Tooltip for action menu dropdown button"}}),Tt=Object(ke.a)(w.b,{target:"e1tzjop40"})("border-radius:4px;animation:",_t," 1.45s 3 cubic-bezier(0.66,0,0,1);animation-delay:0.5s;box-shadow:0 0 0 0 ",S.colors.P300,";"),At=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,a=e?Tt:w.b,s=n.formatMessage(Mt.actionButton);return o.a.createElement(ee.a,{content:s,position:"top"},o.a.createElement(a,{appearance:"subtle",spacing:"default",iconBefore:o.a.createElement(St.a,{label:t,size:"medium"}),isSelected:r,isDisabled:i}))};At.displayName="renderTrigger";var Dt=function(e){var t=e.shouldShowPulse,n=e.moreLabel,i=e.intl,a=e.isLoading,s=It(e,["shouldShowPulse","moreLabel","intl","isLoading"]),c=Pt(Object(r.useState)(!1),2),u=c[0],l=c[1],f=s.onOpenChange,p=Object(r.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];l(r.isOpen),f&&f.apply(void 0,t)},[f]);return o.a.createElement(kt.a,Ct({appearance:"tall",position:"bottom right",trigger:At(t,n,i,u,a),onOpenChange:p},s))};Dt.displayName="DropdownMenu",Dt.defaultProps={shouldShowPulse:!1,moreLabel:""};var Lt,Nt,Rt,Ft=Object(g.injectIntl)(Dt),Vt=n("./node_modules/@atlaskit/icon/glyph/presence-active.js"),Ut=n.n(Vt),Bt=n("./src/packages/platform/utils/constants/src/analytics-sources.js"),Kt=n("./src/packages/platform/utils/constants/src/project-types.js"),Wt=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),Ht=n("./src/packages/common-legacy-do-not-add-anything-new/src/urls/old-issue-view-url.js"),zt=n("./src/packages/issue/issue-view/src/actions/changeboarding-action-creator.js"),qt=n("./src/packages/issue/issue-view/src/actions/issue-delete-action-creator.js"),Gt=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),Jt=n("./src/packages/issue/issue-view/src/common/messages/time.js"),Qt=n("./src/packages/issue/issue-view/src/common/model/worklog-type.js"),Zt=n("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),Yt=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),$t=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Xt=Object(We.createSelector)(f.z,function(e){return Boolean(e&&e.id)}),en=n("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),tn=n("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),nn=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),rn=Object(We.createSelector)(l.z,function(e){return e&&e.includes(F.m)}),on=Object(We.createSelector)(nn.e,rn,function(e,t){return e&&t}),an=n("./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js"),sn=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),cn=n("./node_modules/react-async-component/commonjs/index.js"),un=Object(cn.asyncComponent)({resolve:function(){return n.e(21).then(n.bind(null,"./src/packages/issue-actions/move-issue/src/index.js"))}}),ln=n("./src/packages/project-settings/common/src/feature-flags.js"),fn=n("./src/packages/project-settings/common/src/urls.js"),pn=n("./src/packages/issue/issue-view/src/selectors/request-type-selector.js"),dn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),mn=n("./node_modules/lodash/isEmpty.js"),bn=n.n(mn),yn=n("./src/packages/issue/issue-view/src/common/model/field-config-types.js"),hn=Object(R.p)(yn.i),gn=Object(We.createSelector)(hn,function(e){return!!e&&!bn()(e.value)}),vn=Object(g.defineMessages)({delete:{id:"issue.delete.confirm",defaultMessage:"Delete",description:"Label for the issue actions item to delete the issue"},deleteHeading:{id:"issue.delete-heading",defaultMessage:"Delete {issueKey}?",description:"Heading for the delete modal to delete the issue"},deleteWithSubtasksHeading:{id:"issue.delete-with-subtasks-heading",defaultMessage:"Delete {issueKey} and its subtasks?",description:"Heading for the delete modal to delete the issue when it has subtasks"},deleteWithChildrenHeading:{id:"issue.delete-with-children-heading",defaultMessage:"Delete {issueKey} and its child issues?",description:"Heading for the delete modal to delete the issue when it has child issues"},cancel:{id:"issue.delete.cancel",defaultMessage:"Cancel",description:"Label for the button to cancel deleting the issue"},deleteWarning:{id:"issue.delete-warning",defaultMessage:"You're about to permanently delete this issue, its comments and attachments, and all of its data.",description:""},deleteWithSubtasksWarning:{id:"issue.delete-with-subtasks-warning",defaultMessage:"You're about to permanently delete this issue and all its subtasks, its comments and attachments, and all of its data. You should move any subtasks you don't want to delete to another parent issue.",description:""},deleteWithChildrenWarning:{id:"issue.delete-with-children-warning",defaultMessage:"You're about to permanently delete this issue and all its child issues, its comments and attachments, and all of its data. You should move any child issues you don't want to delete to another parent issue.",description:""},deleteRecommendation:{id:"issue.delete-recommendation",defaultMessage:"If you're not sure, you can resolve or close this issue instead.",description:""}});function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){return!t||"object"!==On(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cn=Object(j.d)("issueDelete",j.h.MODAL)((Rt=Nt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=kn(this,(e=En(t)).call.apply(e,[this].concat(o)))).onConfirmDeleteIssue=function(e,t){n.props.deleteConfirmAnalytics(t),n.props.triggerDeleteRequest(n.props.issueKey,t)},n.onCancel=function(e,t){n.props.deleteCancelAnalytics(t),n.props.triggerCloseDeleteIssueModal()},n.getChildConditionalDeleteHeading=function(){return n.props.shouldShowChildSpecificCopy?n.props.isSimplifiedProject?vn.deleteWithChildrenHeading:vn.deleteWithSubtasksHeading:vn.deleteHeading},n.getChildConditionalDeleteWarning=function(){return n.props.shouldShowChildSpecificCopy?n.props.isSimplifiedProject?vn.deleteWithChildrenWarning:vn.deleteWithSubtasksWarning:vn.deleteWarning},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(t,r["Component"]),function(e,t,n){t&&wn(e.prototype,t),n&&wn(e,n)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!e.isDeletingIssue&&this.props.isDeletingIssue&&(e.didIssueDeleteFail?this.props.issueDeleteCallbacks.onIssueDeleteFailure({issueId:this.props.issueId,issueKey:this.props.issueKey}):(this.props.triggerCloseDeleteIssueModal(),this.props.issueDeleteCallbacks.onIssueDeleteSuccess({issueId:this.props.issueId,issueKey:this.props.issueKey}),this.props.onClose()))}},{key:"render",value:function(){var e=this.props,t=e.issueKey,n=e.isDeletingIssue,r=e.intl.formatMessage;return this.props.isDeleteIssueModalOpen&&o.a.createElement(dn.b,{headerMessage:o.a.createElement(g.FormattedMessage,jn({},this.getChildConditionalDeleteHeading(),{values:{issueKey:t}})),appearance:"danger",contentMessage:o.a.createElement("span",null,o.a.createElement("p",null,r(this.getChildConditionalDeleteWarning())),o.a.createElement("p",null,r(vn.deleteRecommendation))),confirmActionText:r(vn.delete),cancelActionText:r(vn.cancel),onConfirm:this.onConfirmDeleteIssue,onCancel:this.onCancel,externalId:"issue.action.delete-confirmation-dialog",isLoading:n,isConfirmDisabled:n,isCancelDisabled:n},o.a.createElement(j.i,null))}}]),t}(),Nt.displayName="DeleteIssueView",Nt.defaultProps={issueDeleteCallbacks:{onIssueDeleteSuccess:u.a,onIssueDeleteFailure:u.a}},Lt=Rt))||Lt,Pn=Object(p.a)([g.injectIntl,Object(i.connect)(function(e){return{issueId:Object(f.j)(e),issueKey:Object(l.B)(e),isDeletingIssue:Object(f.n)(e),isDeleteIssueModalOpen:Object(f.m)(e),didIssueDeleteFail:Object(f.b)(e),isSimplifiedProject:Object(f.s)(e),shouldShowChildSpecificCopy:Object(f.s)(e)?Object(V.c)(e)&&gn(e):Object(sn.b)(e)}},function(e){return{triggerCloseDeleteIssueModal:function(){e(Object(qt.a)())},triggerDeleteRequest:function(t,n){e(Object(qt.c)(t,n))}}}),Object(j.s)({deleteCancelAnalytics:"deleteIssueCancel",deleteConfirmAnalytics:"deleteIssueDelete"})])(Cn);function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _n(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var An=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=_n(this,(e=Mn(t)).call.apply(e,[this].concat(i)))).ecosystemModalLinkRef=void 0,n.setEcosystemModalLinkRef=function(e){n.ecosystemModalLinkRef=e},n.clickEcosystemModalLinkRef=function(){return n.ecosystemModalLinkRef&&n.ecosystemModalLinkRef.click()},n.renderEcosystemModalLink=function(e,t){return o.a.createElement("a",{href:e,className:t,ref:n.setEcosystemModalLinkRef,display:"none"},"")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,r["Component"]),function(e,t,n){t&&xn(e.prototype,t),n&&xn(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.linkText,r=e.tooltip,i=e.href,a=e.styleClass;return o.a.createElement(J.a,{key:t,onClick:this.clickEcosystemModalLinkRef,title:r},n,this.renderEcosystemModalLink(i,a))}}]),t}();An.displayName="EcosystemWebItem",An.defaultProps={styleClass:null,tooltip:null};var Dn=function(e){return{component:function(){return o.a.createElement(An,{href:e.url,linkText:e.name,styleClass:e.styleClass,id:e.name,tooltip:e.tooltip})},eventName:e.name,key:e.name,isAllowed:!0}},Ln=n("./src/packages/issue/issue-view/src/common/constants/index.js"),Nn=n("./src/packages/platform/utils/fetch/src/index.js"),Rn=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),Fn=n("./src/packages/issue/issue-view/src/views/connect-field.js");function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e,t){return!t||"object"!==Vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hn=Object(g.defineMessages)({addFlag:{id:"issue.flag.add",defaultMessage:"Add flag",description:""},removeFlag:{id:"issue.flag.remove",defaultMessage:"Remove flag",description:""}}),zn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Bn(this,(e=Kn(t)).call.apply(e,[this].concat(o)))).removeFlag=function(){n.props.onChange(!1),n.props.onConfirm(),n.props.onActionSelectedAnalytics("removeFlag")},n.addFlag=function(){n.props.onChange(!0),n.props.onConfirm(),n.props.onActionSelectedAnalytics("addFlag")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}(t,r["Component"]),function(e,t,n){t&&Un(e.prototype,t),n&&Un(e,n)}(t,[{key:"render",value:function(){return this.props.value?o.a.createElement(J.a,{key:"removeFlag",onClick:this.removeFlag},this.props.removeFlagMessage):o.a.createElement(J.a,{key:"addFlag",onClick:this.addFlag},this.props.addFlagMessage)}}]),t}();zn.displayName="FlagIssueActionView",zn.displayName="FlagIssueActionView";var qn=function(e){var t=e.baseUrl,n=e.issueKey,r=e.value;return function(e,t,n){return Object(Nn.e)(function(e){return"".concat(e,"/rest/greenhopper/1.0/xboard/issue/flag/flag.json")}(e),{method:"POST",body:JSON.stringify({flag:n,issueKeys:[t],commentVisibility:"",comment:""})}).toPromise()}(t,n,Object(Rn.c)(r))},Gn=Object(Fn.a)(function(e,t){return{fieldId:Object(Rn.a)(e),shouldDiscardChangeOnFailure:!0,transformFromStateValue:Rn.c,transformToStateValue:Rn.d,saveField:qn,additionalProps:function(e,n){return{onActionSelectedAnalytics:t.onActionSelectedAnalytics,addFlagMessage:n.formatMessage(Hn.addFlag),removeFlagMessage:n.formatMessage(Hn.removeFlag)}},onSaveFailureFlagType:Object(Rn.b)(e)?Ln.B:Ln.A}})(zn),Jn=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/messages.js");function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $n(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tr(){var e=rr(["\n    min-width: 150px;\n"]);return tr=function(){return e},e}function nr(){var e=rr(["\n    border-top: 1px solid ",";\n"]);return nr=function(){return e},e}function rr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var or=x.default.div(nr(),S.colors.N30),ir=x.default.div(tr()),ar=function(e){var t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)},sr=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=$n(this,(e=Xn(t)).call.apply(e,[this].concat(i)))).state={showMoveIssueModal:!1},n.getLinkToScreenConfigurationPage=function(){var e=n.props,t=e.baseUrl,r=e.projectKey,o=e.viewScreenId;return"".concat(t,"/plugins/servlet/project-config/").concat(r,"/issuelayout?screenId=").concat(o)},n.getLinkToRequestTypeConfigurationPage=function(e){var t=n.props,r=t.baseUrl,o=t.projectKey;return"".concat(r,"/servicedesk/admin/").concat(o,"/request-types/request-type/").concat(e)},n.getLinkToBentoToggle=function(){return"".concat(n.props.baseUrl,"/secure/ViewPersonalSettings.jspa")},n.getLinkToSwiftPage=function(){var e=n.props,t=e.baseUrl,r=e.projectKey,o=e.projectType,i=e.issueTypeId,a=e.issueKey,s=e.intl.formatMessage,c=window.location,u=c.pathname,l=c.search,f=encodeURIComponent("".concat(u).concat(l)),p=encodeURIComponent(s(Jn.a.swiftBacklink,{issueKey:a}));return Object(ln.a)()?Object(fn.a)(Object(z.toBaseUrl)(t),o,r,i,{url:"".concat(u).concat(l),title:s(Jn.a.swiftBacklink,{issueKey:a})}):"".concat(t,"/projects/").concat(r,"/settings/issuetypes/").concat(i,"#backLinkUrl=").concat(f,"&backLinkTitle=").concat(p)},n.getClickthroughDropdownItem=function(){return[n.buildDropdownItem(n.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:n.props.onClickthroughClick,href:Object(Ht.a)()},n.props.intl.formatMessage(Jn.a.seeOldView))},key:"old-view-clickthrough"}))]},n.getClassicConfigurationActions=function(){return[n.buildDropdownItem(n.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:n.props.onShowClassicConfigurationClick,href:n.props.requestTypeId?n.getLinkToRequestTypeConfigurationPage(n.props.requestTypeId):n.getLinkToScreenConfigurationPage(),target:"_blank"},n.props.intl.formatMessage(Jn.a.configure))},key:"configure",isAllowed:n.props.shouldShowClassicConfiguration}))]},n.createComponentAction=function(e){var t=e.key,n=e.component,r=e.isAllowed;return{key:t,component:n,isAllowed:void 0===r||r}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(t,r["Component"]),function(e,t,n){t&&Yn(e.prototype,t),n&&Yn(e,n)}(t,[{key:"getIssueDeleteModalAction",value:function(){var e=this;return this.createComponentAction({key:"DeleteIssueModal",component:function(){return o.a.createElement(J.a,{onClick:e.props.onDeleteIssueClick},e.props.intl.formatMessage(Jn.a.delete))},isAllowed:this.props.canDeleteIssue})}},{key:"getMoveIssueAction",value:function(){var e=this;return Object(P.V)()?this.createComponentAction({key:"MoveIssueModal",component:function(){return o.a.createElement(J.a,{onClick:function(){e.setState({showMoveIssueModal:!0})}},e.props.intl.formatMessage(Jn.a.move))},isAllowed:this.props.canMoveIssue}):{content:this.props.intl.formatMessage(Jn.a.move),eventName:"move",href:this.props.isSubtask?"".concat(this.props.baseUrl,"/secure/MoveSubTaskChooseOperation!default.jspa?id=").concat(this.props.issueId):"".concat(this.props.baseUrl,"/secure/MoveIssue!default.jspa?id=").concat(this.props.issueId),isAllowed:this.props.canMoveIssue}}},{key:"getAddToIssueDropdownItemGroup",value:function(){var e=this;if(!this.shouldShowAddToIssueDropdownGroup())return null;var t=this.props,n=t.onLogTimeClick,r=t.intl.formatMessage,i=this.createComponentAction({component:function(e){var t=e.onActionSelectedAnalytics;return o.a.createElement(J.a,{onClick:function(){n(),t("log-time")}},r(Jt.a.logWork))},key:"LogTimeActionView"}),a=this.createComponentAction({component:Gn,key:"FlagIssueActionView"}),s=this.props.ecosystemActions.map(Dn),c=[].concat(Zn(this.props.canLogTime?[i]:[]),Zn(this.props.shouldShowFlagAction?[a]:[]),Zn(s)).map(function(t){return e.buildDropdownItem(t)}).filter(function(e){return!!e});return c.length<=0?null:o.a.createElement(Q.a,null,o.a.createElement(o.a.Fragment,null,c))}},{key:"getIssueManipulationDropdownItemGroup",value:function(){var e=this,t=this.props,n=t.onLinkToParentClick,r=t.hasParent,i=t.intl.formatMessage,a=this.createComponentAction({component:function(e){var t=e.onActionSelectedAnalytics;return o.a.createElement(J.a,{onClick:function(){n(),t("link-to-parent")}},i(r?Jn.a.changeParentLevel:Jn.a.addToParentLevel))},key:"link-to-parent"}),s={content:i(Jn.a.convertToSubtask),eventName:"convert-to-subtask",href:"".concat(this.props.baseUrl,"/secure/ConvertIssue.jspa?id=").concat(this.props.issueId),isAllowed:this.props.shouldShowConvertToSubtask},c={content:i(Jn.a.convertToIssue),eventName:"convert-to-issue",href:"".concat(this.props.baseUrl,"/secure/ConvertSubTask.jspa?id=").concat(this.props.issueId),isAllowed:this.props.shouldShowConvertToIssue},u=[].concat(Zn(this.canLinkToParent()?[a]:[]),Zn(this.props.shouldShowConvertToSubtask?[s]:[]),Zn(this.props.shouldShowConvertToIssue?[c]:[]),[this.getMoveIssueAction(),{content:i(Jn.a.clone),eventName:"clone",href:"".concat(this.props.baseUrl,"/secure/CloneIssueDetails!default.jspa?id=").concat(this.props.issueId),isAllowed:this.props.canCloneIssue},this.getIssueDeleteModalAction()]).map(function(t){return e.buildDropdownItem(t)}).filter(function(e){return!!e});return u.length<=0?null:this.shouldShowAddToIssueDropdownGroup()?o.a.createElement(or,null,o.a.createElement(Q.a,null,o.a.createElement(o.a.Fragment,null,u))):o.a.createElement(Q.a,null,o.a.createElement(o.a.Fragment,null,u))}},{key:"getIssueExportDropdownItemGroup",value:function(){var e=this,t=this.props,n=t.baseUrl,r=t.issueKey,i=t.intl.formatMessage;if(!Object(P.y)())return null;var a=[this.createComponentAction({component:function(){var t="".concat(n,"/si/jira.issueviews:issue-html/").concat(r,"/").concat(r,".html");return o.a.createElement(J.a,{onClick:e.props.onExportPrintClick,href:t,target:"_blank"},i(Jn.a.print))},key:"PrintIssueActionView",isAllowed:!0}),this.createComponentAction({component:function(){var t="".concat(n,"/si/jira.issueviews:issue-xml/").concat(r,"/").concat(r,".xml");return o.a.createElement(J.a,{onClick:e.props.onExportXmlClick,href:t,target:"_blank"},i(Jn.a.exportXML))},key:"ExportXmlIssueActionView",isAllowed:!0}),this.createComponentAction({component:function(){var t="".concat(n,"/si/jira.issueviews:issue-word/").concat(r,"/").concat(r,".doc");return o.a.createElement(J.a,{onClick:e.props.onExportDocClick,href:t,target:"_blank"},i(Jn.a.exportDOC))},key:"ExportDocIssueActionView",isAllowed:!0})].map(function(t){return e.buildDropdownItem(t)});return o.a.createElement(or,null,o.a.createElement(Q.a,null,o.a.createElement(o.a.Fragment,null,a)))}},{key:"getIssueActionsDropdownItemGroup",value:function(){var e=this.props.intl.formatMessage,t=this.getProjectTypeSpecificIssueActions()||[];return 0===t.length?null:o.a.createElement(or,null,o.a.createElement(Q.a,{title:e(Jn.a.newIssueView)},t))}},{key:"isSoftwareProjectType",value:function(){return this.props.projectType===Kt.k}},{key:"getIssueConfigurationDropdownItemGroup",value:function(){var e=this,t=this.props,n=t.shouldShowClassicConfiguration,r=t.shouldShowSwiftLink,i=t.viewModeOptions,a=t.intl.formatMessage,s=this.getClassicConfigurationActions(),c={content:a(Jn.a.swiftLink),eventName:"swift-link",href:this.getLinkToSwiftPage(),isAllowed:this.props.shouldShowSwiftLink},u=this.createComponentAction({component:function(e){var t=e.onActionSelectedAnalytics;return o.a.createElement(J.a,{onClick:function(){i.viewModeSwitchEnabled&&i.onSwitchToSidebar?i.onSwitchToSidebar():function(){ar("issue.details.view.switch-to-sidebar")}(),t("switch-to-sidebar")}},a(Jn.a.switchToSidebar))},key:"SwitchToSidebarActionView"}),l=this.createComponentAction({component:function(e){var t=e.onActionSelectedAnalytics;return o.a.createElement(J.a,{onClick:function(){i.viewModeSwitchEnabled&&i.onSwitchToModal?i.onSwitchToModal():function(){ar("issue.details.view.switch-to-modal")}(),t("switch-to-modal")}},a(Jn.a.switchToModal))},key:"SwitchToModalActionView"}),f=this.props.analyticsSource?this.props.analyticsSource.valueOf():null,p=this.isSoftwareProjectType()&&f===Bt.a.SOFTWARE_ISSUE||i.viewModeSwitchEnabled,d=[].concat(Zn(p&&Object(Zt.b)(this.props.viewModeOptions.viewMode)?[l]:[]),Zn(p&&!Object(Zt.b)(this.props.viewModeOptions.viewMode)?[u]:[]),Zn(r?[c]:[])).map(function(t){return e.buildDropdownItem(t)}).filter(function(e){return!!e});return n||d.length>0?o.a.createElement(or,null,o.a.createElement(Q.a,null,d.length>0?o.a.createElement(o.a.Fragment,null,d):null,s)):null}},{key:"getNewIssueActionsForServiceDesk",value:function(){var e=this,t=this.props,n=t.shouldShowOptOut,r=t.onOptOutClick,i=t.onFindOutMoreClick,a=t.isSimplified,s=t.intl.formatMessage,c=!a;return[this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:i,href:"//support.atlassian.com/jira-service-desk-cloud/docs/changes-to-requests-in-the-new-issue-view/",target:"_blank"},s(Jn.a.findOutMore))},key:"find-out-more"}),this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:r,href:e.getLinkToBentoToggle(),target:"_blank"},s(Jn.a.turnOffForNow))},key:"opt-out",isAllowed:c}),{content:s(Jn.a.turnOffNewIssueView),eventName:"opt-out",href:this.getLinkToBentoToggle(),target:"_blank",isAllowed:n},this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:e.props.onClickthroughClick,href:Object(Ht.a)()},e.props.intl.formatMessage(Jn.a.seeOldView))},key:"old-view-clickthrough",isAllowed:this.props.shouldShowClickthroughLink})]}},{key:"getNewIssueActionsForSoftwareAndCore",value:function(){var e=this,t=this.props,n=t.shouldShowPulse,r=t.onStartTourClick,i=t.shouldShowOptOut,a=t.onFindOutMoreClick,s=t.onOptOutClick,c=t.shouldShowClickthroughLink,u=t.onClickthroughClick,l=t.intl.formatMessage,f=t.shouldShowChangeboarding;return[this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:r,elemBefore:n?o.a.createElement(Ut.a,{primaryColor:S.colors.P300}):null},l(Jn.a.startTour))},key:"start-tour",isAllowed:f}),this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:a,href:"//confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view",target:"_blank"},l(Jn.a.findOutMore))},key:"find-out-more",isAllowed:f}),this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:s,href:e.getLinkToBentoToggle(),target:"_blank"},l(Jn.a.turnOffForNow))},key:"opt-out",isAllowed:f&&i}),{content:l(Jn.a.turnOffNewIssueView),eventName:"opt-out",href:this.getLinkToBentoToggle(),target:"_blank",isAllowed:!f&&i},this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:u,href:Object(Ht.a)()},l(Jn.a.seeOldView))},key:"old-view-clickthrough",isAllowed:c})]}},{key:"getNewIssueActions",value:function(){var e=this,t=this.props,n=t.shouldShowPulse,r=t.onStartTourClick,i=t.onFindOutMoreClick,a=t.shouldShowOptOut,s=t.onOptOutClick,c=t.intl.formatMessage,u=n;return[this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:r,elemBefore:u?o.a.createElement(Ut.a,{primaryColor:S.colors.P300}):null},c(Jn.a.startTour))},key:"start-tour"}),this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:i,href:"//confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view",target:"_blank"},c(Jn.a.findOutMore))},key:"find-out-more"}),a?this.createComponentAction({component:function(){return o.a.createElement(J.a,{onClick:s,href:e.getLinkToBentoToggle(),target:"_blank"},c(Jn.a.turnOffForNow))},key:"opt-out"}):null].filter(function(e){return!!e}).map(function(t){return e.buildDropdownItem(t)})}},{key:"getProjectTypeSpecificIssueActions",value:function(){var e=this;return(function(e){return e===Kt.j}(this.props.projectType)?this.getNewIssueActionsForServiceDesk():this.getNewIssueActionsForSoftwareAndCore()).filter(function(e){return!!e}).map(function(t){return e.buildDropdownItem(t)})}},{key:"shouldShowAddToIssueDropdownGroup",value:function(){var e=this.props,t=e.canLogTime,n=e.shouldShowFlagAction,r=e.ecosystemActions;return t||n||r.length>0}},{key:"canLinkToParent",value:function(){var e=this.props,t=e.parentLevelName,n=e.shouldShowAddParent,r=e.hasParentIssueTypeIds;return!!t&&n&&r}},{key:"buildDropdownItem",value:function(e){var t=this;if(e.component){var n=e,r=n.component,i=n.key;return!1!==e.isAllowed?o.a.createElement(r,{key:i,onActionSelectedAnalytics:function(e){return t.props.onActionSelectedAnalytics(e)}}):null}if(e.eventName){var a=e;return a.isAllowed?o.a.createElement(J.a,{onClick:function(){return t.props.onActionSelectedAnalytics(a.eventName)},key:a.eventName,href:a.href,target:a.target},a.content):null}return null}},{key:"render",value:function(){var e=this,t=this.props,n=t.baseUrl,r=t.intl,i=t.issueDeleteCallbacks,s=t.issueId,c=t.onActionSelectedAnalytics,u=t.onClose,l=t.shouldShowPulse,f=t.isLoading,p=t.onOpenChange,d=r.formatMessage;if(!this.props.shouldShowActions)return null;var m=this.getAddToIssueDropdownItemGroup(),b=this.getIssueManipulationDropdownItemGroup(),h=this.getIssueExportDropdownItemGroup(),g=this.getIssueActionsDropdownItemGroup(),v=this.getIssueConfigurationDropdownItemGroup();return o.a.createElement(Wt.a,null,o.a.createElement(a.a,{name:y.a},o.a.createElement(Ft,{shouldShowPulse:l,moreLabel:d(Jn.a.triggerButtonLabel),onItemActivated:c,isLoading:f,onOpenChange:p},o.a.createElement(ir,null,m,b,h,g,v)),o.a.createElement(Pn,{issueDeleteCallbacks:i,onClose:u}),Object(P.V)()&&o.a.createElement(un,{baseUrl:Object(z.toBaseUrl)(n),shouldShow:this.state.showMoveIssueModal,issueId:Object(z.toIssueId)(s),onDone:function(){return e.setState({showMoveIssueModal:!1})}})))}}]),t}();sr.displayName="IssueActions",sr.defaultProps={issueId:"",isSubtask:!1,ecosystemActions:[],shouldShowChangeboarding:!1,shouldShowPulse:!1,hasParentIssueTypeIds:!1,hasParent:!1,parentLevelName:null,issueDeleteCallbacks:{onIssueDeleteSuccess:u.a,onIssueDeleteFailure:u.a},viewModeOptions:{viewModeSwitchEnabled:!1},shouldShowConvertToSubtask:!1,shouldShowConvertToIssue:!1,shouldShowClickthroughLink:!1,shouldShowAddParent:!1,isSimplified:!1};var cr=Object(p.a)([Object(j.f)("dropdownItem",{onStartTourClick:"clicked",onFindOutMoreClick:"clicked",onOptOutClick:"clicked",onClickthroughClick:"clicked",onShowClassicConfigurationClick:"clicked",onOpenChange:"clicked",onExportPrintClick:"clicked",onExportXmlClick:"clicked",onExportDocClick:"clicked"}),Object(j.s)({onStartTourClick:"startIssueChangeboardingTour",onFindOutMoreClick:"goToNewIssueDocs",onOptOutClick:"optOutFromNewIssue",onClickthroughClick:"clickthroughToOldIssue",onShowClassicConfigurationClick:"showClassicConfiguration",onOpenChange:"issueActionsOpenChanged",onExportPrintClick:"printIssue",onExportXmlClick:"exportIssueToXml",onExportDocClick:"exportIssueToDoc"}),Object(D.a)(function(e){return{onActionSelectedAnalytics:function(t){e(t)}}}),g.injectIntl,Object(i.connect)(function(e){return{requestTypeId:Object(P.N)()?Object(pn.a)(e):void 0,analyticsSource:Object(l.b)(e),isLoading:Object(f.q)(e),shouldShowFlagAction:on(e),shouldShowChangeboarding:Object(en.e)(e),shouldShowClassicConfiguration:Object(an.i)(e),viewScreenId:Object(tn.a)(e),shouldShowSwiftLink:Object(an.k)(e),shouldShowPulse:Object(en.b)(e),canCloneIssue:Object(nn.b)(e),canDeleteIssue:Object(nn.d)(e),canMoveIssue:Object(nn.g)(e),shouldShowOptOut:Object(an.j)(e),shouldShowConvertToSubtask:Object(an.f)(e),shouldShowConvertToIssue:Object(an.e)(e),shouldShowClickthroughLink:Object(d.a)(e),shouldShowAddParent:Object(nn.e)(e),isSubtask:Object(sn.c)(e),baseUrl:Object(l.f)(e),issueId:Object(f.j)(e),issueTypeId:Object(U.d)(e),issueKey:Object(l.B)(e),projectKey:Object(l.J)(e),projectType:Object(f.E)(e),shouldShowActions:Object(an.h)(e),canLogTime:Object(Yt.b)(e),ecosystemActions:Object($t.l)(e),parentLevelName:Object(V.h)(e),hasParent:Xt(e),hasParentIssueTypeIds:Object(V.b)(e),isSimplified:Object(f.s)(e)}},function(e){return{onLogTimeClick:function(){e(Object(Gt.I)(Qt.a,null))},onStartTourClick:function(){e(Object(zt.c)(Date.now()))},onDeleteIssueClick:function(){e(Object(qt.e)())},onLinkToParentClick:function(){e(Object(q.h)())}}})])(sr),ur=function(e){return o.a.createElement(cr,e)},lr=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js"),fr=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),pr=n("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),dr=n.n(pr),mr=n("./node_modules/@atlaskit/icon/glyph/unlock.js"),br=n.n(mr),yr=n("./src/packages/issue/fields/security-level/src/common/ui/styled.js");function hr(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    color: ",";\n"]);return hr=function(){return e},e}var gr=Object(x.default)(yr.a)(hr(),S.colors.N30),vr=function(e){var t=e.initialValue?dr.a:br.a;return o.a.createElement(w.b,{appearance:"subtle",spacing:"default",isDisabled:!0,iconBefore:o.a.createElement(gr,null,o.a.createElement(t,null))})};vr.displayName="Loading";var Or=Object(cn.asyncComponent)({resolve:function(){return n.e(22).then(n.bind(null,"./src/packages/issue/fields/security-level/src/ui/main.js")).then(function(e){return e.SecurityLevelEditView})},LoadingComponent:vr}),jr=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-action-creator.js"),wr=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js");function kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Er=Object(p.a)([Object(i.connect)(function(e){return{securityLevelItems:Object(wr.a)(e),isSecurityLevelEnabledForIssue:Object(wr.d)(e),isSecurityLevelEditable:Object(wr.c)(e),error:Object(f.g)(e),issueKey:Object(l.B)(e)}},function(e){return{onSuccess:function(t){return e(Object(jr.e)(F.u,t))}}})])(function(e){var t=e.securityLevelItems,n=e.isSecurityLevelEnabledForIssue,r=e.isSecurityLevelEditable,i=e.error,a=e.issueKey,s=e.onSuccess,c=kr(Object(fr.c)({issueKey:a,fieldKey:F.u}),1)[0];return!i&&n?o.a.createElement(Or,{issueKey:a,initialValue:c||null,allowedValues:t,isEditable:r,onSuccess:s}):null}),Sr=n("./src/packages/growth/share-button/src/index.js"),Cr=n("./src/packages/growth/share-button/src/constants.js"),Pr=function(e){var t=e.summary,n=e.issueAri,r=e.issueUrl,i=e.resourceOwner,a=e.subProductId;return o.a.createElement(Sr.b,{integrationType:Cr.a.BENTO_ISSUE,triggerButtonStyle:"icon-only",productId:i,subProductId:a,shareLink:r,shareTitle:t,shareContentType:"issue",objectAri:n})};Pr.displayName="ShareView";var Ir=Object(p.a)([Object(i.connect)(function(e){return{issueAri:Object(f.t)(e),resourceOwner:Object(f.F)(),summary:Object(R.o)(F.y)(e)||"",subProductId:Object(f.G)(e),issueUrl:Object(U.a)(e)}},{})])(Pr),xr=Sr.a;function _r(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    flex-shrink: 0;\n"]);return _r=function(){return e},e}var Mr=x.default.div(_r()),Tr=Object(p.a)([Object(i.connect)(function(e){return{isLoading:Object(f.q)(e),error:Object(f.g)(e),loggedInAccountId:Object(l.a)(e)}},{})])(function(e){var t=e.error,n=void 0===t?null:t,r=e.isLoading,i=e.loggedInAccountId;return!n&&i?o.a.createElement(Mr,null,r?o.a.createElement(xr,{triggerButtonStyle:"icon-only"}):o.a.createElement(Ir,null)):null});function Ar(){var e=Fr(["\n    flex-shrink: 0;\n"]);return Ar=function(){return e},e}function Dr(){var e=Fr(["\n    user-select: none;\n"]);return Dr=function(){return e},e}function Lr(){var e=Fr(["\n    display: flex;\n    flex-flow: row-reverse;\n    ","\n    padding-right: ","px;\n    [dir='rtl'] & {\n        padding-right: ","px;\n        padding-left: ","px;\n    }\n"]);return Lr=function(){return e},e}function Nr(){var e=Fr(["\n    display: flex;\n    align-items: center;\n    flex-grow: 1;\n    overflow: visible;\n    font-size: ",";\n    [dir='rtl'] & {\n        padding-left: 0;\n        padding-right: ","px;\n    }\n"]);return Nr=function(){return e},e}function Rr(){var e=Fr(["\n    min-height: ","px;\n    margin-right: -","px;\n    margin-bottom: ","px;\n    display: flex;\n    justify-content: space-between;\n    height: 100%;\n    align-items: center;\n"]);return Rr=function(){return e},e}function Fr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Vr=2.5*_.e,Ur=x.default.div(Rr(),4*_.e,Vr,_.e/4),Br=x.default.div(Nr(),function(e){return e.isCompact?"12px":null},Vr),Kr=x.default.div(Lr(),function(e){return e.maxResponsiveWidth?"flex: 1 0 auto; justify-content: space-between; max-width: ".concat(e.maxResponsiveWidth,"px;"):"flex-shrink: 0; > * { margin-left: ".concat(_.e,"px; &:last-child { margin-left: 0; } }")},Vr,2*_.e,Vr),Wr=Object(x.default)(Kr)(Dr()),Hr=x.default.div(Ar()),zr=Object(R.p)(F.B),qr=Object(We.createSelector)(zr,function(e){return!!e}),Gr=n("./node_modules/@atlaskit/icon/glyph/watch.js"),Jr=n.n(Gr),Qr=n("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js");function Zr(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    display: flex;\n    margin: 4px 25px 4px 8px;\n"]);return Zr=function(){return e},e}var Yr=x.default.div(Zr()),$r=function(){return Object(Qr.a)(o.a.createElement("div",null,o.a.createElement(Yr,null,o.a.createElement(Jr.a,{size:"medium",primaryColor:S.colors.N30}))))},Xr=Object(cn.asyncComponent)({resolve:function(){return n.e(20).then(n.bind(null,"./src/packages/issue/issue-view/src/views/watchers/view.js"))},LoadingComponent:$r}),eo=Object(p.a)([Object(i.connect)(function(e){return{isWatchesPresent:qr(e),isLoading:Object(f.q)(e),error:Object(f.g)(e),loggedInAccountId:Object(l.a)(e)}},{})])(function(e){var t=e.isWatchesPresent,n=e.isLoading,r=e.error,i=e.loggedInAccountId;return!r&&!!i?!t||n?o.a.createElement($r,null):o.a.createElement(Xr,null):null});function to(e){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ro(e,t){return!t||"object"!==to(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oo(e){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function io(e,t){return(io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return so});var ao=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ro(this,oo(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&io(e,t)}(t,r["Component"]),function(e,t,n){t&&no(e.prototype,t),n&&no(e,n)}(t,[{key:"renderIssueActions",value:function(){var e=this.props,t=e.issueDeleteCallbacks,n=e.onClose,r=e.viewModeOptions;return o.a.createElement(ur,{externalId:"issue.opsbar",issueDeleteCallbacks:t,viewModeOptions:r,onClose:n})}},{key:"render",value:function(){var e,t=this.props,n=t.error,r=t.shouldShowCloseButton,i=t.onClose,c=t.renderFeedback,u=t.isProjectSimplified,l=t.isCompact,f=t.viewModeOptions,p=t.backButtonUrl,d=t.isClickthroughBannerHidden;c&&(c(this.props.applicationKey,u,d)&&(e=o.a.createElement(a.a,{name:y.c},o.a.createElement(Hr,null,c(this.props.applicationKey,u,d)))));var b=f&&f.viewMode===h.b,g=u&&b&&!n;return o.a.createElement(m.a,{isCompact:l},o.a.createElement(s.a,{medium:12},o.a.createElement(Ur,null,!n&&o.a.createElement(Br,{isCompact:l},p&&o.a.createElement(A,{url:p}),o.a.createElement(wt,{externalId:"issue",shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb})),o.a.createElement(Wr,{maxResponsiveWidth:g?210:0},r?o.a.createElement(lr.a,{onClose:i}):null,this.renderIssueActions(),o.a.createElement(Tr,null),o.a.createElement(eo,null),o.a.createElement(Er,null),e))))}}]),t}();ao.displayName="HeaderItem",ao.displayName="Header",ao.defaultProps={error:null,onClose:u.a,renderFeedback:function(){return null},shouldShowCloseButton:!1,shouldShowProjectLevelBreadcrumb:!1,shouldShowRootProjectsBreadcrumb:!1,isClickthroughBannerHidden:!1,issueDeleteCallbacks:{},viewModeOptions:{viewModeSwitchEnabled:!1},securityLevelValue:null,securityLevelItems:[]};var so=Object(p.a)([Object(i.connect)(function(e){return{error:Object(f.g)(e),applicationKey:Object(l.d)(e),isProjectSimplified:Object(f.s)(e),backButtonUrl:Object(l.e)(e),isClickthroughBannerHidden:Object(d.a)(e)}},{}),b.a])(ao)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/messages.js":function(e,t,n){"use strict";var r=n("./node_modules/react-intl/lib/index.es.js");t.a=Object(r.defineMessages)({move:{id:"issue.move",defaultMessage:"Move",description:"Label for the issue actions item to move the issue"},clone:{id:"issue.clone",defaultMessage:"Clone",description:"Label for the issue actions item to clone the issue"},delete:{id:"issue.delete",defaultMessage:"Delete",description:"Label for the issue actions item to delete the issue"},print:{id:"issue.print",defaultMessage:"Print",description:"Label for the issue actions item to print the issue"},exportXML:{id:"issue.export-xml",defaultMessage:"Export XML",description:"Label for the issue actions item to export the issue to XML"},exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word",description:"Label for the issue actions item to export the issue to Microsoft Word"},switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog",description:"Label for the issue actions item to open issues in a dialog"},switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar",description:"Label for the issue actions item the open issues in the sidebar"},newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view",description:'Label for the section heading for the "New Jira issue view" issue actions'},swiftLink:{id:"issue.swift-link",defaultMessage:"Configure",description:"Label for a the issue actions item which takes the user to the SWIFT Issue Type config page"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}",description:"Text for a link which will return the user to this page, from the Issue Type config page"},startTour:{id:"issue.start-guided-tour",defaultMessage:"Show me the highlights",description:"Label for the issue actions item which starts the guided tour"},findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more",description:"Label for the issue actions item which shows the user more information about the new issue view"},seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view",description:"Label for the issue actions item which redirects to the old issue view"},turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view",description:"Label for the issue actions item which turns off the new issue view"},turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now",description:"Label for the issue actions item which turns off the new issue view"},triggerButtonLabel:{id:"issue.label-for-issue-actions-button",defaultMessage:"Actions",description:"Label for the button that opens the issue actions dropdown menu"},configure:{id:"issue.configure",defaultMessage:"Configure",description:"Label for the issue action item that links to the classic screen config page"},addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent",description:"Meatball option to add a child to a parent level"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent",description:"Meatball option to change a child parent level"},convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask",description:"Meatball option to change an issue to a subtask"},convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue",description:"Meatball option to change a subtask to a parent level issue"}})},"./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-intl/lib/index.es.js"),a=n("./node_modules/@atlaskit/button/components/Button.js"),s=n("./node_modules/@atlaskit/icon/glyph/cross.js"),c=n.n(s),u=n("./node_modules/@atlaskit/tooltip/components/Tooltip.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=Object(i.defineMessages)({label:{id:"issue.label-for-modal-close-button",defaultMessage:"Close",description:""}}),y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(t,[{key:"render",value:function(){var e=this.props.intl.formatMessage(b.label),t=o.a.createElement(c.a,{label:e,size:"medium"});return o.a.createElement("div",null,o.a.createElement(u.a,{content:e,position:"top"},o.a.createElement(a.b,{appearance:"subtle",spacing:"default",iconBefore:t,onClick:this.props.onClose})))}}]),t}();y.displayName="ModalActionsCloseButton",t.a=Object(i.injectIntl)(y)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/@atlaskit/button/components/Button.js"),a=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),s=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function c(){var e=l(["\n    padding: ","px;\n    margin-left: ","px;\n    margin-right: ","px;\n"]);return c=function(){return e},e}function u(){var e=l(["\n    margin-right: ","px;\n"]);return u=function(){return e},e}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=a.default.span(u(),s.e),p=a.default.span(c(),function(e){return e.compactMode?s.e/2:0},function(e){return e.compactMode?0:-4},function(e){return e.compactMode?0:-2});function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,h(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),function(e,t,n){t&&b(e.prototype,t),n&&b(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.onClick,r=e.extraAttributes,a=e.label,s=e.compactMode,c=e.testId;return o.a.createElement(f,m({},r,{"data-test-id":c}),o.a.createElement(i.b,{spacing:s?"none":"default",iconBefore:o.a.createElement(p,{compactMode:s},t),onClick:n},!s&&a))}}]),t}();v.displayName="View",v.defaultProps={extraAttributes:{},label:"",compactMode:!0,testId:void 0},n.d(t,"a",function(){return v})},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg":function(e,t,n){e.exports=n.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/app-provider.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/lodash/flow.js"),a=n.n(i),s=n("./src/packages/platform/utils/app-base/src/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),u=n("./src/packages/common-legacy-do-not-add-anything-new/src/redux-disposable/index.js"),l=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),f=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),p=n("./src/packages/issue/issue-view/src/actions/context-action-creator.js"),d=n("./src/packages/issue/issue-view/src/actions/external-action-creator.js"),m=n("./src/packages/issue/issue-view/src/actions/issue-navigation-action-creator.js"),b=n("./src/packages/issue/issue-view/src/actions/issue-preview-action-creator.js"),y=n("./src/packages/issue/issue-view/src/actions/issue-remote-data-action-creator.js"),h=n("./src/packages/issue/issue-view/src/actions/user-fetch-action-creator.js"),g=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-action-creator.js"),v=n("./src/packages/issue/issue-view/src/common/media/token-browser-utils.js"),O=n("./src/packages/issue/issue-view/src/common/metrics/index.js"),j=n("./src/packages/issue/issue-view/src/common/metrics/context/index.js");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),I=n("./src/packages/issue/issue-view/src/feature-flags.js"),x=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-preview-action-creator.js"),_=n("./src/packages/issue/issue-view/src/layout-descriptor/index.js"),M=n("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),T=n("./src/packages/issue/issue-view/src/store.js"),A=n("./src/packages/platform/services/issue/src/index.js"),D=n("./src/packages/realtime/src/feature-flags.js"),L=n("./node_modules/history/createBrowserHistory.js"),N=n.n(L),R=n("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js");function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var V=n("./node_modules/react-redux/es/index.js"),U=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var H=function(e){var t=e.issueKey,n=e.fields,o=e.fieldsValueActions.setIssue;return Object(r.useMemo)(function(){var e=Object.entries(n).reduce(function(e,t){var n=W(t,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){K(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,K({},n[0],n[1].value))},{});o(t,e)},[n,t,o]),null},z=Object(V.connect)(function(e){return{fields:Object(U.s)(e)}},{})(function(e){return Object.keys(e.fields).length?o.a.createElement(H,e):null}),q=n("./node_modules/lodash/join.js"),G=n.n(q),J=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),Q=n("./src/packages/issue/issue-view/src/actions/issue-realtime-action-type.js"),Z=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),Y=n("./node_modules/reselect/lib/index.js"),$=n("./src/packages/realtime/index.js"),X=Object(Y.createSelector)(Z.i,P.B,function(e,t){return[Object($.g)(e,t)]}),ee=n("./src/packages/platform/observability/product-analytics-bridge/src/index.js");function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var re=[$.f,$.b],oe=Object(V.connect)(function(e){return{channels:X(e),cloudId:Object(Z.i)(e),projectId:Object(P.B)(e),issueId:Object(Z.A)(e)}},{realtimeUpdateCurrentIssue:function(e){return{type:Q.a,payload:e}}},function(e,t){return{channels:e.channels,events:re,cloudId:e.cloudId,projectId:e.projectId,onJoin:function(t,n){Object(ee.r)(n,"channel joined","Realtime",{cloudId:new J.a(e.cloudId),projectId:e.projectId,issueId:new J.a(e.issueId),channels:new J.a(G()(e.channels))})},onReceive:function(n,r){n&&n.payload.issueId===Number(e.issueId)&&(t.realtimeUpdateCurrentIssue({atlassianId:n.payload.atlassianId,updateType:n.type}),Object(ee.r)(r,"event received","Realtime",{cloudId:new J.a(e.cloudId),projectId:e.projectId,issueId:new J.a(e.issueId),eventType:new J.a(n.type)}))},onLeave:function(t,n){Object(ee.r)(n,"channel left","Realtime",{cloudId:new J.a(e.cloudId),projectId:e.projectId,issueId:new J.a(e.issueId),channels:new J.a(G()(e.channels))})}}})(function(e){var t=e.cloudId,n=e.projectId,r=ne(e,["cloudId","projectId"]);return t&&n?o.a.createElement($.h,te({appId:"issue-view"},r)):null});function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var me=function(e){return o.a.createElement(f.b,null,function(t,n){return o.a.createElement(ye,de({},e,{fieldsValueActions:n}))})};me.displayName="AppProviderWithFieldsValueActions";var be=!1,ye=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=le(this,fe(t).call(this,e))).onIssueKeyChange=function(e){var t=e.fromIssueKey,r=e.toIssueKey,o=e.meta;n.props.onIssueKeyChange&&n.props.onIssueKeyChange({fromIssueKey:t,toIssueKey:r,meta:o}),Object(I.Y)()&&__SPA__||n.store.dispatch(Object(m.b)({fromIssueKey:t,toIssueKey:r}))},n.addAnalyticsPayload=function(){var e=n.store.getState(),t=Object(M.a)(e),r=t.attributes;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach(function(t){se(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},ce(t,["attributes"]),{},r)},n.dispatchExternalAction=function(e){var t=Object(d.d)(e);n.store.dispatch(t)},n.store=void 0,n.tenantContext=void 0,n.tenantContext=e.tenantContext||Object(l.f)();var r=e.dataProvider||Object(A.hb)(),o=void 0===e.history?N()():e.history;if(e.store?n.store=e.store:n.store=Object(T.b)({onChange:e.onChange,onError:e.onError,dataProvider:r,issueKey:e.issueKey,history:o}),Object(O.a)({analyticsSource:e.analyticsSource,isLoadedWithPage:e.isLoadedWithPage||be,isSPA:!e.isInitialRender,dataProvider:r,store:n.store}),n.isNotComplete()){var i=r.getIssue(e.issueKey);i?n.store.dispatch(Object(x.a)(i)):n.store.dispatch(Object(b.b)(e.issueKey))}return n.setContext(e),e.store||(Object(O.g)(),n.store.dispatch(Object(g.b)()),n.store.dispatch(Object(h.b)())),e.dispatchExternalActionRef&&e.dispatchExternalActionRef(n.dispatchExternalAction),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,r["Component"]),function(e,t,n){t&&ue(e.prototype,t),n&&ue(e,n)}(t,[{key:"componentDidMount",value:function(){this.store&&this.store.dispatch&&this.store.dispatch(Object(y.a)(this.props.issueKey))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setContext(e)}},{key:"componentWillUnmount",value:function(){var e=this;this.store&&this.store.dispatch&&(this.props.isSpaEnabled||setTimeout(function(){return e.store.dispatch(u.a)})),this.props.dispatchExternalActionRef&&this.props.dispatchExternalActionRef(null)}},{key:"setContext",value:function(e){var t=this.tenantContext,n=t.baseUrl,r=t.cloudId,o=t.licensedProducts,i=t.locale,a=t.atlassianAccountId,s=t.productCrossSellConfig,c=t.siteAdminStatus,u=t.xsrfToken,l=t.appEditions,f=t.appPermissions,d=t.licenseStates,m=t.firstActivationDateMs,b=!!e.isSpaEnabled;this.store.dispatch(Object(p.a)({backButtonUrl:e.backButtonUrl,issueKey:e.issueKey,loginRedirectUrl:e.loginRedirectUrl,rapidViewId:e.rapidViewId,boardType:e.boardType,boardId:e.boardId,isLoadedWithPage:e.isLoadedWithPage,isModal:e.isModal,rapidViewMap:e.rapidViewMap,estimationStatistic:e.estimationStatistic,maxTokenLength:Object(v.a)(),analyticsSource:e.analyticsSource,isLoading:!1,isSpaEnabled:b,viewMode:e.viewMode,onIssueKeyChange:this.onIssueKeyChange,baseUrl:n,cloudId:r,licensedProducts:o,locale:i,atlassianAccountId:a,productCrossSellConfig:s,appPermissions:f,siteAdminStatus:c,xsrfToken:u,appEditions:l,licenseStates:d,firstActivationDateMs:m}))}},{key:"isNotComplete",value:function(){return!Object(P.l)(this.store.getState())}},{key:"render",value:function(){var e=this.props,t=e.fieldsValueActions,n=e.issueKey,r=e.locationTransformer,i=e.children;return Object(O.h)(),o.a.createElement(s.a,{store:this.store,locale:this.tenantContext.locale,addAnalyticsPayload:this.addAnalyticsPayload,hasIntlProvider:!Object(I.D)()},o.a.createElement(o.a.Fragment,null,o.a.createElement(z,{fieldsValueActions:t,issueKey:n}),Object(D.a)()&&Object(I.H)()&&o.a.createElement(oe,null),o.a.createElement(c.a,null,o.a.createElement(_.b,{store:this.store,locationTransformer:r},i))))}}]),t}();ye.displayName="AppProvider",ye.defaultProps={isLoadedWithPage:be,isModal:!1,isSpaEnabled:!1,estimationStatistic:null,viewMode:null};t.a=a()(A.fb,function(){return function(e){var t,n;return n=t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=E(this,(e=S(n)).call.apply(e,[this].concat(o)))).MetricsContext=Object(j.b)(t.props.metrics),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(n,r["Component"]),function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(n,[{key:"render",value:function(){var t=this.MetricsContext;return o.a.createElement(t.Provider,{value:Object(j.a)(this.props.metrics)},o.a.createElement(e,this.props))}}]),n}(),t.displayName="WithMetricsProvider(".concat(e.displayName||e.name,")"),n}}(),function(e){return function(t){return o.a.createElement(R.b,null,function(n){return o.a.createElement(e,F({},t,{isInitialRender:n}))})}})(me)},"./src/packages/issue/issue-view/src/views/issue-details/async-issue-view.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-async-component/commonjs/index.js"),a=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),s=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),c=n("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js"),u=n("./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js");function l(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    padding-bottom: ","px;\n"]);return l=function(){return e},e}var f=a.default.div(l(),4*s.e),p=Promise.all([n.e(2),n.e(0),n.e(1),n.e(13),n.e(14),n.e(16),n.e(15),n.e(17)]).then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-details/issue-view.js")),d=function(){return o.a.createElement(u.a,null)};d.displayName="renderSkeleton",t.a=Object(i.asyncComponent)({resolve:function(){return p},LoadingComponent:function(){return Object(c.a)(o.a.createElement(f,null,d()),"issue-skeleton")}})},"./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg":function(e,t,n){e.exports=n.p+"assets/auth-error.37d7a62ee1c48c2d5ae201ec8f798f18.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/error-container/error-display.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),a=n("./node_modules/@atlaskit/theme/index.js"),s=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function c(){var e=f(["\n    max-width: 100%;\n"]);return c=function(){return e},e}function u(){var e=f(["\n    font-size: 20px;\n    font-weight: bold;\n    margin-top: ","px;\n    margin-bottom: ","px;\n    max-width: 100%;\n"]);return u=function(){return e},e}function l(){var e=f(["\n    text-align: center;\n    flex-direction: column;\n    color: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return l=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var p=i.default.div(l(),a.colors.N800),d=i.default.h2(u(),1.5*s.e,1.5*s.e),m=i.default.p(c()),b=function(e){return o.a.createElement(p,null,e.image,o.a.createElement(d,null,e.header),o.a.createElement(m,null,e.description),e.children)};b.displayName="ErrorDisplay",b.defaultProps={description:void 0,children:null};t.a=b},"./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg":function(e,t,n){e.exports=n.p+"assets/permission-error.c932893e3cfcbf2f521d55c8596010e7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error-view.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-intl/lib/index.es.js"),a=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),s=n("./src/packages/issue/issue-view/src/views/issue-details/error/error-container/error-display.js"),c=n("./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg"),u=n.n(c);function l(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    height: 130px;\n    width: 120px;\n"]);return l=function(){return e},e}var f=Object(i.defineMessages)({unknownErrorHeader:{id:"issue.text-for-header-in-generic-error",defaultMessage:"We couldn't connect to that issue",description:""},unknownErrorDescription:{id:"issue.text-for-description-in-generic-error",defaultMessage:"Make sure that this issue actually exists in that project. If it does, try again in a few minutes. If you still can't link to the issue, contact your Jira admin.",description:""}}),p=a.default.img(l());t.a=Object(i.injectIntl)(function(e){var t=e.intl;return o.a.createElement(s.a,{header:t.formatMessage(f.unknownErrorHeader),description:t.formatMessage(f.unknownErrorDescription),image:o.a.createElement(p,{src:u.a,alt:""})})})},"./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg":function(e,t,n){e.exports=n.p+"assets/unknown-error.0ae7398ce07e7e3c1125e09977c8fd48.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/issue-data-provider-refresher.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),s=n("./src/packages/issue/issue-view/src/actions/issue-preview-action-creator.js"),c=n("./src/packages/issue/issue-view/src/common/constants/index.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=d(this,(e=m(t)).call.apply(e,[this].concat(o)))).onCloseHandler=function(){n.props.refreshIssueData(n.props.currentIssueKey,n.props.fieldData),n.props.onClose()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(t,[{key:"componentWillUnmount",value:function(){this.props.refreshOnUnmount&&this.props.refreshIssueData(this.props.currentIssueKey,this.props.fieldData)}},{key:"render",value:function(){var e=this,t=this.props.children,n=r.Children.count(t);if(n<=0)return null;1!==n&&a.h.safeError("data.provider.issue.refreshed","Refresher expects 1 child but ".concat(n," specified"),new i.a({eventNameSuffix:c.C,type:i.i,app:i.e}));var o=r.Children.map(t,function(t){return Object(r.cloneElement)(t,{onClose:e.onCloseHandler})});return r.Children.only(o[0])}}]),t}();y.displayName="ReadOnlyDataIssueRefresher",y.defaultProps={refreshOnUnmount:!1},t.a=Object(o.connect)(function(e){return{currentIssueKey:Object(u.B)(e),fieldData:Object(l.r)(e)}},function(e){return{refreshIssueData:function(t,n){return e(Object(s.a)(t,n))}}})(y)},"./src/packages/issue/issue-view/src/views/issue-details/issue-view.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),s=n("./node_modules/@atlaskit/page/GridColumn.js"),c=n("./node_modules/lodash/noop.js"),u=n.n(c),l=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),f=n("./src/packages/platform/observability/analytics-web-react/src/index.js"),p=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),d=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),m=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),b=n("./src/packages/issue/issue-view/src/actions/view-mount-status-action-type.js"),y=n("./node_modules/react-intl/lib/index.es.js"),h=n("./node_modules/lodash/flow.js"),g=n.n(h),v=n("./src/packages/platform/utils/constants/src/status-categories.js"),O=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),j=n("./src/packages/issue/issue-view/src/common/service/mentions/index.js"),w=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),k=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),E=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),S=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),C=n("./src/packages/issue/issue-view/src/selectors/status-selector.js"),P=n("./src/packages/issue/issue-view/src/activity/worklog/state/index.js"),I=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),x=n("./src/packages/issue/issue-view/src/common/util/time-string/index.js"),_=function(e){return e.length>0&&!Number.isNaN(Number(e))},M=n("./src/packages/issue/issue-view/src/feature-flags.js"),T=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),A=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),D=n("./node_modules/@atlaskit/button/components/Button.js"),L=n("./node_modules/@atlaskit/spinner/Spinner/index.js"),N=Object(y.defineMessages)({save:{id:"issue.log-time.modal.log-time-action.save",defaultMessage:"Save",description:"Text to display for the Save button"},cancel:{id:"issue.log-time.modal.log-time-action.cancel",defaultMessage:"Cancel",description:"Text to display for the Cancel button"}});function R(){var e=V(["\n    /* Needed to vertically align the spinner. */\n    /* See: https://ecosystem.atlassian.net/browse/AK-4244 */\n    > * {\n        display: flex;\n    }\n    margin-right: ","px;\n"]);return R=function(){return e},e}function F(){var e=V(["\n    display: inline-flex;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    > :not(:first-child) {\n        margin-left: ","px;\n    }\n"]);return F=function(){return e},e}function V(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var U=a.default.div(F(),d.e/2),B=a.default.div(R(),d.e),K=function(){return o.a.createElement(B,null,o.a.createElement(L.a,{size:"small"}))};K.displayName="renderSpinner";var W=function(e){var t=e.formState,n=e.onConfirm,r=e.onCancel,i=e.intl;return o.a.createElement(U,null,"submitting"===t?K():null,o.a.createElement(D.b,{appearance:"primary",onClick:n,isDisabled:"invalid"===t||"submitting"===t},i.formatMessage(N.save)),o.a.createElement(D.b,{appearance:"subtle",onClick:r,isDisabled:"submitting"===t},i.formatMessage(N.cancel)))};W.displayName="LogTimeModalFooter";var H=W,z=Object(y.injectIntl)(H),q=n("./node_modules/@atlaskit/field-base/components/Label.js"),G=n("./node_modules/@atlaskit/datetime-picker/dist/esm/components/DateTimePicker.js"),J=n("./node_modules/lodash/isNaN.js"),Q=n.n(J),Z=n("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),Y=n("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js"),$=n("./src/packages/compatibility/src/index.js"),X=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js"),ee=function(){return Object(X.b)("kitkat.change-iso-date-formatting-utility",!1)};function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=re(this,(e=oe(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=ee()?Object($.a)(e):e.replace(/(am|pm)?([+-][0-9]{2})([0-9]{2})$/,"$2:$3");n.props.onChange(Q()(Date.parse(t))?null:t)},n.parseValue=function(e,t,r){return n.props.parseValue(e,t,r,n.props.timeZone)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r["Component"]),function(e,t,n){t&&ne(e.prototype,t),n&&ne(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.autoFocus,n=e.isDisabled,r=e.value,i=e.timeZone,a=e.intl.formatMessage;return o.a.createElement(G.a,{autoFocus:t,isDisabled:n,value:r||"",onChange:this.onChange,timeIsEditable:!0,parseValue:i?this.parseValue:void 0,datePickerSelectProps:{placeholder:a(Y.a.placeholderDate)},timePickerSelectProps:{formatCreateLabel:function(e){return e},filterOption:function(e,t){return!t||e.value===t||e.label===t}},times:Z.a})}}]),t}();ae.displayName="DateTimeFieldView",ae.defaultProps={value:void 0,autoFocus:!1,isDisabled:!1};var se=Object(y.injectIntl)(ae),ce=n("./node_modules/moment-timezone/index.js"),ue=n.n(ce);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach(function(t){pe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de=function(e,t,n,r){var o=ue.a.tz(e,r);return o.isValid()&&e?{dateValue:o.format("YYYY-MM-DD"),timeValue:o.format("HH:mm"),zoneValue:o.format("ZZ")}:{dateValue:t,timeValue:n,zoneValue:ue()().tz(r).format("ZZ")}},me=n("./node_modules/react-async-component/commonjs/index.js"),be=n("./src/packages/issue/issue-view/src/common/metrics/index.js"),ye=n.e(310).then(n.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/editor-view.js")),he=Object(me.asyncComponent)({resolve:function(){return ye.then(function(e){return Object(be.l)(),Promise.resolve(e)})}}),ge=Object(y.defineMessages)({label:{id:"issue.log-time.modal.work-description.label",defaultMessage:"Work description",description:"Label for the work description editor"}});function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),je(this,we(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,r["Component"]),function(e,t,n){t&&Oe(e.prototype,t),n&&Oe(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{label:this.props.intl.formatMessage(ge.label)}),o.a.createElement(he,{isExpanded:!0,externalId:this.props.externalId,baseUrl:this.props.baseUrl,isDisabled:this.props.isDisabled,defaultValue:this.props.defaultValue,portalElement:this.props.portalElement,onChange:this.props.onChange,onChangeFailure:this.props.onChangeFailure,shouldUseAdfPipeline:Object(M.x)(),mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider}))}}]),t}();Ee.displayName="WorkDescription",Ee.defaultProps={portalElement:void 0};var Se=Object(y.injectIntl)(Ee);function Ce(){var e=xe(["\n    width: 100%;\n"]);return Ce=function(){return e},e}function Pe(){var e=xe(["\n    width: 50%;\n"]);return Pe=function(){return e},e}function Ie(){var e=xe(["\n    align-items: center;\n    display: flex;\n    flex-direction: row;\n    > :not(:first-child) {\n        margin-left: ","px;\n    }\n"]);return Ie=function(){return e},e}function xe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _e=a.default.div(Ie(),d.e),Me=a.default.div(Pe()),Te=a.default.div(Ce());function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Le(this,(e=Ne(t)).call.apply(e,[this].concat(o)))).state={shouldAppearInvalid:!n.props.isValid},n.onBlur=function(){n.setState({shouldAppearInvalid:!n.props.isValid})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,r["Component"]),function(e,t,n){t&&De(e.prototype,t),n&&De(e,n)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.isValid&&e.isValid&&this.setState({shouldAppearInvalid:!1})}},{key:"render",value:function(){return o.a.createElement("div",{onBlur:this.onBlur},this.props.children(this.state.shouldAppearInvalid))}}]),t}();Fe.displayName="WithValidationOnBlur";var Ve=n("./src/packages/issue/issue-view/src/common/messages/time.js"),Ue=n("./node_modules/@atlaskit/field-text/FieldTextStateless.js");function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=We(this,(e=He(t)).call.apply(e,[this].concat(o)))).onChange=function(e){n.props.onChange(e.target.value)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,r["Component"]),function(e,t,n){t&&Ke(e.prototype,t),n&&Ke(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(Ue.a,{value:this.props.value,label:this.props.label,placeholder:this.props.placeholder,isInvalid:this.props.isInvalid,invalidMessage:this.props.isInvalid?this.props.invalidMessage:void 0,disabled:this.props.isDisabled,required:this.props.isRequired,autoFocus:this.props.autoFocus,onChange:this.onChange,onBlur:this.props.onBlur,shouldFitContainer:!0})}}]),t}();qe.displayName="TimeLogTextField",qe.defaultProps={isInvalid:!1,isRequired:!1,isDisabled:!1,autoFocus:!1,placeholder:void 0,invalidMessage:void 0,onBlur:u.a};var Ge=Object(y.defineMessages)({timeRemaining:{id:"issue.log-time.modal.time-remaining",defaultMessage:"Time remaining",description:"Label for the time remaining field"},timeSpent:{id:"issue.log-time.modal.time-spent",defaultMessage:"Time spent",description:"Label for the time spent field"}}),Je=n("./node_modules/@atlaskit/tooltip/components/Tooltip.js");function Qe(){var e=Ye(["\n    list-style: inside;\n    margin-top: ","px;\n    padding-left: ","px;\n    padding-bottom: ","px;\n"]);return Qe=function(){return e},e}function Ze(){var e=Ye(["\n    /* Default padding of the tooltip is 2px 6px. We need to subtract this from our desired padding size */\n    padding: ","px ","px;\n"]);return Ze=function(){return e},e}function Ye(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var $e=a.default.div(Ze(),d.e-2,d.e-6),Xe=a.default.div(Qe(),d.e,d.e/2,d.e/2);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,rt(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,r["Component"]),function(e,t,n){t&&tt(e.prototype,t),n&&tt(e,n)}(t,[{key:"tooltipContentRender",value:function(){var e=this.props.intl;return o.a.createElement($e,null,o.a.createElement("p",null,e.formatMessage(Ve.a.exampleFormat,{formatExample:"2w 4d 6h 45m"})),o.a.createElement(Xe,null,o.a.createElement("li",null,e.formatMessage(Ve.a.weeks,{w:"w"})),o.a.createElement("li",null,e.formatMessage(Ve.a.days,{d:"d"})),o.a.createElement("li",null,e.formatMessage(Ve.a.hours,{h:"h"})),o.a.createElement("li",null,e.formatMessage(Ve.a.minutes,{m:"m"}))))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.shouldRenderContent;return o.a.createElement(Je.a,{content:n?this.tooltipContentRender():null},t)}}]),t}();it.displayName="TimeTrackingTooltip";var at=it,st=function(e){var t=e.isValid,n=e.value,r=e.onChange,i=e.onBlur,a=e.isDisabled,s=e.intl;return o.a.createElement(Fe,{isValid:t},function(e){return o.a.createElement(at,{shouldRenderContent:t&&!a,intl:s},o.a.createElement(qe,{value:n,isInvalid:e,invalidMessage:Ve.c,onChange:r,onBlur:i,isDisabled:a,label:s.formatMessage(Ge.timeSpent),placeholder:Ve.b,autoFocus:!0}))})};st.displayName="ValidatedLogTimeInput";var ct=st,ut=function(e){var t=e.isValid,n=e.value,r=e.onChange,i=e.onBlur,a=e.isDisabled,s=e.intl;return o.a.createElement(Fe,{isValid:t},function(e){return o.a.createElement(it,{shouldRenderContent:t&&!a,intl:s},o.a.createElement(qe,{value:n,isInvalid:e,invalidMessage:Ve.c,onChange:r,onBlur:i,isDisabled:a,label:s.formatMessage(Ge.timeRemaining),placeholder:Ve.b}))})};function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=pt(this,(e=dt(t)).call.apply(e,[this].concat(o)))).onDateStartedChange=function(e){n.props.onDateStartedChange(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,r["Component"]),function(e,t,n){t&&ft(e.prototype,t),n&&ft(e,n)}(t,[{key:"render",value:function(){var e=this.props.value,t=e.timeLogged,n=e.timeRemaining,r=e.dateStarted,i=e.workDescription;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_e,null,o.a.createElement(Me,null,o.a.createElement(ct,{value:t,isDisabled:this.props.isDisabled,isValid:this.props.isTimeLoggedValid,onChange:this.props.onTimeLoggedChange,onBlur:this.props.onTimeLoggedBlur,intl:this.props.intl})," "),o.a.createElement(Me,null,o.a.createElement(ut,{value:n,isDisabled:this.props.isDisabled,isValid:this.props.isTimeRemainingValid,onChange:this.props.onTimeRemainingChange,onBlur:this.props.onTimeRemainingBlur,intl:this.props.intl}))),!this.props.isCollapsed&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Te,null,o.a.createElement(y.FormattedMessage,{id:"issue.log-time.modal.date-started",defaultMessage:"Date started"},function(e){return o.a.createElement(q.a,{label:String(e),isRequired:!0})}),o.a.createElement(se,{value:r||null,timeZone:this.props.timeZone,parseValue:de,onChange:this.onDateStartedChange,isDisabled:this.props.isDisabled})),o.a.createElement(Se,{defaultValue:i,isDisabled:this.props.isDisabled,portalElement:this.props.portalElement,onChange:this.props.onWorkDescriptionChange,onChangeFailure:this.props.onWorkDescriptionChangeFailure,externalId:this.props.externalId,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider})))}}]),t}();bt.displayName="LogTimeModalForm",bt.defaultProps={portalElement:void 0};var yt=Object(y.injectIntl)(bt),ht=n("./node_modules/@atlaskit/lozenge/Lozenge/index.js"),gt=n("./node_modules/@atlaskit/icon/index.js"),vt=n("./node_modules/@atlaskit/theme/index.js"),Ot=Object(y.defineMessages)({underOriginalEstimate:{id:"issue.log-time.under-original-estimated-time-tooltip",defaultMessage:"{time} under original estimate",description:""},overOriginalEstimate:{id:"issue.log-time.over-original-estimated-time-tooltip",defaultMessage:"{time} over original estimate",description:""}});function jt(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    background-color: ",";\n    flex-shrink: 0;\n    width: ",";\n    transition: width 0.3s ease;\n\n    &:first-child {\n        border-top-left-radius: ","px;\n        border-bottom-left-radius: ","px;\n    }\n\n    &:last-child {\n        border-top-right-radius: ","px;\n        border-bottom-right-radius: ","px;\n    }\n"]);return jt=function(){return e},e}var wt=a.default.div(jt(),function(e){return e.color},function(e){return e.width},d.e/2,d.e/2,d.e/2,d.e/2);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var It=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),St(this,Ct(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,r["Component"]),function(e,t,n){t&&Et(e.prototype,t),n&&Et(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.proportion,r=n>0?"".concat(100*n,"%"):"0";return o.a.createElement(wt,{color:t,width:r})}}]),t}();function xt(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    background-color: ",";\n    border-radius: ","px;\n    display: flex;\n    height: ","px;\n    overflow: hidden;\n    width: 100%;\n\n    ",";\n"]);return xt=function(){return e},e}It.displayName="ProgressBarSegment",It.defaultProps={color:vt.colors.B400,proportion:0};var _t=a.default.div(xt(),vt.colors.N40,d.e/2,function(e){return e.isCompact?d.e/2:d.e},function(e){return e.hasPointerCursor?"cursor: pointer;":""});function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),At(this,Dt(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(t,r["Component"]),function(e,t,n){t&&Tt(e.prototype,t),n&&Tt(e,n)}(t,[{key:"renderProgressBar",value:function(){return o.a.createElement(_t,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)}},{key:"render",value:function(){return this.props.tooltip?o.a.createElement(Je.a,{content:this.props.tooltip},this.renderProgressBar()):this.renderProgressBar()}}]),t}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Nt.displayName="ProgressBar",Nt.defaultProps={children:null,tooltip:null,isCompact:!0};var Kt=function(e,t){var n=e.loggedTime,r=e.remainingTime;return n&&void 0!==t?n+(r||0)-t:0},Wt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Vt(this,(e=Ut(t)).call.apply(e,[this].concat(o)))).secondsToTimeString=function(e){var t=n.props.config,r=t.daysPerWeek,o=t.hoursPerDay;return Object(x.c)(r,o)(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(t,r["Component"]),function(e,t,n){t&&Ft(e.prototype,t),n&&Ft(e,n)}(t,[{key:"getTooltip",value:function(){var e=this.props,t=e.value,n=e.estimatedTime,r=Kt(t,n);return 0===r?null:r>0?this.props.intl.formatMessage(Ot.overOriginalEstimate,{time:this.secondsToTimeString(r)}):this.props.intl.formatMessage(Ot.underOriginalEstimate,{time:this.secondsToTimeString(-r)})}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.estimatedTime,r=t.loggedTime,i=void 0===r?0:r,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.loggedTime,r=void 0===n?0:n,o=e.remainingTime,i=void 0===o?0:o;return Math.max(t,r+i)}(t,n),s=Math.max(Kt(t,n),0),c=a?(i-s)/a:0,u=a?s/a:0;return o.a.createElement(Nt,{tooltip:this.getTooltip(),isCompact:this.props.isCompact},o.a.createElement(It,{color:this.props.isDone?vt.colors.G300:vt.colors.B400,proportion:c}),o.a.createElement(It,{color:vt.colors.Y300,proportion:u}))}}]),t}();Wt.displayName="ProgressTracker",Wt.defaultProps={isCompact:!0,isDone:!1,value:{loggedTime:0}};var Ht=Object(y.injectIntl)(Wt),zt=n("./src/packages/issue/issue-view/src/common/component/logged-time/assets/stopwatch-glyph.svg"),qt=n.n(zt);function Gt(){var e=en(["\n    font-weight: normal;\n"]);return Gt=function(){return e},e}function Jt(){var e=en(["\n    cursor: pointer;\n"]);return Jt=function(){return e},e}function Qt(){var e=en(["\n    margin-right: ","px;\n"]);return Qt=function(){return e},e}function Zt(){var e=en(["\n    color: ",";\n    display: flex;\n    justify-content: space-between;\n    margin-top: 0;\n    font-size: ","px;\n    flex-wrap: wrap;\n"]);return Zt=function(){return e},e}function Yt(){var e=en(["\n    flex-grow: 1;\n    margin-top: ","px;\n"]);return Yt=function(){return e},e}function $t(){var e=en(["\n    margin-right: ","px;\n"]);return $t=function(){return e},e}function Xt(){var e=en(["\n    width: 100%;\n    display: flex;\n"]);return Xt=function(){return e},e}function en(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var tn=a.default.div(Xt()),nn=a.default.div($t(),d.e),rn=a.default.div(Yt(),d.e/2),on=a.default.small(Zt(),vt.colors.N500,d.d),an=a.default.span(Qt(),d.e/2),sn=a.default.span(Jt()),cn=a.default.span(Gt());function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return!t||"object"!==un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mn=function(){return o.a.createElement("object",{data:qt.a,width:"24",height:"24",type:"image/svg+xml"})};mn.displayName="StopWatchGlyphObjectImage";var bn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=fn(this,(e=pn(t)).call.apply(e,[this].concat(i)))).getTimeRemainingText=function(){if(!n.props.value.remainingTime)return null;var e=n.secondsToTimeString(n.props.value.remainingTime);return o.a.createElement(sn,null,o.a.createElement(y.FormattedMessage,{id:"issue.log-time.remaining-time",defaultMessage:"{time} remaining",values:{time:o.a.createElement(cn,null,e)}}))},n.secondsToTimeString=function(e){var t=n.props.config,r=t.daysPerWeek,o=t.hoursPerDay;return Object(x.c)(r,o)(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}(t,r["Component"]),function(e,t,n){t&&ln(e.prototype,t),n&&ln(e,n)}(t,[{key:"getTimeLoggedText",value:function(){if(this.props.value&&this.props.value.loggedTime){var e=this.secondsToTimeString(this.props.value.loggedTime);return o.a.createElement(y.FormattedMessage,{id:"issue.log-time.time-logged",defaultMessage:"{time} logged",values:{time:o.a.createElement(cn,null,e)}})}return o.a.createElement(y.FormattedMessage,{id:"issue.log-time.no-time-logged",defaultMessage:"No time logged"})}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.isDone,r=e.isCompact,i=e.value,a=e.estimatedTime;return o.a.createElement(tn,null,o.a.createElement(nn,null,o.a.createElement(gt.a,{glyph:mn,size:"medium",label:""})),o.a.createElement(rn,null,o.a.createElement(Ht,{value:i,estimatedTime:a,config:t,isDone:n,isCompact:r}),o.a.createElement(on,null,o.a.createElement(an,null,this.getTimeLoggedText()),this.getTimeRemainingText())))}}]),t}();function yn(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-top: ","px;\n"]);return yn=function(){return e},e}bn.displayName="LoggedTime",bn.defaultProps={isCompact:!0,isDone:!1};var hn=a.default.p(yn(),3*d.e);function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t){return!t||"object"!==gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=On(this,(e=jn(t)).call.apply(e,[this].concat(o)))).secondsToTimeString=function(e){var t=n.props.config,r=t.daysPerWeek,o=t.hoursPerDay;return Object(x.c)(r,o)(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(t,r["Component"]),function(e,t,n){t&&vn(e.prototype,t),n&&vn(e,n)}(t,[{key:"renderEstimatedTime",value:function(e){return o.a.createElement(hn,null,o.a.createElement(y.FormattedMessage,{id:"issue.log-time.modal.original-estimate",defaultMessage:"The original estimate for this issue was {time}.",values:{time:o.a.createElement(ht.a,null,this.secondsToTimeString(e))}}))}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.value,r=e.isDone,i=e.estimatedTime;return o.a.createElement(o.a.Fragment,null,o.a.createElement(bn,{config:t,value:n,estimatedTime:i,isDone:r,isCompact:!1}),i?this.renderEstimatedTime(i):null)}}]),t}();function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}kn.displayName="LogTimeModalProgressTracker",kn.defaultProps={value:{},isDone:!1};var xn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Cn(this,(e=Pn(t)).call.apply(e,[this].concat(i)))).state={containerRef:void 0},n.setContainerRef=function(e){n.state.containerRef||n.setState({containerRef:e})},n.renderHeader=function(){return o.a.createElement("h3",null,n.props.header)},n.renderFooter=function(){return o.a.createElement(z,{formState:n.props.formState,onConfirm:n.props.onSubmit,onCancel:n.props.onCancel})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(t,r["Component"]),function(e,t,n){t&&Sn(e.prototype,t),n&&Sn(e,n)}(t,[{key:"secondsToTimeString",value:function(e){var t=this.props.config,n=t.daysPerWeek,r=t.hoursPerDay;return Object(x.c)(n,r)(e)}},{key:"timeStringToSeconds",value:function(e){var t=this.props.config,n=t.daysPerWeek,r=t.hoursPerDay;return Object(x.d)(n,r)(e)}},{key:"renderProgressTracker",value:function(){var e=this.props,t=e.progressTrackerValue,n=t.loggedTime,r=t.remainingTime,i=e.estimatedTime;return void 0===n&&void 0===r&&void 0===i?null:o.a.createElement(kn,{config:this.props.config,value:this.props.progressTrackerValue,estimatedTime:this.props.estimatedTime,isDone:this.props.isDone})}},{key:"renderForm",value:function(){return o.a.createElement(yt,{value:this.props.value,isCollapsed:this.props.isCollapsed,isDisabled:"submitting"===this.props.formState,isTimeLoggedValid:this.props.isTimeLoggedValid,onTimeLoggedBlur:this.props.onTimeLoggedBlur,isTimeRemainingValid:this.props.isTimeRemainingValid,onTimeRemainingBlur:this.props.onTimeRemainingBlur,timeZone:this.props.timeZone,portalElement:this.state.containerRef,onTimeLoggedChange:this.props.onTimeLoggedChange,onTimeRemainingChange:this.props.onTimeRemainingChange,onDateStartedChange:this.props.onDateStartedChange,onWorkDescriptionChange:this.props.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,activityProvider:this.props.activityProvider,externalId:this.props.externalId})}},{key:"render",value:function(){return o.a.createElement(A.a,{header:this.renderHeader,footer:this.renderFooter,isOpen:!0,width:"small",onDialogDismissed:this.props.onCancel},o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement("div",{ref:this.setContainerRef},this.renderProgressTracker(),this.renderForm())))}}]),t}();xn.displayName="LogTimeModal",xn.defaultProps={progressTrackerValue:{},estimatedTime:void 0,isDone:!1};n("./node_modules/lodash/clamp.js");var _n={minute:"m",hour:"h",day:"d",week:"w"},Mn=function(e){return _n[e]||_n.minute};function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach(function(t){Ln(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rn(e,t){return!t||"object"!==Tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Un=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Rn(this,Fn(t).call(this,e))).onTimeLoggedBlur=function(){n.applyDefaultTimeFormat(n.state.value.timeLogged,n.onTimeLoggedChange)},n.onTimeRemainingBlur=function(){n.applyDefaultTimeFormat(n.state.value.timeRemaining,n.onTimeRemainingChange)},n.onTimeLoggedChange=function(e){var t=Object(x.b)(e);if(n.setState(function(n){return{value:Dn({},n.value,{timeLogged:e}),hasUserInteracted:!0,isTimeLoggedValid:t}}),t&&n.props.initialValue.timeRemaining){var r=(n.timeStringToSeconds(e)||0)-(n.timeStringToSeconds(n.props.initialValue.timeLogged)||0),o=(n.timeStringToSeconds(n.props.initialValue.timeRemaining)||0)-r,i=n.secondsToTimeString(o);n.setState(function(e){return{value:Dn({},e.value,{timeRemaining:i}),isTimeRemainingValid:!0}})}},n.onTimeRemainingChange=function(e){n.setState(function(t){return{value:Dn({},t.value,{timeRemaining:e}),hasUserInteracted:!0,isTimeRemainingValid:Object(x.b)(e)}})},n.onDateStartedChange=function(e){n.setState(function(t){return{value:Dn({},t.value,{dateStarted:e}),defaultDateStarted:null,hasUserInteracted:!0}})},n.onWorkDescriptionChange=function(e){n.setState(function(t){return{value:Dn({},t.value,{workDescription:e}),hasUserInteracted:!0}})},n.onSubmit=function(){if(Object(M.ab)()){var e="string"!=typeof n.state.value.workDescription?Object(I.d)(n.state.value.workDescription):n.state.value.workDescription,t=Dn({},n.getValue(),{workDescription:e});n.props.onSubmit(t)}else n.props.onSubmit(n.getValue())},n.applyDefaultTimeFormat=function(e,t){var r=e.trim();if(_(r)){var o=n.props.config.defaultUnit;r="".concat(r).concat(Mn(o))}r!==e&&t(r)},n.state={value:e.initialValue,defaultDateStarted:Date.now(),isTimeLoggedValid:!0,isTimeRemainingValid:!0,hasUserInteracted:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(t,r["Component"]),function(e,t,n){t&&Nn(e.prototype,t),n&&Nn(e,n)}(t,[{key:"getIsCollapsed",value:function(){return this.props.isCollapsible&&!this.state.value.timeLogged}},{key:"getDateStarted",value:function(){var e=this.state,t=e.defaultDateStarted,n=e.value,r=n.dateStarted,o=n.timeLogged;if(!this.props.shouldUpdateDate||r)return r;if(!t)return null;var i=this.timeStringToSeconds(o)||0;try{return new Date(t-1e3*i).toISOString()}catch(e){return new Date(t).toISOString()}}},{key:"getValue",value:function(){return Dn({},this.state.value,{dateStarted:this.getDateStarted()})}},{key:"getFormState",value:function(){return this.props.isWaiting?"submitting":this.state.hasUserInteracted&&this.props.validator(this.getValue())?"valid":"invalid"}},{key:"getProgressTrackerValue",value:function(){var e=this.state.value,t=e.timeLogged,n=e.timeRemaining,r=this.props,o=r.initialValue,i=r.timeTracking,a=(this.timeStringToSeconds(t)||0)-(this.timeStringToSeconds(o.timeLogged)||0),s=a||i.loggedTime?(a||0)+(i.loggedTime||0):void 0,c=this.timeStringToSeconds(n);return{loggedTime:s,remainingTime:"number"==typeof c?c||0:i.remainingTime}}},{key:"secondsToTimeString",value:function(e){var t=this.props.config,n=t.daysPerWeek,r=t.hoursPerDay;return Object(x.c)(n,r)(e)}},{key:"timeStringToSeconds",value:function(e){var t=this.props.config,n=t.daysPerWeek,r=t.hoursPerDay;return Object(x.d)(n,r)(e)}},{key:"render",value:function(){return o.a.createElement(xn,{value:this.getValue(),progressTrackerValue:this.getProgressTrackerValue(),estimatedTime:this.props.estimatedTime,config:this.props.config,header:this.props.header,formState:this.getFormState(),timeZone:this.props.timeZone,isCollapsed:this.getIsCollapsed(),isDone:this.props.isDone,isTimeLoggedValid:this.state.isTimeLoggedValid,isTimeRemainingValid:this.state.isTimeRemainingValid,onSubmit:this.onSubmit,onCancel:this.props.onCancel,onTimeLoggedChange:this.onTimeLoggedChange,onTimeLoggedBlur:this.onTimeLoggedBlur,onTimeRemainingChange:this.onTimeRemainingChange,onTimeRemainingBlur:this.onTimeRemainingBlur,onDateStartedChange:this.onDateStartedChange,onWorkDescriptionChange:this.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId})}}]),t}();Un.displayName="LogTimeModalWithValidation",Un.defaultProps={isCollapsible:!1,isDone:!1,isWaiting:!1,shouldUpdateDate:!1};var Bn,Kn=Object(f.f)("button",{onSubmit:"clicked",onCancel:"clicked"})(Un),Wn=Object(y.defineMessages)({title:{id:"issue.activity.worklog.add-modal.title",defaultMessage:"Time tracking",description:"Title for the Add work log modal"}});function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t){return!t||"object"!==Hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qn=function(e){var t=e.timeLogged,n=e.timeRemaining,r=e.dateStarted;return(!!t||!!n)&&Object(x.b)(t)&&Object(x.b)(n)&&!!r},Zn=Object(f.d)("addWorklog",f.h.MODAL)(Bn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qn(this,Gn(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(t,r["Component"]),function(e,t,n){t&&zn(e.prototype,t),n&&zn(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.timeTracking,n=e.timeTrackingConfiguration,r=e.intl,i=t.timeSpentSeconds,a=t.remainingEstimateSeconds,s=t.originalEstimateSeconds,c=n.daysPerWeek,l=n.hoursPerDay,p={timeLogged:"",timeRemaining:"number"==typeof a?Object(x.c)(c,l)(a):"",workDescription:Object(M.x)()?I.a:""},d={loggedTime:i,remainingTime:a};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Kn,{initialValue:p,timeTracking:d,estimatedTime:s,config:n,header:r.formatMessage(Wn.title),timeZone:this.props.timeZone,isCollapsible:!0,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!0,validator:Qn,onSubmit:this.props.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:u.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||u.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId}),o.a.createElement(f.i,null))}}]),t}())||Bn,Yn=g()(Object(f.e)("worklog"),Object(f.s)({onSubmit:"submitAddWorklog",onCancel:"cancelAddWorklog"}),y.injectIntl,Object(i.connect)(function(e){return{timeTrackingConfiguration:Object(S.g)(e),timeTracking:Object(S.h)(e),timeZone:Object(k.y)(e),isDone:Object(C.b)(e)===v.DONE,isSaving:Object(S.c)(e),baseUrl:Object(w.f)(e),mediaContext:Object(E.a)(e),mentionEncoder:Object(j.a)(Object(w.f)(e)),mentionProvider:Object(j.b)(e)}},function(e){return{onSubmit:function(t,n){var r=t||{},o=r.timeLogged,i=r.timeRemaining;e(!o&&i?Object(O.K)(i,n):Object(O.u)(t,n))},onCancel:function(){e(Object(P.n)())}}}))(Zn),$n=n("./node_modules/@atlaskit/checkbox/Checkbox.js"),Xn=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),er=n.n(Xn),tr=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),nr=n("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),rr=Object(y.defineMessages)({delete:{id:"issue.activity.worklog.delete-modal.delete",defaultMessage:"Delete",description:"Text for the delete confirmation button"},deleteHeading:{id:"issue.activity.worklog.delete-modal.delete-heading",defaultMessage:"Delete worklog entry?",description:"Heading for the modal to delete a worklog entry"},cancel:{id:"issue.activity.worklog.delete-modal.cancel",defaultMessage:"Cancel",description:"Text for the button to cancel deleting the worklog"},deleteWarning:{id:"issue.activity.worklog.delete-modal.delete-warning",defaultMessage:"Once you delete, it's gone for good.",description:"Warning for the delete modal to delete a worklog entry"},adjustCheckboxLabel:{id:"issue.activity.worklog.delete-modal.adjust-checkbox-label",defaultMessage:"Adjust time remaining",description:"Label for the checkbox to adjust the remaining time in the worklog delete modal"},adjustCurrentLabel:{id:"issue.activity.worklog.delete-modal.adjust-current-label",defaultMessage:"Current",description:"Label for the current time remaining"},adjustNewLabel:{id:"issue.activity.worklog.delete-modal.adjust-new-label",defaultMessage:"New time remaining",description:"Label for the new time remaining"},adjustNewSubtext:{id:"issue.activity.worklog.delete-modal.adjust-new-subtext",defaultMessage:"By default, deleted time ({timeSpent}) is added to the time remaining.",description:"Subtext for the new time remaining input"}});function or(){var e=pr(["\n    font-size: ","px;\n    margin-top: ","px;\n    color: ",";\n"]);return or=function(){return e},e}function ir(){var e=pr(["\n    width: 50%;\n"]);return ir=function(){return e},e}function ar(){var e=pr(["\n    margin: ","px 0 ","px -","px;\n"]);return ar=function(){return e},e}function sr(){var e=pr(["\n    margin: ","px ","px ","px ","px;\n"]);return sr=function(){return e},e}function cr(){var e=pr(["\n    text-align: center;\n    padding: ","px;\n"]);return cr=function(){return e},e}function ur(){var e=pr(["\n    color: #6b778c;\n    font-size: ","px;\n    font-weight: 600;\n    line-height: 1.3333333333333333;\n    padding: ","px 0 ","px 0;\n"]);return ur=function(){return e},e}function lr(){var e=pr(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    max-width: ","px;\n"]);return lr=function(){return e},e}function fr(){var e=pr(["\n    display: flex;\n    margin-top: -","px;\n"]);return fr=function(){return e},e}function pr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dr,mr=a.default.div(fr(),3*d.e),br=a.default.div(lr(),11*d.e),yr=a.default.div(ur(),3*d.e/2,5*d.e/2,d.e/2),hr=a.default.div(cr(),1.25*d.e),gr=a.default.div(sr(),6*d.e,2*d.e,6*d.e,d.e),vr=a.default.div(ar(),2*d.e,2*d.e,.5*d.e),Or=a.default.div(ir()),jr=a.default.div(or(),1.25*d.e,d.e/2,vt.colors.N90);function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Er(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pr=Object(f.d)("deleteWorklog",f.h.MODAL)(dr=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Er(this,(e=Sr(t)).call.apply(e,[this].concat(o)))).secondsToTimeString=Object(x.c)(n.props.timeTrackingConfig.daysPerWeek,n.props.timeTrackingConfig.hoursPerDay),n.timeStringToSeconds=Object(x.d)(n.props.timeTrackingConfig.daysPerWeek,n.props.timeTrackingConfig.hoursPerDay),n.state={isAdjustTimeRemainingChecked:!0,timeRemaining:n.secondsToTimeString(n.props.timeRemainingSeconds+n.timeStringToSeconds(n.props.worklog.timeSpent))},n.onTimeRemainingChange=function(e){return n.setState({timeRemaining:e.target.value})},n.onCheckboxChange=function(){return n.setState({isAdjustTimeRemainingChecked:!n.state.isAdjustTimeRemainingChecked})},n.onConfirm=function(e,t){return n.props.onConfirm(n.state.isAdjustTimeRemainingChecked?n.state.timeRemaining:n.secondsToTimeString(n.props.timeRemainingSeconds),n.state.isAdjustTimeRemainingChecked,t)},n.originalTimeRemaining=n.secondsToTimeString(n.props.timeRemainingSeconds),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(t,r["Component"]),function(e,t,n){t&&kr(e.prototype,t),n&&kr(e,n)}(t,[{key:"renderTimeRemainingInput",value:function(e){var t=this,n=this.props,r=n.isDeleting,i=n.intl.formatMessage,a=this.state.timeRemaining;return o.a.createElement(Fe,{isValid:e},function(e){return o.a.createElement(Ue.a,{value:a,isInvalid:e,invalidMessage:e?Ve.c:void 0,onChange:t.onTimeRemainingChange,label:i(rr.adjustNewLabel),placeholder:i(Ve.a.timeInputPlaceholder),disabled:r,required:!0,shouldFitContainer:!0})})}},{key:"renderContent",value:function(e){var t=this.props,n=t.isDeleting,r=t.worklog.timeSpent,i=t.intl.formatMessage,a=this.state.isAdjustTimeRemainingChecked;return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,i(rr.deleteWarning)),o.a.createElement(vr,null,o.a.createElement($n.a,{isChecked:a,isDisabled:n,onChange:this.onCheckboxChange,label:i(rr.adjustCheckboxLabel),name:"adjust-checkbox"})),a&&o.a.createElement(mr,null,o.a.createElement(br,null,o.a.createElement(yr,null,i(rr.adjustCurrentLabel)),o.a.createElement(hr,null,this.originalTimeRemaining)),o.a.createElement(gr,null,o.a.createElement(er.a,null)),o.a.createElement(Or,null,this.renderTimeRemainingInput(e),o.a.createElement(jr,null,i(rr.adjustNewSubtext,{timeSpent:r})))))}},{key:"render",value:function(){var e=this.props,t=e.isDeleting,n=e.onCancel,r=e.intl.formatMessage,i=this.state,a=i.timeRemaining,s=i.isAdjustTimeRemainingChecked,c=Object(nr.a)(a);return o.a.createElement(tr.b,{headerMessage:r(rr.deleteHeading),appearance:"danger",contentMessage:this.renderContent(c),confirmActionText:r(rr.delete),cancelActionText:r(rr.cancel),onConfirm:this.onConfirm,onCancel:n,isLoading:t,isConfirmDisabled:t||s&&!c,isCancelDisabled:t,externalId:"issue.activity.worklog.delete-modal"},o.a.createElement(f.i,null))}}]),t}())||dr;function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r,Mr=g()(Object(f.e)("worklog"),Object(f.s)({onConfirm:"confirmDeleteWorklog",onCancel:"cancelDeleteWorklog"}),y.injectIntl,Object(i.connect)(function(e){return{isDeleting:Object(S.c)(e),worklog:Object(S.a)(e),timeTrackingConfig:Object(S.g)(e),timeRemainingSeconds:Object(P.C)(e)}},{dispatchDeleteWorklog:P.p,onCancel:P.n},function(e,t){var n=t.dispatchDeleteWorklog,r=t.onCancel;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach(function(t){xr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{onCancel:r,onConfirm:function(t,r,o){e.worklog&&n(e.worklog.id,t,r,o)}})}))(Pr),Tr=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),Ar=Object(y.defineMessages)({title:{id:"issue.activity.worklog.edit-modal.title",defaultMessage:"Edit work log",description:"Title for the Edit work log modal"}});function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e,t){return!t||"object"!==Dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rr(e){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vr=function(e){return function(t){var n=t.timeLogged,r=t.timeRemaining,o=t.dateStarted,i=e.daysPerWeek,a=e.hoursPerDay;return!!Object(Tr.a)(i,a)(n)&&Object(x.b)(r)&&!!o}},Ur=Object(f.d)("editWorklog",f.h.MODAL)(_r=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Nr(this,(e=Rr(t)).call.apply(e,[this].concat(o)))).onSubmit=function(e,t){n.props.onSubmit(n.props.worklog.id,e,t)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(t,r["Component"]),function(e,t,n){t&&Lr(e.prototype,t),n&&Lr(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.worklog,n=e.timeTracking,r=e.timeTrackingConfiguration,i=e.intl,a=n.timeSpentSeconds,s=n.remainingEstimateSeconds,c=n.originalEstimateSeconds,l=r.daysPerWeek,p=r.hoursPerDay,d={timeLogged:t.timeSpent,timeRemaining:"number"==typeof s?Object(x.c)(l,p)(s):"",dateStarted:new Date(t.started).toISOString(),workDescription:t.comment||(Object(M.x)()?I.a:"")},m={loggedTime:a,remainingTime:s};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Kn,{initialValue:d,timeTracking:m,estimatedTime:c,config:r,header:i.formatMessage(Ar.title),timeZone:this.props.timeZone,isCollapsible:!1,isDone:this.props.isDone,isWaiting:this.props.isSaving,validator:Vr(r),onSubmit:this.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:u.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||u.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId}),o.a.createElement(f.i,null))}}]),t}())||_r,Br=g()(Object(f.e)("worklog"),Object(f.s)({onSubmit:"submitEditWorklog",onCancel:"cancelEditWorklog"}),y.injectIntl,Object(i.connect)(function(e){return{worklog:Object(S.a)(e),timeTrackingConfiguration:Object(S.g)(e),timeTracking:Object(S.h)(e),timeZone:Object(k.y)(e),isDone:Object(C.b)(e)===v.DONE,isSaving:Object(S.c)(e),baseUrl:Object(w.f)(e),mediaContext:Object(E.a)(e),mentionEncoder:Object(j.a)(Object(w.f)(e)),mentionProvider:Object(j.b)(e)}},function(e){return{onSubmit:function(t,n,r){e(Object(P.t)(t,n,r))},onCancel:function(){e(Object(P.n)())}}}))(Ur),Kr=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-action-creator.js"),Wr=n("./src/packages/issue/issue-view/src/common/component/smart-card/jira-smart-card-provider.js"),Hr=n("./src/packages/issue/issue-view/src/common/constants/index.js"),zr=n("./src/packages/issue/issue-view/src/common/metrics/context/index.js");function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gr(){return(Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e,t){return!t||"object"!==qr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yr(e,t){return(Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $r=n("./src/packages/issue/issue-view/src/common/model/error-type.js"),Xr=n("./src/packages/issue/issue-view/src/common/model/worklog-type.js"),eo=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),to=n("./node_modules/@atlaskit/adf-utils/traverse.js"),no=n("./node_modules/reselect/lib/index.js"),ro=n("./src/packages/issue/issue-view/src/common/constants/field-renderer-type.js"),oo=n("./src/packages/issue/issue-view/src/common/model/field-config-types.js"),io=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),ao=n("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),so=n("./src/packages/issue/issue-view/src/configurations.js"),co=n("./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"),uo=n("./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js"),lo=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),fo=n("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),po=n("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),mo=n("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),bo=n("./src/packages/issue/issue-view/src/views/common/skeleton/field-view.js"),yo=function(){return o.a.createElement(mo.a,null,o.a.createElement(po.b,null),o.a.createElement(fo.a,{paddingTop:4,paddingBottom:16},o.a.createElement(bo.a,{labelIntrusion:170,fieldIntrusion:20}),o.a.createElement(bo.a,{labelIntrusion:120,fieldIntrusion:60}),o.a.createElement(bo.a,{labelIntrusion:140,fieldIntrusion:40})))},ho=n("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js"),go=Object(y.defineMessages)({draftIndicator:{id:"issue.draft-indicator-for-multiline-field",defaultMessage:"Unsaved changes",description:"Label that indicates there's a draft for the field"}}),vo=n("./src/packages/issue/issue-view/src/common/model/connect-field-type.js"),Oo=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),jo=Object(no.createSelector)(k.H,function(e){return e.drafts}),wo=function(e){return Object(no.createSelector)(jo,function(t){return!!t[e]})},ko=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/index.js"),Eo=n("./src/packages/issue/fields/components/field-heading/src/index.js"),So=n("./src/packages/platform/utils/fetch/src/index.js"),Co=n("./src/packages/issue/issue-view/src/actions/attachment-viewer-action-creator.js"),Po=n("./src/packages/issue/issue-view/src/actions/editor-action-type.js"),Io=function(){return{type:Po.a}},xo=function(){return{type:Po.b}},_o=function(){return{type:Po.c}},Mo=n("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),To=n("./node_modules/@atlaskit/activity/dist/es5/index.js"),Ao=Object(no.createSelector)(w.i,function(e){return new To.ActivityResource("/gateway/api/activity/",e)}),Do=function(){return document.querySelector(".".concat(Hr.I))},Lo=function(){return document.querySelector(".".concat(Hr.t))},No=Object(no.createSelector)(w.A,k.B,function(e,t){return{objectId:e,containerId:t}}),Ro=n("./src/packages/issue/issue-view/src/views/connect-field.js"),Fo=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),Vo=n("./node_modules/@atlaskit/inline-edit/dist/esm/index.js");function Uo(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    ","\n    margin-bottom: 24px;\n"]);return Uo=function(){return e},e}var Bo=a.default.div(Uo(),function(e){return e.isEditing?"":"\n        & > div > div > div > div > div {\n            min-height: 32px !important;\n        }\n        & > div > div > div > div > div > div {\n            padding: 0 6px;\n        }\n    "}),Ko=function(e){return o.a.createElement(Bo,{isEditing:e.isEditing},o.a.createElement(Vo.a,e))};Ko.displayName="CompactInlineEditStateless";var Wo=Ko,Ho=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),zo=n("./src/packages/issue/issue-view/src/common/media/components/with-media-provider/with-media-provider.js"),qo=n("./node_modules/@atlaskit/editor-common/dist/esm/provider-factory/provider-factory.js"),Go=n("./node_modules/@atlaskit/renderer/dist/esm/ui/Renderer/index.js"),Jo=n("./node_modules/lodash/isNil.js"),Qo=n.n(Jo),Zo=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),Yo=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),$o=n("./src/packages/common-legacy-do-not-add-anything-new/src/services/emoji.js"),Xo=n("./src/packages/issue/issue-view/src/common/styles/index.js"),ei=n("./src/packages/issue/issue-view/src/utils/parse-html-to-adf.js");function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ri(e,t){return!t||"object"!==ti(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ai=function(e){return e.replace(/<a href="">/g,'<a href=" ">')},si=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ri(this,oi(t).call(this,e))).onInlineCardClicked=function(e,t){var r=n.props.linkActions,o=e||window.event;o.preventDefault();var i=o.metaKey||0!==o.button;Object(Yo.a)(t,i,r.push)},n.onMediaItemClicked=function(e){var t=e.mediaItemDetails;if(e.event.stopPropagation(),t&&!Qo()(t.id)&&!Qo()(t.mimeType)&&!Qo()(t.name)){var r={mediaApiFileId:t.id,type:t.mimeType,title:t.name};n.props.onMediaFileClick(r)}},n.onMentionClicked=function(e,t,r){var o=n.props,i=o.linkActions;if(o.mentionEncoder){r.stopPropagation();var a=r,s=a.metaKey||0!==a.button;Object(Yo.a)(n.props.mentionEncoder(e),s,i.push)}},n.onContentSelected=function(e){e.target instanceof window.Element&&!Object(Zo.a)(e.target,e.currentTarget)&&!n.checkForVideo(e.target,e.currentTarget)||e.stopPropagation()},n.getAdfFromHtml=function(){var e=n.props.html;return e&&"string"==typeof e?Object(ei.a)(ai(e)):{}},n.checkForVideo=function(e,t){return!(!e||e===t)&&(!!e.className.includes("media-single")||n.checkForVideo(e.parentElement,t))},n.dataProviders=void 0,n.eventHandlers=void 0,n.isEmpty=function(){return n.isAdfValueEmpty()&&n.isHtmlValueEmpty()},n.isAdfValueEmpty=function(){var e=n.props.adf;return!e||Object(I.b)(e)},n.isHtmlValueEmpty=function(){return!n.props.html};var r=n.props,o=r.mediaProvider,i=r.mentionProvider,a=r.contextIdentifier;return n.dataProviders=new qo.a,n.dataProviders.setProvider("mediaProvider",o),n.dataProviders.setProvider("mentionProvider",Promise.resolve(i)),n.dataProviders.setProvider("emojiProvider",Object($o.a)()),a&&Object(M.r)()&&n.dataProviders.setProvider("contextIdentifierProvider",Promise.resolve(a)),n.eventHandlers={mention:{onClick:n.onMentionClicked},media:{onClick:n.onMediaItemClicked},smartCard:{onClick:n.onInlineCardClicked}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&ni(e.prototype,t),n&&ni(e,n)}(t,[{key:"render",value:function(){var e=this.props.adf;if(this.isEmpty())return o.a.createElement(Xo.c,null,this.props.placeholder);var t=this.isAdfValueEmpty()?this.getAdfFromHtml():e;return o.a.createElement("div",{onClick:this.onContentSelected,onKeyPress:this.onContentSelected,role:"presentation"},o.a.createElement(Go.a,{document:Object(I.c)(t),dataProviders:this.dataProviders,eventHandlers:this.eventHandlers}))}}]),t}();si.displayName="Renderer",si.displayName="Renderer",si.defaultProps={html:void 0,adf:void 0,placeholder:void 0,mediaProvider:void 0,mentionEncoder:function(){return""},onMediaFileClick:u.a};var ci=Object(zo.a)(Object(Ho.a)(si)),ui=Object(y.defineMessages)({nonEditablePlaceholderText:{id:"issue.views.field.rich-text.nonEditablePlaceholderText",defaultMessage:"None",description:"Placeholder text for when there is no content in the multiline field and user does not have edit permission."}});function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pi(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function di(e){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bi(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    width: 100%;\n"]);return bi=function(){return e},e}var yi=a.default.div(bi()),hi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pi(this,di(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(t,r["Component"]),function(e,t,n){t&&fi(e.prototype,t),n&&fi(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(yi,{"data-test-id":"issue.views.field.rich-text.editor-container"},o.a.createElement(he,{baseUrl:this.props.baseUrl,portalElement:this.props.portalElement,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,emojiProvider:this.props.emojiProvider,externalId:this.props.externalId,defaultValue:this.props.value,onCancel:this.props.onCancel,onBlur:this.props.onBlur,onSave:this.props.onSave,onChange:this.props.onChange,isDisabled:this.props.isDisabled,isInvalid:this.props.isInvalid,isExpanded:this.props.isExpanded,shouldFocus:this.props.shouldFocus,shouldUseAdfPipeline:this.props.shouldUseAdfPipeline,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste}))}}]),t}();function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oi(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ji(e){return(ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wi(e,t){return(wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ki(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    width: 100%;\n"]);return ki=function(){return e},e}hi.displayName="RichTextFieldView",hi.displayName="RichTextFieldView",hi.defaultProps={value:null,isDisabled:!1,isInvalid:!1,isExpanded:!1,shouldFocus:!1,mediaContext:null,mentionEncoder:null,emojiProvider:null,onPaste:u.a,onCancel:void 0,onSave:void 0,contextIdentifier:void 0};var Ei=a.default.div(ki()),Si=["isEditable","htmlValue","isEditing","externalId","noValueText","mediaContext"],Ci=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Oi(this,(e=ji(t)).call.apply(e,[this].concat(o)))).onMouseDownEditView=function(){n.mouseDownSelection=window.getSelection().toString()},n.onEditRequested=function(){var e=window.getSelection().toString(),t=e&&0!==e.length,r=n.mouseDownSelection&&0!==n.mouseDownSelection.length;t||r||n.props.onEditRequest()},n.getEditValue=function(){return n.props.shouldUseAdfPipeline?n.props.adfValue:n.props.htmlValue},n.getNonEditablePlaceholderText=function(){return n.props.intl.formatMessage(ui.nonEditablePlaceholderText)},n.mouseDownSelection=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(t,r["Component"]),function(e,t,n){t&&vi(e.prototype,t),n&&vi(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.onExperienceSuccess()}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!Si.every(function(n){return t.props[n]===e[n]})}},{key:"renderContent",value:function(){var e=Object(M.ab)()?Object(I.d)(this.props.adfValue):this.props.adfValue;return o.a.createElement(Ei,null,o.a.createElement(ci,{mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,adf:this.props.shouldUseAdfPipeline?e:null,html:this.props.shouldUseAdfPipeline?null:this.props.htmlValue,placeholder:this.props.isEditable?this.props.noValueText:this.getNonEditablePlaceholderText(),onMediaFileClick:this.props.onMediaFileClick}))}},{key:"renderReadView",value:function(){var e=this.props,t=e.intl,n=e.isEditable,r=e.isMobile,i=e.fieldId;return o.a.createElement("div",{onMouseDown:this.onMouseDownEditView,role:"presentation","data-test-id":"issue.views.field.rich-text.".concat(i)},o.a.createElement(Wo,{label:"",isLabelHidden:!0,readView:this.renderContent(),onEditRequested:this.onEditRequested,isEditing:!1,editButtonLabel:t.formatMessage(Fo.a.editButtonLabel,{fieldName:""}),confirmButtonLabel:t.formatMessage(Fo.a.confirmButtonLabel,{fieldName:""}),cancelButtonLabel:t.formatMessage(Fo.a.cancelButtonLabel,{fieldName:""}),editView:n?o.a.createElement("div",null):null,onConfirm:u.a,onCancel:u.a,isFitContainerWidthReadView:!r}))}},{key:"renderEditView",value:function(){return o.a.createElement(hi,{baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,portalElement:this.props.portalElement,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,contextIdentifier:this.props.contextIdentifier,activityProvider:this.props.activityProvider,externalId:this.props.externalId,isDisabled:void 0,isExpanded:!0,isExpandedByDefault:!0,shouldFocus:!0,shouldUseAdfPipeline:this.props.shouldUseAdfPipeline,value:this.getEditValue(),onCancel:this.props.onCancel,onChange:this.props.onChange,onBlur:this.props.onBlur,onSave:this.props.onConfirm,onExpandedFailure:this.props.onExpandedFailure,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})}},{key:"render",value:function(){return this.props.isEditing?this.renderEditView():this.renderReadView()}}]),t}();Ci.displayName="RichTextInlineEditView",Ci.displayName="RichTextInlineEditView",Ci.defaultProps={adfValue:void 0,htmlValue:void 0,isEditable:!1,isEditing:!1,shouldUseAdfPipeline:!1,mentionEncoder:null,contextIdentifier:void 0,onMediaFileClick:u.a,onExperienceSuccess:u.a,isMobile:!1};var Pi=Object(y.injectIntl)(Ci),Ii=Object(y.defineMessages)({fallbackMessage:{id:"issue.message-displayed-when-fallback-editor-required",defaultMessage:"This text has unsupported formatting",description:"Text to show when there's unsupported formatting in the description"},noValueText:{id:"issue.placeholder-for-empty-issue-description-field",defaultMessage:"Add a description...",description:"A placeholder when there's no description"}});function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mi=g()(Object(ko.e)(so.g),Object(Ro.a)(function(){return{fieldId:so.g,shouldSaveDraft:!0,isOptimistic:!0,saveField:function(e){return function(e,t,n){var r="".concat(e,"/rest/internal/3/issue/").concat(t,"/description"),o=JSON.stringify(n);return Object(So.j)(r,{body:o})}(e.baseUrl,e.issueKey,e.value)},canContainMediaContent:!0,onSaveFailureFlagType:Hr.L,additionalProps:function(e,t){var n=Object(w.f)(e);return{baseUrl:n,portalElement:wS(so.g)(e)?Lo()||document.body:void 0,adfValue:Object(io.g)(so.g)(e),htmlValue:Object(io.i)(so.g)(e),isInvalid:Object(io.k)(so.g)(e),invalidMessage:Object(io.j)(so.g)(e),mediaContext:Object(E.a)(e),mentionProvider:Object(j.b)(e),contextIdentifier:No(e),mentionEncoder:Object(Mo.a)(n),activityProvider:Ao(e),externalId:"issue.descriptionHtml",noValueText:t.formatMessage(Ii.noValueText),shouldUseAdfPipeline:!0}},additionalCallbacks:function(e){return{onExpandedFailure:function(){return e(xo())},onSaveFailure:function(){return e(_o())},onChangeFailure:function(){return e(Io())},onMediaFileClick:function(t){return e(Object(Co.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach(function(t){_i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{location:so.g})))}}}}}))(Pi);function Ti(e){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Di(e,t){return!t||"object"!==Ti(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ri=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Di(this,Li(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ni(e,t)}(t,r["Component"]),function(e,t,n){t&&Ai(e.prototype,t),n&&Ai(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.onExperienceSuccess()}},{key:"render",value:function(){var e=this.props,t=e.area,n=e.label,r=e.hasDraft,i=e.isEditing,a=e.isWaiting,s=e.intl,c=t===vo.a?ho.c:Eo.a,u=t===vo.a?ho.e:Eo.b;return o.a.createElement(o.a.Fragment,null,o.a.createElement(c,null,o.a.createElement(ho.b,null,o.a.createElement(u,null,n),!r||i||a?null:o.a.createElement(ho.a,null,"\u2022 ".concat(s.formatMessage(go.draftIndicator))))),o.a.createElement(Mi,null))}}]),t}();Ri.displayName="Description",Ri.defaultProps={area:vo.c,onExperienceSuccess:u.a},Ri.displayName="Description";var Fi=g()(y.injectIntl,Object(ko.f)("description-container"),Object(ko.e)(so.g),Object(Oo.a)(),Object(i.connect)(function(e){return{label:Object(io.m)(so.g)(e),hasDraft:wo(so.g)(e),isEditing:Object(io.z)(so.g)(e),isWaiting:Object(io.B)(so.g)(e)}},{}),Object(Oo.a)())(Ri),Vi=n("./node_modules/react-dom/index.js"),Ui=n.n(Vi),Bi=n("./node_modules/@atlaskit/field-text-area/index.js");function Ki(e){return(Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hi(e,t){return!t||"object"!==Ki(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gi(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    ",";\n"]);return Gi=function(){return e},e}var Ji=a.default.div(Gi(),Object(Xo.h)("textarea")),Qi=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=Hi(this,(e=zi(t)).call.apply(e,[this].concat(i)))).onChange=function(e){n.props.onChange(e.target.value)},n.editView=Object(r.createRef)(),n.textarea=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(t,r["Component"]),function(e,t,n){t&&Wi(e.prototype,t),n&&Wi(e,n)}(t,[{key:"componentDidMount",value:function(){if(this.editView&&this.editView.current){var e=Ui.a.findDOMNode(this.editView.current);e instanceof HTMLElement&&(this.textarea=e.querySelector("textarea"))}}},{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){var e=function(e){return e?e.split(/\r\n|\r|\n/).length:0}(this.props.value);if(this.textarea){var t=this.textarea.scrollHeight,n=window.getComputedStyle(this.textarea),r=Number.parseFloat(n.getPropertyValue("line-height"));Number.isNaN(r)||(e=Math.round(t/r))}var i=this.props.scrollRows||e,a=this.props.area===vo.a?20:5,s=Math.min(a,Math.max(2,i));return o.a.createElement(Ji,null,o.a.createElement(Bi.a,{ref:this.editView,value:this.props.value,onChange:this.onChange,isInvalid:!!this.props.invalidMessage,invalidMessage:this.props.invalidMessage,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",minimumRows:s}))}}]),t}();function Zi(e){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $i(e,t){return!t||"object"!==Zi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ea(e,t){return(ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ta(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    [class*='CompactWrapper'] > * {\n        margin-left: 0;\n    }\n    [class*='ContentWrapper'] {\n        padding-left: 0;\n        padding-right: 0;\n    }\n"]);return ta=function(){return e},e}Qi.displayName="TextAreaField",Qi.displayName="TextAreaField",Qi.defaultProps={value:"",invalidMessage:null,scrollRows:null,area:vo.c};var na=a.default.div(ta()),ra=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=$i(this,(e=Xi(t)).call.apply(e,[this].concat(o)))).onChange=function(e){n.props.onChange(e)},n.onConfirm=function(){var e=n.props.value;Object(M.ab)()&&n.props.onChange(Object(I.e)(e)),n.props.onConfirm()},n.readView=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ea(e,t)}(t,r["Component"]),function(e,t,n){t&&Yi(e.prototype,t),n&&Yi(e,n)}(t,[{key:"renderReadView",value:function(){var e=this,t=this.props,n=t.value,r=t.noValueText,i=t.area;return Object(M.ab)()&&n&&0!==n.trim().length||n?i===vo.a||i===vo.b?o.a.createElement(Xo.f,{innerRef:function(t){e.readView=t}},n&&(Object(M.ab)()?Object(I.e)(n):n)):o.a.createElement(Xo.e,{innerRef:function(t){e.readView=t},maxRows:5},n):o.a.createElement(Xo.c,null,r)}},{key:"renderEditView",value:function(){var e;if(this.readView){var t=this.readView.scrollHeight,n=window.getComputedStyle(this.readView),r=Number.parseFloat(n.getPropertyValue("line-height"));e=Math.round(t/r)}return o.a.createElement(Qi,{value:this.props.value,onChange:this.onChange,invalidMessage:this.props.invalidMessage,scrollRows:e,area:this.props.area})}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.area,r=e.label;return o.a.createElement(na,null,n===vo.a?o.a.createElement(ho.c,null,o.a.createElement(ho.e,null,r)):o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,r)),o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!0,isConfirmOnBlurDisabled:this.props.isConfirmOnBlurDisabled,editButtonLabel:t.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:t.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:t.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();ra.displayName="TextAreaInlineEditView",ra.displayName="TextAreaInlineEditView",ra.defaultProps={value:"",noValueText:null,isEditable:!1,isEditing:!1,invalidMessage:null,isConfirmOnBlurDisabled:!1};var oa=Object(y.injectIntl)(ra),ia=Object(y.defineMessages)({noValue:{id:"issue.common.multi-line-text.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None",description:"The value to display in multiline fields when there is no value"}}),aa=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,additionalProps:function(e,n){return{noValueText:n.formatMessage(ia.noValue),area:t.area}}}})(oa),sa=n("./node_modules/@atlaskit/width-detector/WidthDetector.js");function ca(){return(ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ua(e){return function(t){return o.a.createElement(sa.a,null,function(n){return o.a.createElement(e,ca({},t,{containerWidth:n}))})}}var la=Object(y.defineMessages)({noValueText:{id:"issue.multiline-field.empty-placeholder",defaultMessage:"None",description:"Placeholder text for when there is no content in the multiline field."}});function fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pa(){return(pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function da(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ba=function(e){var t=e.label,n=e.area,r=e.hasDraft,i=e.intl,a=e.isEditing,s=e.containerWidth,c=da(e,["label","area","hasDraft","intl","isEditing","containerWidth"]),u=r&&!a,l=n===vo.a?ho.c:Eo.a,f=n===vo.a?ho.e:Eo.b;return o.a.createElement("div",{width:s},o.a.createElement(l,null,o.a.createElement(ho.b,null,o.a.createElement(f,null,t),u?o.a.createElement(ho.a,null,"\u2022 ".concat(i.formatMessage(go.draftIndicator))):null)),o.a.createElement(Pi,pa({isEditing:a},c)))};ba.displayName="MultilineField";var ya=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,shouldSaveDraft:!0,isOptimistic:!0,saveField:function(e){var n=e.baseUrl,r=e.issueKey,o=e.value;return function(e,t,n,r){var o="".concat(e,"/rest/api/3/issue/").concat(t);return Object(So.j)(o,{body:JSON.stringify({fields:ma({},n,r)})})}(n,r,t.fieldId,o)},canContainMediaContent:!0,onSaveFailureFlagType:Hr.L,additionalProps:function(e,n){var r=Object(w.f)(e);return{baseUrl:r,portalElement:wS(t.fieldId)(e)?Lo()||document.body:void 0,adfValue:Object(io.g)(t.fieldId)(e),hasDraft:wo(t.fieldId)(e),htmlValue:Object(io.i)(t.fieldId)(e),isInvalid:Object(io.k)(t.fieldId)(e),invalidMessage:Object(io.j)(t.fieldId)(e),mediaContext:Object(E.a)(e),mentionProvider:Object(j.b)(e),mentionEncoder:Object(Mo.a)(r),activityProvider:Ao(e),externalId:"issue.".concat(t.fieldId),noValueText:n.formatMessage(la.noValueText),shouldUseAdfPipeline:!0,area:t.area}},additionalCallbacks:function(e){return{onExpandedFailure:function(){return e(xo())},onSaveFailure:function(){return e(_o())},onChangeFailure:function(){return e(Io())},onMediaFileClick:function(n){return e(Object(Co.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(n),!0).forEach(function(t){ma(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{location:t.fieldId})))}}}}})(ua(Object(y.injectIntl)(ba))),ha=Object(i.connect)(function(e,t){return{isRichTextField:Object(io.E)(t.fieldId)(e)}},{})(function(e){var t=e.isRichTextField,n=e.fieldId,r=e.area,i=void 0===r?vo.c:r;return t?o.a.createElement(ya,{fieldId:n,area:i}):o.a.createElement(aa,{fieldId:n,area:i})}),ga=n("./src/packages/development/dev-info-panel/src/index.js"),va=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e,t){return!t||"object"!==Oa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sa(e,t){return(Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ca=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ka(this,Ea(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sa(e,t)}(t,r["Component"]),function(e,t,n){t&&wa(e.prototype,t),n&&wa(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.canViewDevTools,n=ja(e,["canViewDevTools"]);return n.issueId&&t?o.a.createElement(ga.a,n):null}}]),t}();Ca.displayName="AllDevInfoPanel",Ca.displayName="AllDevInfoPanel",Ca.defaultProps={issueStatusCategory:null,analyticsSource:void 0,issueId:void 0,summary:""};var Pa=Object(eo.a)([Object(i.connect)(function(e){return{baseUrl:Object(w.f)(e),issueKey:Object(w.B)(e),issueId:Object(k.j)(e),issueStatusCategory:Object(C.b)(e),projectId:Object(k.B)(e),projectType:Object(k.E)(e),isSimplifiedProject:Object(k.s)(e),locale:Object(w.D)(e),analyticsSource:Object(w.b)(e),canViewDevTools:Object(va.g)(e),hasSoftwareAccess:Object(w.m)(e),summary:Object(io.o)(so.y)(e),user:Object(w.a)(e)}},{})])(Ca),Ia=n("./src/packages/issue/issue-view/src/actions/approval-action/types.js"),xa=n("./src/packages/servicedesk/approval-panel/async.js"),_a=n("./src/packages/issue/issue-view/src/actions/context-item-action-type.js"),Ma=function(e){return{type:_a.b,payload:e}},Ta=function(){return{type:_a.a}},Aa=n("./node_modules/lodash/castArray.js"),Da=n.n(Aa),La=n("./node_modules/lodash/get.js"),Na=n.n(La),Ra=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),Fa=n("./node_modules/lodash/every.js"),Va=n.n(Fa),Ua=n("./node_modules/lodash/unionBy.js"),Ba=n.n(Ua),Ka=n("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),Wa=n.n(Ka),Ha="COMMENT",za="APPROVAL";function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach(function(t){Ja(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qa=function(e){var t=e.key,n=e.accountId,r=e.displayName,o=e.avatarUrls;return{approver:{accountId:n,key:t,displayName:r,isFromLinkedField:!0,avatarUrl:Na()(o,"24x24",Wa.a)}}},Za=function(e){var t=e.approver,n=t.key;return{approver:{accountId:t.accountId,key:n,displayName:t.displayName},approverDecision:e.approverDecision}},Ya=function(e,t){var n=Va()(t,function(e){return e.approver.accountId});return function(e,t){var n=e.map(function(e){return e.approver.accountId});return t.map(function(e){return n.includes(e.approver.accountId)?{approverDecision:e.approverDecision,approver:Ga({},e.approver,{isFromLinkedField:!0})}:e})}(t,Ba()(e,t,function(e){return n?e.approver.accountId:null}))},$a=function(e,t){if(t&&t.value){var n=+t.value;if("number"===t.type)return n;if("percent"===t.type)return Math.ceil(e*(n/100))}return e},Xa=function(e,t,n,r){return"multi_group_picker"!==e.configuration.approvers.type?function(e,t,n,r){var o=(t?e.approvers.filter(function(e){return"pending"!==e.approverDecision}):e.approvers).map(Za),i=t.map(Qa),a=Ya(o,i),s=Na()(e,["configuration","condition"]),c=$a(a.length,s),u=r===oo.sb;return{id:e.id,name:e.name,finalDecision:e.finalDecision,approvers:a,minApprovalsRequired:c,canAnswerApproval:e.canAnswerApproval,linkedFieldName:n,isSingleUserPicker:u}}(e,t,n,r):function(e,t,n){var r=e.id,o=e.name,i=e.finalDecision,a=e.approvers,s=e.configuration,c=e.canAnswerApproval;return{id:r,name:o,finalDecision:i,approvers:a.map(Za),minApprovalsRequired:$a(a.length,s.condition),canAnswerApproval:c,linkedFieldName:n,isSingleUserPicker:!1}}(e,0,n)},es=Object(no.createSelector)(function(e,t){return t?Object(io.n)(t)(e):void 0},function(e){return e&&e.activeApproval}),ts=Object(no.createSelector)(function(e,t){return es(e,t)},function(e){return Na()(e,["configuration","approvers","customFieldId"])}),ns=Object(no.createSelector)(function(e,t){return es(e,t)},function(e){return Na()(e,["configuration","approvers","customFieldName"])}),rs=Object(no.createSelector)(function(e,t){return es(e,t)},function(e,t){var n=t&&function(e,t){var n=ts(e,t);return n?Object(io.n)(n)(e):void 0}(e,t);return n?Da()(n):[]},function(e,t){return ns(e,t)},function(e,t){return function(e,t){var n=ts(e,t);return n&&Object(io.q)(n)(e)}(e,t)},function(e,t,n,r){return e&&Xa(e,t,n,r)}),os=Object(no.createSelector)(Object(io.p)(oo.eb),function(e){return e&&e.value&&e.value.completedApprovals}),is=Object(no.createSelector)(os,function(e){return e&&e.length}),as=Object(no.createSelector)(Ra.a,Ra.K,Ra.J,Ra.F,os,function(e,t,n,r,o){var i=[];return Object.keys(e).filter(function(e){return t.includes(e)}).forEach(function(t){var n=e[t],r={comment:n,timestamp:new Date(n.createdDate).getTime(),type:Ha};i.push(r)}),o&&o.forEach(function(e){var t={approval:e,timestamp:e.completedDate.epochMillis,type:za};i.push(t)}),i.sort(function(e,t){return e.timestamp-t.timestamp}),n>r&&i[0]&&i[0].type===za?i.slice(i.map(function(e){return e.type}).indexOf(Ha)):i}),ss=Object(no.createSelector)(rs,w.a,function(e,t){return!!(e&&t&&e.approvers&&e.approvers.length)&&e.approvers.some(function(e){return e.approver.accountId===t&&(!e.approverDecision||"pending"===e.approverDecision)})});function cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ls=function(e){return o.a.createElement(xa.a,e)};ls.displayName="AsyncApprovalGlancePanelContainer";var fs=Object(eo.a)([Object(i.connect)(function(e,t){var n=t.payload&&t.payload.approvalFieldId||"",r=ts(e,n)||"",o=Object(io.y)(r)(e),i=Object(io.o)(so.w)(e)||{};return{fieldId:r,approvalFieldId:n,approval:rs(e,n),baseUrl:Object(w.f)(e),issueKey:Object(w.B)(e),fieldMetaKey:Object(io.l)(r)(e)||"",fieldAutoCompleteUrl:Object(io.d)(r)(e)||"",hasLinkedFieldEditPermissions:o,portalElement:Do()||document.body,issueStatusId:i.id}},function(e){return{onApproverListUpdated:function(t,n){e(function(e,t){return{type:Ia.a,payload:{linkedUserPickerFieldId:e,newApproverList:t}}}(t,n))},onHidePanel:function(){e(Ta())},onAddApproverError:function(){e(function(){return{type:Hr.a}}())},onRemoveApproverError:function(){e(function(){return{type:Hr.J}}())}}},function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(n),!0).forEach(function(t){us(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{},e,{},t,{onApproverListUpdated:function(n){t.onApproverListUpdated(e.fieldId,n)}})})])(ls),ps=function(e){return o.a.createElement(xa.b,e)};ps.displayName="ApprovalPanelContainer";var ds=Object(eo.a)([Object(i.connect)(function(e){var t=oo.eb,n=ts(e,t)||"",r=Object(io.y)(n)(e);return{approval:rs(e,t),baseUrl:Object(w.f)(e),issueId:Object(w.A)(e),fieldId:t,isSimplifiedProject:Object(k.s)(e),hasLinkedFieldEditPermissions:r,canCurrentUserApprove:ss(e,t)}},function(e){return{onOpenPanel:function(t,n){e(Ma({key:oo.c,type:oo.c,title:n,payload:{approvalFieldId:t}}))},onSaveApprovalAnswerError:function(){e(function(){return{type:Hr.N}}())},onSaveApprovalAnswerSuccess:function(){e(function(){return{type:Hr.O}}())},onZeroApprovalRequired:function(){e(function(){return{type:Hr.U}}())}}})])(ps),ms=n("./src/packages/platform/ui/asset-tracking/assets-onboarding/src/index.js");function bs(e){return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hs(e,t){return!t||"object"!==bs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gs(e){return(gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vs(e,t){return(vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Os=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hs(this,gs(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vs(e,t)}(t,r["Component"]),function(e,t,n){t&&ys(e.prototype,t),n&&ys(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.locale,n=e.baseUrl,r=e.onInstallAppDone;return Object(M.a)()?o.a.createElement(ms.a,{baseUrl:n,locale:t,onInstallAppDone:r}):null}}]),t}();Os.displayName="AssetsOnboardingView",Os.displayName="AssetsOnboardingPanel";var js=Object(eo.a)([Object(i.connect)(function(e){return{locale:Object(w.D)(e),baseUrl:Object(w.f)(e)}},function(e){return{onInstallAppDone:function(){e(Object(Kr.f)())}}})])(Os),ws=n("./src/packages/platform/ui/asset-tracking/assets-item/src/index.js");function ks(e){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ss(e,t){return!t||"object"!==ks(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cs(e){return(Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Is=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ss(this,Cs(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(t,r["Component"]),function(e,t,n){t&&Es(e.prototype,t),n&&Es(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.locale,n=e.baseUrl,r=e.onOpenPanel,i=e.issueId,a=e.fieldId,s=e.xsrfToken,c=e.reporter,u=e.fieldName;return o.a.createElement(ws.a,{locale:t,baseUrl:n,onOpenPanel:r,issueId:i,fieldId:a,xsrfToken:s,reporter:c,fieldName:u})}}]),t}();Is.displayName="AssetsPanelView",Is.displayName="AssetsPanel",Is.defaultProps={onOpenPanel:u.a};var xs=Object(eo.a)([Object(i.connect)(function(e,t){return{locale:Object(w.D)(e),baseUrl:Object(w.f)(e),issueId:Object(w.A)(e),reporter:Object(io.o)(so.s)(e),fieldName:Object(io.m)(t.fieldId)(e),fieldId:t.fieldId,xsrfToken:Object(w.S)(e)}},{})])(Is),_s=n("./node_modules/@atlaskit/onboarding/components/SpotlightTarget.js"),Ms=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js");function Ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function As(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ds=function(e,t,n,r){return Object(So.j)(function(e,t,n){return n?"".concat(e,"/rest/api/3/issue/").concat(t,"/assignee?sessionId=").concat(n):"".concat(e,"/rest/api/3/issue/").concat(t,"/assignee")}(e,t,r),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(n),!0).forEach(function(t){As(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ts(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Ms.a,{body:JSON.stringify({accountId:n})}))},Ls=n("./node_modules/scroll-into-view-if-needed/es/index.js");function Ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(n),!0).forEach(function(t){Fs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ns(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&Object(Ls.a)(e,Rs({duration:300},t))},Us=function(e){e&&Vs(e,{centerIfNeeded:!0})},Bs=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),Ks=n("./src/packages/issue/issue-view/src/views/constants.js"),Ws=n("./node_modules/@atlaskit/avatar/components/Avatar.js"),Hs=n("./node_modules/@atlaskit/input/index.js"),zs=n("./src/packages/issue/fields/components/user-picker/src/index.js"),qs=n("./src/packages/profilecard-next/src/async.js"),Gs=n("./src/packages/platform/controllers/tenant-context/src/index.js"),Js=function(e){var t=function(e){return e&&(e.accountId||e.id||e.value)}(e.userAccount);return t?o.a.createElement(qs.b,{TenantContextSubscriber:Gs.d,accountId:t,analyticsData:e.analyticsData,position:e.position,actions:e.actions},e.children):e.children};function Qs(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    padding-right: ","px;\n\n    padding-top: 1px;\n\n    & span[role='img'] {\n        background-color: "," !important;\n    }\n"]);return Qs=function(){return e},e}var Zs=a.default.div(Qs(),d.e,vt.colors.N30);function Ys(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    align-items: center;\n    display: flex;\n    padding-top: 1px;\n"]);return Ys=function(){return e},e}var $s=a.default.div(Ys());function Xs(e){return(Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tc(e,t){return!t||"object"!==Xs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nc(e){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rc(e,t){return(rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oc(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    "," margin-bottom: 24px;\n"]);return oc=function(){return e},e}var ic=a.default.div(oc(),function(e){return!e.isEditing&&"\n        & > div > div > div > div > div {\n            min-height: 32px !important;\n        }\n        & > div > div > div > div > div > div {\n            padding: 0;\n            padding-left: 6px;\n            height: 32px;\n        }\n    "}),ac=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tc(this,nc(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rc(e,t)}(t,r["Component"]),function(e,t,n){t&&ec(e.prototype,t),n&&ec(e,n)}(t,[{key:"getActions",value:function(){var e=this.props.fieldId;return e===oo.X?[qs.d,qs.c]:e===oo.g?[qs.d,qs.a]:void 0}},{key:"renderReadView",value:function(){var e=this.props.value||this.props.emptyOption||{avatarUrl:"",name:""};return o.a.createElement(Js,{userAccount:e,analyticsData:{trigger:this.props.fieldId},position:"left-start",actions:this.getActions()},o.a.createElement($s,null,o.a.createElement(Zs,null,o.a.createElement(Ws.a,{borderColor:"transparent",src:e.avatarUrl,size:"small"})),o.a.createElement(Hs.a,{isEditing:!1,value:e.name})))}},{key:"renderEditView",value:function(){return o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(zs.a,{portalElement:this.props.portalElement,emptyOption:this.props.emptyOption,initialOptions:this.props.initialOptions,fetchSuggestions:this.props.fetchSuggestions,fieldId:this.props.fieldId,value:this.props.value,onCancel:this.props.onCancel,onChange:this.props.onChange,onSelection:this.props.onConfirm,width:"100%"}))}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(ic,{isEditing:this.props.isEditing,"data-test-id":"issue.views.field.user.".concat(this.props.fieldId)},o.a.createElement(Vo.a,{editView:this.props.isEditable?this.renderEditView():null,readView:this.renderReadView(),areActionButtonsHidden:!0,disableEditViewFieldBase:!0,shouldConfirmOnEnter:!0,isEditing:this.props.isEditing,isInvalid:!!this.props.invalidMessage,invalidMessage:this.props.invalidMessage,isLabelHidden:!0,label:this.props.label,onCancel:u.a,onConfirm:u.a,onEditRequested:this.props.onEditRequest,onFocus:u.a,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();ac.displayName="UserInlineEditView",ac.displayName="UserInlineEditView",ac.defaultProps={initialOptions:[],emptyOption:null,invalidMessage:null,value:null,isMobile:!1};var sc=Object(y.injectIntl)(ac),cc=function(e){return e?function(e){return{avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"],id:e.accountId,name:e.displayName}}(e):null},uc=function(e){return e?function(e){return{avatarUrls:{"48x48":e.avatarUrl},displayName:e.name,accountId:e.id}}(e):null};function lc(e){return(lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fc(){return(fc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pc(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mc(e,t){return!t||"object"!==lc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bc(e){return(bc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yc(e,t){return(yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hc(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var gc=Object(y.defineMessages)({assignToMe:{id:"issue.assignee.text-for-logged-in-user",defaultMessage:"Assign to me",description:""},unassignedOption:{id:"issue.assignee.text-when-no-value-is-provided",defaultMessage:"Unassigned",description:""}}),vc=Object(lo.a)(function(e){return{avatarUrl:"",name:e.formatMessage(gc.unassignedOption)}}),Oc=Object(lo.a)(function(e,t){return e?[{avatarUrl:e.avatarUrl,id:e.id,name:e.displayName,displayName:t.formatMessage(gc.assignToMe)}]:[]}),jc=Object(lo.a)(function(e,t){return e?[{avatarUrl:"",id:null,name:t.formatMessage(gc.unassignedOption),displayName:t.formatMessage(gc.unassignedOption)}]:[]}),wc=Object(lo.a)(function(e,t,n,r){var o=!(t&&e&&e.name===t.name)&&r?Oc(e,n):[],i=t?jc(e,n):[];return[].concat(hc(o),hc(i))}),kc=function(e,t){return!!e&&t.toLowerCase().startsWith(e.toLowerCase())},Ec=Object(lo.a)(function(e,t,n){return function(r,o){if(!e)return Promise.resolve([]);var i=kc(r,n.formatMessage(gc.assignToMe)),a=kc(r,n.formatMessage(gc.unassignedOption))?jc(t,n):[],s=i?Oc(t,n):[],c=[].concat(hc(a),hc(s)),u=o?"&sessionId=".concat(o):"";return Object(So.c)("".concat(e).concat(r).concat(u)).then(function(e){var t=e.map(cc);return[].concat(hc(c),hc(t))})}}),Sc=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=mc(this,(e=bc(t)).call.apply(e,[this].concat(o)))).assigneeContainer=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yc(e,t)}(t,r["Component"]),function(e,t,n){t&&dc(e.prototype,t),n&&dc(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.initFieldOptions()}},{key:"componentDidUpdate",value:function(){this.assigneeContainer&&this.props.isEditing&&Us(this.assigneeContainer)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.initFieldOptions,pc(t,["initFieldOptions"]));return o.a.createElement(_s.a,{name:Ks.b},o.a.createElement("div",{ref:function(t){e.assigneeContainer=t}},o.a.createElement(sc,fc({},n,{fieldId:"assignee"}))))}}]),t}();Sc.displayName="AssigneeView",Sc.displayName="AssigneeView";var Cc=function(e,t){return"".concat(e,"/rest/api/3/user/assignable/search?issueKey=").concat(t,"&recommend=true&query=")},Pc=function(e){var t=e.baseUrl,n=e.issueKey,r=e.value,o=e.saveFieldData,i=null==r?null:r.accountId;return Ds(t,n,i,o)},Ic=function(e){return e&&e.accountId},xc=g()(Object(ko.e)(so.c),Object(Ro.a)(function(e,t){return function(e){return{fieldId:e.fieldId,transformFromStateValue:cc,transformToStateValue:uc,saveField:Pc,additionalProps:function(t,n){var r=Object(k.w)(t);return{portalElement:wS(e.fieldId)(t)?Do()||document.body:void 0,fetchSuggestions:Ec(Cc(Object(w.f)(t),Object(w.B)(t)),r,n),isEditable:Object(Bs.a)(t),emptyOption:vc(n),initialOptions:wc(r,Object(io.n)(e.fieldId)(t),n,Object(va.d)(t)),analyticsAttributeIdRetriever:Ic}}}}(t)}))(Sc),_c=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Mc=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),Tc=n("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),Ac=n("./src/packages/platform/observability/product-analytics-bridge/src/index.js");function Dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nc=function(e){if(!e)return null;var t=e.id,n=e.value,r=e.child;return{value:t,label:n,child:r&&{value:r.id,label:r.value}}},Rc=function(e){return e.map(function(e){return{value:e.id,label:e.value}})},Fc=function(e){return e.reduce(function(e,t){var n=t.id,r=t.children;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dc(Object(n),!0).forEach(function(t){Lc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,Lc({},n,r?Rc(r):[]))},{})},Vc=n("./node_modules/@atlaskit/form/dist/esm/Messages.js"),Uc=n("./node_modules/@atlaskit/select/Select.js"),Bc=Object(y.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.cascading-select-view.no-options-selected",defaultMessage:"None",description:"Text to indicate that no option has been selected"},errorMessage:{id:"issue-field-cascading-select.cascading-select-view.error-message",defaultMessage:"The value could not be saved",description:"Error message when save fails"}});function Kc(){var e=Hc(["\n    flex-basis: 0;\n    flex-grow: 1;\n"]);return Kc=function(){return e},e}function Wc(){var e=Hc(["\n    display: flex;\n    flex-direction: ",";\n"]);return Wc=function(){return e},e}function Hc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var zc=a.default.div(Wc(),function(e){return e.areOptionsOnSameRow?"row":"column"}),qc=a.default.div(Kc()),Gc=function(e,t){return!e||0===t.length};function Jc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qc(Object(n),!0).forEach(function(t){Yc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $c={control:function(e,t){return t.isFocused?Zc({},e,{backgroundColor:"transparent"}):Zc({},e,{backgroundColor:"transparent",borderColor:"transparent"})},dropdownIndicator:function(e){return Zc({},e,{color:vt.colors.N70})}},Xc=Object(y.injectIntl)(function(e){var t=e.value,n=e.allowedValues,i=e.allowedChildValues,a=e.onChange,s=e.isInvalid,c=void 0!==s&&s,u=e.areOptionsOnSameRow,l=void 0!==u&&u,f=e.intl,p=Jc(function(e){return e?[{label:e.label,value:e.value},e.child||null]:[null,null]}(t),2),d=p[0],m=p[1],b=Jc(Object(r.useState)(d),2),y=b[0],h=b[1],g=Jc(Object(r.useState)(m),2),v=g[0],O=g[1],j=Jc(Object(r.useState)(d&&i[d.value]||[]),2),w=j[0],k=j[1],E=Jc(Object(r.useState)(Gc(t,w)),2),S=E[0],C=E[1],P=Object(r.useRef)(null);return o.a.createElement(o.a.Fragment,null,c&&o.a.createElement(Vc.a,null,f.formatMessage(Bc.errorMessage)),o.a.createElement(zc,{areOptionsOnSameRow:l},o.a.createElement(qc,null,o.a.createElement(Uc.a,{defaultValue:d,value:y,options:n,onChange:function(e,n){var r=n.action;switch(O(null),r){case"select-option":a(e,null),h(e),k(i[e.value]||[]),C(Gc(t,w)),P&&P.current&&P.current.focus();break;case"clear":a(null,null),h(null),k([])}},isClearable:!0,autoFocus:!0,openMenuOnFocus:!0,styles:$c,placeholder:f.formatMessage(Bc.noOptionsSelected)})),w.length>0&&o.a.createElement(qc,null,o.a.createElement(Uc.a,{defaultValue:m,value:v,options:w,onChange:function(e,t){switch(t.action){case"select-option":a(Zc({},y,{child:e}),null),O(e);break;case"clear":a(y,null),O(null)}},isClearable:!0,autoFocus:S,openMenuOnFocus:!0,styles:$c,placeholder:f.formatMessage(Bc.noOptionsSelected),ref:P}))))}),eu=Object(y.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.no-options-selected",defaultMessage:"None",description:"Text to indicate that no option has been selected"}});function tu(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    z-index: 300;\n    position: relative;\n"]);return tu=function(){return e},e}var nu=a.default.div(tu());function ru(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ou(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function iu(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var au=function(e,t){return e&&e.child?"".concat(e.label," - ").concat(e.child.label):e?e.label:t.formatMessage(eu.noOptionsSelected)},su=function(e){var t=e.label,n=e.isEditable,i=e.isMobile,a=e.allowedValues,s=e.areOptionsOnSameRow,c=e.intl,u=iu(e,["label","isEditable","isMobile","allowedValues","areOptionsOnSameRow","intl"]),l=ou(Object(Tc.a)(u),2),f=l[0],p=f.value,d=f.error,m=l[1].saveValue,b=ou(Object(r.useState)(Nc(p)),2),y=b[0],h=b[1],g=ou(Object(r.useState)(Nc(p)),2),v=g[0],O=g[1],j=ou(Object(r.useState)(!1),2),w=j[0],k=j[1],E=ou(Object(r.useState)(au(y,c)),2),S=E[0],C=E[1],P=Object(r.useCallback)(function(e){C(au(e,c))},[c]),I=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ru(i,r,o,a,s,"next",e)}function s(e){ru(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)(function(){P(y)},[y,P]),Object(r.useEffect)(function(){d&&k(!0)},[d]),Object(r.useEffect)(function(){h(Nc(p))},[p]),o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,t)),o.a.createElement(Wo,{isLabelHidden:!0,label:t,readView:function(){return y?o.a.createElement("div",null,S):o.a.createElement(Xo.c,null,S)}(),editView:n?function(){return o.a.createElement(nu,null,o.a.createElement(Xc,{value:y,allowedValues:Rc(a),allowedChildValues:Fc(a),onChange:I,isInvalid:!!d,areOptionsOnSameRow:s,isEditable:n}))}():null,onConfirm:function(e){m(function(e){if(!e)return null;var t=e.label,n=e.value,r=e.child||void 0;return{id:n,value:t,child:r&&{id:r.value,value:r.label}}}(y),null,e),k(!1),P(y),Object(Ac.u)(e,"cascadingSelect",{hasChild:!(!y||!y.child||null==y.child),isEmpty:!y}),O(y)},onCancel:function(){k(!1),h(v)},onEditRequested:function(){return k(!0)},isEditing:w,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!i}))};su.displayName="CascadingSelectInlineEditView",su.defaultProps={initialValue:null,isMobile:!1,areOptionsOnSameRow:!1,fieldType:oo.h};var cu=Object(y.injectIntl)(su),uu=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js");function lu(){return(lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pu=function(e){var t=e.issueKey,n=e.fieldKey,r=e.label,i=fu(Object(_c.c)({issueKey:t,fieldKey:n}),1)[0],a=fu(Object(Mc.a)(t,n),1)[0];return o.a.createElement(cu,lu({},e,{allowedValues:a&&a.allowedValues||[],isEditable:a&&a.isEditable||!1,label:a&&a.title||r,initialValue:i}))};pu.displayName="CascadingSelectView";var du=Object(eo.a)([Object(i.connect)(function(e,t){var n=t.fieldId,r=t.area;return{fieldKey:n,fieldType:oo.h,error:Object(k.g)(e),issueKey:Object(w.B)(e),isMobile:Object(w.s)(e),label:Object(io.m)(n)(e),areOptionsOnSameRow:r===vo.a||r===vo.b}},{})])(Object(uu.d)()(pu)),mu=n("./node_modules/lodash/memoize.js"),bu=n.n(mu),yu=n("./node_modules/@atlaskit/tag/Tag/index.js"),hu=n("./node_modules/@atlaskit/tag-group/TagGroup/index.js"),gu=n("./node_modules/lodash/isEmpty.js"),vu=n.n(gu);function Ou(e){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wu(e,t){return!t||"object"!==Ou(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ku(e){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eu(e,t){return(Eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Su(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin: -4px;\n    width: 100%;\n"]);return Su=function(){return e},e}var Cu=a.default.div(Su()),Pu=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=wu(this,(e=ku(t)).call.apply(e,[this].concat(i)))).handleTagSelected=function(e){Object(Zo.a)(e.target,e.currentTarget)&&(e.stopPropagation(),n.props.onClick&&n.props.onClick())},n.handleTagMouseDown=function(e){e.preventDefault(),Object(Zo.a)(e.target,e.currentTarget)&&e.stopPropagation()},n.renderTag=function(e){var t=o.a.createElement(yu.a,{appearance:n.props.tagAppearance,text:void 0!==e.content?e.content:e.label,color:e.color,href:n.props.shouldHideLinks?void 0:e.href,elemBefore:e.elemBefore});return n.props.isUserTag?o.a.createElement(Js,{userAccount:e,analyticsData:{trigger:"user-tag"},position:"left-start"},t):t},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eu(e,t)}(t,r["Component"]),function(e,t,n){t&&ju(e.prototype,t),n&&ju(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.noValueText;return n&&!vu()(n)?o.a.createElement(Cu,null,o.a.createElement(hu.a,null,n.map(function(t){return o.a.createElement("div",{onClick:e.handleTagSelected,onMouseDown:e.handleTagMouseDown,onKeyPress:e.handleTagSelected,key:null!=t.key?t.key:t.value,role:"presentation"},e.renderTag(t))}))):o.a.createElement(Xo.c,null,r)}}]),t}();Pu.displayName="TagView",Pu.defaultProps={value:null,noValueText:null,tagAppearance:"default",shouldHideLinks:!1,isUserTag:!1};var Iu=Object(f.f)("tagView",{onClick:"clicked"})(Pu),xu=n("./node_modules/@atlaskit/select/CheckboxSelect.js"),_u=n("./node_modules/@atlaskit/icon/glyph/error.js"),Mu=n.n(_u);function Tu(e){return(Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Du(e,t){return!t||"object"!==Tu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lu(e){return(Lu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nu(e,t){return(Nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ru(){var e=Vu(["\n    margin-left: ","px;\n"]);return Ru=function(){return e},e}function Fu(){var e=Vu(["\n    align-items: center;\n    color: ",";\n    display: flex;\n    margin-top: ","px;\n"]);return Fu=function(){return e},e}function Vu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Uu=a.default.div(Fu(),function(e){return e.colour},d.e/2),Bu=a.default.div(Ru(),d.e/2),Ku={default:null,success:null,error:vt.colors.R400},Wu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Du(this,Lu(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nu(e,t)}(t,r["Component"]),function(e,t,n){t&&Au(e.prototype,t),n&&Au(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.validationMessage,r=e.validationState;return o.a.createElement("div",null,t,r&&n?o.a.createElement(Uu,{colour:Ku[r]},o.a.createElement(Mu.a,{label:"".concat(r," icon"),role:"presentation"}),o.a.createElement(Bu,null,n)):null)}}]),t}();function Hu(e){return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qu(e,t){return!t||"object"!==Hu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gu(e){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ju(e,t){return(Ju=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Wu.displayName="SelectValidationWrapper",Wu.displayName="SelectValidationWrapper",Wu.defaultProps={children:null,validationState:"default",validationMessage:null};var Qu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qu(this,Gu(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ju(e,t)}(t,r["Component"]),function(e,t,n){t&&zu(e.prototype,t),n&&zu(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(Wu,{validationState:this.props.invalidMessage?"error":null,validationMessage:this.props.invalidMessage},o.a.createElement(xu.a,{options:this.props.options,placeholder:this.props.placeholder,onChange:this.props.onChange,value:this.props.value,tabSelectsValue:!1,autoFocus:!0}))}}]),t}();function Zu(e){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $u(e,t){return!t||"object"!==Zu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xu(e){return(Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function el(e,t){return(el=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Qu.displayName="CheckboxFieldView",Qu.displayName="CheckboxFieldView",Qu.defaultProps={value:[],options:[],placeholder:null,invalidMessage:null};var tl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$u(this,Xu(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&el(e,t)}(t,r["Component"]),function(e,t,n){t&&Yu(e.prototype,t),n&&Yu(e,n)}(t,[{key:"renderReadView",value:function(){return o.a.createElement(Iu,{value:this.props.value,noValueText:this.props.noValueText,tagAppearance:this.props.tagAppearance,shouldHideLinks:this.props.isMobile})}},{key:"renderEditView",value:function(){return o.a.createElement(Qu,{value:this.props.value,options:this.props.options,onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage})}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:this.props.isEditing,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();tl.displayName="CheckboxInlineEditView",tl.displayName="CheckboxInlineEditView",tl.defaultProps={options:[],value:[],label:"",placeholder:null,noValueText:null,isEditable:!1,isEditing:!1,isMobile:!1,tagAppearance:"default",invalidMessage:null};var nl=Object(y.injectIntl)(tl),rl=Object(y.defineMessages)({noValue:{id:"issue.context-items.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None",description:""},version_no_value_placeholder:{id:"issue.version.text-no-value",defaultMessage:"Select version",description:""}}),ol=function(e){return{label:e.value,value:e.id}},il=function(e){return e?e.map(ol):[]},al=function(e){return e&&e.map(function(e){return{id:e.value,value:e.label}})},sl=Object(y.defineMessages)({placeholder:{id:"issue.checkbox-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}",description:""}}),cl=bu()(function(e){return function(e){return e&&e.map(ol)||[]}(e)}),ul=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:il,transformToStateValue:al,additionalProps:function(e,n){return{options:cl(Object(io.c)(t.fieldId)(e)),placeholder:n.formatMessage(sl.placeholder,{fieldName:Object(io.m)(t.fieldId)(e)}),noValueText:n.formatMessage(rl.noValue)}}}})(nl),ll=n("./src/packages/platform/utils/constants/src/fetch-default-options.js"),fl=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");function pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(n),!0).forEach(function(t){ml(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bl=function(e,t,n,r,o){return!t||t.length<=1?Promise.resolve(t):function(e,t,n){var r,o=new Promise(function(e){r=setTimeout(function(){fl.h.safeWarn("smarts.fields.ranking","FRS has timeout after ".concat(5e3,"ms")),e(t)},n)}),i=e().then(function(e){return r&&clearTimeout(r),e});return Promise.race([o,i])}(function(){return function(e,t,n,r,o){var i=t.map(function(e){return ml({},e.id,e)}).reduce(function(e,t){return dl({},e,{},t)},{}),a=Object(fl.f)(),s=a.atlassianAccountId,c=a.cloudId,u=a.baseUrl,l="".concat(u,"/gateway/api/fields/v2/recommendations/");return Object(So.c)(l,dl({},ll.a,{method:"POST",body:JSON.stringify({context:{objectId:n,containerId:r,principalId:s,product:"jira",tenantId:c,sessionId:o},fieldId:e,fieldObjects:t.map(function(e){return{id:e.id,value:e.name}})})})).then(function(e){return e.fieldObjects.map(function(e){var t=e.id;return i[t]})}).catch(function(n){return fl.h.safeError("smarts.fields.ranking","error while ranking ".concat(e," via FRS"),n),t})}(e,t,n,r,o)},t,5e3)},yl=Object(y.defineMessages)({placeholder:{id:"issue.components.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select component",description:""},createNewItem:{id:"issue.components.create-new-component-message",defaultMessage:"Create new component",description:""}}),hl=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/jql/helpers.js"),gl=function(e,t){var n=t.baseUrl,r=t.projectKey;return e.map(function(e){var t="project = ".concat(Object(hl.b)(r)," AND component = ").concat(Object(hl.b)(e.name));return{href:Object(hl.a)(n,t),content:e.name,value:e.id}})},vl=function(e){return[{items:e.map(function(e){return{content:e.name,value:e.id}})}]},Ol=function(e){return e.map(function(e){return{name:e.content,id:e.value}})},jl=n("./node_modules/@atlaskit/icon/glyph/add.js"),wl=n.n(jl),kl=n("./src/packages/issue/issue-view/src/common/util/events/index.js"),El=n("./node_modules/prop-types/index.js"),Sl=n.n(El),Cl=n("./node_modules/@atlaskit/multi-select/dist/esm/index.js"),Pl=n("./node_modules/rxjs/Rx.js"),Il=n("./node_modules/lodash/flatMap.js"),xl=n.n(Il),_l=n("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/hash-attribute.js"),Ml=(n("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/safe-string.js"),n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js")),Tl=n("./node_modules/uuid/index.js"),Al=n.n(Tl);function Dl(e){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ll(){return(Ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(n),!0).forEach(function(t){Fl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ul(e,t){return!t||"object"!==Dl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bl(e){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kl(e,t){return(Kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wl=Object(f.f)("multiSelect",{onFilterChange:"filterChanged",onRemoved:"optionRemoved",onSelected:"optionChanged",onOpenChange:"openChanged",onNewItemCreated:"optionCreated"})(Cl.a),Hl=function(e){var t=e.map(function(e){return e.items||[]});return xl()(t,function(e,t,n){return e})},zl=function(e){var t="".concat(e),n=Number.parseInt(t,10);return Number.isNaN(n)?Object(_l.a)(t):n},ql=function(e){return e.filter(function(e){return e&&e.value}).map(function(e){var t=e.value;return zl(t)})},Gl=function(e){return e.filter(function(e){return e&&e.value}).map(function(e){var t=e.value;return"".concat(t||"").length||0})},Jl=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ul(this,Bl(t).call(this,e))).getSafeSelectedValues=function(){return ql(n.props.selectedItems)},n.getDefaultAnalyticsAttributes=function(){var e=n.props.fieldId,t={queryLength:(n.query||"").length,queryHash:(n.query?Object(_l.a)(n.query):n.query)||""};return Rl({fieldId:e,componentName:"multiSelect",packageName:"@atlaskit/multi-select",options:n.safeItemsForAnalytics,optionsLength:n.safeItemsForAnalytics.length,optionsLengths:Gl(n.flatItems),selectedOptions:n.getSafeSelectedValues(),selectedOptionsLengths:Gl(n.props.selectedItems),sessionId:n.sessionId,isLoading:n.props.isLoading},t)},n.getItemOrder=function(e){var t=[];return n.flatItems.forEach(function(n,r){((n.filterValues||[]).includes(e.value)||n.value===e.value)&&t.push(r)}),t.length>0?t[0]:-1},n.startSession=function(){n.sessionId=Al.a.v4(),n.sessionStartedAt=Ml.d.now(),n.fireTrackAnalyticsEvent(n.props.createAnalyticsEvent({action:"started"}),"started","optionSelectionSession")},n.endSession=function(){if(n.sessionId){var e=n.sessionStartedAt?Ml.d.now()-n.sessionStartedAt:0;n.fireTrackAnalyticsEvent(n.props.createAnalyticsEvent({action:"ended"}),"ended","optionSelectionSession",{elapsedTime:e})}n.sessionStartedAt=0,n.sessionId=void 0},n.flatItems=[],n.safeItemsForAnalytics=[],n.sessionId=void 0,n.sessionStartedAt=0,n.isOpened=!1,n.isLoading=!1,n.query=null,n.handleNewItemCreate=function(e,t){t.update({action:"created",actionSubject:"option"}),n.props.onNewItemCreated(e,n.sessionId,t),n.fireAnalyticsEvent(t,{selectedOption:zl(e.value)})},n.handleFilterChange=function(e,t){n.query=e,t.update({action:"changed",actionSubject:"filter"});var r=n.sessionId;e||n.isOpened||(n.endSession(),n.props.isOpen&&(n.isOpened=!0,n.startSession())),n.props.onFilterChange(e,n.sessionId||r,t),n.fireAnalyticsEvent(t,{sessionId:n.sessionId||r})},n.handleRemoveItem=function(e,t){t.update({action:"removed",actionSubject:"option"}),n.props.onRemoved(e,n.sessionId,t),n.fireAnalyticsEvent(t,{removedItem:zl(e.value)})},n.handleSelected=function(e,t){t.update({action:"changed",actionSubject:"option"}),n.props.onSelected(e,n.sessionId,t),n.fireAnalyticsEvent(t,{selectedOrder:n.getItemOrder(e),selectedOption:zl(e.value)})},n.handleOpenChange=function(e,t){e.isOpen&&!n.isOpened&&n.startSession(),n.isOpened=e.isOpen,t.update({action:e.isOpen?"opened":"closed",actionSubject:"optionSelect",attributes:n.getDefaultAnalyticsAttributes()}),n.props.onOpenChange(e,n.sessionId,t),n.fireAnalyticsEvent(t)},n.flatItems=Hl(n.props.items||[]),n.safeItemsForAnalytics=ql(n.flatItems),n.isOpened=e.isOpen,n.isOpened&&(n.startSession(),n.handleFilterChange("",n.props.createAnalyticsEvent({}))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kl(e,t)}(t,r["Component"]),function(e,t,n){t&&Vl(e.prototype,t),n&&Vl(e,n)}(t,[{key:"componentDidUpdate",value:function(){this.flatItems=Hl(this.props.items||[]),this.safeItemsForAnalytics=ql(this.flatItems)}},{key:"componentWillUnmount",value:function(){this.endSession()}},{key:"fireAnalyticsEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Rl({},this.getDefaultAnalyticsAttributes(),{},t);Object(Ac.u)(e,n)}},{key:"fireTrackAnalyticsEvent",value:function(e,t,n,r){var o=Rl({},this.getDefaultAnalyticsAttributes(),{},r);Object(Ac.t)(e,"".concat(n," ").concat(t),o)}},{key:"render",value:function(){return o.a.createElement(Wl,Ll({},this.props,{onNewItemCreated:this.handleNewItemCreate,onFilterChange:this.handleFilterChange,onRemoved:this.handleRemoveItem,onSelected:this.handleSelected,onOpenChange:this.handleOpenChange}))}}]),t}();Jl.displayName="MultiSelectFieldView",Jl.defaultProps={onNewItemCreated:function(){},onFilterChange:function(){},onRemoved:function(){},onSelected:function(){},onOpenChange:function(){},createAnalyticsEvent:function(){},isLoading:!1,items:[]};var Ql=Object(f.r)()(Jl);function Zl(e){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xl(e,t){return!t||"object"!==Zl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ef(e){return(ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tf(e,t){return(tf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nf=Sl.a.shape({content:Sl.a.string.isRequired,value:Sl.a.oneOfType([Sl.a.string.isRequired,Sl.a.number.isRequired])}),rf=function(e){return!!e&&"click"===e.type},of=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xl(this,ef(t).call(this,e))).state={queryValue:"",suggestions:[],openedOnClick:!1,isFocused:!1,isLoading:!1},n.onOpenChange=function(e,t){var r=e.event;e.isOpen?rf(r)&&(n.state.queryValue?n.state.queryValue&&n.setState({openedOnClick:!1}):(n.handleFilterChange("",t),n.setState({openedOnClick:!0}))):n.setState({openedOnClick:!1,queryValue:"",suggestions:[]})},n.handleFilterChange=function(e,t){var r=e;n.props.onQueryValueChange&&(r=n.props.onQueryValueChange(e)),n.setState({queryValue:r,suggestions:n.loadingItem(r),isLoading:!0}),n.query$.next({query:r,sessionId:t})},n.isQueryValueExistingItem=function(){return[].concat(Yl(n.props.value),Yl(n.state.suggestions)).some(function(e){return e.value===n.state.queryValue})},n.handleNewItemCreate=function(e){var t={value:e.value,content:e.value};n.selectItem(t),n.setState({queryValue:""})},n.selectItem=function(e){var t=[].concat(Yl(n.props.value),[e]);n.props.onChange(t)},n.removeItem=function(e){var t=n.props.value.filter(function(t){return t.value!==e.value});n.props.onChange(t)},n.loadingItem=function(e){return[{items:[{value:"",content:"\u200c",elemBefore:o.a.createElement(L.a,{size:"small"}),filterValues:[e],isDisabled:!0}]}]},n.query$=new Pl.Subject,n.subscription=n.query$.debounceTime(300).switchMap(function(e){var t=e.query,r=e.sessionId;return r?n.props.fetchSuggestions(t,r).catch(function(){return[]}):n.props.fetchSuggestions(t).catch(function(){return[]})}).subscribe(function(e){n.setState({suggestions:e,isLoading:!1})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tf(e,t)}(t,r["Component"]),function(e,t,n){t&&$l(e.prototype,t),n&&$l(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({isFocused:!0})})}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"renderMultiSelectWithAnalytics",value:function(){var e=this.props,t=e.label,n=e.appearance,r=e.value,i=e.canCreateNewItem,a=e.createNewItemLabel,s=e.isOpen,c=e.invalidMessage,u=e.placeholder,l=e.fieldId,f=e.showDropdownOnClick;return o.a.createElement(Ql,{isLoading:this.state.isLoading,label:t,items:this.state.suggestions,selectedItems:r,shouldAllowCreateItem:i&&!this.isQueryValueExistingItem(),createNewItemLabel:a,onNewItemCreated:this.handleNewItemCreate,footer:this.props.footer||void 0,isOpen:s||f&&this.state.openedOnClick,placeholder:u,isInvalid:!!c,invalidMessage:c,filterValue:this.state.queryValue,onFilterChange:this.handleFilterChange,onRemoved:this.removeItem,onSelected:this.selectItem,appearance:n,shouldFitContainer:!0,shouldFlip:!0,shouldFocus:this.state.isFocused,icon:null,onOpenChange:this.onOpenChange,fieldId:l})}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.appearance,r=e.value,i=e.canCreateNewItem,a=e.createNewItemLabel,s=e.isOpen,c=e.invalidMessage,u=e.placeholder,l=e.fieldId,f=e.showDropdownOnClick;return l?this.renderMultiSelectWithAnalytics():o.a.createElement(Cl.a,{label:t,items:this.state.suggestions,selectedItems:r,shouldAllowCreateItem:i&&!this.isQueryValueExistingItem(),createNewItemLabel:a,onNewItemCreated:this.handleNewItemCreate,footer:this.props.footer||void 0,isOpen:s&&this.state.queryValue.length>0||f&&this.state.openedOnClick,placeholder:u,isInvalid:!!c,invalidMessage:c,filterValue:this.state.queryValue,onFilterChange:this.handleFilterChange,onRemoved:this.removeItem,onSelected:this.selectItem,appearance:n,shouldFitContainer:!0,shouldFlip:!0,shouldFocus:this.state.isFocused,icon:null,onOpenChange:this.onOpenChange})}}]),t}();function af(e){return(af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cf(e,t){return!t||"object"!==af(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uf(e){return(uf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lf(e,t){return(lf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}of.displayName="MultiSelectFieldView",of.displayName="MultiSelectFieldView",of.propTypes={value:Sl.a.arrayOf(nf).isRequired,fetchSuggestions:Sl.a.func.isRequired,onChange:Sl.a.func.isRequired,isOpen:Sl.a.bool.isRequired,canCreateNewItem:Sl.a.bool,createNewItemLabel:Sl.a.string,placeholder:Sl.a.string,appearance:Sl.a.string,label:Sl.a.string,invalidMessage:Sl.a.string,footer:Sl.a.object,showDropdownOnClick:Sl.a.bool,onQueryValueChange:Sl.a.func,fieldId:Sl.a.string},of.defaultProps={appearance:"default",placeholder:null,label:null,invalidMessage:null,createNewItemLabel:null,canCreateNewItem:!1,footer:null,showDropdownOnClick:!0,onQueryValueChange:null,fieldId:null};var ff=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=cf(this,(e=uf(t)).call.apply(e,[this].concat(o)))).inlineEditRef=void 0,n.handleKeyDown=function(e){Object(kl.c)(e)?(n.props.onCancel(),e.stopPropagation()):e.target instanceof window.HTMLInputElement&&Object(kl.b)(e)&&0===e.target.value.length&&(n.props.onConfirm(),e.stopPropagation())},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lf(e,t)}(t,r["Component"]),function(e,t,n){t&&sf(e.prototype,t),n&&sf(e,n)}(t,[{key:"componentDidMount",value:function(){this.inlineEditRef&&this.inlineEditRef.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){this.inlineEditRef&&this.inlineEditRef.removeEventListener("keydown",this.handleKeyDown)}},{key:"renderReadView",value:function(){return o.a.createElement(Iu,{value:this.props.value,noValueText:this.props.noValueText,tagAppearance:this.props.tagAppearance,shouldHideLinks:this.props.isMobile,isUserTag:this.props.isUserTag,onClick:this.props.onTagClick})}},{key:"renderEditView",value:function(){return o.a.createElement(of,{value:this.props.value,fetchSuggestions:this.props.fetchSuggestions,onChange:this.props.onChange,canCreateNewItem:this.props.canCreateNewItem,createNewItemLabel:this.props.createNewItemLabel,placeholder:this.props.placeholder,appearance:"subtle",isOpen:this.props.isEditing,invalidMessage:this.props.validate(this.props.value)||this.props.invalidMessage,footer:this.props.footer,showDropdownOnClick:this.props.showDropdownOnClick,fieldId:this.props.fieldId})}},{key:"render",value:function(){var e=this,t=this.props.intl;return o.a.createElement("div",{ref:function(t){e.inlineEditRef=t}},o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:t.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:t.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:t.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})}))}}]),t}();ff.displayName="MultiSelectInlineEditView",ff.displayName="MultiSelectInlineEditView",ff.defaultProps={label:"",fieldId:"",placeholder:null,noValueText:null,invalidMessage:null,isEditable:!1,isEditing:!1,isMobile:!1,canCreateNewItem:!1,createNewItemLabel:null,footer:null,tagAppearance:"default",showDropdownOnClick:!0,validate:function(){},isUserTag:!1};var pf=Object(y.injectIntl)(ff),df=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),mf=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/messages.js"),bf=Object(y.defineMessages)({empty:{id:"issue.views.field.select.empty",defaultMessage:"No matches found",description:"Message when no options are found in a select"}}),yf=n("./node_modules/@atlaskit/select/CreatableSelect.js");function hf(e){return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gf(){return(gf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vf(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jf(e,t){return!t||"object"!==hf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wf(e){return(wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kf(e,t){return(kf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ef=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=jf(this,(e=wf(t)).call.apply(e,[this].concat(o)))).formatCreateLabel=function(e){var t=n.props,r=t.footer,o=t.formatCreateLabel;return void 0===r?o?o(e):e:"function"==typeof r?r(e):r||null},n.getShouldShowFooter=function(e,t,r){var o=n.props,i=o.footer,a=o.getShouldShowFooter,s=!!i,c=!a||a(e,t,r);return s&&c},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kf(e,t)}(t,r["Component"]),function(e,t,n){t&&Of(e.prototype,t),n&&Of(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=(e.footer,e.getShouldShowFooter,e.onFooterSelect),n=vf(e,["footer","getShouldShowFooter","onFooterSelect"]);return o.a.createElement(yf.a,gf({},n,{formatCreateLabel:this.formatCreateLabel,isValidNewOption:this.getShouldShowFooter,onCreateOption:t,allowCreateWhileLoading:!0}))}}]),t}();Ef.displayName="SelectWithFooter";var Sf=function(e){return xl()(e.map(function(e){return void 0!==e.options?e.options:e}))},Cf=function(e){return null==e?[]:Array.isArray(e)?e:[e]},Pf=function(e){var t="number"==typeof e?e:Number.parseInt(e,10);return Number.isNaN(t)?Object(_l.a)(e.toString()):t},If=function(e){return e.filter(function(e){return e.value}).map(function(e){var t=e.value;return Pf(t)})},xf=function(e){return e.filter(function(e){return e.value}).map(function(e){var t=e.value;return null!=t?"".concat(t).length:0})};function _f(e){return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mf(){return(Mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tf(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Df(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(n),!0).forEach(function(t){Lf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Af(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rf(e,t){return!t||"object"!==_f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ff(e){return(Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vf(e,t){return(Vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Uf={onChange:"valueChanged",onInputChange:"inputChanged",onMenuOpen:"menuOpened",onMenuClose:"menuClosed"},Bf=Object(f.f)("select",Uf)(Ef),Kf=Object(f.f)("select",Uf)(yf.a),Wf={action:"fake-action"},Hf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Rf(this,Ff(t).call(this,e))).getDefaultAnalyticsAttributes=function(){var e=n.props,t=e.fieldId,r=e.value,o=e.isLoading,i={queryLength:(n.query||"").length,queryHash:(n.query?Object(_l.a)(n.query):n.query)||""},a=Cf(r);return Df({fieldId:t,componentName:"select",packageName:"@atlaskit/select",options:n.safeOptionsForAnalytics,optionsLength:n.safeOptionsForAnalytics.length,optionsLengths:xf(n.flatOptions),selectedOptions:If(a),selectedOptionsLengths:xf(a),sessionId:n.sessionId,isLoading:o},i)},n.getItemOrder=function(e){var t=[];return n.flatOptions.forEach(function(n,r){var o=n.filterValues||[];(n.value===e.value||o.includes(e.value))&&t.push(r)}),t.length>0?t[0]:-1},n.startSession=function(){n.sessionId=Al.a.v4(),n.sessionStartedAt=Ml.d.now(),n.fireTrackAnalyticsEvent(n.props.createAnalyticsEvent({action:"started"}),"started","optionSelectionSession")},n.endSession=function(){if(n.sessionId){var e=n.sessionStartedAt?Ml.d.now()-n.sessionStartedAt:0;n.fireTrackAnalyticsEvent(n.props.createAnalyticsEvent({action:"ended"}),"ended","optionSelectionSession",{elapsedTime:e})}n.sessionStartedAt=0,n.sessionId=void 0},n.flatOptions=[],n.safeOptionsForAnalytics=[],n.sessionId=void 0,n.query=void 0,n.sessionStartedAt=0,n.isOpened=!1,n.fireOptionCreatedEvent=function(e,t){t.update({action:"created",actionSubject:"option"}),n.fireAnalyticsEvent(t,{selectedOption:Pf(e.value)})},n.fireInputChangedEvent=function(e,t,r){var o=n.props.menuIsOpen;n.query=e,r.update({action:"changed",actionSubject:"filter"});var i=n.sessionId;return e||"set-value"!==t.action||(n.endSession(),o&&(n.isOpened=!0,n.startSession())),n.fireAnalyticsEvent(r,{sessionId:n.sessionId||i}),i},n.fireOptionRemovedEvent=function(e,t){t.update({action:"removed",actionSubject:"option"}),n.fireAnalyticsEvent(t,{removedItem:e?Pf(e.value):void 0})},n.fireOptionSelectedEvent=function(e,t){t.update({action:"changed",actionSubject:"option"}),n.fireAnalyticsEvent(t,{selectedOrder:n.getItemOrder(e),selectedOption:Pf(e.value)})},n.fireOpenChangedEvent=function(e,t){e.isOpen&&!n.isOpened&&n.startSession(),n.isOpened=e.isOpen,t.update({action:e.isOpen?"opened":"closed",actionSubject:"optionSelect",attributes:n.getDefaultAnalyticsAttributes()}),n.fireAnalyticsEvent(t)},n.onChange=function(e,t,r){var o=Array.isArray(e)?e[e.length-1]:e;switch(t.action){case"create-option":null!==o&&n.fireOptionCreatedEvent(o,r);break;case"remove-value":case"pop-value":case"deselect-option":n.fireOptionRemovedEvent(t.removedValue||t.option,r);break;case"select-option":null!==o&&n.fireOptionSelectedEvent(o,r)}n.props.onChange&&n.props.onChange(e,t,n.sessionId)},n.onInputChange=function(e,t,r){var o,i=n.props.onInputChange;"input-change"!==t.action&&"set-value"!==t.action||(o=n.fireInputChangedEvent(e,t,r)),i(e,t,n.sessionId||o)},n.onMenuOpen=function(e){n.fireOpenChangedEvent({isOpen:!0},e);var t=n.props.onMenuOpen;t&&t(e)},n.onMenuClose=function(e){n.fireOpenChangedEvent({isOpen:!1},e);var t=n.props.onMenuClose;t&&t(e)},n.onFocus=function(e){n.props.onFocus(e,n.sessionId)},n.flatOptions=Sf(n.props.options),n.safeOptionsForAnalytics=If(n.flatOptions),n.isOpened=e.menuIsOpen,n.isOpened&&(n.startSession(),n.fireInputChangedEvent("",Wf,n.props.createAnalyticsEvent({}))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vf(e,t)}(t,r["Component"]),function(e,t,n){t&&Nf(e.prototype,t),n&&Nf(e,n)}(t,[{key:"componentDidUpdate",value:function(e){this.props.options!==e.options&&(this.flatOptions=Sf(this.props.options),this.safeOptionsForAnalytics=If(this.flatOptions))}},{key:"componentWillUnmount",value:function(){this.endSession()}},{key:"fireAnalyticsEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Df({},this.getDefaultAnalyticsAttributes(),{},t);Object(Ac.u)(e,n)}},{key:"fireTrackAnalyticsEvent",value:function(e,t,n,r){var o=Df({},this.getDefaultAnalyticsAttributes(),{},r);Object(Ac.t)(e,"".concat(n," ").concat(t),o)}},{key:"render",value:function(){var e=this.props,t=e.canCreateNewItem,n=(e.createAnalyticsEvent,Tf(e,["canCreateNewItem","createAnalyticsEvent"])),r=t?Kf:Bf;return o.a.createElement(r,Mf({},n,{onFocus:this.onFocus,onChange:this.onChange,onInputChange:this.onInputChange,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose}))}}]),t}();Hf.displayName="SelectWithAnalyticsView",Hf.defaultProps={isLoading:!1,onChange:u.a,onInputChange:u.a,onMenuOpen:u.a,onMenuClose:u.a,createAnalyticsEvent:u.a};var zf=Object(f.r)()(Hf);function qf(){var e=Zf(["\n    ",";\n"]);return qf=function(){return e},e}function Gf(){var e=Zf(["\n    display: flex;\n"]);return Gf=function(){return e},e}function Jf(){var e=Zf(["\n    display: flex;\n    padding-right: ","px;\n"]);return Jf=function(){return e},e}function Qf(){var e=Zf(["\n    display: flex;\n    align-items: center;\n"]);return Qf=function(){return e},e}function Zf(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Yf=a.default.span(Qf()),$f=a.default.span(Jf(),d.e),Xf=a.default.span(Gf()),ep=a.default.div(qf(),function(e){return"top"===e.errorMessagePosition?"margin-left: ".concat(d.e,"px; \n                margin-bottom: ").concat(.5*d.e,"px;"):""});function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(Object(n),!0).forEach(function(t){rp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var op=function(e){for(var t=e||{},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(0===r.length)return t;var i=np({},t);return r.forEach(function(e){e&&Object.keys(e).forEach(function(t){var n=i[t],r=e[t];i[t]=n?function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return r.apply(void 0,[n.apply(void 0,[e].concat(o))].concat(o))}:r})}),i};function ip(e){return(ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ap(){return(ap=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cp(e,t){return!t||"object"!==ip(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function up(e){return(up=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,t){return(lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fp(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach(function(t){mp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bp={hideSelectedOptions:!0,allowCreateWhileLoading:!0},yp={multiValue:function(e){return dp({},e,{"background-color":vt.colors.N20})},option:function(e){return dp({},e,{cursor:"pointer","&:hover":{"background-color":vt.colors.N20}})},menu:function(e){return dp({},e,{zIndex:d.f.modal})},menuPortal:function(e){return dp({},e,{transform:"translateZ(0)"})}},hp={dropdownIndicator:function(e){return dp({},e,{display:"none"})}},gp=function(e){return dp({label:e.content},e)},vp=function(e,t){e.label,e.filterValues;var n=dp({},fp(e,["label","filterValues"]));return"create-option"===t.action&&void 0===n.content&&(n.content=e.label),n},Op=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cp(this,up(t).call(this,e))).state={options:[],isLoading:!0},n.onFocus=function(e,t){n.query$.next({query:"",sessionId:t,isImmediate:!0})},n.onChange=function(e,t,r){var o=n.props,i=o.onChange,a=o.onChangeMulti;if(o.isMulti){if(!a)return;n.query$.next({query:n.query,sessionId:r,isImmediate:!0}),a(Array.isArray(e)?e.map(function(e){return vp(e,t)}):[],t)}else{if(!i||Array.isArray(e))return;i(e&&vp(e,t),t)}},n.onInputChange=function(e,t,r){var o=e;n.props.changeQueryValue&&(o=n.props.changeQueryValue(o)),n.query=o,"input-change"!==t.action&&"set-value"!==t.action||("input-change"===t.action&&(n.setState({isLoading:!0}),n.query$.next({query:o,sessionId:r})),n.props.onInputChange&&n.props.onInputChange(o,t))},n.formatOptionLabel=function(e,t){return void 0!==n.props.formatOptionLabel?n.props.formatOptionLabel(e,t):e.iconUrl?o.a.createElement(Yf,null,o.a.createElement($f,null,o.a.createElement("img",{src:e.iconUrl,alt:"",width:2*d.e,height:2*d.e,role:"none"})),o.a.createElement(Xf,null,e.label)):e.label},n.transformItems=function(e){return e&&e.length>0?e.map(gp):[]},n.transformToOptions=function(e){return 1!==e.length||e[0].heading?e.map(function(e){var t=n.transformItems(e.items);return void 0!==e.heading?{label:e.heading,options:t}:{options:t}}):n.transformItems(e[0].items)},n.subscription=void 0,n.query$=void 0,n.query="",n.noOptionsMessageDefault=function(){return n.props.intl.formatMessage(bf.empty)},n.loadingMessageDefault=function(){return n.props.intl.formatMessage(mf.a.loading)},n.renderSelectField=function(){var e=n.props,t=e.autoFocus,r=e.invalidMessage,i=e.hasAutocomplete,a=e.isClearable,s=e.portalElement,c=e.placeholder,u=void 0===c?"":c,l=e.isOpen,f=e.inputValue,p=e.isMulti,d=e.canCreateNewItem,m=e.filterOption,b=e.formatCreateLabel,y=e.footer,h=e.onFooterSelect,g=e.getShouldShowFooter,v=e.openMenuOnClick,O=e.onMenuOpen,j=e.onMenuClose,w=e.noOptionsMessage,k=void 0===w?n.noOptionsMessageDefault:w,E=e.loadingMessage,S=void 0===E?n.loadingMessageDefault:E,C=e.fieldId,P=r?"error":void 0;return o.a.createElement(zf,ap({},bp,{key:C,fieldId:C,options:n.state.options,value:n.getSelectedValue(),inputValue:f,styles:op(yp,hp,n.props.styles),isClearable:a,isLoading:n.state.isLoading,isMulti:p,isSearchable:i,canCreateNewItem:d,menuIsOpen:l,openMenuOnClick:v,autoFocus:t,placeholder:u,noOptionsMessage:k,loadingMessage:S,menuPortalTarget:s,menuPlacement:"auto",validationState:P,filterOption:m,formatCreateLabel:b,footer:y,onFooterSelect:h,getShouldShowFooter:g,formatOptionLabel:n.formatOptionLabel,onChange:n.onChange,onFocus:n.onFocus,onInputChange:n.onInputChange,onMenuOpen:O,onMenuClose:j}))},n.renderErrorMessage=function(){var e=n.props,t=e.invalidMessage,r=e.fieldId;return t?o.a.createElement(ep,{key:"".concat(r,"-error-message")},o.a.createElement(Vc.a,null,t)):null},n.query$=new Pl.Subject,n.subscription=n.query$.debounce(function(e){return e.isImmediate?Pl.Observable.empty():Pl.Observable.timer(n.props.debounceFetchSuggestionsTime||0)}).switchMap(function(e){var t=e.query,r=e.sessionId;return n.setState({isLoading:!0}),n.props.fetchSuggestions(t,r||void 0).catch(function(e){return fl.h.safeError("issue.select.transform-suggestions","Could not fetch or transform suggestions to display in select",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),[]})}).subscribe(function(e){n.setState({options:n.transformToOptions(e),isLoading:!1})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lp(e,t)}(t,r["Component"]),function(e,t,n){t&&sp(e.prototype,t),n&&sp(e,n)}(t,[{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"getSelectedValue",value:function(){var e=this.props.value;return e?Array.isArray(e)?e.map(gp):gp(e):null}},{key:"render",value:function(){var e=this.props.errorMessagePosition,t=[this.renderSelectField()];return"top"===e?t.unshift(this.renderErrorMessage()):t.push(this.renderErrorMessage()),o.a.createElement(df.a,null,o.a.createElement(o.a.Fragment,null,t))}}]),t}();Op.displayName="SelectFieldView",Op.displayName="SelectFieldView",Op.defaultProps={value:null,placeholder:void 0,isClearable:!1,isMulti:!1,autoFocus:!1,debounceFetchSuggestionsTime:0,canCreateNewItem:!1,onChangeMulti:u.a,onChange:u.a,onInputChange:u.a,errorMessagePosition:"top"};var jp=Object(y.injectIntl)(Op),wp=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");function kp(){var e=Cp(["\n    display: inline-block;\n    color: ",";\n    font-size: 12px;\n    margin-top: ","px;\n"]);return kp=function(){return e},e}function Ep(){var e=Cp(["\n    ",";\n"]);return Ep=function(){return e},e}function Sp(){var e=Cp(["\n    display: flex;\n    flex-direction: column;\n    margin: 0 ","px;\n    padding: ","px 0;\n    overflow: hidden;\n"]);return Sp=function(){return e},e}function Cp(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Pp=a.default.span(Sp(),d.e,d.e/4),Ip=a.default.span(Ep(),wp.a),xp=a.default.span(kp(),vt.colors.N300,d.e/2),_p=function(e){var t=e.option;return o.a.createElement(Yf,null,null!=t.elemBefore?t.elemBefore:null,o.a.createElement(Pp,null,o.a.createElement(Ip,null,t.label),null!=t.description?o.a.createElement(xp,null,t.description):null))};function Mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ap(){var e=Np(["\n    display: flex;\n    align-items: center;\n    color: ",";\n    padding: 6px 12px;\n\n    &:hover {\n        background-color: ",";\n    }\n\n    &:active {\n        background-color: ",";\n    }\n"]);return Ap=function(){return e},e}function Dp(){var e=Np(["\n    margin-left: ","px;\n"]);return Dp=function(){return e},e}function Lp(){var e=Np(["\n    display: flex;\n    align-items: center;\n"]);return Lp=function(){return e},e}function Np(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}_p.displayName="RichOptionView";var Rp=a.default.div(Lp()),Fp=a.default.span(Dp(),d.e),Vp=a.default.div(Ap(),vt.colors.B400,vt.colors.N20,vt.colors.B75),Up={option:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mp(Object(n),!0).forEach(function(t){Tp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{},t.data.__isNew__?{position:"sticky",bottom:0,"background-color":"".concat(vt.colors.N0," !important"),"border-top":"2px solid rgba(9, 30, 66, 0.13)",padding:0,"padding-bottom":0,"padding-top":"".concat(d.e,"px"),":after":{content:'""',display:"block",position:"absolute",bottom:"-".concat(8,"px"),left:0,width:"100%",height:"".concat(8,"px"),"background-color":vt.colors.N0,"border-bottom-left-radius":"".concat(d.e/2,"px"),"border-bottom-right-radius":"".concat(d.e/2,"px")}}:{})}},Bp=function(e,t){return!!e.data.__isNew__||"string"==typeof e.label&&e.label.trim().toLowerCase().includes(t.trim().toLowerCase())};function Kp(e){return(Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hp(e,t){return!t||"object"!==Kp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zp(e){return(zp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qp(e,t){return(qp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gp=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Hp(this,(e=zp(t)).call.apply(e,[this].concat(o)))).onChange=function(e,t){var r=n.props,o=r.onChange,i=r.onConfirm;o&&o(e,t),i()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qp(e,t)}(t,r["Component"]),function(e,t,n){t&&Wp(e.prototype,t),n&&Wp(e,n)}(t,[{key:"renderEditView",value:function(){var e=this.props,t=e.fieldId,n=e.value,r=e.fetchSuggestions,i=e.placeholder,a=e.isEditing,s=e.isMulti,c=e.isOpen,u=e.invalidMessage,l=e.hasAutocomplete,f=e.debounceFetchSuggestionsTime,p=e.allowEmptyValue,d=e.portalElement,m=e.canCreateNewItem,b=e.formatCreateLabel,y=e.styles,h=e.onChangeMulti,g=e.footer,v=e.onFooterSelect,O=e.getShouldShowFooter,j=e.filterOption,w=e.formatOptionLabel;return o.a.createElement(jp,{fieldId:t,value:n,fetchSuggestions:r,placeholder:i,isOpen:a&&c,invalidMessage:u,hasAutocomplete:l,debounceFetchSuggestionsTime:f,isClearable:p,portalElement:d,canCreateNewItem:m,formatCreateLabel:b,styles:y,autoFocus:!0,onChange:this.onChange,footer:g,onFooterSelect:v,getShouldShowFooter:O,onChangeMulti:h,isMulti:s,filterOption:j,formatOptionLabel:w})}},{key:"render",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.label,r=e.isEditable,i=e.isEditing,a=e.isMobile,s=e.isMulti,c=e.onCancel,u=e.onEditRequest,l=e.onConfirm,f=e.renderReadView;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,n)),o.a.createElement(T.a,{onEscape:c},o.a.createElement(Wo,{isLabelHidden:!0,label:n,readView:f(),editView:r?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!s,isEditing:i,onConfirm:l,onCancel:c,onEditRequested:u,isFitContainerWidthReadView:!a,editButtonLabel:t(Fo.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:t(Fo.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:t(Fo.a.cancelButtonLabel,{fieldName:n})})))}}]),t}();Gp.displayName="SelectInlineEditView",Gp.displayName="SelectInlineEditView",Gp.defaultProps={label:"",noValueText:null,isEditable:!1,isEditing:!1,allowEmptyValue:!1,hasAutocomplete:!1,isMobile:!1,isMulti:!1,isOpen:!0,debounceFetchSuggestionsTime:0,onChange:u.a};var Jp=Object(y.injectIntl)(Gp);function Qp(){return(Qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Zp(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yp(Object(n),!0).forEach(function(t){Xp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ed={loadingIndicator:function(e){return $p({},e,{display:"none"})},menu:function(e){return $p({},e,{"z-index":210})}},td=function(e){var t=e.validate,n=e.invalidMessage,r=e.value,i=e.onChange,a=(e.tagAppearance,Zp(e,["validate","invalidMessage","value","onChange","tagAppearance"]));return o.a.createElement(Jp,Qp({},a,{value:r,isMulti:!0,styles:op(ed,e.styles),onChangeMulti:i,invalidMessage:t(r)||n,renderReadView:function(){var t=e.value,n=e.noValueText,r=e.tagAppearance,i=e.isMobile;return o.a.createElement(Iu,{value:t,noValueText:n,tagAppearance:r,shouldHideLinks:i})}}))};td.displayName="MultiSelectInlineEditView",td.displayName="MultiSelectInlineEditView",td.defaultProps={tagAppearance:"default",validate:function(){return null},hasAutocomplete:!0,debounceFetchSuggestionsTime:300};var nd=td;function rd(e){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function od(){return(od=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function id(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ad(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sd(e,t){return!t||"object"!==rd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cd(e){return(cd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ud(e,t){return(ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ld=Object(lo.a)(function(e,t,n){return{appearance:"primary",content:e,elemBefore:o.a.createElement(wl.a,{label:"",size:"small"}),onActivate:function(){return Object(Yo.a)("".concat(t,"/plugins/servlet/project-config/").concat(n,"/administer-components"),!1)}}}),fd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sd(this,cd(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ud(e,t)}(t,r["Component"]),function(e,t,n){t&&ad(e.prototype,t),n&&ad(e,n)}(t,[{key:"renderFooter",value:function(){var e=this.props.intl;return o.a.createElement(Vp,null,o.a.createElement(wl.a,{label:"",size:"small"}),o.a.createElement(Fp,null,e.formatMessage(yl.createNewItem)))}},{key:"render",value:function(){var e=this.props,t=e.shouldShowFooter,n=e.baseUrl,r=e.projectKey,i=e.intl,a=id(e,["shouldShowFooter","baseUrl","projectKey","intl"]);return Object(M.c)()?o.a.createElement(nd,od({},a,{styles:Up,getShouldShowFooter:function(){return t},footer:this.renderFooter(),onFooterSelect:function(){return Object(Yo.a)("".concat(n,"/plugins/servlet/project-config/").concat(r,"/administer-components"),!1)}})):o.a.createElement(pf,od({},a,{footer:t?ld(i.formatMessage(yl.createNewItem),n,r):null}))}}]),t}();fd.displayName="View";var pd=Object(lo.a)(function(e,t,n,r){return function(e,t,n,r){return bl("components",e,t,n,r)}(e,t,n,r)}),dd=Object(lo.a)(function(e,t,n){return function(r,o){return Object(M.q)()?pd(e,t,n,o).then(vl):Promise.resolve(e).then(vl)}}),md=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:gl,transformToStateValue:Ol,additionalProps:function(e,n){return{baseUrl:Object(w.f)(e),projectKey:Object(w.J)(e),fetchSuggestions:dd(Object(io.c)(t.fieldId)(e),Object(w.A)(e),Object(k.B)(e)),placeholder:n.formatMessage(yl.placeholder),noValueText:n.formatMessage(rl.noValue),shouldShowFooter:(Object(va.c)(e)||Object(va.b)(e))&&!Object(w.s)(e)}}}})(Object(y.injectIntl)(fd));function bd(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var yd=function(e,t){return"".concat(e,"/rest/servicedesk/1/servicedesk/request/").concat(t,"/request-types/")},hd=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){bd(i,r,o,a,s,"next",e)}function s(e){bd(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Issue ID not available");case 2:return e.abrupt("return",Object(So.i)(yd(t,n),{body:JSON.stringify({rtId:r})}));case 3:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),gd=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),vd=Object(y.defineMessages)({placeholder:{id:"issue.customer-request-type.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Request Type",description:"Empty state text when no request type is provided"}}),Od=function(e){return{issueTypeId:e.issueType.toString(),content:e.name,value:e.id,iconUrl:e.iconUrl,elemBefore:o.a.createElement("img",{src:e.iconUrl,alt:"",width:2*d.e,height:2*d.e,role:"none"})}},jd=function(e){return e&&function(e){if(e.errorMessage)return{hasError:!0};if(!e.requestType)return null;var t=e.requestType,n=t.icon,r=t.issueTypeId,i=t.id,a=t.name,s=n._links.iconUrls["48x48"];return{issueTypeId:r,content:a,value:i,iconUrl:s,elemBefore:o.a.createElement("img",{src:s,alt:"",width:2*d.e,height:2*d.e,role:"none"})}}(e)},wd=function(e){return{requestType:{icon:{_links:{iconUrls:{"48x48":e.iconUrl||""}}},id:e.value,name:e.content,issueTypeId:e.issueTypeId}}},kd=function(e){return[{items:e.validRequestTypes.map(Od)}]},Ed=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-with-icon/index.js");function Sd(){return(Sd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Cd=function(e){return function(){var t=e.value,n=e.noValueText;if(t&&!Array.isArray(t)){var r=t.iconUrl,i=t.content;return r?o.a.createElement(Ed.a,{iconUrl:r},i):i}return o.a.createElement(Xo.c,null,n)}},Pd=function(e){return o.a.createElement(Jp,Sd({},e,{renderReadView:e.renderReadView||Cd(e),isMulti:!1}))};Pd.displayName="SingleSelectInlineEditView",Pd.displayName="SingleSelectInlineEditView";var Id=Pd,xd=n("./node_modules/@atlaskit/single-select/dist/bundle.js"),_d=n.n(xd);function Md(e){return(Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Td(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Ad(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Td(i,r,o,a,s,"next",e)}function s(e){Td(i,r,o,a,s,"throw",e)}a(void 0)})}}function Dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ld(e,t){return!t||"object"!==Md(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nd(e){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rd(e,t){return(Rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ld(this,Nd(t).call(this,e))).state={queryValue:n.props.value?n.props.value.content:"",suggestions:[]},n.onFocus=Ad(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({suggestions:n.loadingItem(n.state.queryValue)}),e.prev=1,e.next=4,n.props.fetchSuggestions("");case 4:t=e.sent,n.setState({suggestions:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.setState({suggestions:[]});case 11:case"end":return e.stop()}},e,null,[[1,8]])})),n.query$=void 0,n.subscription=void 0,n.handleFilterChange=function(e){n.setState({queryValue:e,suggestions:n.loadingItem(e)}),n.query$.next(e),n.props.onQueryChanged(e)},n.loadingItem=function(e){return[{items:[{value:"",content:"\u200c",elemBefore:o.a.createElement(L.a,{size:"small"}),filterValues:[e],isDisabled:!0}]}]},n.query$=new Pl.Subject,n.subscription=n.query$.debounceTime(e.debounceFetchSuggestionsTime).switchMap(function(e){return n.props.fetchSuggestions(e).catch(function(e){return fl.h.safeError("issue.single-select.transform-suggestions","Could not transform suggestions to display in single select",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),[]})}).subscribe(function(e){n.setState({suggestions:e})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rd(e,t)}(t,r["Component"]),function(e,t,n){t&&Dd(e.prototype,t),n&&Dd(e,n)}(t,[{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"render",value:function(){return o.a.createElement(df.a,null,o.a.createElement("div",{onFocus:this.onFocus},o.a.createElement(xd.StatelessSelect,{label:this.props.label,appearance:this.props.appearance,shouldFitContainer:!0,items:this.state.suggestions,selectedItem:this.props.value||void 0,isOpen:this.props.isOpen,onSelected:this.props.onChange,placeholder:this.props.placeholder,isInvalid:!!this.props.invalidMessage,invalidMessage:this.props.invalidMessage,hasAutocomplete:this.props.hasAutocomplete,onFilterChange:this.handleFilterChange,filterValue:this.state.queryValue,shouldFlip:!0})))}}]),t}();function Vd(e){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bd(e,t){return!t||"object"!==Vd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kd(e){return(Kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wd(e,t){return(Wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hd(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin: 2px -1px 2px 2px;\n"]);return Hd=function(){return e},e}Fd.displayName="SingleSelectFieldView",Fd.displayName="SingleSelectFieldView",Fd.defaultProps={value:null,appearance:"default",placeholder:null,label:null,invalidMessage:null,hasAutocomplete:!1,onQueryChanged:u.a,debounceFetchSuggestionsTime:0};var zd=a.default.div(Hd()),qd=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Bd(this,(e=Kd(t)).call.apply(e,[this].concat(o)))).state={isQueryEmpty:!n.props.value},n.onChange=function(e){n.props.onChange(e),n.props.onConfirm()},n.onQueryChanged=function(e){n.setState({isQueryEmpty:!e})},n.onConfirm=function(){n.state.isQueryEmpty&&n.props.allowEmptyValue&&n.props.onChange(null),n.props.onConfirm()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wd(e,t)}(t,r["Component"]),function(e,t,n){t&&Ud(e.prototype,t),n&&Ud(e,n)}(t,[{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.noValueText;return t?t.iconUrl?o.a.createElement(Ed.a,{iconUrl:t.iconUrl},t.content):t.content:o.a.createElement(Xo.c,null,n)}},{key:"renderEditView",value:function(){return o.a.createElement(zd,null,o.a.createElement(Fd,{value:this.props.value,fetchSuggestions:this.props.fetchSuggestions,onChange:this.onChange,placeholder:this.props.placeholder,appearance:"subtle",isOpen:this.props.isEditing,invalidMessage:this.props.invalidMessage,onQueryChanged:this.onQueryChanged,hasAutocomplete:this.props.hasAutocomplete,debounceFetchSuggestionsTime:this.props.debounceFetchSuggestionsTime}))}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();qd.displayName="SingleSelectInlineEditView",qd.displayName="SingleSelectInlineEditView",qd.defaultProps={value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null,isEditable:!1,isEditing:!1,allowEmptyValue:!1,hasAutocomplete:!1,isMobile:!1,debounceFetchSuggestionsTime:0};var Gd=Object(y.injectIntl)(qd);function Jd(){return(Jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qd(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Zd=function(e,t){return t?"".concat(e,"/rest/servicedesk/1/servicedesk/request/").concat(t,"/request-types?query="):null},Yd=Object(lo.a)(function(e){return function(t){return e?Object(So.c)("".concat(e).concat(t)).then(kd):Promise.resolve([])}}),$d=function(e,t){var n=e.baseUrl,r=e.value.requestType,o=Object(w.A)(t);return hd(n,o,r.id)},Xd=function(e){return e&&e.requestType&&e.requestType.id},em=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:jd,transformToStateValue:wd,saveField:$d,additionalProps:function(e,t){return{fetchSuggestions:Yd(Zd(Object(w.f)(e),Object(w.A)(e))),isEditable:Object(Bs.e)(e),issueTypeId:Object(gd.d)(e),hasAutocomplete:!0,placeholder:t.formatMessage(vd.placeholder),noValueText:t.formatMessage(rl.noValue),debounceFetchSuggestionsTime:300,analyticsAttributeIdRetriever:Xd}}}})(function(e){var t=e.issueTypeId,n=Qd(e,["issueTypeId"]),r=e.value;if(r&&r.hasError)return null;var i=r&&t!==r.issueTypeId;return Object(M.g)()?o.a.createElement(Id,Jd({},n,i?{value:null}:{})):o.a.createElement(Gd,Jd({},e,i?{value:null}:{}))});function tm(e){return(tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rm(e,t){return!t||"object"!==tm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function om(e){return(om=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function im(e,t){return(im=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var am=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rm(this,om(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&im(e,t)}(t,r["Component"]),function(e,t,n){t&&nm(e.prototype,t),n&&nm(e,n)}(t,[{key:"renderEditView",value:function(){return o.a.createElement(se,{value:this.props.value,onChange:this.props.onChange,timeZone:this.props.timeZone,parseValue:this.props.parseValue})}},{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.formatDateTime;return t?n(t):o.a.createElement(Xo.c,null,this.props.noValueText)}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,value:this.props.value,isEditing:this.props.isEditing,invalidMessage:this.props.invalidMessage,isInvalid:!!this.props.invalidMessage,onCancel:this.props.onCancel,onConfirm:this.props.onConfirm,onEditRequested:this.props.onEditRequest,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!this.props.isMobile,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();am.displayName="DateTimeInlineEditFieldView",am.defaultProps={label:"",noValueText:null,value:null,isEditable:!1,isEditing:!1,invalidMessage:null,isMobile:!1,formatDateTime:function(e){return e},onConfirm:u.a,onCancel:u.a,onEditRequest:u.a};var sm=Object(y.injectIntl)(am),cm=bu()(function(e,t){return function(n){return function(e,t,n){if(!t)return null;var r={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0},o=n?fe({},r,{timeZone:n}):fe({},r),i=ue()(t).valueOf();return e.formatDate(i,o)}(e,n,t)}}),um=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,additionalProps:function(e,t){return{noValueText:t.formatMessage(rl.noValue),formatDateTime:cm(t,Object(k.y)(e)),timeZone:Object(k.y)(e),parseValue:de}}}})(sm),lm=n("./node_modules/@atlaskit/inline-dialog/InlineDialog/index.js"),fm=n("./node_modules/@atlaskit/datetime-picker/dist/esm/components/DatePicker.js");function pm(e){return(pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mm(e,t){return!t||"object"!==pm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bm(e){return(bm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ym(e,t){return(ym=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mm(this,bm(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ym(e,t)}(t,r["Component"]),function(e,t,n){t&&dm(e.prototype,t),n&&dm(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.autoFocus,n=e.isDisabled,r=e.value,i=e.intl.formatMessage;return o.a.createElement(fm.a,{autoFocus:t,isDisabled:n,value:r||void 0,onChange:this.props.onChange,placeholder:i(Y.a.placeholderDate)})}}]),t}();hm.displayName="DateFieldView",hm.defaultProps={value:void 0,autoFocus:!1,isDisabled:!1};var gm=Object(y.injectIntl)(hm);function vm(e){return(vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jm(e,t){return!t||"object"!==vm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wm(e){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function km(e,t){return(km=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Em=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jm(this,wm(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&km(e,t)}(t,r["Component"]),function(e,t,n){t&&Om(e.prototype,t),n&&Om(e,n)}(t,[{key:"renderEditView",value:function(){return o.a.createElement(gm,{value:this.props.value,onChange:this.props.onChange,autoFocus:!0})}},{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.noValueText;return t||o.a.createElement(Xo.c,null,n)}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEnter:this.props.onConfirm,onEscape:this.props.onCancel},o.a.createElement(lm.a,{content:this.props.invalidMessage,isOpen:!!this.props.invalidMessage,placement:"top"},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,value:this.props.value,isEditing:this.props.isEditing,onCancel:this.props.onCancel,onConfirm:this.props.onConfirm,onEditRequested:this.props.onEditRequest,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!this.props.isMobile,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})}))))}}]),t}();Em.displayName="DateInlineEditFieldView",Em.defaultProps={label:"",noValueText:null,value:"",isEditable:!1,isEditing:!1,invalidMessage:null,isMobile:!1};var Sm=Object(y.injectIntl)(Em),Cm=function(e){return e?e.replace(/-/g,"/"):""},Pm=function(e){return e?e.replace(/\//g,"-"):null},Im=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Cm,transformToStateValue:Pm,additionalProps:function(e,t){return{noValueText:t.formatMessage(rl.noValue)}}}})(Sm),xm=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Cm,transformToStateValue:Pm,additionalProps:function(e,t){return{noValueText:t.formatMessage(rl.noValue)}}}})(Sm),_m=n("./node_modules/@atlaskit/badge/components/index.js"),Mm=n("./node_modules/@atlaskit/icon/glyph/shortcut.js"),Tm=n.n(Mm),Am=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),Dm=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),Lm=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),Nm=n("./src/packages/issue/issue-view/src/actions/ecosystem-glance-action-type.js");function Rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vm=function(e,t,n){var r=n?n.type:"",o=Object(fl.i)(e,t,r);return{appKey:o(e),moduleKey:o(t),statusType:o(r)}},Um=function(e,t){var n=Object(fl.i)(e,t);return{appKey:n(e),moduleKey:n(t)}},Bm=function(e,t){return Um(e,t)},Km=function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(n),!0).forEach(function(t){Fm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Um(e,t),{event:Object(fl.i)(n)(n)})},Wm=function(e,t){return Um(e,t)},Hm=function(e){return e.map(function(e){return{appKey:e.appKey,moduleKey:e.moduleKey,name:e.name}})},zm=function(e){return e.map(function(e){return{appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type}})},qm=function(e){return e.map(function(e){return{appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type,showByDefault:e.showByDefault}})},Gm=function(e){return e.map(function(e){return{name:e.name}})},Jm=function(e){return"WEB_PANEL"===e.type},Qm=function(e){return"ISSUE_MODULE"===e.type},Zm="click_through",Ym="open_panel",$m=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),Xm=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),eb=function(e){Object(Xm.a)({name:"ac/create"}).then(function(){return e(window.connectHost)})},tb=function(){return window.connectHost},nb=function(e,t,n){eb(function(r){r&&r.broadcastEvent(e,t,n)})},rb="ISSUE_QUICK_ADD_CLICKED",ob=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),ib=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),ab=n("./node_modules/lodash/omitBy.js"),sb=n.n(ab);function cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ub(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lb=function(e){return[Zm,Ym].find(function(t){return t===e})||Ym},fb=function(e){var t=sb()(e,function(e){return null==e});return void 0===t.workMode?t:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cb(Object(n),!0).forEach(function(t){ub(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{workMode:lb(t.workMode)})};function pb(e){return(pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function db(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bb(){return(bb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hb(e,t){return!t||"object"!==pb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gb(e){return(gb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vb(e,t){return(vb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ob(){var e=_b(["\n    position: absolute;\n    animation: "," 0.15s ease-in-out;\n"]);return Ob=function(){return e},e}function jb(){var e=_b(["\n    0% { right: -28px; }\n    100% { right: 0; }\n"]);return jb=function(){return e},e}function wb(){var e=_b(["\n    position: absolute;\n    right: 0;\n    margin: ","px ","px;\n    height: 26px;\n    width: 26px;\n    background: ",";\n    color: ",";\n    border-radius: 50%;\n    align-items: center;\n    padding: 2px 0 0 2px;\n"]);return wb=function(){return e},e}function kb(){var e=_b(["\n    position: absolute;\n    right: 0;\n    width: ","px;\n    height: ","px;\n    background-image: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, "," 25%);\n"]);return kb=function(){return e},e}function Eb(){var e=_b(["\n    color: ",";\n    display: flex;\n    align-items: center;\n"]);return Eb=function(){return e},e}function Sb(){var e=_b(["\n    font-weight: 600;\n    display: inline;\n"]);return Sb=function(){return e},e}function Cb(){var e=_b(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    flex: 1;\n    line-height: ","px;\n    padding-left: ","px;\n"]);return Cb=function(){return e},e}function Pb(){var e=_b(["\n    overflow: hidden;\n    margin-top: ","px;\n    margin-bottom: ","px;\n    margin-left: ","px;\n    height: 24px;\n    width: 24px;\n    align-items: center;\n"]);return Pb=function(){return e},e}function Ib(){var e=_b(["\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    border-radius: 5px;\n    margin-left: -","px;\n    margin-bottom: ","px;\n    height: ","px;\n    &:hover {\n        background: ",";\n        cursor: pointer;\n    }\n    &:focus {\n        box-shadow: 0 0 0 2px ",";\n        outline: 0;\n        background: ",";\n    }\n"]);return Ib=function(){return e},e}function xb(){var e=_b(["\n    display: flex;\n    flex-direction: column;\n"]);return xb=function(){return e},e}function _b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Mb=a.default.div(xb()),Tb=a.default.div(Ib(),d.e,3*d.e,4*d.e,vt.colors.N20,vt.colors.B100,vt.colors.N20),Ab=a.default.div(Pb(),.5*d.e,.5*d.e,d.e),Db=a.default.div(Cb(),4*d.e,d.e),Lb=a.default.div(Sb()),Nb=a.default.div(Eb(),vt.colors.N70),Rb=a.default.div(kb(),7*d.e,4*d.e,vt.colors.N20),Fb=a.default.div(wb(),d.e/4,d.e,vt.colors.N30,vt.colors.N60),Vb=Object(a.keyframes)(jb()),Ub=a.default.div(Ob(),Vb),Bb=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=hb(this,(e=gb(t)).call.apply(e,[this].concat(i)))).state={isHovering:!1,update:void 0},n.onGlanceUpdate=function(e,t,r){r.addonKey===n.props.appKey&&r.moduleKey===n.props.moduleKey&&n.setState({update:fb(r.data)})},n.getGlanceIcon=function(){return n.state.update&&n.state.update.icon?n.state.update.icon:n.props.icon},n.getGlanceWorkMode=function(){return n.state.update&&n.state.update.workMode||n.props.workMode},n.eventHandlers={onMouseEnter:function(){return n.setState({isHovering:!0})},onMouseLeave:function(){return n.setState({isHovering:!1})},onFocus:function(){return n.setState({isHovering:!0})},onBlur:function(){return n.setState({isHovering:!1})}},n.handleOpenGlancePanel=function(){var e=n.props,t=e.appKey,r=e.moduleKey,o=e.status,i=e.onGlanceShowAnalytics,a=e.onOpenGlancePanel,s=e.onClickThroughGlancePanel,c=n.getGlanceWorkMode();c===Ym?(i(Vm(t,r,o)),a(t,r)):c===Zm&&s(t,r)},n.container=void 0,n.renderStatus=function(){var e=n.state.update&&n.state.update.status?n.state.update.status:n.props.status;if(!e)return null;var t=e.value,r=e.type;if(t.label)switch(r){case"lozenge":return o.a.createElement(ht.a,{appearance:t.type},t.label);case"icon":return o.a.createElement(Lm.a,{url:Object($m.a)(n.props.glance.options.origin,t.label),alt:t.type,width:24,height:24});case"badge":var i=parseInt(t.label,10);return i>=0?o.a.createElement(_m.a,{appearance:"default",value:i}):null;default:return null}return null},n.renderContent=function(){if(n.state.update&&n.state.update.content)return o.a.createElement(Db,null,n.state.update.content);var e=n.props,t=e.label,r=e.name;return t.value===r?o.a.createElement(Db,null,o.a.createElement(y.FormattedMessage,{id:"issue.ecosystem.context.rich-glance-label",defaultMessage:"Open {label}",values:{label:o.a.createElement(Lb,null,t.value)}})):o.a.createElement(Db,null,t.value)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vb(e,t)}(t,r["Component"]),function(e,t,n){t&&yb(e.prototype,t),n&&yb(e,n)}(t,[{key:"componentDidMount",value:function(){p.a.addUpdateIssueGlanceListener(this.onGlanceUpdate)}},{key:"componentWillUnmount",value:function(){p.a.removeUpdateIssueGlanceListener(this.onGlanceUpdate)}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.glance,i=this.getGlanceIcon();return o.a.createElement(Mb,{innerRef:function(t){e.container=t},"data-test-id":"issue.views.issue-base.context.ecosystem-glance-panel"},o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,n)),o.a.createElement(T.a,{onEnter:this.handleOpenGlancePanel},o.a.createElement(Tb,bb({onClick:this.handleOpenGlancePanel,tabIndex:"0"},this.eventHandlers),i&&o.a.createElement(Ab,null,o.a.createElement(Lm.a,{url:Object($m.a)(r.options.origin,i.url),alt:i.alt,width:24,height:24})),this.renderContent(),o.a.createElement(Nb,null,this.renderStatus()),this.state.isHovering&&o.a.createElement(Dm.a,{mountAnimation:Ub},o.a.createElement(Rb,null,o.a.createElement(Fb,null,this.getGlanceWorkMode()===Zm?o.a.createElement(Tm.a,{size:"medium",label:""}):o.a.createElement(er.a,{size:"medium",label:""})))))))}}]),t}();Bb.displayName="RichGlance",Bb.displayName="RichGlance",Bb.defaultProps={icon:null,openedGlance:null,status:null,onGlanceShowAnalytics:u.a,workMode:Ym};var Kb=Object(eo.a)([Object(Am.a)(function(e){return{onGlanceShowAnalytics:function(t){return e("show",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?db(Object(n),!0).forEach(function(t){mb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):db(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t))}}}),Object(i.connect)(function(e,t){return{openedGlance:Object(ib.a)(e),glance:Object(ob.g)(t.appKey,t.moduleKey)(e),onClickThroughGlancePanel:function(e,t){nb("ISSUE_GLANCE_CONTENT_CLICKED",{addon_key:e,key:t})}}},function(e){return{onOpenGlancePanel:function(t,n){e(function(e,t){return{type:Nm.b,payload:{appKey:e,moduleKey:t}}}(t,n)),nb("ISSUE_GLANCE_OPENED",{addon_key:t,key:n})}}})])(Bb),Wb=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");function Hb(){var e=qb(["\n    min-width: ","px;\n"]);return Hb=function(){return e},e}function zb(){var e=qb(["\n    margin: 2px -1px 2px 2px;\n"]);return zb=function(){return e},e}function qb(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Gb=a.default.div(zb()),Jb=a.default.div(Hb(),1.5*d.e);function Qb(e){return(Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yb(e,t){return!t||"object"!==Qb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $b(e){return($b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xb(e,t){return(Xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ey=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Yb(this,(e=$b(t)).call.apply(e,[this].concat(o)))).state={isQueryEmpty:!n.props.value},n.onChange=function(e){n.props.onChange(e),n.props.onConfirm()},n.onQueryChanged=function(e){n.setState({isQueryEmpty:!e})},n.onConfirm=function(){n.state.isQueryEmpty&&n.props.allowEmptyValue&&n.props.onChange(null),n.props.onConfirm()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xb(e,t)}(t,r["Component"]),function(e,t,n){t&&Zb(e.prototype,t),n&&Zb(e,n)}(t,[{key:"renderReadView",value:function(){return o.a.createElement(Iu,{value:this.props.value?[this.props.value]:null,noValueText:this.props.noValueText,shouldHideLinks:this.props.isMobile})}},{key:"renderEditView",value:function(){return o.a.createElement(Gb,null,o.a.createElement(Fd,{value:this.props.value,fetchSuggestions:this.props.fetchSuggestions,onChange:this.onChange,placeholder:this.props.placeholder,appearance:"subtle",isOpen:this.props.isEditing,invalidMessage:this.props.invalidMessage,hasAutocomplete:!0,onQueryChanged:this.onQueryChanged}))}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();ey.displayName="EpicInlineEditView",ey.displayName="EpicInlineEditView",ey.defaultProps={value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null,isEditable:!1,isEditing:!1,allowEmptyValue:!1,isMobile:!1};var ty=Object(y.injectIntl)(ey);function ny(e){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ry(){return(ry=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iy(e,t){return!t||"object"!==ny(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ay(e){return(ay=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sy(e,t){return(sy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cy=function(e){return o.a.createElement(yu.a,{color:e,elemBefore:o.a.createElement(Jb,null),text:""})};cy.displayName="getOptionColorElem";var uy=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=iy(this,(e=ay(t)).call.apply(e,[this].concat(i)))).renderReadView=function(){var e=n.props,t=e.value,r=e.noValueText,i=e.isMobile;return o.a.createElement(Iu,{value:t?[t]:null,noValueText:r,shouldHideLinks:i})},n.formatOptionLabel=function(e,t){return"menu"===t.context?o.a.createElement(_p,{option:e}):e.label},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sy(e,t)}(t,r["Component"]),function(e,t,n){t&&oy(e.prototype,t),n&&oy(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(Id,ry({},this.props,{renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0}))}}]),t}();uy.displayName="EpicInlineEditView",uy.displayName="EpicInlineEditView";var ly=Object(y.defineMessages)({placeholder:{id:"issue.epic.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Epic",description:""}}),fy={color_1:"grey",color_2:"yellow",color_3:"yellowLight",color_4:"blue",color_5:"teal",color_6:"greenLight",color_7:"purpleLight",color_8:"purple",color_9:"redLight",color_10:"blueLight",color_11:"tealLight",color_12:"greyLight",color_13:"green",color_14:"red"},py={"ghx-label-1":"color_1","ghx-label-2":"color_2","ghx-label-3":"color_3","ghx-label-4":"color_4","ghx-label-5":"color_5","ghx-label-6":"color_6","ghx-label-7":"color_7","ghx-label-8":"color_8","ghx-label-9":"color_9","ghx-label-10":"color_10","ghx-label-11":"color_11","ghx-label-12":"color_12","ghx-label-13":"color_13","ghx-label-14":"color_14"},dy=function(e){var t=e.color?e.color.key:py[e.colorKey];return t?fy[t]:null},my=function(e,t){var n=t.baseUrl;return e&&function(e,t){return{content:e.name,value:e.key,color:dy(e),href:"".concat(t,"/browse/").concat(e.key)}}(e,n)},by=function(e){return e&&{name:e.content,key:e.value,color:{key:Object.keys(fy).find(function(t){return fy[t]===e.color})}}},yy=function(e){var t=py[e.color],n=fy[t];return{content:e.name,value:e.key,description:e.key,color:n,elemBefore:cy(n),filterValues:[e.name,e.key]}},hy=function(e){return[{items:(e&&e.epicLists||[]).reduce(function(e,t){return e.concat(t.epicNames)},[]).map(yy)}]};function gy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vy=Object(lo.a)(function(e,t){return function(n){return Object(So.c)("".concat(e,"/rest/greenhopper/1.0/epics?searchQuery=").concat(n,"&projectKey=").concat(t,"&maxResults=20")).then(hy)}}),Oy=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:my,transformToStateValue:by,additionalProps:function(e,t){return{fetchSuggestions:vy(Object(w.f)(e),Object(w.J)(e)),placeholder:t.formatMessage(ly.placeholder),noValueText:t.formatMessage(rl.noValue),allowEmptyValue:!0}},saveField:function(e){var t=e.baseUrl,n=e.issueKey,r=e.fieldMetaKey,o=e.value;return Object(So.j)(Object(Wb.f)(t,n),{body:JSON.stringify({fields:gy({},r,o?o.key:null)})})}}})(function(e){return Object(M.j)()?o.a.createElement(uy,e):o.a.createElement(ty,e)}),jy=function(e){return{content:e.name,value:e.name}},wy=Object(lo.a)(function(e){return function(t){return Object(So.c)("".concat(e,"/rest/api/2/groups/picker?query=").concat(t)).then(function(e){return function(e){return e&&e.groups?[{items:e.groups.map(jy)}]:[{items:[]}]}(e)})}}),ky=Object(y.defineMessages)({placeholder:{id:"issue.multi-group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups",description:""}}),Ey=function(e){return e&&jy(e)},Sy=function(e){return e&&{name:e.value}},Cy=function(e){return e?function(e){return e.map(function(e){return Ey(e)})}(e):[]},Py=function(e){return e?e.map(function(e){return Sy(e)}):[]},Iy=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Cy,transformToStateValue:Py,additionalProps:function(e,t){return{fetchSuggestions:wy(Object(w.f)(e)),placeholder:t.formatMessage(ky.placeholder),noValueText:t.formatMessage(rl.noValue)}}}})(function(e){return Object(M.f)()?o.a.createElement(nd,e):o.a.createElement(pf,e)}),xy=Object(y.defineMessages)({placeholder:{id:"issue.group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group",description:""}}),_y=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Ey,transformToStateValue:Sy,additionalProps:function(e,n){return{fetchSuggestions:wy(Object(w.f)(e)),placeholder:n.formatMessage(xy.placeholder),noValueText:n.formatMessage(rl.noValue),allowEmptyValue:!Object(io.A)(t.fieldId)(e),hasAutocomplete:!0}}}})(function(e){return Object(M.g)()?o.a.createElement(Id,e):o.a.createElement(Gd,e)}),My=n("./src/packages/issue/issue-view/src/actions/share-as-comment-action-type.js"),Ty=n("./src/packages/issue/issue-view/src/selectors/context-panel-selector.js"),Ay=n("./src/packages/servicedesk/knowledge-glance/index.js"),Dy=Object(eo.a)([Object(i.connect)(function(e){return{isEditorOpen:Object(Ra.w)(e),isPanelOpen:Object(Ty.b)(e)}},{onShareAsComment:function(e){return{type:My.b,payload:{value:e}}}})])(Ay.b),Ly=Object(eo.a)([Object(i.connect)(function(e){return{isVisible:Object(va.f)(e),baseUrl:Object(w.f)(e),issueKey:Object(w.B)(e),locale:Object(w.D)(e),issueId:Object(w.A)(e),projectKey:Object(w.J)(e),isAdmin:"admin"===Object(w.O)(e)}},{})])(function(e){var t=e.isVisible,n=void 0===t||t,r=e.onOpenPanel,i=e.baseUrl,a=e.issueKey,s=e.locale,c=e.issueId,u=e.projectKey,l=e.isAdmin;return n&&o.a.createElement(Ay.a,{baseUrl:i,locale:s,issueKey:a,onOpenPanel:r,issueId:c,projectKey:u,isAdmin:l})}),Ny=function(e,t){var n=t.baseUrl,r=t.fieldId;return e?e.map(function(e){var t=encodeURIComponent("".concat(function(e){if(e.startsWith("customfield_")){var t=e.substring("customfield_".length,e.length);return"cf[".concat(t,"]")}return e}(r)," = ").concat(Object(hl.b)(e)));return{content:e,value:e,href:"".concat(n,"/issues/?jql=").concat(t)}}):[]},Ry=function(e){return e.map(function(e){return e.value})},Fy=function(e){return[{items:e.suggestions.map(function(e){return{content:e.label,value:e.label}})}]},Vy=function(e){return e.map(function(e){return e.content.trim()}).some(function(e){return e.includes(" ")||e.length>255})?o.a.createElement(y.FormattedMessage,{id:"issue.labels-view.input-label-is-invalid",defaultMessage:"Labels can't have spaces or be more than ".concat(255," characters.")}):void 0};function Uy(e){return(Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function By(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wy(e,t){return!t||"object"!==Uy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hy(e){return(Hy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zy(e,t){return(zy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qy=Object(y.defineMessages)({placeholder:{id:"issue.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Label",description:""},createNewItem:{id:"issue.labels.create-new-item-message",defaultMessage:"New label",description:""}}),Gy=bu()(function(e,t){return function(n,r){if(!e)return Promise.resolve([]);var o="".concat(e).concat(encodeURIComponent(n));return r&&(o="".concat(o,"&sessionId=").concat(r)),t&&(o="".concat(o,"&fieldEditSessionId=").concat(t)),Object(So.c)(o).then(Fy)}},function(e,t){return"".concat(e,"_").concat(t)}),Jy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wy(this,Hy(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zy(e,t)}(t,r["Component"]),function(e,t,n){t&&Ky(e.prototype,t),n&&Ky(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.initFieldOptions()}},{key:"render",value:function(){var e=this.props,t=(e.initFieldOptions,By(e,["initFieldOptions"]));return Object(M.W)()?o.a.createElement(nd,t):o.a.createElement(pf,t)}}]),t}();Jy.displayName="LabelsView",Jy.displayName="LabelsView";var Qy=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Ny,transformToStateValue:Ry,additionalProps:function(e,n){return{fetchSuggestions:Gy(Object(io.d)(t.fieldId)(e),Object(io.f)(t.fieldId)(e)),placeholder:n.formatMessage(qy.placeholder),noValueText:n.formatMessage(rl.noValue),createNewItemLabel:Object(M.W)()?void 0:n.formatMessage(qy.createNewItem),formatCreateLabel:Object(M.W)()?function(e){return"".concat(e," (").concat(n.formatMessage(qy.createNewItem),")")}:void 0,canCreateNewItem:!0,validate:Vy}}}})(Jy),Zy=function(e){return{value:e.id,content:e.value}},Yy=function(e){return e?e.map(Zy):[]},$y=function(e){return e&&e.map(function(e){return{id:e.value,value:e.content}})},Xy=function(e){return e&&[{items:e.map(Zy)}]||[]},eh=Object(y.defineMessages)({placeholder:{id:"issue.multi-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}",description:""}}),th=Object(lo.a)(function(e){return function(){return Promise.resolve(e).then(Xy)}}),nh=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Yy,transformToStateValue:$y,additionalProps:function(e,n){return{fetchSuggestions:th(Object(io.c)(t.fieldId)(e)),placeholder:n.formatMessage(eh.placeholder,{fieldName:Object(io.m)(t.fieldId)(e)}),noValueText:n.formatMessage(rl.noValue)}}}})(function(e){return Object(M.W)()?o.a.createElement(nd,e):o.a.createElement(pf,e)}),rh=Object(y.defineMessages)({placeholder:{id:"issue.multi-user.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select User",description:""}});function oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(n),!0).forEach(function(t){ah(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ah(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sh=function(e){return e&&e.map(function(e){return{displayName:e.content,accountId:e.accountId,id:e.value,avatarUrls:ah({},"24x24",e.avatarUrl)}})},ch=function(e){return e?e.map(function(e){return ih({content:e.displayName,value:e.accountId,key:e.accountId,avatarUrl:e.avatarUrls["24x24"],accountId:e.accountId,elemBefore:o.a.createElement(Ws.a,{size:"xsmall",src:e.avatarUrls["24x24"]})},Object(M.h)()?{}:{tag:{appearance:"rounded",elemBefore:o.a.createElement(Ws.a,{size:"xsmall",src:e.avatarUrls["24x24"]})}})}):[]},uh=function(e){return[{items:(e&&e.users||[]).map(function(e){return ih({content:e.displayName,value:e.accountId,accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"]},Object(M.h)()?{}:{elemBefore:o.a.createElement(Ws.a,{size:"small",src:e.avatarUrls["24x24"]})})})}]},lh=function(e){return Object(M.h)()?o.a.createElement(nd,e):o.a.createElement(pf,e)};lh.displayName="MultiSelectInlineEditView";var fh=Object(lo.a)(function(e){return function(t){return e?Object(So.c)("".concat(e).concat(t)).then(uh):Promise.resolve([])}}),ph=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:ch,transformToStateValue:sh,additionalProps:function(e,n){return{fetchSuggestions:fh(Object(io.d)(t.fieldId)(e)),placeholder:n.formatMessage(rh.placeholder),noValueText:n.formatMessage(rl.noValue),tagAppearance:"rounded",showDropdownOnClick:!1,isUserTag:!0,formatOptionLabel:function(e){return o.a.createElement(Rp,null,o.a.createElement(Ws.a,{size:"small",src:e.avatarUrl}),o.a.createElement(Fp,null,e.label))}}}}})(lh),dh=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-url.js"),mh=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-valid-email-address.js"),bh=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/prefix-url.js"),yh=function(e,t){var n=e.type,r=void 0===n?"text":n,i=e.value,a=void 0===i?"":i,s=e.placeholder,c=void 0===s?"":s,u=e.invalidMessage,l=e.onChange;return o.a.createElement(Ue.a,{type:r,value:a,placeholder:c,onChange:l,isInvalid:!!u,invalidMessage:u,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",ref:t})};yh.displayName="SingleLineTextField",yh.displayName="SingleLineTextField";var hh=Object(r.forwardRef)(yh);function gh(e){return(gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oh(e,t){return!t||"object"!==gh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jh(e){return(jh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wh(e,t){return(wh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kh=Object(lo.a)(dh.a),Eh=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Oh(this,jh(t).call(this,e))).onChange=function(e){var t,r=n.props.type;"number"===r?""===e.target.value?t=null:(t=Number(e.target.value),n.setState({displayValue:e.target.value})):t=e.target.value,"url"===r&&n.setState({showValidationMessage:!1,invalidMessage:e.target.validationMessage}),n.props.onChange(t)},n.onConfirm=function(){n.state.invalidMessage?(n.setState({showValidationMessage:!0}),n.editFieldRef.current&&n.editFieldRef.current.focus()):n.props.onConfirm()},n.onCancel=function(){"url"===n.props.type&&n.setState({showValidationMessage:!1,invalidMessage:null}),n.props.onCancel()},n.editFieldRef=Object(r.createRef)(),n.state={invalidMessage:null,showValidationMessage:!1,displayValue:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wh(e,t)}(t,r["Component"]),function(e,t,n){t&&vh(e.prototype,t),n&&vh(e,n)}(t,[{key:"componentDidUpdate",value:function(e){"number"===this.props.type&&this.props.value!==e.value&&(this.state.displayValue=null)}},{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.noValueText,r=e.type;if(null==t||""===t)return o.a.createElement(Xo.c,null,n);var i=Object(M.K)()?function(e,t){switch(e){case"number":return o.a.createElement(y.FormattedNumber,{value:t});case"text":return Object(mh.a)(t)?o.a.createElement("a",{href:"mailto:".concat(t)},t):Number(t)?t:Object(dh.a)(t)?o.a.createElement("a",{href:Object(bh.a)(t,"//"),target:"_blank"},t):t;case"url":return Object(mh.a)(t)?o.a.createElement("a",{href:"mailto:".concat(t)},t):o.a.createElement("a",{href:Object(bh.a)(t,"//"),target:"_blank"},t);default:return t}}(r,t):function(e,t){var n=e,r=t;switch(kh(t)&&(n="url",r=Object(bh.a)(r,"//")),n){case"url":return o.a.createElement("a",{href:r,target:"_blank"},t);case"number":return o.a.createElement(y.FormattedNumber,{value:t});default:return t}}(r,t);return o.a.createElement(Xo.b,null,i)}},{key:"renderEditView",value:function(){var e=this.props,t=e.value,n=e.placeholder,r=null!=t?this.state.displayValue||t.toString():"";return o.a.createElement(hh,{ref:this.editFieldRef,type:this.props.type,value:r,placeholder:n,onChange:this.onChange,invalidMessage:this.props.invalidMessage||(this.state.showValidationMessage?this.state.invalidMessage:null)})}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEnter:this.onConfirm,onEscape:this.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();Eh.displayName="SingleLineTextInlineEditView",Eh.displayName="SingleLineTextInlineEditView",Eh.defaultProps={value:null,noValueText:null,isEditable:!1,isEditing:!1,invalidMessage:null,type:"text",isMobile:!1};var Sh=Object(y.injectIntl)(Eh),Ch=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,additionalProps:function(e,t){return{noValueText:t.formatMessage(rl.noValue),type:"number"}}}})(Sh),Ph=n("./node_modules/@atlaskit/icon/glyph/people-group.js"),Ih=n.n(Ph);function xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _h=Object(y.defineMessages)({placeholder:{id:"issue.organizations.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Organizations",description:"Empty state text when no organizations is provided."},organizationIconLabel:{id:"issue.organizations.organization-icon-label",defaultMessage:"Organization icon",description:"Organization icon label"}});function Mh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Th(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ah=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mh(Object(n),!0).forEach(function(t){Th(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({value:e.id,content:e.name,elemBefore:o.a.createElement(Ih.a,null)},Object(M.f)()?{}:{tag:{appearance:"rounded",elemBefore:o.a.createElement(Ih.a,null)}})},Dh=function(e){return e?e.map(Ah):[]},Lh=function(e){return e&&e.map(function(e){return{id:e.value,name:e.content}})},Nh=function(e){return[{items:e.map(Ah)}]};function Rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vh=Object(lo.a)(function(e){return function(t){return e?Object(So.c)("".concat(e).concat(t)).then(Nh):Promise.resolve([])}}),Uh=function(e){return function(e,t,n,r){return Object(So.j)(Object(Wb.f)(e,t),{body:JSON.stringify({fields:xh({},n,r.map(function(e){return Number(e.id)}))})})}(e.baseUrl,e.issueKey,e.fieldMetaKey,e.value)},Bh=function(e){return e&&Array.isArray(e)?e.map(function(e){return e.id}).join(","):e},Kh=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Dh,transformToStateValue:Lh,saveField:Uh,additionalProps:function(e,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rh(Object(n),!0).forEach(function(t){Fh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(M.f)()?{tagAppearance:"rounded",formatOptionLabel:function(e){return o.a.createElement(Rp,null,o.a.createElement(Ih.a,{label:n.formatMessage(_h.organizationIconLabel)}),o.a.createElement(Fp,null,e.content))}}:{},{fetchSuggestions:Vh(Object(io.d)(t.fieldId)(e)),placeholder:n.formatMessage(_h.placeholder),noValueText:n.formatMessage(rl.noValue),analyticsAttributeIdRetriever:Bh})}}})(function(e){return Object(M.f)()?o.a.createElement(nd,e):o.a.createElement(pf,e)}),Wh=Object(no.createSelector)(Object(io.n)(so.j),function(e){return null!==e?e:void 0}),Hh=n("./node_modules/react-select/dist/react-select.esm.js"),zh=n("./node_modules/@atlaskit/select/AsyncSelect.js"),qh=n("./node_modules/lodash/debounce.js"),Gh=n.n(qh),Jh=Object(y.defineMessages)({menuHeader:{id:"issue.views.field.parent.edit.menuHeader",defaultMessage:"To set an epic as a parent, use the epic link instead.",description:"Text message to inform customers to use the Epic Link field instead of Parent Link."},noMatches:{id:"issue.views.field.parent.edit.noMatches",defaultMessage:"No Matches",description:"Label to display when there is no matches in the search result."},placeholder:{id:"issue.views.field.parent.edit.placeholder",defaultMessage:"Choose a parent to assign this issue to.",description:"Placeholder text on Parent Link custom field."}});function Qh(){var e=eg(["\n    color: ",";\n"]);return Qh=function(){return e},e}function Zh(){var e=eg(["\n    padding: ","px ","px ","px;\n"]);return Zh=function(){return e},e}function Yh(){var e=eg(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n"]);return Yh=function(){return e},e}function $h(){var e=eg(["\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n"]);return $h=function(){return e},e}function Xh(){var e=eg(["\n    margin-right: ","px;\n"]);return Xh=function(){return e},e}function eg(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var tg=a.default.img(Xh(),d.e),ng=a.default.div($h()),rg=a.default.div(Yh()),og=a.default.div(Zh(),d.e,2*d.e,2*d.e),ig=a.default.div(Qh(),vt.colors.N90);function ag(e){return(ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lg(e,t){return!t||"object"!==ag(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fg(e){return(fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pg(e,t){return(pg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dg=Object(y.injectIntl)(function(e){return o.a.createElement(Hh.d.MenuList,e,o.a.createElement(og,null,e.intl.formatMessage(Jh.menuHeader)),e.children)}),mg=function(e){var t=e.data.data;if(t){var n=t.issueType,r=t.summary,i=t.key,a=n.iconUrl;return o.a.createElement(Hh.d.Option,e,o.a.createElement(ng,null,o.a.createElement(tg,{src:a})," ",o.a.createElement(rg,null,i," ",r)))}return null},bg=Object(y.injectIntl)(function(e){var t=e.data.data,n=t?t.label:o.a.createElement(ig,null,e.intl.formatMessage(Jh.placeholder));return o.a.createElement(Hh.d.SingleValue,e,n)}),yg=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=lg(this,(e=fg(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props.value,r=t.hasEpicLinkFieldDependency,o=t.showField,i=null!=e?e.data:null,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sg(Object(n),!0).forEach(function(t){cg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({data:i,value:i?i.key:null},{hasEpicLinkFieldDependency:r},{},{showField:o});n.props.onChange(a),n.props.onConfirm(a)},n.debouncedLoadOptions=Gh()(function(e,t){n.props.loadOptions(e).then(t,function(){t([])})},300),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pg(e,t)}(t,r["Component"]),function(e,t,n){t&&ug(e.prototype,t),n&&ug(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.portalElement,r=e.menuPlacement,i=e.intl.formatMessage;return o.a.createElement(zh.a,{value:t,autoFocus:!0,defaultOptions:!0,components:{MenuList:dg,Option:mg,SingleValue:bg},menuPortalTarget:n,menuPlacement:r,onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==t.data,noOptionsMessage:function(){return i(Jh.noMatches)},cacheOptions:!0})}}]),t}();yg.displayName="EditableParentLinkField";var hg=Object(y.injectIntl)(yg),gg=Object(y.defineMessages)({label:{id:"issue.views.field.parent.label",defaultMessage:"Parent link",description:"Field label. Represents link to an issue parent."}}),vg=Object(y.defineMessages)({epicLinkExists:{id:"issue.views.field.parent.epic-link-exists-message.epicLinkExists",defaultMessage:"Cannot use parent link when epic link is set.",description:"Field error message. Shows that a user cannot use parent link field, when epic link is set."}});function Og(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    color: ",";\n"]);return Og=function(){return e},e}var jg=a.default.div(Og(),vt.colors.N90),wg=function(e){var t=e.intl.formatMessage;return o.a.createElement(jg,null,t(vg.epicLinkExists))};wg.displayName="EpicLinkExistsMessage";var kg=Object(y.injectIntl)(wg);function Eg(){var e=Ig(["\n    margin-right: ","px;\n"]);return Eg=function(){return e},e}function Sg(){var e=Ig(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return Sg=function(){return e},e}function Cg(){var e=Ig(["\n    margin-right: ","px;\n    cursor: pointer;\n"]);return Cg=function(){return e},e}function Pg(){var e=Ig(["\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n    white-space: nowrap;\n"]);return Pg=function(){return e},e}function Ig(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xg=a.default.div(Pg()),_g=a.default.a(Cg(),d.e),Mg=a.default.div(Sg()),Tg=a.default.img(Eg(),d.e),Ag=function(e){var t=e.showError,n=e.value,r=e.noValueText;if(t)return o.a.createElement(kg,null);if(n.data){var i=n.data,a=i.key,s=i.summary,c=i.issueType.iconUrl,u=i.url;return o.a.createElement(xg,null,o.a.createElement(Tg,{src:c}),o.a.createElement(_g,{href:u,target:"_blank"},a),o.a.createElement(Mg,null,s))}return o.a.createElement(Xo.c,null,r)};Ag.displayName="ParentViewField";var Dg=Ag;function Lg(e){return(Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ng(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rg(e,t){return!t||"object"!==Lg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fg(e){return(Fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vg(e,t){return(Vg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ug=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Rg(this,(e=Fg(t)).call.apply(e,[this].concat(o)))).shouldShowError=function(){return n.props.hasEpic&&n.props.value.hasEpicLinkFieldDependency},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vg(e,t)}(t,r["Component"]),function(e,t,n){t&&Ng(e.prototype,t),n&&Ng(e,n)}(t,[{key:"renderEditableField",value:function(){var e=this.props,t=e.onChange,n=e.onConfirm,r=e.fetchSuggestions,i=e.value,a=e.portalElement,s=e.menuPlacement;return this.shouldShowError()?null:o.a.createElement("span",null,o.a.createElement(hg,{value:i,loadOptions:r,portalElement:a,menuPlacement:s,onChange:t,onConfirm:n}))}},{key:"render",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.value,r=e.noValueText,i=e.isEditing,a=e.onConfirm,s=e.onCancel,c=e.onEditRequest,u=e.isMobile,l=t(gg.label);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,l)),o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:l,readView:o.a.createElement(Dg,{noValueText:r,value:n,showError:this.shouldShowError()}),editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:i,onConfirm:a,onCancel:s,onEditRequested:c,isFitContainerWidthReadView:!u})))}}]),t}();Ug.displayName="ParentField";var Bg=Object(y.injectIntl)(Ug),Kg=function(e){return e};function Wg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hg(){return(Hg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zg(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var qg=Object(lo.a)(function(e,t,n,r){return function(o){return n?Object(So.i)("".concat(e,"/rest/jpo/1.0/parent/suggest"),{body:JSON.stringify({query:o,projectId:t,issueTypeId:n,maxResults:100})}).then(function(t){return function(e,t,n){if(!e||!e.issues||e.issues.length<=0)return[];var r=e.projects,o=e.issueTypes;return e.issues.map(function(e){var i=r.filter(function(t){return t.id===e.projectId})[0].key,a="".concat(i,"-").concat(e.issueKey),s=o.filter(function(t){return+t.id===e.issueTypeId})[0].iconUrl;return{data:{key:a,summary:e.issueSummary,value:a,label:"".concat(a," ").concat(e.issueSummary),issueType:{id:e.issueTypeId,iconUrl:"".concat(t).concat(s)},url:"".concat(t,"/browse/").concat(a)},hasEpicLinkFieldDependency:n.hasEpicLinkFieldDependency,showField:n.showField,value:a}})}(t,e,r)}):[]}}),Gg=function(e){var t=e.epic,n=e.isVisible,r=(e.intl,zg(e,["epic","isVisible","intl"]));if(!n)return null;var i=null!=t;return o.a.createElement(Bg,Hg({hasEpic:i},r))};Gg.displayName="ParentView";var Jg=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:function(e,t){return function(e,t){return function(e,t){return{hasEpicLinkFieldDependency:e.hasEpicLinkFieldDependency,showField:e.showField,value:e.data&&e.data.key?e.data.key:null,data:e.data?{key:e.data.key,value:e.data.key,summary:e.data.summary,url:"".concat(t,"/browse/").concat(e.data.key),label:"".concat(e.data.key," ").concat(e.data.summary),issueType:e.data.issueType?{iconUrl:"".concat(t).concat(e.data.issueType.iconUrl),id:e.data.issueType.id}:e.data.issueType}:null}}(e,t.baseUrl)}(e,t)},transformToStateValue:Kg,additionalProps:function(e,n){return{fetchSuggestions:qg(Object(w.f)(e),Object(k.B)(e),Object(gd.d)(e),Object(io.n)(t.fieldId)(e)),noValueText:n.formatMessage(rl.noValue),epic:Wh(e),isVisible:yS(t.fieldId)(e),portalElement:wS(t.fieldId)(e)?Do()||document.body:void 0}},saveField:function(e){var t=e.baseUrl,n=e.issueKey,r=e.fieldMetaKey,o=e.value;return Object(So.j)(Object(Wb.f)(t,n),{body:JSON.stringify({fields:Wg({},r,o&&o.data?o.data.key:null)})})}}})(Gg),Qg=n("./src/packages/platform/utils/types/src/index.js");function Zg(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yg(e){return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xg=function(e){return e.map(function(e){return{id:Object(Qg.toAccountId)(e.id),accountId:Object(Qg.toAccountId)(e.id),displayName:e.name,avatarUrls:$g({},"24x24",e.avatarUrl)}})},ev=function(e){return Array.isArray(e)?e.reduce(function(e,t){var n=function(e){if(!e||"object"!==Yg(e)||!e.accountId||!e.displayName)return null;var t="";return e.avatarUrls&&"object"===Yg(e.avatarUrls)&&(t=String(e.avatarUrls["24x24"])),{id:String(e.accountId),name:String(e.displayName),type:"user",fixed:!1,avatarUrl:t}}(t);return n?[].concat(Zg(e),[n]):e},[]):[]},tv=n("./src/packages/project-settings/people-field/src/index.js"),nv=Object(y.defineMessages)({placeholderMulti:{id:"issue.people.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Choose people",description:"This is the placeholder of the user picker in multi mode"},placeholderSingle:{id:"issue.people.text-for-edit-view-when-no-value-is-provided-single-mode",defaultMessage:"Choose a person",description:"This is the placeholder of the user picker in single mode"},singleValueValidationError:{id:"issue.people.single-value-validation-error",defaultMessage:"You can only add one person to this field",description:"This error message will be shown if user tries to add multiple people to a field that allows only one person"}});function rv(e){return(rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iv(e,t){return!t||"object"!==rv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function av(e){return(av=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sv(e,t){return(sv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cv=Object(lo.a)(function(e){return e.map(function(e){return{value:e.id,content:e.name,elemBefore:o.a.createElement(Ws.a,{size:"xsmall",src:e.avatarUrl})}})}),uv=function(e){return!e||!1!==e.isMulti},lv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),iv(this,av(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sv(e,t)}(t,r["Component"]),function(e,t,n){t&&ov(e.prototype,t),n&&ov(e,n)}(t,[{key:"isValid",value:function(){var e=this.props,t=e.configuration,n=e.value;return!uv(t)&&n.length>1}},{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.intl,r=e.isMobile;return o.a.createElement(Iu,{value:cv(t),noValueText:n.formatMessage(rl.noValue),tagAppearance:"rounded",shouldHideLinks:r,isUserTag:!0})}},{key:"renderEditView",value:function(){var e=this.props,t=e.onChange,n=e.value,r=e.baseUrl,i=e.intl,a=e.configuration,s=uv(a)||n.length>1;return o.a.createElement(tv.a,{baseUrl:r,isMulti:s,autoFocus:!0,isInvalid:this.isValid(),isInputDisabled:this.isValid(),invalidMessage:i.formatMessage(nv.singleValueValidationError),placeholder:i.formatMessage(s?nv.placeholderMulti:nv.placeholderSingle),isDisabled:!1,appearance:"compact",onChange:t,value:n})}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.isEditable,r=e.isEditing,i=e.isMobile,a=e.onConfirm,s=e.onCancel,c=e.onEditRequest,u=e.intl,l=e.value,f=e.configuration,p=!uv(f)&&l.length<=1;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,t)),o.a.createElement(Wo,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:r,shouldConfirmOnEnter:p,isValid:!r||this.isValid(),onConfirm:a,onCancel:s,areActionButtonsHidden:p,onEditRequested:c,isFitContainerWidthReadView:!i,editButtonLabel:u.formatMessage(Fo.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:u.formatMessage(Fo.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:u.formatMessage(Fo.a.cancelButtonLabel,{fieldName:t})}))}}]),t}();lv.displayName="People",lv.defaultProps={label:"",isEditable:!1,isEditing:!1,isMobile:!1};var fv=Object(Ro.a)(function(e,t){var n=t.fieldId;return{fieldId:n,transformFromStateValue:ev,transformToStateValue:Xg,additionalProps:function(e){var t=Object(io.p)(n)(e)||{};return{baseUrl:Object(Qg.toBaseUrl)(Object(w.f)(e)),configuration:t.configuration||{}}}}})(Object(y.injectIntl)(lv)),pv=function(e){return{content:e.name,value:e.id,iconUrl:e.iconUrl,elemBefore:o.a.createElement("img",{src:e.iconUrl,alt:"",width:2*d.e,height:2*d.e,role:"none"})}},dv=function(e){return e&&pv(e)},mv=function(e){return e&&{name:e.content,id:e.value,iconUrl:e.iconUrl}},bv=function(e){return[{items:e.map(pv)}]},yv=Object(y.defineMessages)({placeholder:{id:"issue.priority.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select priority",description:""}}),hv=Object(lo.a)(function(e){return function(){return Promise.resolve(e).then(bv)}}),gv=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:dv,transformToStateValue:mv,additionalProps:function(e,n){return{fetchSuggestions:hv(Object(io.c)(t.fieldId)(e)),placeholder:n.formatMessage(yv.placeholder),noValueText:n.formatMessage(rl.noValue),portalElement:wS(t.fieldId)(e)?Do()||document.body:void 0}}}})(function(e){return Object(M.i)()?o.a.createElement(Id,e):o.a.createElement(Gd,e)}),vv=n("./node_modules/@atlaskit/select/RadioSelect.js");function Ov(e){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wv(e,t){return!t||"object"!==Ov(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kv(e){return(kv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ev(e,t){return(Ev=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wv(this,kv(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ev(e,t)}(t,r["Component"]),function(e,t,n){t&&jv(e.prototype,t),n&&jv(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(Wu,{validationState:this.props.invalidMessage?"error":null,validationMessage:this.props.invalidMessage},o.a.createElement(vv.a,{menuPortalTarget:this.props.portalElement,options:this.props.options,placeholder:this.props.placeholder,onChange:this.props.onChange,value:this.props.value,tabSelectsValue:!1,autoFocus:!0}))}}]),t}();function Cv(e){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pv(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Iv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xv(e,t){return!t||"object"!==Cv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _v(e){return(_v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mv(e,t){return(Mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Sv.displayName="RadioFieldView",Sv.displayName="RadioFieldView",Sv.defaultProps={value:null,options:[],placeholder:null,invalidMessage:null};var Tv=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=xv(this,(e=_v(t)).call.apply(e,[this].concat(o)))).emptyOption={label:n.props.intl.formatMessage(rl.noValue)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mv(e,t)}(t,r["Component"]),function(e,t,n){t&&Iv(e.prototype,t),n&&Iv(e,n)}(t,[{key:"getOptions",value:function(){var e=this.props,t=e.options;return e.value?[this.emptyOption].concat(Pv(t)):t}},{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.noValueText;return t?t.label:o.a.createElement(Xo.c,null,n)}},{key:"renderEditView",value:function(){return this.props.isEditable?o.a.createElement(Sv,{portalElement:this.props.portalElement,value:this.props.value,options:this.getOptions(),onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage}):null}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.onCancel,r=e.isEditing,i=e.onConfirm,a=e.onEditRequest,s=e.isMobile,c=e.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,t)),o.a.createElement(T.a,{onEscape:n},o.a.createElement(Wo,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:this.renderEditView(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:r,onConfirm:i,onCancel:n,onEditRequested:a,isFitContainerWidthReadView:!s,editButtonLabel:c.formatMessage(Fo.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:c.formatMessage(Fo.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:c.formatMessage(Fo.a.cancelButtonLabel,{fieldName:t})})))}}]),t}();Tv.displayName="RadioInlineEditView",Tv.displayName="RadioInlineEditView",Tv.defaultProps={options:[],value:null,label:"",placeholder:null,noValueText:null,isEditable:!1,isEditing:!1,isMobile:!1,invalidMessage:null};var Av=Object(y.injectIntl)(Tv),Dv=function(e){return{label:e.value,value:e.id}},Lv=function(e){return e?Dv(e):null},Nv=function(e){return e&&void 0!==e.value?{id:e.value,value:e.label}:null},Rv=Object(y.defineMessages)({placeholder:{id:"issue.radio-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}",description:""}}),Fv=bu()(function(e){return function(e){return e&&e.map(Dv)||[]}(e)}),Vv=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Lv,transformToStateValue:Nv,additionalProps:function(e,n){return{portalElement:wS(t.fieldId)(e)?Do()||document.body:void 0,options:Fv(Object(io.c)(t.fieldId)(e)),placeholder:n.formatMessage(Rv.placeholder,{fieldName:Object(io.m)(t.fieldId)(e)}),noValueText:n.formatMessage(rl.noValue)}}}})(Av);function Uv(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Bv(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var Kv=function(e,t){return!!e&&!!t&&t.toLowerCase().startsWith(e.toLowerCase())},Wv=Object(lo.a)(function(e){return{avatarUrl:"",name:e,id:null}}),Hv=Object(lo.a)(function(e){return[Wv(e)]}),zv=Object(lo.a)(function(e,t,n){return function(){var r=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Bv(i,r,o,a,s,"next",e)}function s(e){Bv(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function r(o){var i,a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",[]);case 2:return i=!n&&Kv(o,t)?[Wv(t)]:[],r.next=5,Object(So.c)("".concat(e).concat(o));case 5:return a=r.sent,s=a.map(cc),r.abrupt("return",[].concat(i,Uv(s)));case 8:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()}),qv=Object(y.defineMessages)({noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous",description:"Represents an anonymous user on this Jira instance"}}),Gv=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:cc,transformToStateValue:uc,additionalProps:function(e,n){var r=Object(io.A)(t.fieldId)(e),o=n.formatMessage(qv.noReporter);return{portalElement:wS(t.fieldId)(e)?Do()||document.body:void 0,fetchSuggestions:zv(Object(io.d)(t.fieldId)(e),o,r),emptyOption:r?void 0:Wv(o),initialOptions:r?void 0:Hv(o),fieldId:"reporter"}}}})(sc),Jv=n("./node_modules/@atlaskit/icon/glyph/star.js"),Qv=n.n(Jv),Zv=n("./node_modules/@atlaskit/icon/glyph/star-filled.js"),Yv=n.n(Zv),$v=n("./node_modules/lodash/range.js"),Xv=n.n($v),eO=Object(no.createSelector)(k.e,function(e){return e.requestPanelMetadata.channel}),tO=Object(no.createSelector)(k.e,function(e){return e.requestPanelMetadata.requestUrl||""}),nO=Object(no.createSelector)(k.e,function(e){return e.requestPanelMetadata.csatComment||""}),rO=Object(io.e)(oo.Z),oO=Object(no.createSelector)(rO,function(e){return e&&e.renderedValue});function iO(){var e=cO(["\n            margin: -","px 0;\n            padding: 10px 0;\n        "]);return iO=function(){return e},e}function aO(){var e=cO(["\n    height: 20px;\n    color: #6c798f;\n    ",";\n"]);return aO=function(){return e},e}function sO(){var e=cO(["\n    max-width: 220px;\n    padding-right: ","px;\n    margin-right: -","px;\n    margin-bottom: ","px;\n    max-height: 240px;\n    overflow: auto;\n    ",";\n"]);return sO=function(){return e},e}function cO(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var uO=a.default.div(sO(),d.e,2*d.e,d.e,Object(Xo.h)("&")),lO=a.default.div(aO(),function(e){return!e.hasComment&&Object(a.css)(iO(),2*d.e)}),fO=Object(eo.a)([Object(i.connect)(function(e){return{feedbackDate:oO(e),comment:nO(e)}},{})])(function(e){var t=e.feedbackDate,n=e.comment;return o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(uO,null,n),t&&o.a.createElement(lO,{hasComment:!!n},t))});function pO(){var e=mO(["\n    margin-top: ","px;\n    cursor: pointer;\n"]);return pO=function(){return e},e}function dO(){var e=mO(["\n    margin-top: 0;\n    margin-bottom: ","px;\n"]);return dO=function(){return e},e}function mO(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var bO=a.default.div(dO(),3*d.e),yO=a.default.div(pO(),d.e);function hO(e){return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vO(e,t){return!t||"object"!==hO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OO(e){return(OO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jO(e,t){return(jO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wO=5,kO=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=vO(this,(e=OO(t)).call.apply(e,[this].concat(i)))).state={shouldShowDetails:!1},n.onToggle=function(){return n.setState({shouldShowDetails:!n.state.shouldShowDetails})},n.renderStar=function(e){var t=Xv()(wO).map(function(t){return t<e?o.a.createElement(Yv.a,{key:t,primaryColor:vt.colors.Y300}):o.a.createElement(Qv.a,{key:t,primaryColor:vt.colors.N60})});return o.a.createElement(o.a.Fragment,null,t)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jO(e,t)}(t,r["Component"]),function(e,t,n){t&&gO(e.prototype,t),n&&gO(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.fieldName,n=e.rating;return e.isVisible&&o.a.createElement(bO,null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,t)),o.a.createElement(lm.a,{onClose:this.onToggle,content:o.a.createElement(fO,null),isOpen:this.state.shouldShowDetails},o.a.createElement(yO,{onClick:this.onToggle},this.renderStar(n))))}}]),t}();kO.displayName="RequestFeedback",kO.defaultProps={isVisible:!0};var EO=function(e,t){var n=Object(io.o)(t)(e);return n&&n.rating},SO=Object(eo.a)([Object(i.connect)(function(e,t){return{rating:EO(e,t.fieldId),fieldName:Object(io.m)(t.fieldId)(e),isVisible:bS(t.fieldId)(e)}},{})])(kO);function CO(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var PO=function(e,t){return"".concat(e,"/rest/servicedesk/lingo-integration/1/request-language/").concat(t)},IO=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){CO(i,r,o,a,s,"next",e)}function s(e){CO(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Issue ID not available");case 2:return e.abrupt("return",Object(So.j)(PO(t,n),{body:JSON.stringify({languageCode:r})}));case 3:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),xO=Object(y.defineMessages)({placeholder:{id:"issue.request-language.placeholder",defaultMessage:"Select Request language",description:"Empty state text when the language request field is empty."},languageUnknown:{id:"issue.request-language.languageUnknown",defaultMessage:"Language unknown",description:"An option in the language request selector, which indicates that the request's language is unknown"}});function _O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var MO=function(e){return{content:e.displayName,value:e.languageCode}},TO=Object(lo.a)(function(e){return{displayName:e.formatMessage(xO.languageUnknown),languageCode:""}}),AO=function(e,t,n){return MO(e||TO(n))},DO=function(e){return{displayName:e.content,languageCode:e.value.toString()}};function LO(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var NO=Object(lo.a)(function(e,t){return function(){return Promise.resolve(function(e,t){return[{items:[TO(t)].concat(_O(e)).map(MO)}]}(e,t))}}),RO=function(e,t){var n=e.baseUrl,r=e.value.languageCode,o=Object(w.A)(t);return IO(n,o,r)},FO=function(e){return e&&e.languageCode},VO=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:AO,transformToStateValue:DO,saveField:RO,additionalProps:function(e,n){return{fetchSuggestions:NO(Object(io.c)(t.fieldId)(e),n),shouldHide:!mS(t.fieldId)(e),hasAutocomplete:!0,placeholder:n.formatMessage(xO.placeholder),analyticsAttributeIdRetriever:FO}}}})(function(e){var t=e.shouldHide,n=LO(e,["shouldHide"]);return t?null:Object(M.g)()?o.a.createElement(Id,n):o.a.createElement(Gd,n)}),UO=Object(y.defineMessages)({placeholder:{id:"issue.request-participants.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Request Participants",description:"Empty state text when no request participants is provided."}});function BO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function KO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BO(Object(n),!0).forEach(function(t){WO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HO=function(e){return e?e.map(function(e){return KO({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrls["24x24"],elemBefore:o.a.createElement(Ws.a,{size:"xsmall",src:e.avatarUrls["24x24"]})},Object(M.f)()?{}:{tag:{appearance:"rounded",elemBefore:o.a.createElement(Ws.a,{size:"xsmall",src:e.avatarUrls["24x24"]})}})}):[]},zO=function(e){return e&&e.map(function(e){return{displayName:e.content,id:Object(Qg.toAccountId)(e.value),accountId:Object(Qg.toAccountId)(e.value),avatarUrls:WO({},"24x24",e.avatarUrl)}})},qO=function(e){return[{items:(e&&e.users||[]).map(function(e){return KO({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrl},Object(M.f)()?{}:{elemBefore:o.a.createElement(Ws.a,{size:"small",src:e.avatarUrl})})})}]};function GO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function JO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QO=Object(lo.a)(function(e){return function(t){return e?Object(So.c)("".concat(e).concat(t)).then(qO):Promise.resolve([])}}),ZO=function(e){return e&&Array.isArray(e)?e.map(function(e){return e.accountId}).join(","):e},YO=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:HO,transformToStateValue:zO,additionalProps:function(e,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GO(Object(n),!0).forEach(function(t){JO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({fetchSuggestions:QO(Object(io.d)(t.fieldId)(e)),placeholder:n.formatMessage(UO.placeholder),noValueText:n.formatMessage(rl.noValue)},Object(M.f)()?{tagAppearance:"rounded",formatOptionLabel:function(e){return o.a.createElement(Rp,null,o.a.createElement(Ws.a,{size:"small",src:e.avatarUrl}),o.a.createElement(Fp,null,e.content))}}:{},{analyticsAttributeIdRetriever:ZO})}}})(function(e){return Object(M.f)()?o.a.createElement(nd,e):o.a.createElement(pf,e)}),$O=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,additionalProps:function(e,t){return{noValueText:t.formatMessage(rl.noValue),type:"text"}}}})(Sh),XO=function(e){return{value:e.id,content:e.value,iconUrl:e.iconUrl,elemBefore:null!==e.iconUrl&&void 0!==e.iconUrl&&""!==e.iconUrl?o.a.createElement("img",{src:e.iconUrl,alt:"",width:2*d.e,height:2*d.e,role:"none"}):void 0}},ej=function(e){return e&&XO(e)},tj=function(e){return e&&{id:e.value,value:e.content,iconUrl:e.iconUrl}},nj=function(e){return e&&[{items:e.map(XO)}]||[]},rj=Object(y.defineMessages)({placeholder:{id:"issue.single-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}",description:""}}),oj=bu()(function(e){return function(){return Promise.resolve(e).then(nj)}}),ij=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:ej,transformToStateValue:tj,additionalProps:function(e,n){return{fetchSuggestions:oj(Object(io.c)(t.fieldId)(e)),placeholder:n.formatMessage(rj.placeholder,{fieldName:Object(io.m)(t.fieldId)(e)}),noValueText:n.formatMessage(rl.noValue),allowEmptyValue:!0,hasAutocomplete:!0,portalElement:wS(t.fieldId)(e)?Do()||document.body:void 0}}}})(function(e){return Object(M.e)()?o.a.createElement(Id,e):o.a.createElement(Gd,e)}),aj=Object(no.createSelector)(function(e){return e.sla},function(e){return e.issueUpdatedTimestamp}),sj=n("./src/packages/servicedesk/sla-panel/src/index.js");function cj(e){return(cj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lj(e,t){return!t||"object"!==cj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fj(e){return(fj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pj(e,t){return(pj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dj=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lj(this,fj(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pj(e,t)}(t,r["Component"]),function(e,t,n){t&&uj(e.prototype,t),n&&uj(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.baseUrl,r=e.issueKey,i=e.locale,a=e.issueUpdatedTimestamp;return t&&o.a.createElement("div",{id:"sla-panel"},o.a.createElement(sj.a,{baseUrl:n,issueKey:r,locale:i,issueUpdatedTimestamp:a}))}}]),t}();dj.displayName="SlaPanel",dj.defaultProps={isVisible:!0};var mj=Object(eo.a)([Object(i.connect)(function(e){return{baseUrl:Object(w.f)(e),issueKey:Object(w.B)(e),locale:Object(w.D)(e),issueUpdatedTimestamp:aj(e),isVisible:Object(va.f)(e)}},{})])(dj),bj=n("./src/packages/issue/issue-view/src/actions/issue-navigation-action-creator.js"),yj=function(e){return Object(no.createSelector)(va.h,k.l,Object(io.y)(e),function(e,t,n){return e.canScheduleIssues&&t&&n})},hj=function(e,t){return"".concat(e,"/secure/GHGoToBoard.jspa?sprintId=").concat(t)},gj=n("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js");function vj(){var e=Cj(["\n    white-space: nowrap;\n"]);return vj=function(){return e},e}function Oj(){var e=Cj(["\n    ",";\n"]);return Oj=function(){return e},e}function jj(){var e=Cj(["\n    ",";\n"]);return jj=function(){return e},e}function wj(){var e=Cj(["\n    font-weight: 500;\n"]);return wj=function(){return e},e}function kj(){var e=Cj(["\n    margin-top: ","px;\n    display: flex;\n    justify-content: space-between;\n    max-width: 300px;\n"]);return kj=function(){return e},e}function Ej(){var e=Cj(["\n    padding: ","px;\n"]);return Ej=function(){return e},e}function Sj(){var e=Cj(["\n    margin-left: ","px;\n"]);return Sj=function(){return e},e}function Cj(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Pj=a.default.div(Sj(),d.e),Ij=a.default.span(Ej(),d.e/2),xj=a.default.div(kj(),d.e),_j=a.default.span(wj()),Mj="\n    margin-right: ".concat(3*d.e,"px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"),Tj=a.default.a(jj(),Mj),Aj=a.default.span(Oj(),Mj),Dj=a.default.div(vj());function Lj(e){return(Lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rj(e,t){return!t||"object"!==Lj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fj(e){return(Fj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vj(e,t){return(Vj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Uj=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Rj(this,(e=Fj(t)).call.apply(e,[this].concat(i)))).state={isDialogOpen:!1},n.handleButtonClick=function(e){n.setState({isDialogOpen:!n.state.isDialogOpen}),e.stopPropagation()},n.handleDialogClose=function(e){n.setState({isDialogOpen:e.isOpen})},n.handleDialogClick=function(e){e.stopPropagation()},n.handleDialogMouseDown=function(e){e.preventDefault(),e.stopPropagation()},n.renderInlineDialogContent=function(){return o.a.createElement("div",null,o.a.createElement(_j,null,n.props.closedSprintsLabel),n.props.closedSprints.map(function(e){return o.a.createElement(xj,{key:e.name},n.props.shouldHideLinks?o.a.createElement(Aj,null,e.name):o.a.createElement(Tj,{href:e.href},e.name),o.a.createElement(Dj,null,e.endDate))}))},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vj(e,t)}(t,r["Component"]),function(e,t,n){t&&Nj(e.prototype,t),n&&Nj(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(Pj,{onClick:this.handleDialogClick,onMouseDown:this.handleDialogMouseDown},o.a.createElement(lm.a,{content:this.renderInlineDialogContent(),isOpen:this.state.isDialogOpen,onClose:this.handleDialogClose,placement:"bottom"},o.a.createElement(D.b,{onClick:this.handleButtonClick,spacing:"none",isSelected:this.state.isDialogOpen},o.a.createElement(Ij,null,"+".concat(this.props.closedSprints.length)))))}}]),t}();function Bj(){var e=Hj(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return Bj=function(){return e},e}function Kj(){var e=Hj(["\n    display: flex;\n    align-items: center;\n    width: 100%;\n"]);return Kj=function(){return e},e}function Wj(){var e=Hj(["\n    margin: 2px -1px 2px 2px;\n"]);return Wj=function(){return e},e}function Hj(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Uj.displayName="ClosedSprintsView",Uj.defaultProps={closedSprints:[],closedSprintsLabel:null,shouldHideLinks:!1};var zj=a.default.div(Wj()),qj=a.default.div(Kj()),Gj=a.default.div(Bj());function Jj(e){return(Jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zj(e,t){return!t||"object"!==Jj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yj(e){return(Yj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $j(e,t){return($j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xj=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Zj(this,(e=Yj(t)).call.apply(e,[this].concat(i)))).state={isQueryEmpty:!n.props.value},n.onChange=function(e){n.props.onChange(e),n.props.onConfirm()},n.onQueryChanged=function(e){n.setState({isQueryEmpty:!e})},n.onConfirm=function(){n.state.isQueryEmpty&&n.props.allowEmptyValue&&n.props.onChange(null),n.props.onConfirm()},n.onSprintClick=function(e){n.props.rapidViewId&&n.props.value&&n.props.onSprintClicked(n.props.value.value),e.stopPropagation()},n.renderSprintContent=function(){var e=n.props,t=e.baseUrl,r=e.rapidViewId,i=e.value;return Object(gj.a)()&&r?i&&i.content:o.a.createElement("a",{href:null==r&&i?hj(t,i.value):void 0,onClick:n.onSprintClick},i&&i.content)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$j(e,t)}(t,r["Component"]),function(e,t,n){t&&Qj(e.prototype,t),n&&Qj(e,n)}(t,[{key:"renderReadView",value:function(){var e=this.props.value;return o.a.createElement(qj,null,o.a.createElement(Gj,null,e?this.renderSprintContent():o.a.createElement(Xo.c,null,this.props.noValueText)),this.props.closedSprints.length>0&&o.a.createElement(Uj,{closedSprints:this.props.closedSprints,closedSprintsLabel:this.props.closedSprintsLabel,shouldHideLinks:this.props.isMobile}))}},{key:"renderEditView",value:function(){return o.a.createElement(zj,null,o.a.createElement(Fd,{value:this.props.value,fetchSuggestions:this.props.fetchSuggestions,onChange:this.onChange,placeholder:this.props.placeholder,appearance:"subtle",isOpen:this.props.isEditing,invalidMessage:this.props.invalidMessage,hasAutocomplete:!0,onQueryChanged:this.onQueryChanged}))}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();Xj.displayName="SprintInlineEditView",Xj.displayName="SprintInlineEditView",Xj.defaultProps={value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null,isEditable:!1,isEditing:!1,closedSprints:[],closedSprintsLabel:null,allowEmptyValue:!1,isMobile:!1,baseUrl:""};var ew=Object(y.injectIntl)(Xj);function tw(e){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nw(){return(nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rw(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iw(e,t){return!t||"object"!==tw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aw(e){return(aw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sw(e,t){return(sw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cw=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=iw(this,(e=aw(t)).call.apply(e,[this].concat(i)))).onSprintClick=function(e){var t=n.props,r=t.rapidViewId,o=t.value,i=t.onSprintClicked;r&&o&&i(o.value),e.stopPropagation()},n.renderSprintContent=function(){var e=n.props,t=e.baseUrl,r=e.rapidViewId,i=e.value;return Object(gj.a)()&&r?i&&i.content:o.a.createElement("a",{href:null==r&&i?hj(t,i.value):void 0,onClick:n.onSprintClick},i&&i.content)},n.renderReadView=function(){var e=n.props,t=e.value,r=e.noValueText,i=e.closedSprints,a=e.closedSprintsLabel,s=e.isMobile;return o.a.createElement(qj,null,o.a.createElement(Gj,null,t?n.renderSprintContent():o.a.createElement(Xo.c,null,r)),i.length>0&&o.a.createElement(Uj,{closedSprints:i,closedSprintsLabel:a,shouldHideLinks:s}))},n.formatOptionLabel=function(e,t){return"menu"===t.context?o.a.createElement(_p,{option:e}):e.label},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sw(e,t)}(t,r["Component"]),function(e,t,n){t&&ow(e.prototype,t),n&&ow(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=(e.baseUrl,e.closedSprints,e.closedSprintsLabel,e.rapidViewId,e.onSprintClicked,rw(e,["baseUrl","closedSprints","closedSprintsLabel","rapidViewId","onSprintClicked"]));return o.a.createElement(Id,nw({},t,{renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0}))}}]),t}();cw.displayName="SprintInlineEditView",cw.displayName="SprintInlineEditView",cw.defaultProps={closedSprints:[],closedSprintsLabel:null};var uw=Object(y.defineMessages)({placeholder:{id:"issue.sprint.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Sprint",description:""},activeSprints:{id:"issue.sprint.active-heading",defaultMessage:"Active",description:""},futureSprints:{id:"issue.sprint.future-heading",defaultMessage:"Future",description:""},closedSprintsLabel:{id:"issue.sprint.text-for-closed-sprints-inline-dialog",defaultMessage:"{count} completed {count, plural, one {sprint} other {sprints}}",description:""}}),lw=function(e){return(e?e.find(function(e){return e.state&&"active"===e.state.toLowerCase()}):null)||null},fw=function(e){return{content:e.name,value:e.id}},pw=function(e){var t=lw(e),n=function(e){return(e?e.find(function(e){return e.state&&"future"===e.state.toLowerCase()}):null)||null}(e);return t&&fw(t)||n&&fw(n)},dw=function(e){return function(t){if(!t)return e;var n={name:t.content,id:t.value,state:"active"};return e.concat(n)}},mw=function(e){return{content:e.name,value:e.id,description:e.boardName}},bw=Object(lo.a)(function(e,t,n){return{name:n.name,href:hj(t,n.id),endDate:e.formatDate(n.endDate,{day:"2-digit",month:"short",year:"numeric"})}}),yw=function(e,t){var n=e.length;return n>0?t.formatMessage(uw.closedSprintsLabel,{count:n}):null};function hw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gw=Object(lo.a)(function(e,t){return function(n){return Object(So.c)("".concat(t,"/rest/greenhopper/1.0/sprint/picker?query=").concat(n,"&maxResults=10&maxActiveSprints=5")).then(function(t){return function(e,t){var n=e.suggestions||[],r=e.allMatches||[],o=n.concat(r),i=o.filter(function(e){return"ACTIVE"===e.stateKey}).map(mw),a=o.filter(function(e){return"FUTURE"===e.stateKey}).map(mw);return[{heading:t.formatMessage(uw.activeSprints),items:i},{heading:t.formatMessage(uw.futureSprints),items:a}]}(t,e)})}}),vw=Object(lo.a)(function(e,t,n){return function(e,t,n){return e.map(function(e){return bw(n,t,e)})}(e,t,n)}),Ow=Object(Ro.a)(function(e,t){var n=function(e){return Object(no.createSelector)(Object(io.p)(e),function(e){return e&&e.value?e.value.filter(function(e){return"closed"===e.state||"CLOSED"===e.state}):[]})}(t.fieldId)(e);return{fieldId:t.fieldId,transformFromStateValue:pw,transformToStateValue:dw(n),additionalProps:function(e,r){return{fetchSuggestions:gw(r,Object(w.f)(e)),closedSprints:vw(n,Object(w.f)(e),r),closedSprintsLabel:yw(n,r),placeholder:r.formatMessage(uw.placeholder),noValueText:r.formatMessage(rl.noValue),allowEmptyValue:!0,rapidViewId:Object(w.K)(e),baseUrl:Object(w.f)(e),isEditable:yj(t.fieldId)(e)}},additionalCallbacks:function(e){return{onSprintClicked:function(t){return e(Object(bj.d)(t))}}},saveField:function(e){var t=e.baseUrl,n=e.issueKey,r=e.fieldMetaKey,o=e.value,i=lw(o);return Object(So.j)(Object(Wb.f)(t,n),{body:JSON.stringify({fields:hw({},r,i?i.id:null)})})}}})(function(e){return Object(M.j)()?o.a.createElement(cw,e):o.a.createElement(ew,e)}),jw=n("./src/packages/platform/utils/fetch/src/utils.js"),ww=n("./src/packages/issue/issue-view/src/common/model/loading-stage-type.js"),kw=n("./node_modules/query-string/index.js");function Ew(e){return(Ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cw(e,t){return!t||"object"!==Ew(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pw(e){return(Pw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iw(e,t){return(Iw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xw(){var e=Mw(["\n    background-color: ",";\n    border-radius: 2em;\n    color: ",";\n    display: inline-block;\n    font-size: 12px;\n    font-weight: normal;\n    line-height: 1;\n    min-width: 1px;\n    padding: 0.16666666666667em 0.5em;\n    text-align: center;\n"]);return xw=function(){return e},e}function _w(){var e=Mw(["\n    height: 19px;\n"]);return _w=function(){return e},e}function Mw(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Tw=a.default.div(_w()),Aw=a.default.div(xw(),vt.colors.N30,vt.colors.N800),Dw=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Cw(this,(e=Pw(t)).call.apply(e,[this].concat(o)))).state={displayValue:null},n.onChange=function(e){n.setState({displayValue:e.target.value});var t=e.target.value?parseFloat(Number(e.target.value).toFixed(3)):null;n.props.onChange(t)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iw(e,t)}(t,r["Component"]),function(e,t,n){t&&Sw(e.prototype,t),n&&Sw(e,n)}(t,[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&(this.state.displayValue=null)}},{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.noValueText;return t||0===t?o.a.createElement(Tw,null,o.a.createElement(Aw,null,t)):o.a.createElement(Xo.c,null,n)}},{key:"renderEditView",value:function(){var e=this.props,t=e.value,n=e.invalidMessage,r=null==t?"":this.state.displayValue||t.toString();return o.a.createElement(hh,{type:"number",value:r,onChange:this.onChange,invalidMessage:n})}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEnter:this.props.onConfirm,onEscape:this.props.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();Dw.displayName="StoryPointEstimateInlineEditView",Dw.displayName="StoryPointEstimateInlineEditView",Dw.defaultProps={value:null,noValueText:null,isEditable:!1,isEditing:!1,invalidMessage:null,isMobile:!1};var Lw=Object(y.injectIntl)(Dw);function Nw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rw=Object(y.defineMessages)({negativeNumbersNotAllowed:{id:"issue.story-points.negative-numbers-not-allowed",defaultMessage:"Time for some positivity. Story point estimates can't be negative.",description:""}}),Fw=function(e,t){var n,r=Object(k.j)(t),o=e.baseUrl,i=e.fieldId,a=e.value;return a&&a<0?Promise.reject(new jw.a(Rw.negativeNumbersNotAllowed.id)):Object(So.i)("".concat(o,"/secure/AjaxIssueAction.jspa?decorator=none"),{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(kw.stringify)((n={},Nw(n,i,a),Nw(n,"issueId",r),Nw(n,"skipScreenCheck",!0),Nw(n,"atl_token",Object(w.S)(t)),Nw(n,"singleFieldEdit",!0),n))})},Vw=function(e,t,n){var r=Object(io.j)(n,t.formatMessage(Ro.b.defaultFallbackInvalidMessage))(e);return r===Rw.negativeNumbersNotAllowed.id?t.formatMessage(Rw.negativeNumbersNotAllowed):r},Uw=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,saveField:Fw,additionalProps:function(e,n){return{noValueText:n.formatMessage(rl.noValue),invalidMessage:Vw(e,n,t.fieldId),isEditable:Object(io.y)(t.fieldId)(e)&&Object(k.u)(e)!==ww.c&&Object(w.y)(e)}}}})(Lw),Bw=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),Kw=Object(y.defineMessages)({menuHeader:{id:"issue.views.field.team.edit.menuHeader",defaultMessage:"Plan-specific teams can only be selected through a Portfolio plan.",description:"Select menu header message."},noMatches:{id:"issue.views.field.team.edit.noMatches",defaultMessage:"No Matches",description:"Select menu message. Shows there is no issues found"},placeholder:{id:"issue.views.field.team.edit.placeholder",defaultMessage:"Choose a team to assign this issue to.",description:"Select menu placeholder."},sharedTeam:{id:"issue.context-items.team.shared-team",defaultMessage:"Shared Team",description:"Dropdown group header text. Represents options belong to the Shared Team group."},menuFooter:{id:"issue.context-items.team.edit.menuFooter",defaultMessage:"Showing 100 results. To display more results, please refine your search.",description:"Text indicates there are more search results and customer has to refine the text to display them."}});function Ww(){var e=Qw(["\n    color: ",";\n    font-size: 12px;\n    padding: ","px ","px;\n"]);return Ww=function(){return e},e}function Hw(){var e=Qw(["\n    padding: 0 ","px ","px ","px;\n    color: ",";\n    font-weight: bold;\n    font-size: 12px;\n"]);return Hw=function(){return e},e}function zw(){var e=Qw(["\n    padding: ","px ","px ","px;\n"]);return zw=function(){return e},e}function qw(){var e=Qw(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n"]);return qw=function(){return e},e}function Gw(){var e=Qw(["\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n    align-items: center;\n    justify-content: start;\n    padding: 0 ","px;\n"]);return Gw=function(){return e},e}function Jw(){var e=Qw(["\n    width: ","px;\n    height: ","px;\n    margin-right: ","px;\n"]);return Jw=function(){return e},e}function Qw(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Zw=a.default.img(Jw(),2*d.e,2*d.e,d.e),Yw=a.default.div(Gw(),d.e/2),$w=a.default.div(qw()),Xw=a.default.div(zw(),d.e,2*d.e,2*d.e),ek=a.default.div(Hw(),2*d.e,d.e,2*d.e,vt.colors.DN30),tk=a.default.div(Ww(),vt.colors.N90,d.e,2*d.e),nk=function(e){var t=e.intl.formatMessage,n=e.options,r=n.length>0&&n[0].moreResultsAvailable?o.a.createElement(tk,null,t(Kw.menuFooter)):null;return o.a.createElement(Hh.d.MenuList,e,o.a.createElement(Xw,null,t(Kw.menuHeader)),e.children,r)};nk.displayName="MenuListComponent";var rk=Object(y.injectIntl)(nk),ok=function(e){var t=e.data;if(t){var n=t.avatarUrl;return o.a.createElement(Hh.d.Option,e,o.a.createElement(Yw,null,o.a.createElement(Zw,{src:n||Wa.a})," ",o.a.createElement($w,null,e.children)))}return null},ik=function(e){var t=e.data,n=e.intl.formatMessage,r=t?t.label:o.a.createElement(Xo.c,null,n(Kw.placeholder));return o.a.createElement(Hh.d.SingleValue,e,r)};ik.displayName="SingleValueComponent";var ak=Object(y.injectIntl)(ik);function sk(e){return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ck(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uk(e,t){return!t||"object"!==sk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lk(e){return(lk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fk(e,t){return(fk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pk=function(e){return o.a.createElement(rk,e)};pk.displayName="MenuList";var dk=function(e){return o.a.createElement(ak,e)};dk.displayName="SingleValue";var mk=function(e){return o.a.createElement(ok,e)};mk.displayName="Option";var bk=Object(y.injectIntl)(function(e){return o.a.createElement(ek,null,e.intl.formatMessage(Kw.sharedTeam))}),yk=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=uk(this,(e=lk(t)).call.apply(e,[this].concat(o)))).onChange=function(e){n.props.onChange(e),n.props.onConfirm(e)},n.debouncedLoadOptions=Gh()(function(e,t){n.props.loadOptions(e).then(t,function(){t([])})},300),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fk(e,t)}(t,r["Component"]),function(e,t,n){t&&ck(e.prototype,t),n&&ck(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.portalElement,r=e.menuPlacement,i=e.intl.formatMessage;return o.a.createElement(zh.a,{value:t,autoFocus:!0,defaultOptions:!0,menuPortalTarget:n,menuPlacement:r,components:{MenuList:pk,Option:mk,SingleValue:dk,GroupHeading:bk},onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==t,noOptionsMessage:function(){return i(Kw.noMatches)},placeholder:i(Kw.placeholder),cacheOptions:!0})}}]),t}();yk.displayName="EditableTeamField";var hk=Object(y.injectIntl)(yk),gk=Object(y.defineMessages)({label:{id:"issue.views.field.team.label",defaultMessage:"Team",description:"Field label. Represents link to an issue team."}}),vk=n("./node_modules/@atlaskit/icon/glyph/share.js"),Ok=n.n(vk);function jk(){var e=Sk(["\n    width: ","px;\n    height: ","px;\n    color: ",";\n"]);return jk=function(){return e},e}function wk(){var e=Sk(["\n    vertical-align: middle;\n    width: ","px;\n    height: ","px;\n    margin-right: ","px;\n    display: inline-block;\n"]);return wk=function(){return e},e}function kk(){var e=Sk(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin-right: ","px;\n    display: inline-block;\n"]);return kk=function(){return e},e}function Ek(){var e=Sk(["\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n    white-space: nowrap;\n    align-items: center;\n    justify-content: start;\n"]);return Ek=function(){return e},e}function Sk(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ck=a.default.div(Ek()),Pk=a.default.div(kk(),d.e),Ik=a.default.img(wk(),3*d.e,3*d.e,d.e),xk=a.default.span(jk(),2*d.e,2*d.e,vt.colors.R500),_k=function(e){var t=e.value,n=e.noValueText;if(t){var r=t.label,i=t.isShared,a=t.avatarUrl,s=i?o.a.createElement(xk,null,o.a.createElement(Ok.a,{size:"small"})):null;return o.a.createElement(Ck,null,o.a.createElement(Ik,{src:a||Wa.a}),o.a.createElement(Pk,null,r),s)}return o.a.createElement(Xo.c,null,n)};_k.displayName="TeamViewField";var Mk=_k;function Tk(e){return(Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ak(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dk(e,t){return!t||"object"!==Tk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lk(e){return(Lk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nk(e,t){return(Nk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rk=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dk(this,Lk(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nk(e,t)}(t,r["Component"]),function(e,t,n){t&&Ak(e.prototype,t),n&&Ak(e,n)}(t,[{key:"renderEditableField",value:function(){var e=this.props,t=e.isEditable,n=e.isSubTask,r=e.fetchSuggestions,i=e.onChange,a=e.onConfirm,s=e.value,c=e.portalElement,u=e.menuPlacement;return t&&!n?o.a.createElement("span",null,o.a.createElement(hk,{value:s,loadOptions:r,portalElement:c,menuPlacement:u,onChange:i,onConfirm:a})):null}},{key:"render",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.value,r=e.noValueText,i=e.isEditing,a=e.onConfirm,s=e.onCancel,c=e.onEditRequest,u=e.isMobile,l=t(gk.label);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,l)),o.a.createElement(T.a,{onEscape:s},o.a.createElement(Wo,{isLabelHidden:!0,label:l,readView:o.a.createElement(Mk,{noValueText:r,value:n}),editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:i,onConfirm:a,onCancel:s,onEditRequested:c,isFitContainerWidthReadView:!u})))}}]),t}();Rk.displayName="TeamField";var Fk=Object(y.injectIntl)(Rk),Vk=function(e,t){return e?function(e,t){return{value:e.id,label:e.title,isShared:e.isShared,avatarUrl:e.avatarUrl?"".concat(t).concat(e.avatarUrl):""}}(e,t.baseUrl):null},Uk=function(e){return e?function(e){return{id:e.value,title:e.label,isShared:e.isShared,avatarUrl:e.avatarUrl?e.avatarUrl:""}}(e):null};function Bk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kk=Object(lo.a)(function(e){return function(t){return Object(So.i)("".concat(e,"/rest/teams/1.0/teams/find"),{body:JSON.stringify({query:t,excludedIds:[],maxResults:100})}).then(function(t){return function(e,t){return[{options:e.teams.map(function(e){return{value:e.id,label:e.title,isShared:e.shareable,avatarUrl:e.avatarUrl?"".concat(t).concat(e.avatarUrl):""}}),moreResultsAvailable:e.moreResultsAvailable}]}(t,e)})}}),Wk=function(e){var t=e.baseUrl,n=e.issueKey,r=e.fieldMetaKey,o=e.value,i=o&&o.id?o.id.toString():null;return Object(So.j)(Object(Wb.f)(t,n),{body:JSON.stringify({fields:Bk({},r,i)})})},Hk=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:Vk,transformToStateValue:Uk,additionalProps:function(e,n){return{fetchSuggestions:Kk(Object(w.f)(e)),noValueText:n.formatMessage(rl.noValue),portalElement:wS(t.fieldId)(e)?Do()||document.body:void 0,isSubTask:Object(Bw.c)(e)}},saveField:Wk}})(Fk);function zk(e){return(zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gk(e,t){return!t||"object"!==zk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jk(e){return(Jk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qk(e,t){return(Qk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zk=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=Gk(this,(e=Jk(t)).call.apply(e,[this].concat(i)))).state={isInputInvalid:!1,value:n.props.value},n.onChange=function(e){var t=e.target.value;n.setState({value:t,isInputInvalid:!1})},n.getDefaultTimeFormatValue=function(e){var t=e.trim();if(_(t)){var r=n.props.config.defaultUnit;t="".concat(t).concat(Mn(r))}return t},n.onConfirm=function(){var e=n.getDefaultTimeFormatValue(n.state.value);""===e||Object(x.a)(e)?(n.setState({isInputInvalid:!1}),n.props.onChange(e),n.props.onConfirm()):(n.setState({isInputInvalid:!0}),n.editFieldRef.current&&n.editFieldRef.current.focus())},n.onCancel=function(){n.props.onCancel()},n.onEditRequested=function(){n.setState({isInputInvalid:!1,value:n.props.value}),n.props.onEditRequest()},n.editFieldRef=Object(r.createRef)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qk(e,t)}(t,r["Component"]),function(e,t,n){t&&qk(e.prototype,t),n&&qk(e,n)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value})}},{key:"renderReadView",value:function(){var e=this.props.noValueText,t=this.props.value;return t?o.a.createElement(_m.a,{value:t}):o.a.createElement(Xo.c,null,e)}},{key:"renderEditView",value:function(){var e=this.props,t=e.placeholder,n=e.invalidMessage,r=e.invalidTimeFormatMessage,i=this.state,a=i.value,s=i.isInputInvalid;return o.a.createElement(hh,{ref:this.editFieldRef,type:"text",value:a,placeholder:t,onChange:this.onChange,invalidMessage:s?r:n})}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,this.props.label)),o.a.createElement(T.a,{onEnter:this.onConfirm,onEscape:this.onCancel},o.a.createElement(Wo,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:this.onEditRequested,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})})))}}]),t}();Zk.displayName="TimeStringInlineEditView",Zk.displayName="TimeStringInlineEditView",Zk.defaultProps={value:"",noValueText:null,isEditable:!1,isEditing:!1,isMobile:!1,invalidMessage:null,invalidTimeFormatMessage:null};var Yk=Object(y.injectIntl)(Zk),$k=function(e){return function(t){return null==t?"":Object(x.c)(e.daysPerWeek,e.hoursPerDay)(t)}},Xk=function(e){return function(t){return""===t?null:Object(x.d)(e.daysPerWeek,e.hoursPerDay)(t)}};function eE(e){return(eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tE(){return(tE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nE(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function rE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oE(e,t){return!t||"object"!==eE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iE(e){return(iE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aE(e,t){return(aE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sE=Object(y.defineMessages)({placeholder:{id:"issue.time-estimate.placeholder-for-the-field",defaultMessage:"2w 4d 6h 45m",description:""}}),cE=function(e,t){var n=Object(k.j)(t),r=e.baseUrl,o=e.value,i=Object(io.h)(oo.qb)(t),a=i&&null!=i.remainingEstimateSeconds;return Object(So.i)("".concat(r,"/secure/AjaxIssueAction.jspa?decorator=none"),{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(kw.stringify)({issueId:n,timetracking_originalestimate:null!==o?"".concat(o/60,"m"):null,timetracking_targetsubfield:a?"timetracking_originalestimate":void 0,fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(w.S)(t)})})},uE=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=oE(this,(e=iE(t)).call.apply(e,[this].concat(o)))).onChangeTransform=function(e){var t=n.props,r=t.config;(0,t.onChange)(Xk(r)(e))},n.transformFromValue=function(e){var t=n.props.config;return $k(t)(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aE(e,t)}(t,r["Component"]),function(e,t,n){t&&rE(e.prototype,t),n&&rE(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=(e.onChange,nE(e,["value","onChange"])),r=this.transformFromValue(Number(t));return o.a.createElement(Yk,tE({},n,{onChange:this.onChangeTransform,value:r}))}}]),t}();uE.displayName="TransformerWrapper";var lE=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,saveField:cE,isOptimistic:!1,additionalProps:function(e,n){return{config:Object(S.g)(e),noValueText:n.formatMessage(rl.noValue),placeholder:n.formatMessage(sE.placeholder),invalidTimeFormatMessage:o.a.createElement(y.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:o.a.createElement("b",null,"2w 4d 6h 45m")}}),isEditable:Object(io.y)(t.fieldId)(e)&&Object(w.y)(e)}}}})(uE),fE=Object(no.createSelector)(Object(io.n)(so.z),function(e){return null!==e?e:void 0}),pE=function(e){return void 0===e},dE=function(e){if(!e)return Object.seal({});var t=e.remainingEstimateSeconds,n=e.timeSpentSeconds;return sb()({loggedTime:n,remainingTime:t},pE)};function mE(e){return(mE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yE(e,t){return!t||"object"!==mE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hE(e){return(hE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gE(e,t){return(gE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vE=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yE(this,hE(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gE(e,t)}(t,r["Component"]),function(e,t,n){t&&bE(e.prototype,t),n&&bE(e,n)}(t,[{key:"renderReadView",value:function(){var e=this.props,t=e.value,n=e.estimatedTime,r=e.isDone,i=e.config;return o.a.createElement(bn,{value:dE(t),estimatedTime:n,isDone:r,config:i})}},{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.label;return t?o.a.createElement("div",null,o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,n)),o.a.createElement(Wo,{label:n,readView:this.renderReadView(),editView:this.props.isEditable?o.a.createElement("div",null):null,isEditing:!1,areActionButtonsHidden:!0,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!this.props.isMobile,isLabelHidden:!0,onEditRequested:this.props.onEditRequest,editButtonLabel:this.props.editButtonLabel,confirmButtonLabel:this.props.confirmButtonLabel,cancelButtonLabel:this.props.cancelButtonLabel})):null}}]),t}();vE.displayName="TimeTrackingView",vE.displayName="TimeTrackingView";var OE,jE=vE,wE=Object(eo.a)([Object(i.connect)(function(e,t){var n=t.intl.formatMessage,r=Object(io.m)(t.fieldId)(e);return{value:Object(S.h)(e),config:Object(S.g)(e),estimatedTime:fE(e),isDone:Object(C.b)(e)===v.DONE,isEditable:Object(S.b)(e),isMobile:Object(w.s)(e),isVisible:Object(S.e)(e),label:r,editButtonLabel:n(Fo.a.editButtonLabel,{fieldName:r}),confirmButtonLabel:n(Fo.a.confirmButtonLabel,{fieldName:r}),cancelButtonLabel:n(Fo.a.cancelButtonLabel,{fieldName:r})}},function(e){return{onEditRequest:function(){e(Object(O.I)(Xr.a,null))}}}),y.injectIntl])(jE),kE=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,additionalProps:function(e,t){return{noValueText:t.formatMessage(rl.noValue),type:"url"}}}})(Sh),EE=function(e){return e.users?e.users.map(cc):[]},SE=Object(lo.a)(function(e){return function(t){return e?Object(So.c)("".concat(e).concat(t)).then(EE):Promise.resolve([])}}),CE=Object(lo.a)(function(e){return{avatarUrl:"",name:e.formatMessage(rl.noValue)}}),PE=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:cc,transformToStateValue:uc,additionalProps:function(e,n){return{portalElement:wS(t.fieldId)(e)?Do()||document.body:void 0,fetchSuggestions:SE(Object(io.d)(t.fieldId)(e)),emptyOption:Object(io.A)(t.fieldId)(e)?void 0:CE(n)}}}})(sc);function IE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xE=Object(y.defineMessages)({releasedHeading:{id:"issue.fix-versions.released-message",defaultMessage:"Released",description:""},unreleasedHeading:{id:"issue.fix-versions.unreleased-message",defaultMessage:"Unreleased",description:""}}),_E=function(e){return{content:e.name,value:e.id}},ME=(IE(OE={},so.a,"affectedVersion"),IE(OE,so.l,"fixVersion"),OE),TE=function(e,t){var n=t.baseUrl,r=t.projectKey,o=t.fieldId;return e.map(function(e){var t="project = ".concat(Object(hl.b)(r)," AND ").concat(function(e){return ME[e]||"fixVersion"}(o)," = ").concat(Object(hl.b)(e.name));return{href:Object(hl.a)(n,t),content:e.name,value:e.id}})},AE=function(e){return e?e.map(_E):[]},DE=function(e){return e.map(function(e){return{name:e.content,id:e.value}})},LE=function(e,t){var n=e.filter(function(e){return!e.archived}),r=n.filter(function(e){return!e.released}).map(_E),o=n.filter(function(e){return e.released}).map(_E);return[{heading:t.formatMessage(xE.unreleasedHeading),items:r},{heading:t.formatMessage(xE.releasedHeading),items:o}]},NE=Object(y.defineMessages)({placeholder:{id:"issue.single-version-picker.text-for-dropdown-when-nothing-selected",defaultMessage:"Select version",description:""}}),RE=function(e){return e&&{name:e.content,id:e.value}},FE=function(e){return e&&{content:e.name,value:e.id}},VE=Object(lo.a)(function(e,t){return function(){return Promise.resolve(e).then(function(e){return LE(e,t)})}}),UE=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:FE,transformToStateValue:RE,additionalProps:function(e,n){return{fetchSuggestions:VE(Object(io.c)(t.fieldId)(e),n),placeholder:n.formatMessage(NE.placeholder),noValueText:n.formatMessage(rl.noValue),allowEmptyValue:!Object(io.A)(t.fieldId)(e),hasAutocomplete:!0}}}})(function(e){return Object(M.g)()?o.a.createElement(Id,e):o.a.createElement(Gd,e)}),BE=Object(lo.a)(function(e,t){return function(){return Promise.resolve(e).then(function(e){return LE(e,t)})}}),KE=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:AE,transformToStateValue:DE,additionalProps:function(e,n){return{fetchSuggestions:BE(Object(io.c)(t.fieldId)(e),n),placeholder:n.formatMessage(rl.version_no_value_placeholder),noValueText:n.formatMessage(rl.noValue)}}}})(function(e){return Object(M.f)()?o.a.createElement(nd,e):o.a.createElement(pf,e)}),WE=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-action-creator.js"),HE=n("./node_modules/@atlaskit/icon/glyph/add-circle.js"),zE=n.n(HE),qE=n("./src/packages/releases/versions/index.js");function GE(e){return(GE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JE(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function QE(){return(QE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ZE(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function YE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $E(e,t){return!t||"object"!==GE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XE(e){return(XE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eS(e,t){return(eS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tS=Object(lo.a)(function(e,t){return{appearance:"primary",content:e,elemBefore:o.a.createElement(zE.a,{label:"",size:"small"}),onActivate:t}}),nS=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=$E(this,(e=XE(t)).call.apply(e,[this].concat(o)))).state={isDialogOpen:!1},n.openDialog=function(){n.setState({isDialogOpen:!0})},n.closeDialog=function(){n.setState({isDialogOpen:!1})},n.onSuccess=function(e){var t=n.props,r=t.onChange,o=t.value,i=t.onVersionCreated,a=t.versionFieldIds;r([].concat(ZE(o),[{content:e.name,value:e.id}])),n.closeDialog(),i(e,a)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eS(e,t)}(t,r["Component"]),function(e,t,n){t&&YE(e.prototype,t),n&&YE(e,n)}(t,[{key:"renderSelect",value:function(e){var t=this.props,n=t.canAdministerProject,r=t.canAdministerJira,i=t.createNewItemMessage,a=n||r;return Object(M.c)()?o.a.createElement(nd,QE({},e,{filterOption:Bp,styles:Up,getShouldShowFooter:function(){return a},footer:o.a.createElement(Vp,null,o.a.createElement(wl.a,{label:"",size:"small"}),o.a.createElement(Fp,null,i)),onFooterSelect:this.openDialog})):o.a.createElement(pf,QE({},e,{footer:a?tS(i,this.openDialog):null}))}},{key:"render",value:function(){var e=this.props,t=e.baseUrl,n=e.projectId,r=(e.createNewItemMessage,e.canAdministerProject,e.canAdministerJira,e.locale),i=(e.onVersionCreated,e.versionFieldIds,JE(e,["baseUrl","projectId","createNewItemMessage","canAdministerProject","canAdministerJira","locale","onVersionCreated","versionFieldIds"])),a=this.state.isDialogOpen;return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement(qE.a,{locale:r,baseUrl:t,projectId:n,onCancel:this.closeDialog,onError:this.closeDialog,onSuccess:this.onSuccess}),this.renderSelect(i))}}]),t}();nS.displayName="FixVersionsView";var rS=Object(y.defineMessages)({createNewItem:{id:"issue.fix-versions.create-new-component-message",defaultMessage:"Create new version",description:""}}),oS=Object(lo.a)(function(e,t,n,r,o){return function(e,t,n,r,o){return bl(e,t,n,r,o)}(e,t,n,r,o)}),iS=Object(lo.a)(function(e,t,n,r,o){return function(i,a){return Object(M.cb)()?oS(n,e,r,o,a).then(function(e){return LE(e,t)}):Promise.resolve(e).then(function(e){return LE(e,t)})}}),aS=Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:TE,transformToStateValue:DE,additionalProps:function(e,n){return{fetchSuggestions:iS(Object(io.c)(t.fieldId)(e),n,t.fieldId,Object(w.A)(e),Object(k.B)(e)),canAdministerProject:Object(va.c)(e),canAdministerJira:Object(va.b)(e),createNewItemMessage:n.formatMessage(rS.createNewItem),baseUrl:Object(w.f)(e),projectId:Object(k.B)(e),isMobile:Object(w.s)(e),placeholder:n.formatMessage(rl.version_no_value_placeholder),noValueText:n.formatMessage(rl.noValue),versionFieldIds:Object(io.v)(e),onTagClick:function(e){return Object(Ac.u)(e,{name:t.fieldId})}}},additionalCallbacks:function(e){return{onVersionCreated:function(t,n){n.forEach(function(n){e(Object(WE.a)(n,[t]))})}}}}})(nS);function sS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cS,uS=Object(lo.a)(function(){var e;return sS(e={},oo.g,{item:xc}),sS(e,oo.q,{item:xm}),sS(e,oo.T,{item:gv}),sS(e,oo.X,{item:Gv}),sS(e,oo.o,{item:Fi}),sS(e,oo.s,{item:ha}),sS(e,oo.J,{item:Qy}),sS(e,oo.k,{item:md}),sS(e,oo.hb,{item:Ow}),sS(e,oo.jb,{item:Uw}),sS(e,oo.u,{item:Oy}),sS(e,oo.v,{item:aS}),sS(e,oo.a,{item:aS}),sS(e,oo.p,{item:Pa,panel:uo.a}),sS(e,oo.W,{item:function(){return null}}),sS(e,oo.c,{item:ds,panel:fs}),sS(e,oo.H,{item:Ly,panel:Dy}),sS(e,oo.gb,{item:mj}),sS(e,oo.pb,{item:lE}),sS(e,oo.qb,{item:wE}),sS(e,oo.R,{item:Jg}),sS(e,oo.I,{item:Qy}),sS(e,oo.ob,{item:$O}),sS(e,oo.N,{item:ph}),sS(e,oo.rb,{item:kE}),sS(e,oo.P,{item:Ch}),sS(e,oo.kb,{item:Ch}),sS(e,oo.db,{item:ij}),sS(e,oo.M,{item:nh}),sS(e,oo.nb,{item:ha}),sS(e,oo.O,{item:KE}),sS(e,oo.tb,{item:UE}),sS(e,oo.n,{item:Im}),sS(e,oo.x,{item:_y}),sS(e,oo.L,{item:Iy}),sS(e,oo.sb,{item:PE}),sS(e,oo.m,{item:um}),sS(e,oo.K,{item:ul}),sS(e,oo.U,{item:Vv}),sS(e,oo.r,{item:Kb}),sS(e,oo.l,{item:yo}),sS(e,oo.mb,{item:Hk}),sS(e,oo.D,{item:Ch}),sS(e,oo.B,{item:um}),sS(e,oo.F,{item:$O}),sS(e,oo.E,{item:ij}),sS(e,oo.C,{item:nh}),sS(e,oo.cb,{item:em}),sS(e,oo.e,{item:xs,panel:co.a}),sS(e,oo.bb,{item:YO}),sS(e,oo.Q,{item:Kh}),sS(e,oo.Y,{item:SO}),sS(e,oo.j,{item:function(){return null}}),sS(e,oo.S,{item:fv}),sS(e,oo.ab,{item:VO}),sS(e,oo.f,{item:js}),sS(e,oo.d,{item:fv}),sS(e,oo.h,{item:du}),e}),lS=function(){return uS()},fS=n("./src/packages/issue/issue-view/src/common/model/layout-item-type.js");function pS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dS=function(e){var t=lS();return Object.keys(t).includes(e)},mS=function(e){return Object(no.createSelector)(Object(io.c)(e),function(e){return!e||e.length>1})},bS=function(e){return Object(no.createSelector)(va.f,Object(io.o)(e),function(e,t){return Boolean(e&&t&&t.rating)})},yS=function(e){return Object(no.createSelector)(Object(io.n)(e),function(e){return Boolean(e&&(e.showField||e.hasEpicLinkFieldDependency))})},hS=(pS(cS={},oo.Y,function(e){var t=e.fieldId,n=e.state;return bS(t)(n)}),pS(cS,oo.R,function(e){var t=e.fieldId,n=e.state;return yS(t)(n)}),pS(cS,oo.j,function(){return!1}),pS(cS,oo.ab,function(e){var t=e.fieldId,n=e.state;return mS(t)(n)}),pS(cS,oo.b,function(e){var t=e.fieldId,n=e.state;return function(e){return Object(no.createSelector)(Object(io.n)(e),function(e){return Boolean(e)})}(t)(n)}),cS),gS=function(e){return Object(no.createSelector)(io.s,function(e){return e},function(t,n){return e.filter(function(e){var t=e.type,r=e.payload;return!!r&&(e.type===fS.g?function(e,t){return!!t&&!!SS()(e,t)}(n,r.tabId):!(!dS(t)||!r.fieldId)&&(!hS[t]||hS[t]({fieldId:r.fieldId,state:n})))})})};function vS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function OS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jS=Object(no.createSelector)(k.c,function(e){return e&&e.tabs||{}}),wS=function(e){return Object(no.createSelector)(jS,function(t){return Boolean(Object.keys(t).find(function(n){return t[n].items.find(function(t){return t.id===e})}))})},kS=function(e,t){return t},ES=function(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){var n=t;return e.map(function(e){return e.id}).sort().join("")===n.map(function(e){return e.id}).sort().join("")}return!1},SS=function(){var e=Object(lo.a)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vS(Object(n),!0).forEach(function(t){OS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{items:t})},ES);return Object(no.createSelector)(function(){return Object(no.createSelector)(jS,kS,function(e,t){return e[t]||null})}(),function(e){return e},function(t,n){if(!t)return null;var r=t.items.filter(function(e){return!!function(e,t){if(!Object(io.a)(t).includes(e))return!1;var n=Object(ao.a)(Object(io.u)(e,Object(io.s)(t)));return!(void 0===n||!dS(n))&&(!hS[n]||hS[n]({fieldId:e,state:t}))}(e.id,n)});return r.length>0?e(t,r):null})},CS=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),PS=Object(io.p)(so.n),IS=Object(io.p)(so.g),xS=function(e){if(!e)return null;var t=0;return Object(to.traverse)(e,{text:function(e){t+=e.text.length}}),t},_S=Object(no.createSelector)(IS,function(e){if(!e)return null;var t=e.editingValue||e.adfValue;return xS(t)}),MS=Object(no.createSelector)(PS,function(e){if(!e)return null;var t=e.editingValue||e.value;return t?t.length:null}),TS=Object(no.createSelector)(io.s,function(e){return Object.keys(e).map(function(t){return e[t]}).filter(function(e){return Object(ao.a)(e)===oo.nb})}),AS=Object(no.createSelector)(TS,function(e){return e.length}),DS=Object(no.createSelector)(TS,function(e){return e.reduce(function(e,t){switch(t.schema.renderer){case ro.b:var n=t.editingValue||t.adfValue;return e+xS(n);case ro.a:var r=void 0!==t.editingValue?t.editingValue:t.value;return r?e+r.length:e;default:return e}},0)}),LS=Object(no.createSelector)(_S,MS,AS,DS,CS.g,CS.a,jS,function(e,t,n,r,o,i,a){return{numCharSummary:t||0,numCharDescription:e||0,numCustomMultilineFields:n,numCharCustomMultilineFields:r,visibleContextItems:o.map(function(e){return e.type}).join(","),numVisibleContextItems:o.length,conditionallyVisibleContextItems:i.map(function(e){return e.type}).join(","),numConditionallyVisibleContextItems:i.length,numFieldTabs:a?Object.keys(a).length:0}}),NS=n("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),RS=n("./src/packages/platform/services/bento-transition-check/src/index.js"),FS=n("./src/packages/platform/services/bento-transition-check/src/components/index.js"),VS=n("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js"),US=n("./src/packages/spa-router/index.js"),BS=n("./src/packages/platform/controllers/spa-state/src/index.js");function KS(e){return(KS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HS(e,t){return!t||"object"!==KS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zS(e){return(zS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qS(e,t){return(qS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var GS=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=HS(this,(e=zS(t)).call.apply(e,[this].concat(o)))).hasErrored=!1,n.endOfCriticalPath=void 0,n.hasSubmittedMetrics=!1,n.timestampRecievedWhileOptimisticCheckIsPending=void 0,n.spaState=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qS(e,t)}(t,r["Component"]),function(e,t,n){t&&WS(e.prototype,t),n&&WS(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isPreview,n=e.isComplete,r=e.metrics,o=e.bentoTransitionCheck,i=e.lastTransitionStartTime,a=e.hasBentoEnabledCheck,s=e.isInitialRender;this.hasErrored||((t||n)&&r.onPreviewRendered({isInitialRender:s}),n&&(r.onInteractive(),this.endOfCriticalPath&&this.endOfCriticalPath(),Object(M.Z)()||this.setTimestampRecievedWhileOptimisticCheckIsPending(a,o),!a||s?this.submitMetrics():o===RS.c.ALLOW&&this.submitMetrics(i)))}},{key:"UNSAFE_componentWillUpdate",value:function(e){Object(M.Z)()||this.setTimestampRecievedWhileOptimisticCheckIsPending(e.hasBentoEnabledCheck,e.bentoTransitionCheck)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.error,r=t.metrics,o=t.isLoading,i=t.lastTransitionStartTime,a=t.issueKey,s=t.hasBentoEnabledCheck,c=t.isInitialRender;n&&(this.hasErrored=!0),this.resetSubmissionStateIfNewView(o,e,a),this.hasErrored||((this.isPreviewModeAfterBentoSpaTransition(e)||this.didBentoMoveOutOfLoadingState(e))&&r.onPreviewRendered({isInitialRender:c}),this.didJustMoveToComplete(e)&&(r.onInteractive(),this.endOfCriticalPath&&this.endOfCriticalPath()),this.props.isComplete&&!this.hasSubmittedMetrics&&(!s||c?this.submitMetrics():this.hasSpaBentoCheckCompleted()&&this.submitMetrics(i)))}},{key:"setTimestampRecievedWhileOptimisticCheckIsPending",value:function(e,t){e&&t!==RS.c.INITIAL||(this.timestampRecievedWhileOptimisticCheckIsPending=this.props.lastTransitionStartTime)}},{key:"hasSpaBentoCheckCompleted",value:function(){return Object(M.Z)()?this.checkIsBentoCompletedWithPageResetHistoryBlocker():this.checkIsBentoCompletedWithOutPageResetHistoryBlocker()}},{key:"checkIsBentoCompletedWithPageResetHistoryBlocker",value:function(){return this.props.hasBentoEnabledCheck&&this.props.bentoTransitionCheck===RS.c.ALLOW}},{key:"checkIsBentoCompletedWithOutPageResetHistoryBlocker",value:function(){return this.props.hasBentoEnabledCheck&&this.props.bentoTransitionCheck===RS.c.ALLOW&&this.isTimestampFromAfterPending()}},{key:"resetSubmissionStateIfNewView",value:function(e,t,n){(e&&!t.isLoading||n!==t.issueKey)&&(this.hasSubmittedMetrics=!1)}},{key:"isTimestampFromAfterPending",value:function(){return this.timestampRecievedWhileOptimisticCheckIsPending!==this.props.lastTransitionStartTime}},{key:"submitMetrics",value:function(e){this.props.isInitialRender||!e?Object(be.m)():Object(M.Z)()?Object(be.m)(e,this.spaState):Object(be.m)(e),this.hasSubmittedMetrics=!0,this.timestampRecievedWhileOptimisticCheckIsPending=null}},{key:"didBentoMoveOutOfLoadingState",value:function(e){var t=this.props,n=t.isPreview,r=t.isComplete;return e.isLoading&&(n||r)}},{key:"isPreviewModeAfterBentoSpaTransition",value:function(e){var t=this.props,n=t.isPreview,r=t.issueKey;return e.issueKey!==r&&n}},{key:"didJustMoveToComplete",value:function(e){return this.props.isComplete&&!e.isComplete}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(BS.f,null,function(t,n){var r=n.setAppReady;return e.endOfCriticalPath=r,e.spaState=Object(M.Z)()?t:null,null}))}}]),t}();GS.displayName="BentoMetrics";var JS=GS;function QS(){return(QS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ZS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var YS=function(e){var t=ZS(Object(FS.b)(),1)[0].isTransitionCurrentlyAllowed,n=ZS(Object(VS.a)(),1)[0],r=n.isInitialRender,i=n.lastTransitionStartTime;return o.a.createElement(US.f,null,function(n){var a=n.route;return o.a.createElement(JS,QS({},e,{bentoTransitionCheck:t,isInitialRender:r,lastTransitionStartTime:i,hasBentoEnabledCheck:!!a&&Object(RS.d)(a)}))})};YS.displayName="BentoMetricsWithSpaTimingInfo";var $S,XS=YS,eC=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js"),tC=n("./src/packages/issue/issue-view/src/views/common/modal-grid/modal-grid-view.js"),nC=n("./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js"),rC=n("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),oC=n("./node_modules/@atlaskit/icon/glyph/editor/error.js"),iC=n.n(oC),aC=n("./node_modules/@atlaskit/icon/glyph/editor/success.js"),sC=n.n(aC),cC=n("./node_modules/@atlaskit/icon/glyph/info.js"),uC=n.n(cC),lC=n("./node_modules/lodash/find.js"),fC=n.n(lC),pC=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/op-triggers/on-mount-and-update/index.js"),dC=n("./src/packages/platform/ui/flags/src/index.js"),mC=n("./src/packages/issue/issue-view/src/actions/flag-action-type.js"),bC=n("./src/packages/issue/issue-view/src/actions/issue-delete-action-creator.js"),yC=n("./src/packages/issue/issue-view/src/actions/upsell-action-creator.js");function hC(e){return(hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OC(e,t){return!t||"object"!==hC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jC(e){return(jC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wC(e,t){return(wC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EC(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    color: ",";\n"]);return EC=function(){return e},e}var SC=a.default.span(EC(),function(e){return e.color}),CC=o.a.createElement(SC,{size:"medium",color:vt.colors.R300},o.a.createElement(iC.a,{label:""})),PC=o.a.createElement(SC,{size:"medium",color:vt.colors.P300},o.a.createElement(uC.a,{label:""})),IC=o.a.createElement(SC,{size:"medium",color:vt.colors.G300},o.a.createElement(sC.a,{label:""})),xC=(kC($S={},Hr.j,{messages:Object(y.defineMessages)({title:{id:"issue.generic-server-error-when-adding-comment-title",defaultMessage:"Comment could not be updated",description:""},description:{id:"issue.generic-server-error-when-adding-comment-description",defaultMessage:"There was a connection problem and your comment was not successfully updated. Check your network before trying to update or add another comment.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.k,{messages:Object(y.defineMessages)({title:{id:"issue.server-validation-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment",description:""},description:{id:"issue.server-validation-error-when-adding-comment-description",defaultMessage:"It might be empty or have invalid formatting. If you copy-pasted, try removing the formatting and adding it directly in the editor.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.l,{messages:Object(y.defineMessages)({title:{id:"issue.server-error-when-deleting-comment-title",defaultMessage:"Comment could not be deleted",description:""},description:{id:"issue.server-error-when-deleting-comment-description",defaultMessage:"There was a connection problem and the comment was not successfully deleted. Try checking your network connection.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.v,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-retrieving-editor-value-title",defaultMessage:"The text editor failed",description:""},description:{id:"issue.error-when-retrieving-editor-value-description",defaultMessage:"Retry your last action, or refresh the page.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.L,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content",description:"The title for an error message displayed to the user when a rich content field for an issue cannot be saved."},description:{id:"issue.error-when-confirming-rich-text-field-value-description",defaultMessage:"It may contain formatting we don\u2019t recognize. Try removing the formatting before saving.",description:"The contents for an error message displayed to the user when a rich content field for an issue cannot be saved."}}),icon:CC,type:"error"}),kC($S,Hr.M,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content",description:"The title for an error message displayed to the user when a rich content field for an issue cannot be saved."},description:{id:"issue.error-when-confirming-rich-text-field-value-description-maximum-length-exceeded",defaultMessage:"It's too long for the field. Try attaching a file or page to the issue, or adding part of the content as comments.",description:"The contents for an error message displayed to the user when a rich content field for an issue cannot be saved due to it exceeding maximum length limits."}}),icon:CC,type:"error"}),kC($S,Hr.e,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-adding-attachment-title",defaultMessage:"We couldn't save your attachment",description:""},description:{id:"issue.error-when-adding-attachment-description",defaultMessage:"Reload the issue then try adding it again.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.p,{messages:Object(y.defineMessages)({title:{id:"issue.server-error-when-deleting-issue-link-title",defaultMessage:"We couldn't remove the issue link",description:""},description:{id:"issue.server-error-when-deleting-issue-link-description",defaultMessage:"Try reloading the page and removing the issue link again.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.f,{messages:Object(y.defineMessages)({title:{id:"issue.server-error-when-deleting-attachment-title",defaultMessage:"Attachment could not be deleted",description:""},description:{id:"issue.server-error-when-deleting-attachment-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.T,{messages:Object(y.defineMessages)({title:{id:"issue.server-error-when-toggle-watch-title",defaultMessage:"We couldn't update your watch status",description:""},description:{id:"issue.server-error-when-toggle-watch-description",defaultMessage:"Check your connection and try clicking watch again.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.z,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-fetching-watchers-title",defaultMessage:"We couldn't load the watchers list",description:"Displayed when there is an error while fetching the list of watchers for an issue."},description:{id:"issue.error-when-fetching-watchers-description",defaultMessage:"Check your connection, then give it another try.",description:"The call to action that users see when there was error while trying to load the list of watchers."}}),icon:CC,type:"error"}),kC($S,Hr.P,{messages:Object(y.defineMessages)({title:{id:"issue.start-watching-success-title",defaultMessage:"You're watching this issue",description:"Displayed when the user starts watching the issue using a hotkey"},description:{id:"issue.start-watching-success-description",defaultMessage:"We'll notify you when there's activity on it.",description:"The message shown when a user starts watching an issue successfully with a hotkey "}}),icon:IC,type:"success"}),kC($S,Hr.Q,{messages:Object(y.defineMessages)({title:{id:"issue.stop-watching-success-title",defaultMessage:"You stopped watching this issue",description:"Displayed when the user stops watching the issue using a hotkey"},description:{id:"issue.stop-watching-success-description",defaultMessage:"We won't notify you about activity on it.",description:"The message shown when a user stops watching an issue successfully with a hotkey "}}),icon:IC,type:"success"}),kC($S,Hr.K,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-removing-watcher-title",defaultMessage:"We couldn't remove that watcher",description:"Displayed when there is an error while removing the watcher for an issue."},description:{id:"issue.error-when-removing-watcher-description",defaultMessage:"Check your connection, then give it another try.",description:"The call to action that users see when there was error while trying to remove watcher."}}),icon:CC,type:"error"}),kC($S,Hr.b,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-adding-watcher-title",defaultMessage:"We couldn't add that watcher",description:"Displayed when there is an error while adding the watcher for an issue."},description:{id:"issue.error-when-adding-watcher-description",defaultMessage:"Check your connection, then give it another try.",description:"The call to action that users see when there was error while trying to add watcher."}}),icon:CC,type:"error"}),kC($S,Hr.R,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-reordering-subtask",defaultMessage:"We couldn't reorder those subtasks",description:""},description:{id:"issue.error-when-reordering-subtask-description",defaultMessage:"Wait a few moments, then give it another try.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.A,{messages:Object(y.defineMessages)({title:{id:"issue.server-error-when-add-flag-title",defaultMessage:"We couldn't flag this issue",description:""},description:{id:"issue.server-error-when-add-flag-description",defaultMessage:"Check your connection and try adding the flag again.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.B,{messages:Object(y.defineMessages)({title:{id:"issue.server-error-when-remove-flag-title",defaultMessage:"We couldn't remove the flag from this issue",description:""},description:{id:"issue.server-error-when-remove-flag-description",defaultMessage:"Check your connection and try removing the flag again.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.H,{messages:Object(y.defineMessages)({title:{id:"issue.server-error-when-logging-work-title",defaultMessage:"We couldn't add your time spent",description:""},description:{id:"issue.server-error-when-logging-work-description",defaultMessage:"Check your connection, then give it another try.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.F,{messages:Object(y.defineMessages)({title:{id:"issue.upsell-jsd-title-tired-of-pasting-jira-tickets",defaultMessage:"Tired of pasting into Jira tickets?",description:""},description:{id:"issue.upsell-jsd-description-set-up-a-service-desk",defaultMessage:"Set up a service desk today so people can create their own tickets and you can stop wasting time copying and pasting.",description:""}}),icon:PC,type:"info",actions:[{messages:Object(y.defineMessages)({content:{id:"issue.upsell-jsd-action-show-me-how",defaultMessage:"Show me how",description:""}}),onClick:function(e){var t=e.closeFlag,n=e.upsellJsd;(0,e.fireAnalyticsEvent)("issue-paste-upsell-jsd.show-me-how.clicked"),n("jsd-paste-trigger"),t()}},{messages:Object(y.defineMessages)({content:{id:"issue.upsell-jsd-action-skip",defaultMessage:"Skip",description:""}}),onClick:function(e){var t=e.closeFlag;(0,e.fireAnalyticsEvent)("issue-paste-upsell-jsd.skip.clicked"),t()}}],onDismissed:function(e){(0,e.fireAnalyticsEvent)("issue-paste-upsell-jsd.dismissed")}}),kC($S,Hr.E,{messages:Object(y.defineMessages)({title:{id:"issue.upsell-jsd-title-better-way-to-run-helpdesk",defaultMessage:"There's a better way to run a help desk",description:""},description:{id:"issue.upsell-jsd-resolve-tickets-faster",defaultMessage:"Create help forms, get key details upfront, and resolve tickets faster.",description:""}}),icon:PC,type:"info",actions:[{messages:Object(y.defineMessages)({content:{id:"issue.upsell-jsd-action-learn-more",defaultMessage:"Learn more",description:""}}),onClick:function(e){var t=e.closeFlag,n=e.upsellJsd;(0,e.fireAnalyticsEvent)("issue-keyword-upsell-jsd.learn-more.clicked"),n("jsd-keyword-trigger"),t()}},{messages:Object(y.defineMessages)({content:{id:"issue.upsell-jsd-action-no-thanks",defaultMessage:"No thanks",description:""}}),onClick:function(e){var t=e.closeFlag;(0,e.fireAnalyticsEvent)("issue-keyword-upsell-jsd.no-thanks.clicked"),t()}}],onDismissed:function(e){(0,e.fireAnalyticsEvent)("issue-keyword-upsell-jsd.dismissed")}}),kC($S,Hr.d,{messages:Object(y.defineMessages)({title:{id:"issue.assign-to-me-flag-title",defaultMessage:"Successfully assigned to you",description:""},description:{id:"issue.assign-to-me-flag-description",defaultMessage:"You're now the assignee for {issueKey}.",description:""}}),icon:IC,type:"success",shouldAutoDismiss:!0}),kC($S,Hr.m,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-creating-child-issue-title",defaultMessage:"We couldn't create the child issue",description:""},description:{id:"issue.error-when-creating-child-issue-description",defaultMessage:"Check your connection, then give it another try.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.G,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-linking-child-issue-title",defaultMessage:"We couldn't link the child issue",description:""},description:{id:"issue.error-when-linking-child-issue-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.h,{messages:Object(y.defineMessages)({title:{id:"change.issue.type.success.title",defaultMessage:"Issue type changed to {destType}",description:""},description:{id:"change.issue.type.success.description",defaultMessage:"Issue type changed",description:""}}),icon:IC,type:"success",shouldAutoDismiss:!0}),kC($S,Hr.g,{messages:Object(y.defineMessages)({title:{id:"change.issue.type.error.title",defaultMessage:"Error changing issue type",description:""},description:{id:"change.issue.type.error.description",defaultMessage:"There was an error changing the issue type. Please try again.",description:""}}),icon:CC,type:"error"}),kC($S,Hr.o,{messages:Object(y.defineMessages)({title:{id:"issue.error-when-deleting-issue-title",defaultMessage:"We couldn't delete {issueKey}",description:""},description:{id:"issue.error-when-deleting-issue-description",defaultMessage:"Check your connection, then give it another try.",description:""}}),icon:CC,type:"error",actions:[{messages:Object(y.defineMessages)({content:{id:"issue.error-when-deleting-issue-call-to-action",defaultMessage:"Try again",description:""}}),onClick:function(e){var t=e.closeFlag,n=e.retryIssueDelete,r=e.deleteFailureIssueKey;n&&r&&n(r),t()}}]}),kC($S,Hr.x,{messages:Object(y.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-success-title",defaultMessage:"Work log entry updated",description:"The title text to show in the success flag when a worklog is successfully edited"}}),icon:IC,type:"success",shouldAutoDismiss:!0}),kC($S,Hr.s,{messages:Object(y.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-success-title",defaultMessage:"Work log entry deleted",description:"The title text to show in the success flag when a worklog is deleted"}}),icon:IC,type:"success",shouldAutoDismiss:!0}),kC($S,Hr.i,{messages:Object(y.defineMessages)({title:{id:"issue.clickthrough-banner.flags.dismissed.title",defaultMessage:"Banner be gone!",description:"Title of the message displayed when dismissing the clickthrough banner"},description:{id:"issue.clickthrough-banner.flags.dismissed.description",defaultMessage:"You can still open the old view through the \u2022\u2022\u2022 menu on an issue.",description:"Description of the message displayed when dismissing the clickthrough banner"}}),icon:IC,type:"success",shouldAutoDismiss:!0}),kC($S,Hr.c,{messages:Object(y.defineMessages)({title:{id:"issue.activity.worklog.flags.add-failure-title",defaultMessage:"We couldn't save your changes",description:"The title text to show in the error flag when adding the worklog fails"},description:{id:"issue.activity.worklog.flags.add-failure-description",defaultMessage:"Check your connection, then give it another try.",description:"The description text to show in the error flag when adding a new worklog fails"}}),icon:CC,type:"error"}),kC($S,Hr.S,{messages:Object(y.defineMessages)({title:{id:"issue.activity.worklog.flags.update-time-remaining-failure-title",defaultMessage:"We couldn't save your edit",description:"The title text to show in the error flag when updating the remaining time fails"},description:{id:"issue.activity.worklog.flags.update-time-remaining-failure-description",defaultMessage:"Check your connection, then give it another try.",description:"The description text to show in the error flag when updating the remaining time fails"}}),icon:CC,type:"error"}),kC($S,Hr.w,{messages:Object(y.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-failure-title",defaultMessage:"We couldn't save your edit",description:"The title text to show in the error flag when editing the worklog fails"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try.",description:"The description text to show in the error flag when editing or deleting the worklog fails"}}),icon:CC,type:"error"}),kC($S,Hr.r,{messages:Object(y.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-failure-title",defaultMessage:"We couldn't delete the work log entry",description:"The title text to show in the error flag when deleting the worklog fails"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try.",description:"The description text to show in the error flag when editing or deleting the worklog fails"}}),icon:CC,type:"error"}),kC($S,Hr.n,{messages:Object(y.defineMessages)({title:{id:"issue.confluence-pages.delete-failure-title",defaultMessage:"We couldn\u2019t remove the page link",description:"The title text to show in the error flag when deleting a confluence page link fails"},description:{id:"issue.confluence-pages.delete-failure-description",defaultMessage:"Check your connection, then give it another try.",description:"The description text to show in the error flag when deleting a confluence page link fails"}}),icon:CC,type:"error"}),kC($S,Hr.N,{messages:Object(y.defineMessages)({title:{id:"issue.approval.action.save-error-title",defaultMessage:"We couldn\u2019t save your approval response",description:"The title text to show in the error flag when saving the approval answer fails"},description:{id:"issue.approval.action.save-error-description",defaultMessage:"Give it a few seconds, then try again.",description:"The description text to show in the error flag when saving the approval answer fails"}}),icon:CC,type:"error",shouldAutoDismiss:!0}),kC($S,Hr.O,{messages:Object(y.defineMessages)({title:{id:"issue.approval.action.save-success-title",defaultMessage:"We've saved your response.",description:"The title text to show in the success flag when saving the approval answer is successful"}}),icon:IC,type:"success",shouldAutoDismiss:!0}),kC($S,Hr.a,{messages:Object(y.defineMessages)({title:{id:"issue.approval.action.add-approver-error-title",defaultMessage:"We couldn\u2019t add the approver",description:"The title text to show in the error flag when adding the approver fails"},description:{id:"issue.approval.action.add-approver-error-description",defaultMessage:"Check your connection, then try again later.",description:"The description text to show in the error flag when adding the approver fails"}}),icon:CC,type:"error",shouldAutoDismiss:!0}),kC($S,Hr.J,{messages:Object(y.defineMessages)({title:{id:"issue.approval.action.remove-approver-error-title",defaultMessage:"We couldn\u2019t remove the approver",description:"The title text to show in the error flag when adding the approver fails"},description:{id:"issue.approval.action.remove-approver-error-description",defaultMessage:"Check your connection, then try again later.",description:"The description text to show in the error flag when adding the approver fails"}}),icon:CC,type:"error",shouldAutoDismiss:!0}),$S),_C=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=OC(this,(e=jC(t)).call.apply(e,[this].concat(o)))).onFlagDismissed=function(e){var t=n.props,r=t.flags,o=t.onFlagDismissed,i=t.fireAnalyticsEvent,a=fC()(r,{id:e});if(a){var s=xC[a.type];s.onDismissed&&s.onDismissed({fireAnalyticsEvent:i})}o(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wC(e,t)}(t,r["Component"]),function(e,t,n){t&&vC(e.prototype,t),n&&vC(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.onFlagDismissed,n=e.flags,r=e.onUpsellJsd,i=e.retryIssueDelete,a=e.fireAnalyticsEvent,s=e.deleteFailureIssueKey,c=e.FlagServiceSubscriber;return o.a.createElement(c,null,function(e){var c=e.showFlag;return n.map(function(e){var n=xC[e.type],u=e.titleI18nValues?[n.messages.title,e.titleI18nValues]:n.messages.title,l=e.descriptionI18nValues&&n.messages.description?[n.messages.description,e.descriptionI18nValues]:n.messages.description,f=(n.actions||[]).map(function(n){var o=n.messages,c=n.onClick;return{content:o.content,onClick:function(){return c({closeFlag:function(){return t(e.id)},upsellJsd:r,retryIssueDelete:i,deleteFailureIssueKey:s,fireAnalyticsEvent:a})}}}),p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(t){kC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({title:u},l&&{description:l},{type:n.type,actions:f,isAutoDismiss:n.shouldAutoDismiss});return o.a.createElement(pC.a,{key:e.id,args:[p],op:c})})})}}]),t}();_C.displayName="UnsafeFlags",_C.displayName="Flags";var MC=g()(Object(Am.a)(function(e){return{fireAnalyticsEvent:function(t,n){return e(t,n)}}}),Object(f.f)("deleteIssueRetry",{retryIssueDelete:"deleteIssueRetry"}),Object(i.connect)(function(e){return{flags:Object(k.h)(e),deleteFailureIssueKey:Object(w.B)(e),FlagServiceSubscriber:dC.FlagServiceSubscriber}},function(e){return{onFlagDismissed:function(t){return e(function(e){return{type:mC.a,payload:e}}(t))},onUpsellJsd:function(t){return e(Object(yC.a)(t))},retryIssueDelete:function(t,n){e(Object(bC.c)(t,n))}}}),Object(Oo.a)())(_C),TC=n("./src/packages/issue/issue-view/src/actions/attachment-popup-action-type.js"),AC=n("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js"),DC=n("./node_modules/@atlaskit/media-picker/dist/esm/index.js"),LC=n("./src/packages/issue/issue-view/src/actions/attachment-picker-action-creator.js");function NC(e){return(NC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RC(){return(RC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UC(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function BC(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function KC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WC(e,t){return!t||"object"!==NC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HC(e){return(HC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zC(e,t){return(zC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qC=function(e){return function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=WC(this,(e=HC(n)).call.apply(e,[this].concat(o)))).onUploadsStart=function(e){var n=e.files,r=t.props.onUploadStart;n.forEach(function(e){r({id:"".concat(e.id),createdDate:Date.now()})})},t.onUploadEnd=function(e){var n=e.file;(0,t.props.onUploadEnd)({id:"".concat(n.id)})},t.onError=function(e){var n=e.error,r=t.props,o=r.onUploadError,i=r.onGeneralError;["upload_fail","object_create_fail"].includes(n.name)?o(n):i(n)},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zC(e,t)}(n,r["Component"]),function(e,t,n){t&&KC(e.prototype,t),n&&KC(e,n)}(n,[{key:"render",value:function(){var t=this,n=this.props,r=(n.onUploadStart,n.onUploadEnd,n.onUploadError,n.onGeneralError,n.uploadContext),i=n.eventHandlers,a=n.config,s=BC(n,["onUploadStart","onUploadEnd","onUploadError","onGeneralError","uploadContext","eventHandlers","config"]);if(!r)return null;var c=r.serviceHost,u=r.clientId,l=r.collection,f={authProvider:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){UC(i,r,o,a,s,"next",e)}function s(e){UC(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.uploadContext){e.next=2;break}throw new Error("Attempted to provide upload auth without upload context");case 2:return e.abrupt("return",{clientId:u,token:t.props.uploadContext.token,baseUrl:c});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FC(Object(n),!0).forEach(function(t){VC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({uploadParams:{collection:l}},a),d=i?i["upload-error"]:this.onError,m=i?i["upload-processing"]:this.onUploadEnd,b=i?i["uploads-start"]:this.onUploadsStart,y=i&&i["upload-end"],h=i&&i["upload-preview-update"],g=i&&i["upload-status-update"];return o.a.createElement(e,RC({mediaClientConfig:f,config:p,onUploadsStart:b,onProcessing:m,onError:d,onEnd:y,onPreviewUpdate:h,onStatusUpdate:g},s))}}]),n}()},GC=function(e){return Object(eo.a)([Object(i.connect)(function(e){return{uploadContext:Object(E.a)(e).uploadContext}},function(e){return{onUploadStart:function(t){return e(Object(LC.d)(t))},onUploadEnd:function(t){return e(Object(LC.e)(t))},onUploadError:function(t){return e(Object(LC.f)(t))},onGeneralError:function(t){return e(Object(LC.g)(t))}}})])(qC(e))};function JC(e){return(JC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZC(e,t){return!t||"object"!==JC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YC(e){return(YC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $C(e,t){return($C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var XC=GC(DC.a),eP=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=ZC(this,(e=YC(t)).call.apply(e,[this].concat(o)))).state={isOpen:!1,prevOpenRequestCount:0},n.onClose=function(){n.setState({isOpen:!1})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$C(e,t)}(t,r["Component"]),function(e,t,n){t&&QC(e.prototype,t),n&&QC(e,n)}(t,[{key:"render",value:function(){var e=this.state.isOpen;return o.a.createElement(XC,{isOpen:e,onClose:this.onClose})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{isOpen:e.openRequestCount>t.prevOpenRequestCount,prevOpenRequestCount:e.openRequestCount}}}]),t}();eP.displayName="BrowserMediaPicker";var tP=g()(Object(Oo.a)(),Object(i.connect)(function(e){return{openRequestCount:Object(AC.a)(e)}},{}),Object(Oo.a)())(eP);function nP(e){return(nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rP(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function oP(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){rP(i,r,o,a,s,"next",e)}function s(e){rP(i,r,o,a,s,"throw",e)}a(void 0)})}}function iP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function cP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uP(e,t){return!t||"object"!==nP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lP(e){return(lP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fP(e,t){return(fP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pP=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=uP(this,(e=lP(t)).call.apply(e,[this].concat(o)))).onUploadsStart=function(e){e.files.forEach(function(e){n.props.onUploadStart({id:"".concat(e.id),createdDate:Date.now()})})},n.onUploadEnd=function(e){var t=e.file;n.props.onUploadEnd({id:"".concat(t.id)})},n.onError=function(e){var t=e.error;["upload_fail","object_create_fail"].includes(t.name)?n.props.onUploadError(t):n.props.onGeneralError(t)},n.eventNamesToHandlers=n.props.eventHandlers||{"uploads-start":n.onUploadsStart,"upload-processing":n.onUploadEnd,"upload-end":n.onUploadEnd,"upload-error":n.onError},n.forEachEventHandler=function(e){Object.entries(n.eventNamesToHandlers).forEach(function(t){var n=sP(t,2),r=n[0],o=n[1];e(r,o)})},n.createConfig=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iP(Object(n),!0).forEach(function(t){aP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{uploadParams:{collection:t.collection},proxyReactContext:n.context})},n.picker=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fP(e,t)}(t,r["Component"]),function(e,t,n){t&&cP(e.prototype,t),n&&cP(e,n)}(t,[{key:"componentDidMount",value:function(){this.tryInitializePicker()}},{key:"componentDidUpdate",value:function(){this.tryInitializePicker()}},{key:"componentWillUnmount",value:function(){var e=this.picker;e&&(e.removeAllListeners(),"function"==typeof e.teardown&&e.teardown())}},{key:"hasPickerInitialized",value:function(){return!!this.picker}},{key:"tryInitializePicker",value:function(){var e=oP(regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.config,r=t.userAuthProvider,o=t.uploadContext,!this.hasPickerInitialized()&&o){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Object(DC.d)(this.createMediaClientConfig(o,r),this.createConfig(n,o));case 6:i=e.sent,this.forEachEventHandler(function(e,t){i.on(e,t)}),this.props.onPickerReady(i),this.picker=i,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:case"end":return e.stop()}},e,this,[[3,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"createMediaClientConfig",value:function(e,t){var n=this,r=e.serviceHost,o=e.clientId;return{authProvider:function(){var e=oP(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.uploadContext){e.next=2;break}throw new Error("Attempted to provide upload auth without upload context");case 2:return e.abrupt("return",{clientId:o,token:n.props.uploadContext.token,baseUrl:r});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),userAuthProvider:t}}},{key:"render",value:function(){return null}}]),t}();pP.displayName="BaseMediaPicker",pP.contextTypes={getAtlaskitAnalyticsEventHandlers:Sl.a.func};var dP=Object(eo.a)([Object(i.connect)(function(e){return{uploadContext:Object(E.a)(e).uploadContext}},function(e){return{onUploadStart:function(t){return e(Object(LC.d)(t))},onUploadEnd:function(t){return e(Object(LC.e)(t))},onUploadError:function(t){return e(Object(LC.f)(t))},onGeneralError:function(t){return e(Object(LC.g)(t))}}})])(pP);function mP(e){return(mP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bP(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yP(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function hP(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){yP(i,r,o,a,s,"next",e)}function s(e){yP(i,r,o,a,s,"throw",e)}a(void 0)})}}function gP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gP(Object(n),!0).forEach(function(t){OP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function OP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wP(e,t){return!t||"object"!==mP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kP(e){return(kP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EP(e,t){return(EP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var SP=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=wP(this,(e=kP(t)).call.apply(e,[this].concat(o)))).onPickerReady=function(e){n.picker=e,n.picker.on("closed",n.props.onClose)},n.onMount=function(e){var t=Object(Ac.v)(e).payload;n.analyticsSource=t.source||"unknown"},n.overrideSourceHandler=function(e){e.update(function(e){return vP({},e,{source:n.analyticsSource})})},n.userAuthProvider=hP(regeneratorRuntime.mark(function e(){var t,r,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=vP({},n.props.mediaContext.userAuth),r=t.clientId,o=t.token,i=vP({},n.props.mediaContext.viewContext),a=i.serviceHost,e.abrupt("return",{clientId:r,token:o,baseUrl:a});case 3:case"end":return e.stop()}},e)})),n.picker=void 0,n.analyticsSource=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EP(e,t)}(t,r["Component"]),function(e,t,n){t&&jP(e.prototype,t),n&&jP(e,n)}(t,[{key:"getChildContext",value:function(){var e=this,t=this.context.getAtlaskitAnalyticsEventHandlers;return{getAtlaskitAnalyticsEventHandlers:function(){return[e.overrideSourceHandler].concat(bP(t()))}}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.openRequestCount<e.openRequestCount&&this.showPicker()}},{key:"showPicker",value:function(){this.picker&&(this.picker.show(),this.props.onOpen())}},{key:"render",value:function(){var e=this.props,t=e.eventHandlers,n=e.isOpen;return o.a.createElement(Ac.b,{sourceType:Ac.j,sourceName:"addAttachment"},o.a.createElement(o.a.Fragment,null,o.a.createElement(Ac.k,{onMount:this.onMount}),o.a.createElement(dP,{userAuthProvider:this.userAuthProvider,onPickerReady:this.onPickerReady,eventHandlers:t}),n&&o.a.createElement(Ac.f,null)))}}]),t}();SP.displayName="PopupMediaPicker",SP.childContextTypes={getAtlaskitAnalyticsEventHandlers:Sl.a.func},SP.contextTypes={getAtlaskitAnalyticsEventHandlers:Sl.a.func};var CP=function(e){var t=e.mediaContext,n=e.isMobile,r=e.openRequestCount,i=e.onOpen,a=e.onClose,s=e.isOpen,c=e.eventHandlers;return!n&&t&&t.userAuth?o.a.createElement("div",null,o.a.createElement(SP,{eventHandlers:c,mediaContext:t,openRequestCount:r,onOpen:i,onClose:a,isOpen:s})):o.a.createElement(tP,{eventHandlers:c})};CP.displayName="PopupMediaPickerWithBrowserFallback";var PP=g()(Object(Oo.a)(),Object(i.connect)(function(e){return{mediaContext:Object(E.a)(e),openRequestCount:Object(AC.a)(e),isMobile:Object(w.s)(e),isOpen:Object(AC.b)(e)}},function(e){return{onOpen:function(){return e(function(){return{type:TC.b}}())},onClose:function(){return e(function(){return{type:TC.a}}())}}}),Object(Oo.a)())(CP),IP=n("./src/packages/issue/issue-view/src/actions/attachment-panel-action-type.js"),xP=Object(no.createSelector)(io.D,Ra.y,AC.b,Object(io.z)(so.A),S.d,function(e,t,n,r,o){return!(e||t||n||r||o===Xr.d)});function _P(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var MP=GC(DC.c),TP=Object(eo.a)([Object(i.connect)(function(e){return{isEnabled:xP(e)}},{})])(function(e){var t=e.isEnabled,n=_P(e,["isEnabled"]);return t?o.a.createElement(MP,n):null});function AP(e){return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function LP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RP(e,t){return!t||"object"!==AP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FP(e){return(FP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VP(e,t){return(VP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var UP={headless:!0},BP=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=RP(this,(e=FP(t)).call.apply(e,[this].concat(o)))).onPickerReady=function(e){n.picker=e,e.on("drag-enter",n.onDragEnter),e.on("drag-leave",n.onDragLeave),e.on("drop",n.onDrop)},n.onDragEnter=function(e){var t=e.length;n.numAttachments!==t&&(n.numAttachments=t,n.props.onDragEnter(t))},n.onDragLeave=function(){0!==n.numAttachments&&(n.numAttachments=0,n.props.onDragLeave())},n.onDrop=function(){n.numAttachments=0,n.props.onDrop()},n.numAttachments=0,n.picker=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VP(e,t)}(t,r["Component"]),function(e,t,n){t&&NP(e.prototype,t),n&&NP(e,n)}(t,[{key:"getConfig",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(t){LP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},UP,{container:this.props.container})}},{key:"render",value:function(){return o.a.createElement(TP,{config:this.getConfig(),onPickerReady:this.onPickerReady})}}]),t}();BP.displayName="DropzoneMediaPicker";var KP=Object(eo.a)([Object(i.connect)(function(){return{}},function(e){return{onDragEnter:function(t){return e(function(e){return{type:IP.a,payload:e}}(t))},onDragLeave:function(){return e(function(){return{type:IP.b}}())},onDrop:function(){return e(function(){return{type:IP.c}}())}}})])(BP),WP=n("./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js");function HP(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var zP=GC(DC.b),qP=function(e){var t=e.isEnabled,n=HP(e,["isEnabled"]);return o.a.createElement(WP.a,null,function(e){return t&&0===e?o.a.createElement(zP,n):null})};qP.displayName="CommonClipboardMediaPicker";var GP=Object(eo.a)([Object(i.connect)(function(e){return{isEnabled:xP(e)}},{})])(qP),JP=n("./src/packages/issue/issue-view/src/actions/comment-action-creator.js"),QP=n("./src/packages/issue/issue-view/src/selectors/comment-constants.js"),ZP=n("./node_modules/@atlaskit/adf-schema/dist/esm/schema/default-schema.js"),YP=n("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/doc.js"),$P=n("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/paragraph.js"),XP=n("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/media-single.js"),eI=n("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/media-group.js"),tI=n("./node_modules/@atlaskit/adf-utils/dist/esm/builders/nodes/media.js"),nI=n("./node_modules/@atlaskit/editor-jira-transformer/dist/esm/index.js"),rI=n("./node_modules/@atlaskit/editor-json-transformer/dist/esm/index.js"),oI=n("./node_modules/lodash/reduce.js"),iI=n.n(oI),aI=n("./node_modules/lodash/set.js"),sI=n.n(aI),cI=n("./node_modules/lodash/some.js"),uI=n.n(cI);function lI(e){return(lI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fI(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dI(e,t){return!t||"object"!==lI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mI(e){return(mI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bI(e,t){return(bI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yI=new nI.a(ZP.a),hI=new rI.a,gI=function(e){return yI.encode(hI.parse(e))},vI="issue.issue-base.content.attachment.picker.servicedesk",OI=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=dI(this,(e=mI(t)).call.apply(e,[this].concat(o)))).onUploadsStart=function(e){var t=e.files;n.props.setCommentAttachmentInProgress(!0),n.commentAttachments=t.map(function(e){return{file:e,isUploadFinished:!1}}),n.injectAttachmentsToCommentEditor(n.commentAttachments)},n.onUploadFinished=function(e){var t=e.file;n.markAttachmentAsUploadFinished(t.id)},n.onUploadError=function(e){var t=e.file;m.a.safeError(vI,"Failed to upload an attachment.",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),n.markAttachmentAsUploadFinished(t.id)},n.getAttachmentsDocNode=function(e,t){var r=n.separateImageAndNonImageAttachments(e);if(Object(M.x)()){var o=n.getMediaSingleNodes(r.images,t),i=r.nonImages.length>0?n.getMediaGroupNode(r.nonImages,t):null;return i?YP.a.apply(void 0,[i].concat(fI(o),[Object($P.a)()])):YP.a.apply(void 0,fI(o).concat([Object($P.a)()]))}return Object(YP.a)(n.getMediaGroupNode(r.images.concat(r.nonImages),t),Object($P.a)())},n.getMediaSingleNodes=function(e,t){return e.map(function(e){return n.getMediaSingleNode(e,t)})},n.getMediaSingleNode=function(e,t){var r=n.getMediaNode(e,200,200,t);return Object(XP.a)({layout:"center"})(r)},n.getMediaGroupNode=function(e,t){return eI.a.apply(void 0,fI(e.map(function(e){return n.getMediaNode(e,null,null,t)})))},n.getMediaNode=function(e,t,n,r){var o=e.file;return Object(tI.a)({id:o.id,collection:r,type:"file",name:o.name,size:o.size,width:t,height:n,__key:o.id,__fileName:o.name,__fileSize:o.size,__fileMimeType:o.type,__displayType:null})},n.markAttachmentAsUploadFinished=function(e){sI()(fC()(n.commentAttachments,function(t){return t.file.id===e}),"isUploadFinished",!0),uI()(n.commentAttachments,{isUploadFinished:!1})||(n.props.setCommentAttachmentInProgress(!1),n.commentAttachments=[])},n.commentAttachments=void 0,n.separateImageAndNonImageAttachments=function(e){return iI()(e,function(e,t){return n.isImageAttachment(t.file.type)?e.images.push(t):e.nonImages.push(t),e},{images:[],nonImages:[]})},n.injectAttachmentsToCommentEditor=function(e){var t=n.props.uploadContext;if(t){var r=n.getAttachmentsDocNode(e,t.collection);Object(M.x)()?n.props.onEditCommentUpdate(r):n.props.onEditCommentUpdate(gI(r))}else m.a.safeError(vI,"Failed to upload attachments. Upload context not available.",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e}))},n.isImageAttachment=function(e){return!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1)},n.eventHandlers={"uploads-start":n.onUploadsStart,"upload-processing":n.onUploadFinished,"upload-end":n.onUploadFinished,"upload-error":n.onUploadError},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bI(e,t)}(t,r["Component"]),function(e,t,n){t&&pI(e.prototype,t),n&&pI(e,n)}(t,[{key:"render",value:function(){var e=this.props.render;return e(this.eventHandlers)}}]),t}();OI.displayName="EventHandlersProvider";var jI=Object(eo.a)([Object(i.connect)(function(e){return{uploadContext:Object(E.a)(e).uploadContext}},function(e){return{onEditCommentUpdate:function(t){e(Object(JP.d)(QP.a,!0)),e(Object(JP.l)(QP.a,t))},setCommentAttachmentInProgress:function(t){return e(Object(JP.A)(t))}}})])(OI),wI=function(){return o.a.createElement(jI,{render:function(e){return o.a.createElement(PP,{eventHandlers:e})}})};function kI(e){return(kI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SI(e,t){return!t||"object"!==kI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CI(e){return(CI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PI(e,t){return(PI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var II=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),SI(this,CI(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PI(e,t)}(t,r["Component"]),function(e,t,n){t&&EI(e.prototype,t),n&&EI(e,n)}(t,[{key:"getConfig",value:function(){return{container:this.props.container}}},{key:"render",value:function(){var e=this;return o.a.createElement(jI,{render:function(t){return o.a.createElement(TP,{config:e.getConfig(),eventHandlers:t})}})}}]),t}();II.displayName="ServiceDeskDropzonePicker";var xI=function(){return o.a.createElement(jI,{render:function(e){return o.a.createElement(GP,{eventHandlers:e})}})},_I=n.e(297).then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/attachment/viewer/attachment-viewer-view.js")),MI=Object(me.asyncComponent)({resolve:function(){return _I}});function TI(e){return(TI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DI(e,t){return!t||"object"!==TI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LI(e){return(LI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NI(e,t){return(NI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RI=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=DI(this,(e=LI(t)).call.apply(e,[this].concat(o)))).fireAnalytics=function(){var e=n.props,t=e.glances,r=e.contentPanels,o=e.activityPanels,i=e.operations,a=e.ecosystemCustomFieldIds;n.props.ecosystemLoadedAnalytics(t,r,o,i,a.length)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NI(e,t)}(t,r["Component"]),function(e,t,n){t&&AI(e.prototype,t),n&&AI(e,n)}(t,[{key:"componentDidMount",value:function(){this.fireAnalytics()}},{key:"componentDidUpdate",value:function(){this.fireAnalytics()}},{key:"render",value:function(){return null}}]),t}();RI.displayName="EcosystemAnalyticsView";var FI=g()(Object(Am.a)(function(e){return{ecosystemLoadedAnalytics:function(t,n,r,o,i){return e("addons-loaded",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i={glances:zm(e),contentPanels:qm(t),activityPanels:Hm(n),operations:Gm(r)},a=Object.keys(i).reduce(function(e,t){return i[t]&&i[t].length?e+i[t].length:e},0),s=JSON.stringify(i);return{totalGlances:e.filter(Qm).length,totalLegacyGlances:e.filter(Jm).length,totalContentPanels:t.filter(Qm).length,totalLegacyContentPanels:t.filter(Jm).length,totalActivityPanels:n.length,totalOperations:r.length,totalCustomIssueFields:o,totalModules:a,data:Object(fl.i)(s)(s)}}(t,n,r,o,i))}}}),Object(i.connect)(function(e){return{glances:Object(ob.h)(e),contentPanels:Object(ob.c)(e),activityPanels:Object(ob.a)(e),operations:Object(ob.l)(e),ecosystemCustomFieldIds:Object(CS.b)(e)}},{}),Object(Oo.a)())(RI),VI=n("./node_modules/@atlassian/connect-module-core/dist/es6/index.js"),UI=n("./src/packages/common-legacy-do-not-add-anything-new/src/ecosystem/default-connect-iframe-provider.js"),BI=n("./node_modules/@atlaskit/empty-state/EmptyState/index.js"),KI=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/assets/error.svg"),WI=n.n(KI);function HI(e){return(HI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qI(e,t){return!t||"object"!==HI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GI(e){return(GI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JI(e,t){return(JI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QI=Object(y.defineMessages)({timeout:{id:"issue.content.ecosystem-panels.timeout",defaultMessage:"We're having trouble connecting to {appName}.\nTry contacting the developer for support."}}),ZI=function(e){return"https://marketplace.atlassian.com/plugins/".concat(e,'/cloud/support?rel="noopener noreferrer"')},YI=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=qI(this,(e=GI(t)).call.apply(e,[this].concat(i)))).tertiaryAction=o.a.createElement(D.b,{appearance:"subtle-link",href:ZI(n.props.appKey),target:"_blank"},n.props.appName),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JI(e,t)}(t,r["Component"]),function(e,t,n){t&&zI(e.prototype,t),n&&zI(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.appName,n=e.intl;return o.a.createElement(BI.a,{size:"narrow",imageUrl:WI.a,maxImageWidth:80,maxImageHeight:80,isLoading:!1,description:n.formatMessage(QI.timeout,{appName:t}),tertiaryAction:this.tertiaryAction})}}]),t}();YI.displayName="TimeoutView",YI.displayName="TimeoutView";var $I=Object(y.injectIntl)(YI);function XI(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin: ","px 0;\n"]);return XI=function(){return e},e}var ex=a.default.div(XI(),2*d.e),tx=function(e){var t=e.options,n=e.appKey,r=e.moduleKey,i=e.appName,a=e.options.url,s=e.refreshedOn,c=new UI.a,u=s?"connect-iFrame-".concat(n,"-").concat(r,"-").concat(s):"connect-iFrame-".concat(n,"-").concat(r);return o.a.createElement(ex,null,o.a.createElement(VI.a,{key:u,appKey:n,moduleKey:r,url:a,connectHost:tb(),connectIframeProvider:c,options:c.convertConnectOptions(t),width:"100%",height:"100%",timeoutIndicator:function(){return o.a.createElement($I,{appName:i,appKey:n})}}))};tx.displayName="EcosystemModuleBase",tx.defaultProps={refreshedOn:0};var nx=function(e){return o.a.createElement(tx,e)};nx.displayName="EcosystemModuleBaseWithoutRefresh";var rx=Object(Oo.a)()(nx),ox=Object(eo.a)([Object(i.connect)(function(e){return{refreshedOn:Object(k.d)(e)}},{})])(tx);function ix(e){return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ax(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sx(e,t){return!t||"object"!==ix(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cx(e){return(cx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ux(e,t){return(ux=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lx(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    display: none;\n"]);return lx=function(){return e},e}var fx=a.default.div(lx()),px=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=sx(this,(e=cx(t)).call.apply(e,[this].concat(o)))).state={connectHost:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ux(e,t)}(t,r["Component"]),function(e,t,n){t&&ax(e.prototype,t),n&&ax(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;eb(function(t){return e.setState({connectHost:t})})}},{key:"render",value:function(){var e=this.state.connectHost,t=this.props.scripts;return e?o.a.createElement(fx,null,t.map(function(e){var t=e.appKey,n=e.moduleKey,r=e.options,i=e.shouldReloadOnRefresh?ox:rx,a="".concat(t,"-").concat(n);return o.a.createElement(i,{key:a,appKey:t,moduleKey:n,options:r,appName:a})})):null}}]),t}();px.displayName="EcosystemBackgroundScriptsView";var dx=Object(eo.a)([Object(i.connect)(function(e){return{scripts:Object(ob.f)(e)}},{})])(px),mx=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),bx=n("./src/packages/issue/issue-view/src/actions/login-action-creator.js"),yx=n("./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg"),hx=n.n(yx),gx=n("./src/packages/issue/issue-view/src/views/issue-details/error/error-container/error-display.js");function vx(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    width: 160px;\n    margin-bottom: 14px;\n"]);return vx=function(){return e},e}var Ox=Object(y.defineMessages)({authErrorHeader:{id:"issue.text-for-header-in-authentication-error",defaultMessage:"Log in to Jira to see this issue",description:"Main title for issue authentication error screen, explaining that the user needs to log in to be able to see this issue."},authBtn:{id:"issue.text-for-login-button-in-authentication-error",defaultMessage:"Log in",description:"Primary action button for the issue authentication screen, leads to a log in experience"}}),jx=a.default.img(vx()),wx=Object(y.injectIntl)(function(e){return o.a.createElement(gx.a,{header:e.intl.formatMessage(Ox.authErrorHeader),image:o.a.createElement(jx,{src:hx.a,alt:""})},o.a.createElement(mx.a,{externalId:"issue.login",appearance:"primary",onClick:e.login},e.intl.formatMessage(Ox.authBtn)))}),kx=Object(i.connect)(null,function(e){return{login:function(){return e(Object(bx.a)())}}})(wx),Ex=n("./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg"),Sx=n.n(Ex);function Cx(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    height: 100px;\n    width: 145px;\n"]);return Cx=function(){return e},e}var Px=Object(y.defineMessages)({permissionErrorHeader:{id:"issue.text-for-header-in-permission-error",defaultMessage:"You don't have access to this issue",description:""},permissionErrorDescription:{id:"issue.text-for-description-in-permission-error",defaultMessage:"Make sure the issue exists in this project. If it does, ask a project admin for permission to see the project's issues.",description:""}}),Ix=a.default.img(Cx()),xx=Object(y.injectIntl)(function(e){var t=e.intl;return o.a.createElement(gx.a,{header:t.formatMessage(Px.permissionErrorHeader),description:t.formatMessage(Px.permissionErrorDescription),image:o.a.createElement(Ix,{src:Sx.a,alt:""})})}),_x=n("./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error-view.js"),Mx=n("./node_modules/lodash/isEqual.js"),Tx=n.n(Mx),Ax=n("./node_modules/@atlaskit/dropdown-menu/components/item/DropdownItem.js"),Dx=n("./node_modules/@atlaskit/dropdown-menu/components/DropdownMenuStateless.js"),Lx=n("./src/packages/platform/ui/error-boundary/src/index.js"),Nx=n("./src/packages/issue/issue-view/src/common/model/timestamp-display-setting-type.js"),Rx=Object(r.createContext)({timestampDisplaySetting:Nx.b,onSwitchTimestampDisplaySetting:u.a,timeZone:"Australia/Sydney"}),Fx=Rx.Consumer,Vx=Rx.Provider,Ux=n("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js"),Bx=n("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js");function Kx(){var e=Gx(["\n    background-position: -2px -2px;\n    border-bottom: ","px solid white;\n    flex-shrink: 0;\n"]);return Kx=function(){return e},e}function Wx(){var e=Gx(["\n    height: 22px;\n"]);return Wx=function(){return e},e}function Hx(){var e=Gx(["\n    width: 9px;\n    flex-shrink: 0;\n"]);return Hx=function(){return e},e}function zx(){var e=Gx(["\n    display: flex;\n"]);return zx=function(){return e},e}function qx(){var e=Gx(["\n    flex-direction: column;\n    width: 100%;\n"]);return qx=function(){return e},e}function Gx(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Jx=Object(a.default)(mo.a)(qx()),Qx=Object(a.default)(fo.a)(zx()),Zx=Object(a.default)(po.a)(Hx()),Yx=Object(a.default)(po.a)(Wx()),$x=Object(a.default)(Bx.a)(Kx(),4*d.e),Xx=o.a.createElement(o.a.Fragment,null,o.a.createElement($x,null),o.a.createElement(Zx,null),o.a.createElement(fo.a,null,o.a.createElement(fo.a,{paddingTop:1,paddingBottom:5},o.a.createElement(Ux.a,{fontSize:14,lineHeight:16,intrusion:250})),o.a.createElement(fo.a,{paddingTop:4,paddingBottom:0},o.a.createElement(Ux.a,{fontSize:24,lineHeight:24,intrusion:0})),o.a.createElement(Yx,null))),e_=function(){return o.a.createElement(Jx,null,o.a.createElement(po.b,null),o.a.createElement(Qx,{paddingTop:0,paddingBottom:0},Xx),o.a.createElement(Qx,{paddingTop:0,paddingBottom:0},Xx))},t_=n("./src/packages/issue/issue-view/src/activity/common/styles/index.js"),n_=n("./node_modules/date-fns/parse/index.js"),r_=n.n(n_),o_=function(){return Object(fl.b)("issue-details-history-feed-date-formatting",!1)};function i_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a_(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function s_(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c_(Object(n),!0).forEach(function(t){l_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f_=function(e){return e?{avatarUrl:e.avatarUrls["48x48"],displayName:e.displayName,accountId:e.accountId}:null},p_=function(e){var t=e.fieldType,n=e.fieldSchema,r=e.fieldId,o=e.fieldDisplayName,i=e.timestamp,a=e.actor,s=e.from,c=e.to;s=s||{},c=c||{};var u=f_(a),l=r_()(i);return"jira"===t&&"assignee"===r?{type:"ASSIGNEE_CHANGED",actor:u,timestamp:l,fromUser:s.displayValue?{displayName:s.displayValue,avatarUrl:s.avatarUrl,accountId:s.accountId}:null,toUser:c.displayValue?{displayName:c.displayValue,avatarUrl:c.avatarUrl,accountId:c.accountId}:null}:"jira"===t&&"status"===r?{type:"STATUS_CHANGED",actor:u,timestamp:l,fromStatus:s.displayValue?{name:s.displayValue,statusCategory:Object(v.statusCategoryForId)(s.categoryId)}:null,toStatus:c.displayValue?{name:c.displayValue,statusCategory:Object(v.statusCategoryForId)(c.categoryId)}:null}:"jira"===t&&"comment"===r?{type:"COMMENT_CHANGED",actor:u,timestamp:l}:"jira"===t&&"attachment"===r?{type:"ATTACHMENT_CHANGED",actor:u,timestamp:l,filename:s.displayValue||c.displayValue||"",action:s.displayValue?"ATTACHMENT_DELETED":"ATTACHMENT_UPLOADED"}:"jira"===t&&"priority"===r?{type:"PRIORITY_CHANGED",actor:u,timestamp:l,fromPriority:{iconUrl:s.iconUrl,name:s.displayValue||""},toPriority:{iconUrl:c.iconUrl,name:c.displayValue||""}}:"jira"===t&&"WorklogId"===o&&c.worklog?{type:"WORK_LOGGED",actor:u,timestamp:l,comment:c.worklog.comment,timeSpent:c.worklog.timeSpent}:"jira"===t&&"IssueParentAssociation"===o?{type:"PARENT_ISSUE_CHANGED",actor:u,timestamp:l,fromValue:s.displayValue,toValue:c.displayValue}:"jira"!==t||"timespent"!==r&&"timeestimate"!==r&&"timeoriginalestimate"!==r?"custom"===t&&n&&"com.atlassian.jira.plugin.system.customfieldtypes:float"===n.customFieldType?{type:"NUMERIC_FIELD_CHANGED",actor:u,timestamp:l,field:e.fieldDisplayName,fromValue:s.displayValue?Number(s.displayValue):null,toValue:c.displayValue?Number(c.displayValue):null}:o_()&&(("jira"===t||"custom"===t)&&n&&"date"===n.type||"custom"===t&&n&&"datetime"===n.type)?{type:"DATE_ISSUE_CHANGED",actor:u,timestamp:l,field:e.fieldDisplayName,fromDate:s.value,toDate:c.value,fieldSchema:n.type}:{type:"FIELD_CHANGED",actor:u,timestamp:l,field:e.fieldDisplayName,fromValue:s.displayValue,toValue:c.displayValue}:{type:"TIME_CHANGED",actor:u,field:e.fieldDisplayName,timestamp:l,timeTrackingConfig:e.timeTrackingConfig?e.timeTrackingConfig:null,fromTime:parseInt(s.value,10),toTime:parseInt(c.value,10)}},d_=function(e){var t=e.items;return{nextPageStartIndex:e.nextPageStartAt,isLastPage:e.isLast,history:t.map(p_)}},m_=function(e){var t=e.fields,n=t.created,r=t.creator;return{type:"ISSUE_CREATED",actor:f_(r),timestamp:r_()(n)}},b_=function(e,t){return u_({},e,{history:[u_({},t)].concat(s_(e.history))})},y_=function(e,t,n){return Object(So.g)(function(e,t,n){return"".concat(e,"/rest/internal/2/issue/").concat(t,"/activityfeed?startAt=").concat(n)}(e,t,n)).then(d_)},h_=function(e,t){return Object(So.g)(function(e,t){return"".concat(e,"/rest/api/3/issue/").concat(t,"?fields=creator,created")}(e,t)).then(m_)},g_=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){a_(i,r,o,a,s,"next",e)}function s(e){a_(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){var o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r){e.next=8;break}return e.next=3,Promise.all([y_(t,n,r),h_(t,n)]);case 3:return o=e.sent,i=i_(o,2),a=i[0],s=i[1],e.abrupt("return",b_(a,s));case 8:return e.abrupt("return",y_(t,n,r));case 9:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}();function v_(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function O_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j_(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w_(Object(n),!0).forEach(function(t){E_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S_=function(e,t){switch(t.type){case"FETCH_PAGE_SUCCESS":return t.issueKey!==e.issueKey?e:k_({},e,{status:"IDLE",nextPageStartIndex:t.response.isLastPage?null:t.response.nextPageStartIndex,historyItems:[].concat(j_(e.historyItems),j_(t.response.history))});case"FETCH_PAGE_FAILURE":return t.issueKey!==e.issueKey?e:k_({},e,{status:"ERROR"});case"NEXT_PAGE_REQUESTED":return k_({},e,{status:"LOADING_SUBSEQUENT_PAGE"});case"CHANGE_ISSUE_REQUESTED":return{issueKey:t.issueKey,status:"LOADING_FIRST_PAGE",historyItems:[],nextPageStartIndex:0};default:throw t.type,new Error("Unknown action type in issue history reducer: ".concat(t.type))}},C_=function(e,t){var n=O_(Object(r.useReducer)(S_,function(e){return{status:"IDLE",issueKey:e,historyItems:[],nextPageStartIndex:0}}(t)),2),o=n[0],i=n[1],a=Object(r.useCallback)(function(){var n=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){v_(i,r,o,a,s,"next",e)}function s(e){v_(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function n(r){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g_(e,t,r);case 3:o=n.sent,i({type:"FETCH_PAGE_SUCCESS",response:o,issueKey:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),i({type:"FETCH_PAGE_FAILURE",issueKey:t});case 10:case"end":return n.stop()}},n,null,[[0,7]])}));return function(e){return n.apply(this,arguments)}}(),[e,t]);Object(r.useEffect)(function(){i({type:"CHANGE_ISSUE_REQUESTED",issueKey:t}),a(0)},[a,t]);var s=o.status,c=o.historyItems;return{loading:"LOADING_FIRST_PAGE"===s,loadingMore:"LOADING_SUBSEQUENT_PAGE"===s,error:"ERROR"===s,hasMore:null!==o.nextPageStartIndex,data:c,loadMore:function(){var e=o.status,t=o.nextPageStartIndex;"IDLE"===e&&null!==t&&(i({type:"NEXT_PAGE_REQUESTED"}),a(t))}}},P_=function(e){var t=e.baseUrl,n=e.issueKey;return(0,e.children)(C_(t,n))},I_=function(e){var t=e.children,n=e.isDisabled,r=e.isLoading,i=e.onClick,a=e.shouldFitContainer;return o.a.createElement(D.b,{onClick:i,isDisabled:n,iconAfter:r?o.a.createElement(L.a,{size:"small"}):null,shouldFitContainer:a},r?null:t)};I_.displayName="Button";var x_=I_;function __(){var e=D_(["\n    max-width: 50%;\n"]);return __=function(){return e},e}function M_(){var e=D_(["\n    margin: 0 ","px;\n    &::before {\n        display: block;\n        content: '\u2192';\n    }\n"]);return M_=function(){return e},e}function T_(){var e=D_(["\n    color: ",";\n"]);return T_=function(){return e},e}function A_(){var e=D_(["\n    display: flex;\n    align-items: center;\n    margin-top: ","px;\n    color: ",";\n"]);return A_=function(){return e},e}function D_(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var L_=a.default.div(A_(),d.e,vt.colors.N500);L_.displayName="Container";var N_=a.default.span(T_(),vt.colors.N90);N_.displayName="Subtle";var R_=a.default.div(M_(),d.e);R_.displayName="Arrow";var F_=a.default.div(__()),V_=Object(y.defineMessages)({none:{id:"issue-history.common.change.none",defaultMessage:"None",description:"(noun) Text to indicate empty value"}}),U_=function(e){var t=e.value,n=e.intl;return o.a.createElement(F_,null,t||o.a.createElement(N_,null,n.formatMessage(V_.none)))};U_.displayName="Value";var B_=Object(y.injectIntl)(function(e){var t=e.from,n=e.to,r=e.intl;return(t||n)&&o.a.createElement(L_,null,o.a.createElement(U_,{value:t,intl:r}),o.a.createElement(R_,null),o.a.createElement(U_,{value:n,intl:r}))}),K_=n("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),W_=n("./node_modules/@atlaskit/logo/dist/esm/JiraLogo/Icon.js"),H_=n("./src/packages/issue/issue-view/src/common/component/timestamp/index.js"),z_=Object(y.defineMessages)({noActor:{id:"issue-history.common.history-item.no-actor",defaultMessage:"Jira automatically",description:'Text to indicate that an action was automatically performed by Jira. Displayed before the action performed e.g. "Jira automatically {didSomething}".'}});function q_(){var e=Y_(["\n    margin-left: ","px;\n"]);return q_=function(){return e},e}function G_(){var e=Y_([""]);return G_=function(){return e},e}function J_(){var e=Y_(["\n    flex-grow: 1;\n    align-self: center;\n    /*\n        Might be able to remove when we use Fabric Renderer\n        Need to give width to prevent overflow (BENTO-1779)\n        95% so it's not too close to edge (esp in single column layout)\n        30px arbitrary width to accomodate the arrow\n    */\n    width: calc(95% - 30px);\n"]);return J_=function(){return e},e}function Q_(){var e=Y_(["\n    height: 36px; /* Required because AkAvatar is styled as inline-block */\n    margin-right: ","px;\n\n    /* Required because JiraIcon isn't the same width as AkAvatar */\n    width: 36px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return Q_=function(){return e},e}function Z_(){var e=Y_(["\n    margin: ","px 0;\n    display: flex;\n"]);return Z_=function(){return e},e}function Y_(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var $_=a.default.div(Z_(),3*d.e);$_.displayName="Container";var X_=a.default.div(Q_(),d.e);X_.displayName="Avatar";var eM=a.default.div(J_());eM.displayName="Content";var tM=a.default.div(G_());tM.displayName="Summary";var nM=a.default.span(q_(),d.e);nM.displayName="TimestampContainer";var rM=Object(K_.a)("div",{target:"e12j7rwc0"})({name:"1lv1yo7",styles:"display:inline-flex"}),oM=function(e){var t=e.action,n=e.change,r=e.actor,i=e.timestamp,a=e.testId,s=e.intl;return o.a.createElement($_,{"data-test-id":a},o.a.createElement(Js,{userAccount:r,analyticsData:{trigger:"history-item-actor-avatar"}},o.a.createElement(X_,null,r?o.a.createElement(Ws.a,{src:r.avatarUrl}):o.a.createElement(W_.a,{label:"",size:"large"}))),o.a.createElement(eM,null,o.a.createElement(tM,null,function(e,t){return e?o.a.createElement(rM,null,o.a.createElement(Js,{userAccount:e,analyticsData:{trigger:"history-item-actor-name"}},o.a.createElement(t_.c,null,e.displayName))):t.formatMessage(z_.noActor)}(r,s)," ",t,o.a.createElement(nM,null,o.a.createElement(Fx,null,function(e){var t=e.timestampDisplaySetting,n=e.onSwitchTimestampDisplaySetting,r=e.timeZone;return o.a.createElement(H_.a,{value:i,displaySetting:t,onSwitchDisplaySetting:n,extraStyles:t_.a,timeZone:r,tooltipPosition:"top"})}))),n))};oM.displayName="HistoryItem";var iM=Object(y.injectIntl)(oM),aM=Object(y.defineMessages)({unassigned:{id:"issue-history.history-items.assignee-history-item.assignee.unassigned",defaultMessage:"Unassigned",description:"Describes that a user has unassigned somebody from the issue."}});function sM(){var e=fM([""]);return sM=function(){return e},e}function cM(){var e=fM(["\n    height: 36px; /* Required because AkAvatar is styled as inline-block */\n    margin-right: 8px;\n"]);return cM=function(){return e},e}function uM(){var e=fM(["\n    display: flex;\n    align-items: center;\n"]);return uM=function(){return e},e}function lM(){var e=fM(["\n    height: 36px; /* Required because AkAvatar is styled as inline-block */\n    margin-right: 8px;\n"]);return lM=function(){return e},e}function fM(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}a.default.div(lM());var pM=a.default.div(uM()),dM=a.default.div(cM()),mM=a.default.div(sM()),bM=Object(y.injectIntl)(function(e){var t=e.user,n=e.intl;return t?o.a.createElement(pM,null,o.a.createElement(dM,null,o.a.createElement(Ws.a,{src:t.avatarUrl})),o.a.createElement(mM,null,t.displayName)):o.a.createElement(N_,null,n.formatMessage(aM.unassigned))}),yM=Object(y.defineMessages)({changed:{id:"issue-history.history-items.assignee-history-item.changed",defaultMessage:"changed the {assignee}",description:"Describes that a user has updated the assignee of the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {assignee} is the 'Assignee' field label."},assignee:{id:"issue-history.history-items.assignee-history-item.assignee",defaultMessage:"Assignee",description:"(noun) Value to display as label for the 'Assignee' field"}});function hM(){return(hM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var gM=function(e){var t=e.historyItem,n=e.Assignee,r=t.actor,i=t.timestamp,a=t.fromUser,s=t.toUser;return o.a.createElement(y.FormattedMessage,hM({},yM.changed,{values:{assignee:o.a.createElement(t_.c,{key:"assignee"},o.a.createElement(y.FormattedMessage,yM.assignee))}}),function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.assignee-history-item.history-item",actor:r,action:t,timestamp:i,change:o.a.createElement(B_,{from:o.a.createElement(n,{user:a}),to:o.a.createElement(n,{user:s})})})})};gM.displayName="AssigneeHistoryItem",gM.defaultProps={Assignee:bM};var vM=gM,OM=Object(y.defineMessages)({uploaded:{id:"issue-history.history-items.attachment-history-item.uploaded",defaultMessage:"added an {attachment}",description:"Describes that a user has added a new attachment to the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {attachment} is the 'Attachment' field label."},deleted:{id:"issue-history.history-items.attachment-history-item.deleted",defaultMessage:"deleted an {attachment}",description:"Describes that a user has removed an attachment from the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {attachment} is the 'Attachment' field label."},attachment:{id:"issue-history.history-items.attachment-history-item.attachment",defaultMessage:"Attachment",description:"(noun) Value to display as label for the 'Attachment' field"}});function jM(){return(jM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var wM=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp,i=t.filename,a=t.action,s="ATTACHMENT_UPLOADED"===a?OM.uploaded:OM.deleted;return o.a.createElement(y.FormattedMessage,jM({},s,{values:{attachment:o.a.createElement(t_.c,{key:"attachment"},o.a.createElement(y.FormattedMessage,OM.attachment))}}),function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.attachment-history-item.history-item",actor:n,action:t,timestamp:r,change:o.a.createElement(B_,{from:"ATTACHMENT_DELETED"===a?i:null,to:"ATTACHMENT_UPLOADED"===a?i:null})})})};wM.displayName="AttachmentHistoryItem";var kM=wM,EM=Object(y.defineMessages)({deleted:{id:"issue-history.history-items.comment-history-item.deleted",defaultMessage:"deleted a {comment}",description:"Describes that a user has deleted a comment from the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {comment} is the 'Comment' field label."},comment:{id:"issue-history.history-items.comment-history-item.comment",defaultMessage:"Comment",description:"(noun) Value to display as label for the 'Comment' field"}});function SM(){return(SM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var CM=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp;return o.a.createElement(y.FormattedMessage,SM({},EM.deleted,{values:{comment:o.a.createElement(t_.c,{key:"comment"},o.a.createElement(y.FormattedMessage,EM.comment))}}),function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.comment-history-item.history-item",actor:n,action:t,timestamp:r,change:o.a.createElement(B_,{from:null,to:null})})})};CM.displayName="CommentHistoryItem";var PM=CM,IM=Object(y.defineMessages)({updatedField:{id:"issue-history.common.updated-field",defaultMessage:"updated the {field}",description:"Describes that a user has updated a field on the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {field} is the label for the field."}});function xM(){return(xM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _M=function(e,t,n){if(null===e||0===e.length)return null;var r=n?"YYYY/MM/DD h:mm A":"YYYY/MM/DD";return ue()(new Date(e)).tz(t).format(r)},MM=function(e){var t=e.historyItem,n=t.actor,r=t.field,i=t.timestamp,a=t.fromDate,s=t.toDate,c=t.fieldSchema;return o.a.createElement(y.FormattedMessage,xM({},IM.updatedField,{values:{field:o.a.createElement(t_.c,{key:"field"},r)}}),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.a.createElement(Fx,null,function(e){var r=e.timeZone;return o.a.createElement(iM,{testId:"issue-history.ui.history-items.date-history-item.history-item",actor:n,action:t,timestamp:i,change:o.a.createElement(B_,{from:_M(a,r,"datetime"===c),to:_M(s,r,"datetime"===c)})})})})};MM.displayName="DateChangedHistoryItemView";var TM=MM,AM=Object(y.defineMessages)({added:{id:"issue-history.history-items.flag-history-item.added",defaultMessage:"added a {flag}",description:"Describes that a user has added a flag to the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {flag} is the 'Flag' field label."},removed:{id:"issue-history.history-items.flag-history-item.removed",defaultMessage:"removed a {flag}",description:"Describes that a user has removed a flag from the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {flag} is the 'Flag' field label."},flag:{id:"issue-history.history-items.flag-history-item.flag",defaultMessage:"Flag",description:"(noun) Value to display as label for the 'Flag' field."}});function DM(){return(DM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var LM=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp,i="FLAG_ADDED"===t.action?AM.added:AM.removed;return o.a.createElement(y.FormattedMessage,DM({},i,{values:{flag:o.a.createElement(t_.c,{key:"flag"},o.a.createElement(y.FormattedMessage,AM.flag))}}),function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.flag-history-item.history-item",actor:n,action:t,timestamp:r,change:null})})};LM.displayName="FlagHistoryItem";var NM=LM;function RM(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    overflow-x: auto;\n"]);return RM=function(){return e},e}var FM=a.default.span(RM());function VM(){return(VM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}FM.displayName="Value";var UM=function(e){var t=e.historyItem,n=t.actor,r=t.field,i=t.timestamp,a=t.fromValue,s=t.toValue;return o.a.createElement(y.FormattedMessage,VM({},IM.updatedField,{values:{field:o.a.createElement(t_.c,{key:"field"},r)}}),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.generic-history-item.history-item",actor:n,action:t,timestamp:i,change:o.a.createElement(B_,{from:a?o.a.createElement(FM,null,a):null,to:s?o.a.createElement(FM,null,s):null})})})};UM.displayName="GenericHistoryItem";var BM=UM,KM=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp;return o.a.createElement(y.FormattedMessage,{id:"issue.history.created-issue-type",defaultMessage:"created the {issue}",values:{issue:o.a.createElement(t_.c,{key:"issueType"},o.a.createElement(y.FormattedMessage,{id:"issue.history.created-issue-type.issue",defaultMessage:"Issue"}))}},function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.issue-created-history-item.history-item",actor:n,action:t,timestamp:r,change:null})})};KM.displayName="IssueCreatedHistoryItem";var WM=KM,HM=Object(y.defineMessages)({loadMore:{id:"issue-history.history-items.load-more",defaultMessage:"Load more",description:"Button label - when clicked, will load more history items for history feed"}});function zM(){return(zM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var qM=function(e){var t=e.historyItem,n=t.field,r=t.actor,i=t.timestamp,a=t.fromValue,s=t.toValue,c=o.a.createElement(B_,{from:null!==a?o.a.createElement(_m.a,{max:1/0,value:a}):null,to:null!==s?o.a.createElement(_m.a,{max:1/0,value:s}):null});return o.a.createElement(y.FormattedMessage,zM({},IM.updatedField,{values:{field:o.a.createElement(t_.c,{key:"field"},n)}}),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.numeric-value-history-item.history-item",actor:r,action:t,timestamp:i,change:c})})};qM.displayName="NumericValueHistoryItem";var GM=qM,JM=Object(y.defineMessages)({changed:{id:"issue-history.history-items.parent-issue-history-item.changed",defaultMessage:"changed the {parent}",description:"Describes that a user has updated the parent of the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change."},parent:{id:"issue-history.history-items.parent-issue-history-item.parent",defaultMessage:"Parent",description:"(noun) Value to display as label for the 'Parent' association"}});function QM(){return(QM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ZM=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp,i=t.fromValue,a=t.toValue;return o.a.createElement(y.FormattedMessage,QM({},JM.changed,{values:{parent:o.a.createElement(t_.c,{key:"parent"},o.a.createElement(y.FormattedMessage,JM.parent))}}),function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.parent-issue-history-item.history-item",actor:n,action:t,timestamp:r,change:o.a.createElement(B_,{from:i,to:a})})})};ZM.displayName="ParentIssueHistoryItem";var YM=ZM,$M=Object(y.defineMessages)({changed:{id:"issue-history.history-items.priority-history-item.changed",defaultMessage:"changed the {priority}",description:"Describes that a user has changed the priority of the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {priority} is the 'Priority' field label."},priority:{id:"issue-history.history-items.priority-history-item.priority",defaultMessage:"Priority",description:"(noun) Value to display as label for the 'Priority' field."}});function XM(){return(XM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var eT=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp,i=t.fromPriority,a=t.toPriority;return o.a.createElement(y.FormattedMessage,XM({},$M.changed,{values:{priority:o.a.createElement(t_.c,{key:"priority"},o.a.createElement(y.FormattedMessage,$M.priority))}}),function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.priority-history-item.history-item",actor:n,action:t,timestamp:r,change:o.a.createElement(B_,{from:o.a.createElement(Ed.a,{iconUrl:i.iconUrl},i.name),to:o.a.createElement(Ed.a,{iconUrl:a.iconUrl},a.name)})})})};eT.displayName="PriorityHistoryItem";var tT=eT;function nT(){return(nT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var rT=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp,i=t.fromTime,a=t.toTime,s=t.timeTrackingConfig,c=t.field,u=i,l=a;if(s){var f=s.hoursPerDay,p=s.daysPerWeek;u=i&&Object(x.c)(p,f)(i),l=a&&Object(x.c)(p,f)(a)}return o.a.createElement(y.FormattedMessage,nT({},IM.updatedField,{values:{field:o.a.createElement(t_.c,{key:"field"},c)}}),function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.time-changed-history-item.history-item",actor:n,action:t,timestamp:r,change:o.a.createElement(B_,{from:u&&o.a.createElement(ht.a,null,u),to:l&&o.a.createElement(ht.a,null,l)})})})};rT.displayName="TimeChangedHistoryItemView";var oT=rT,iT=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/status-lozenge/index.js"),aT=Object(y.defineMessages)({changed:{id:"issue-history.history-items.transition-history-item.changed",defaultMessage:"changed the {status}",description:"Describes that a user has changed the status of the issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {status} is the 'Status' field label."},status:{id:"issue-history.history-items.transition-history-item.status",defaultMessage:"Status",description:"(noun) Value to display as label for the 'Status' field."}});function sT(){return(sT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var cT=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp,i=t.fromStatus,a=t.toStatus;return o.a.createElement(y.FormattedMessage,sT({},aT.changed,{values:{status:o.a.createElement(t_.c,{key:"status"},o.a.createElement(y.FormattedMessage,aT.status))}}),function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.transition-history-item.history-item",actor:n,action:t,timestamp:r,change:o.a.createElement(B_,{from:i&&o.a.createElement(iT.a,{category:i.statusCategory,name:i.name}),to:a&&o.a.createElement(iT.a,{category:a.statusCategory,name:a.name})})})})};cT.displayName="TransitionHistoryItem";var uT=cT,lT=Object(y.defineMessages)({loggedWork:{id:"issue-history.history-items.worklog-history-item.logged-work",defaultMessage:"logged {time}",description:"Describes that a user has logged work on an issue.\n            Part of the heading in History feed, appears after the display name of the user who made the change.\n            {time} is the well-formatted time logged (eg, '1d 6h 30m')."}});function fT(){return(fT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pT=function(e){var t=e.historyItem,n=t.actor,r=t.timestamp,i=t.comment,a=t.timeSpent;return o.a.createElement(y.FormattedMessage,fT({},lT.loggedWork,{values:{time:o.a.createElement(t_.c,{key:"priority"},a)}}),function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return o.a.createElement(iM,{testId:"issue-history.ui.history-items.worklog-history-item.history-item",actor:n,action:t,timestamp:r,change:i})})};pT.displayName="WorklogHistoryItem";var dT=pT,mT=function(e){var t=e.history,n=e.intl,r=e.isLoadingMore,i=e.onLoadMore,a=e.hasMore;return o.a.createElement(Ac.b,{sourceName:"historyItems",sourceType:Ac.m},t.map(function(e,t){switch(e.type){case"ASSIGNEE_CHANGED":return o.a.createElement(vM,{key:t,historyItem:e});case"STATUS_CHANGED":return o.a.createElement(uT,{key:t,historyItem:e});case"COMMENT_CHANGED":return o.a.createElement(PM,{key:t,historyItem:e});case"ATTACHMENT_CHANGED":return o.a.createElement(kM,{key:t,historyItem:e});case"PRIORITY_CHANGED":return o.a.createElement(tT,{key:t,historyItem:e});case"FLAG_CHANGED":return o.a.createElement(NM,{key:t,historyItem:e});case"ISSUE_CREATED":return o.a.createElement(WM,{key:t,historyItem:e});case"FIELD_CHANGED":return o.a.createElement(BM,{key:t,historyItem:e});case"NUMERIC_FIELD_CHANGED":return o.a.createElement(GM,{key:t,historyItem:e});case"TIME_CHANGED":return o.a.createElement(oT,{key:t,historyItem:e});case"WORK_LOGGED":return o.a.createElement(dT,{key:t,historyItem:e});case"PARENT_ISSUE_CHANGED":return o.a.createElement(YM,{key:t,historyItem:e});case"DATE_ISSUE_CHANGED":return o_()?o.a.createElement(TM,{key:t,historyItem:e}):null;default:return null}}),a&&o.a.createElement("div",{"data-test-id":"issue-history.ui.history-items.load-more-button"},o.a.createElement(x_,{shouldFitContainer:!0,isDisabled:r,isLoading:r,onClick:i},n.formatMessage(HM.loadMore))),o.a.createElement(Ac.f,null))};mT.displayName="HistoryItems";var bT=Object(y.injectIntl)(mT),yT=function(e){var t=e.baseUrl,n=e.issueKey,r=e.HistoryItems,i=e.IssueHistoryService;return o.a.createElement(t_.d,null,o.a.createElement(i,{baseUrl:t,issueKey:n},function(e){var t=e.loading,n=e.loadingMore,i=e.hasMore,a=e.loadMore,s=e.error,c=e.data;return t?o.a.createElement(e_,null):s?null:o.a.createElement(r,{history:c,hasMore:i,isLoadingMore:n,onLoadMore:a})}))};yT.displayName="IssueHistory",yT.defaultProps={HistoryItems:bT,IssueHistoryService:P_};var hT=yT,gT=function(e){var t=e.TimestampDisplaySettingsProvider,n=e.IssueHistory,r=e.baseUrl,i=e.issueKey,a=e.timestampDisplaySetting,s=e.timeZone,c=e.onSwitchTimestampDisplaySetting;return o.a.createElement(Lx.b,{id:"issue-history"},o.a.createElement(t,{value:{timestampDisplaySetting:a,timeZone:s,onSwitchTimestampDisplaySetting:c}},o.a.createElement(n,{baseUrl:r,issueKey:i})))};gT.displayName="IssueHistoryContainer",gT.defaultProps={TimestampDisplaySettingsProvider:Vx,IssueHistory:hT};var vT=gT,OT=n("./src/packages/issue/issue-view/src/actions/activity-feed-action-type.js"),jT=n("./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-action-creator.js"),wT="JSDComments",kT="Comments",ET="Ecosystem",ST="History",CT="Worklog",PT=n("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),IT=n("./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js"),xT=n("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),_T=n("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js"),MT=n("./src/packages/issue/issue-view/src/common/model/comment-type.js"),TT=n("./src/packages/issue/issue-view/src/drafts/draft-utils.js"),AT=n("./node_modules/react-sweet-state/lib/esm/index.js"),DT=n("./src/packages/issue/issue-view/src/common/util/errors/index.js"),LT=n("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),NT=n("./src/packages/issue/issue-view/src/common/service/issue/gira/client.js");function RT(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var FT=function(e){return e.map(LT.d)},VT=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){RT(i,r,o,a,s,"next",e)}function s(e){RT(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(NT.a)(t).query({query:"\nquery CommentVisibilitiesQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        commentVisibilities {\n            type\n            value\n        }\n    }\n}\n",variables:{issueKey:n}});case 2:if(r=e.sent,o=r.errors,i=r.data,!o){e.next=7;break}throw new Error("GraphqlErrorResponse");case 7:if(!(i&&i.viewIssue&&i.viewIssue.commentVisibilities)){e.next=10;break}return a=FT(i.viewIssue.commentVisibilities),e.abrupt("return",a);case 10:throw new Error("GraphqlNullData");case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();function UT(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var BT="An error occurred attempting to fetch comment visibilities from gira",KT=function(e){if(Object(DT.a)(e))Object(DT.b)("issue.fetch.comment-visibilities",BT,e);else{var t="GraphqlErrorResponse"===e.message||"GraphqlNullData"===e.message?e.message:"other";fl.h.safeError("issue.fetch.comment-visibilities",BT,{errorReason:t})}},WT=function(e,t){var n=e({action:"fetched"}),r={totalCount:t.length,roleCount:t.filter(function(e){return e.type===MT.d}).length,groupCount:t.filter(function(e){return e.type===MT.b}).length};Object(Ac.r)(n,"commentVisibilities fetched",r)},HT={fetch:function(){return function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){UT(i,r,o,a,s,"next",e)}function s(e){UT(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r,o,i,a,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,o=t.setState,i=n.issueKey,a=n.baseUrl,s=n.createAnalyticsEvent,!((c=r()).loading||c.error||c.data)){e.next=5;break}return e.abrupt("return");case 5:return o({loading:!0,error:null,data:null}),e.prev=6,e.next=9,VT(a,i);case 9:u=e.sent,o({loading:!1,error:null,data:{commentVisibilities:u}}),WT(s,u),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),KT(e.t0),o({loading:!1,error:e.t0,data:null});case 18:case"end":return e.stop()}},e,null,[[6,14]])}));return function(t,n){return e.apply(this,arguments)}}()}},zT=Object(AT.c)({name:"issue-view-comment-visibilities",initialState:{data:null,loading:!1,error:null},actions:HT}),qT=Object(AT.a)(zT,{displayName:"CommentVisibilitiesContainer"}),GT=Object(AT.d)(zT,{displayName:"CommentVisibilitiesSubscriber"});function JT(){return(JT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var QT=function(e){return function(t){var n=t.baseUrl,r=t.issueKey,i=t.shouldFetchCommentVisibilities,a=t.createAnalyticsEvent;return o.a.createElement(qT,{baseUrl:n,issueKey:r,createAnalyticsEvent:a},o.a.createElement(GT,null,function(n,r){var a=r.fetch;return o.a.createElement(e,JT({},t,{fetchCommentVisibilities:i?a:void 0}))}))}},ZT=n("./node_modules/@atlaskit/icon/glyph/check.js"),YT=n.n(ZT),$T=n("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),XT=n.n($T),eA=n("./node_modules/@atlaskit/icon/glyph/unlock.js"),tA=n.n(eA),nA=n("./node_modules/@atlaskit/select/PopupSelect/Select.js"),rA=n("./node_modules/lodash/countBy.js"),oA=n.n(rA),iA=Object(y.defineMessages)({publicTooltip:{id:"comment-visibility.button.public-tooltip",defaultMessage:"Visible to all users",description:"Comment visibility tooltip for dropdown public option."},optionsTooltip:{id:"comment-visibility.button.options-tooltip",defaultMessage:"Only visible to {value}",description:"Comment visibility tooltip for dropdown options."}});function aA(){var e=cA(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 250px;\n"]);return aA=function(){return e},e}function sA(){var e=cA(["\n    display: flex;\n    align-items: center;\n    ",";\n"]);return sA=function(){return e},e}function cA(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var uA=a.default.div(sA(),function(e){return e.removeIconMargin?"margin: 0 ".concat(-d.e/2,"px;"):null}),lA=a.default.div(aA());function fA(){return(fA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pA(Object(n),!0).forEach(function(t){mA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bA(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var yA=function(e,t){var n=e(t),r=n.buttonStyles,o=bA(n,["buttonStyles"]);return dA({buttonStyles:dA({},r,{maxWidth:"".concat(300,"px")})},o)},hA=function(e){var t=e.selectedOption,n=e.isSelected,r=t.type===MT.c,i=r?tA.a:XT.a,a=r?o.a.createElement(y.FormattedMessage,iA.publicTooltip):o.a.createElement(y.FormattedMessage,fA({},iA.optionsTooltip,{values:{value:t.value}}));return o.a.createElement(Je.a,{content:a,position:"left"},o.a.createElement(D.b,{spacing:"default",theme:yA,isSelected:n,shouldFitContainer:!0,iconBefore:o.a.createElement(uA,{removeIconMargin:!r},o.a.createElement(i,{label:""}))},!r&&o.a.createElement(lA,null,t.value)))};hA.displayName="TargetButton";var gA=hA,vA=Object(y.defineMessages)({errorMessage:{id:"issue.activity.comment.comment-visibility.error-image.messages.errorMessage",defaultMessage:"We couldn't load the visibility options",description:"Text that is shown when there is an error fetching comment visibility options"}}),OA=n("./src/packages/issue/issue-view/src/activity/comment/comment-visibility/assets/Error.svg"),jA=n.n(OA);function wA(){var e=CA(["\n    color: ",";\n    text-align: center;\n"]);return wA=function(){return e},e}function kA(){var e=CA(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]);return kA=function(){return e},e}function EA(){var e=CA(["\n    width: ","px;\n    height: ","px;\n    margin: 12px 0;\n    background: center no-repeat url(",");\n"]);return EA=function(){return e},e}function SA(){var e=CA(["\n    width: ","px;\n"]);return SA=function(){return e},e}function CA(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var PA=a.default.div(SA(),25*d.e),IA=a.default.div(EA(),10*d.e,10*d.e,jA.a),xA=a.default.div(kA()),_A=a.default.p(wA(),vt.colors.N200),MA=function(e){var t=e.intl;return o.a.createElement(PA,null,o.a.createElement(xA,null,o.a.createElement(IA,null),o.a.createElement(_A,null,t.formatMessage(vA.errorMessage))))};MA.displayName="ErrorImage";var TA=Object(y.injectIntl)(MA),AA=Object(y.defineMessages)({visibleToAllUsers:{id:"comment-visibility.visible-to-all-users",defaultMessage:"Visible to all users",description:"Comment visibility option. Display name for public option"},projectRolesLabel:{id:"comment-visibility.project-roles-label",defaultMessage:"Project roles",description:"Comment visibility option. Section heading for project roles"},groupsLabel:{id:"comment-visibility.groups-label",defaultMessage:"Groups",description:"Comment visibility option. Section heading for groups"}}),DA=function(e,t){return e.value===t.value&&e.type===t.type};function LA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function NA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LA(Object(n),!0).forEach(function(t){RA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function RA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FA=function(e,t,n){return e.filter(function(e){return e.type===n}).map(function(e){return NA({},e,{selected:!!e&&DA(e,t)})})},VA=function(e){return{label:"",options:[NA({},MT.a,{selected:e.type===MT.c})]}};function UA(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: ","px;\n"]);return UA=function(){return e},e}var BA=a.default.div(UA(),18*d.e),KA=function(){return o.a.createElement(BA,null,o.a.createElement(L.a,null))};function WA(){var e=ZA(["\n    min-width: ","px; /* to make buttons on small screen look better */\n    margin-left: ","px;\n"]);return WA=function(){return e},e}function HA(){var e=ZA(["\n    display: flex;\n    justify-content: center;\n    padding: ","px;\n"]);return HA=function(){return e},e}function zA(){var e=ZA(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return zA=function(){return e},e}function qA(){var e=ZA(["\n    font-size: 11px;\n    font-weight: initial;\n    padding-top: 4px;\n"]);return qA=function(){return e},e}function GA(){var e=ZA(["\n    margin-left: ","px;\n    max-height: ","px;\n"]);return GA=function(){return e},e}function JA(){var e=ZA(["\n    padding: 0 5px 0 0;\n    flex-shrink: 0;\n    max-height: ","px;\n"]);return JA=function(){return e},e}function QA(){var e=ZA(["\n    display: flex;\n    justify-content: left;\n    align-items: center;\n"]);return QA=function(){return e},e}function ZA(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}KA.displayName="LoadingSpinner";var YA=a.default.div(QA()),$A=a.default.span(JA(),3*d.e),XA=a.default.span(GA(),d.e/2,3*d.e),eD=a.default.div(qA()),tD=a.default.div(zA()),nD=a.default.div(HA(),2*d.e),rD=a.default.div(WA(),4.5*d.e,d.e/2);function oD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function iD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iD(Object(n),!0).forEach(function(t){sD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cD=function(e){var t=e.label;return t&&o.a.createElement(eD,null,t)},uD={container:function(e){return aD({},e,{paddingBottom:"0",paddingTop:"0"})},group:function(e){return aD({},e,{paddingBottom:"4px",paddingTop:"0"})},option:function(e,t){var n=t.data.selected,r=t.isFocused?vt.colors.N20:e.backgroundColor;return aD({},e,{backgroundColor:n?vt.colors.B50:r})}},lD={placement:"bottom-end",modifiers:{offset:{offset:"0, ".concat(d.e,"px")},preventOverflow:{escapeWithReference:!0},setZIndex:{enabled:!0,order:890,fn:function(e){return aD({},e,{styles:aD({},e.styles,{zIndex:d.f.modal})})}}}},fD=Object(Ac.a)("commentVisibilitySelect",{onOpen:"opened",onChange:"changed"})(nA.a),pD=function(e){var t=e.value,n=e.selected,r=e.isPublic?tA.a:XT.a;return o.a.createElement(Je.a,{content:t,delay:2e3},o.a.createElement(YA,null,o.a.createElement($A,null,o.a.createElement(r,{label:""})),o.a.createElement(tD,null,t),o.a.createElement(XA,null,n?o.a.createElement(YT.a,{primaryColor:vt.colors.B500,label:""}):null)))};pD.displayName="OptionLabel";var dD=function(e){var t=e.isLoading,n=e.options,i=e.initialValue,a=e.onChange,s=e.error,c=e.intl.formatMessage,u=t||s,l=oD(Object(r.useState)(i),2),f=l[0],p=l[1],d=function(e){a(e),p(e)},m=oD(Object(r.useState)(!1),2),b=m[0],y=m[1],h=Object(r.useCallback)(function(){return y(!0)},[]),g=Object(r.useCallback)(function(){return y(!1)},[]),v=i.type===MT.c;if((u||vu()(n))&&v)return null;var O=u||null==n?function(e,t,n){var r=[VA(t)];if(e){var o=e.type===t.type&&e.value===t.value;r.push({label:e.type===MT.b?n(AA.groupsLabel):n(AA.projectRolesLabel),options:[NA({},e,{selected:o})]})}return r}(i,f,c):function(e,t,n){return[VA(n),{label:t(AA.projectRolesLabel),options:FA(e,n,MT.d)},{label:t(AA.groupsLabel),options:FA(e,n,MT.b)}]}(n,c,f),j=u?{MenuList:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Hh.d.MenuList,e,e.children),o.a.createElement(nD,null,s?o.a.createElement(TA,null):o.a.createElement(KA,null)))}}:void 0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ac.k,{onMount:function(e){return Object(Ac.r)(e,"commentVisibilitySelect rendered")}}),o.a.createElement(rD,null,o.a.createElement(fD,{onClose:g,onOpen:function(e){h();var t=oA()(n,"type");Object(Ac.u)(e,"commentVisibilityView",{roleCount:t[MT.d]||0,groupCount:t[MT.b]||0,totalCount:null==n?1:n.length+1})},maxMenuWidth:300,minMenuWidth:175,maxMenuHeight:340,formatOptionLabel:function(e){var t=e.type,n=e.value,r=e.selected,i=t===MT.c;return o.a.createElement(pD,{isPublic:i,selected:r,value:i?c(AA.visibleToAllUsers):n})},popperProps:lD,components:j,styles:uD,formatGroupLabel:cD,options:O,target:function(e){var t=e.ref;return o.a.createElement("div",{ref:t},o.a.createElement(gA,{selectedOption:f,isSelected:b}))},isLoading:t,error:s,onChange:function(e,t,n){d(function(e){return{type:e.type,value:e.value}}(e)),Object(Ac.u)(n,"commentVisibilityView")},isSearchable:null!=n&&n.length+1>30,searchThreshold:30})))},mD=Object(eo.a)([y.injectIntl])(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ac.k,{onMount:function(t){Object(Ac.r)(t,"commentVisibilitySelect mounted",{isLoading:e.isLoading})}}),o.a.createElement(dD,e))}),bD=function(e){var t=e.initialValue,n=e.onChange;return o.a.createElement(GT,null,function(e){var r=e.loading,i=e.error,a=e.data;return o.a.createElement(mD,{initialValue:t,onChange:n,isLoading:r,error:i,options:a?a.commentVisibilities:null})})};bD.displayName="CommentVisibilitySelect";var yD=Object(Oo.a)()(bD),hD=n("./node_modules/lodash/throttle.js"),gD=n.n(hD),vD=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),OD=n("./node_modules/@atlaskit/tabs/components/Tabs.js"),jD=Object(no.createSelector)(w.A,k.B,function(e,t){return t.commentId||QP.a},function(e,t,n){return{objectId:e,containerId:t,childObjectId:n}}),wD=function(e){return e.shareAsComment},kD=Object(no.createSelector)(wD,function(e){return e.value}),ED=Object(no.createSelector)(wD,function(e){return e.timestamp}),SD=Object(eo.a)([y.injectIntl,Object(i.connect)(function(e,t){var n=Object(w.f)(e);return{contextIdentifier:jD(e,t),baseUrl:n,mentionProvider:Object(j.b)(e),mentionEncoder:Object(j.a)(n),activityProvider:Ao(e),mediaContext:Object(E.a)(e),sharedAtTimestamp:ED(e),sharedValue:kD(e)}},function(e){return{onExpandedFailure:function(){return e(xo())},onSaveFailure:function(){return e(_o())},clearSharedValues:function(){e(function(){return{type:My.a}}())}}})])(he),CD=Object(y.defineMessages)({replyToCustomer:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.reply-to-customer-button",defaultMessage:"Reply to customer",description:"A link button which opens an editor to add an external comment in a Jira Service Desk issue."},addInternalNote:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.add-internal-note-button",defaultMessage:"Add internal note",description:"A link button which opens an editor to add an internal comment in a Jira Service Desk issue."},loadingAttachments:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.loading-attachments",defaultMessage:"Loading attachments\u2026",description:"The loading status to indicate that attachments are being uploaded."}}),PD=n("./node_modules/@atlaskit/icon/glyph/attachment.js"),ID=n.n(PD),xD=Object(y.defineMessages)({addAttachmentLabel:{id:"issue.label-for-add-attachment-button",defaultMessage:"Add attachment",description:"The label to be used on the quick add button for adding an attachment to an issue"}});function _D(){var e=TD(["\n    margin-left: auto;\n    margin-right: ","px;\n"]);return _D=function(){return e},e}function MD(){var e=TD(["\n    padding: ","px;\n"]);return MD=function(){return e},e}function TD(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var AD=a.default.span(MD(),d.e/2),DD=a.default.div(_D(),d.e),LD=function(e){var t=e.intl.formatMessage,n=e.onClick,r=e.isCommentAttachmentInProgress;return o.a.createElement(DD,null,o.a.createElement(Je.a,{content:t(xD.addAttachmentLabel),position:"bottom"},o.a.createElement(D.b,{spacing:"none",appearance:"subtle-link",isLoading:r,iconBefore:o.a.createElement(AD,null,o.a.createElement(ID.a,{size:"medium",label:t(xD.addAttachmentLabel)})),externalId:"attachment",onClick:n})))};LD.displayName="AttachmentPicker";var ND=Object(y.injectIntl)(LD),RD=Object(eo.a)([Object(i.connect)(function(e){return{isCommentAttachmentInProgress:Object(Ra.x)(e)}},function(e){return{onClick:function(){e(Object(LC.c)())}}})])(ND);function FD(){var e=UD(["\n    padding: 0 ","px;\n"]);return FD=function(){return e},e}function VD(){var e=UD(["\n    white-space: nowrap;\n    border: 1px solid ",";\n    height: ","px;\n    box-sizing: border-box;\n    padding: ","px 0;\n    border-radius: ","px;\n    display: flex;\n    align-items: center;\n"]);return VD=function(){return e},e}function UD(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var BD=a.default.div(VD(),vt.colors.N40,5*d.e,d.e/2,d.a),KD=a.default.div(FD(),d.e);function WD(e){return(WD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zD(e,t){return!t||"object"!==WD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qD(e){return(qD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GD(e,t){return(GD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var JD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zD(this,qD(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GD(e,t)}(t,r["Component"]),function(e,t,n){t&&HD(e.prototype,t),n&&HD(e,n)}(t,[{key:"renderReplyToCustomer",value:function(){var e=this.props,t=e.onReplyToCustomer,n=e.intl.formatMessage;return o.a.createElement(o.a.Fragment,null," / ",o.a.createElement(D.b,{appearance:"link",onClick:t},n(CD.replyToCustomer)))}},{key:"render",value:function(){var e=this.props,t=e.onAddInternalNote,n=e.isCommentAttachmentInProgress,r=e.intl.formatMessage,i=e.isPublicCommentAllowed;return o.a.createElement(BD,null,n?o.a.createElement(KD,null,r(CD.loadingAttachments)):o.a.createElement(o.a.Fragment,null,o.a.createElement(D.b,{appearance:"link",onClick:t},r(CD.addInternalNote)),i&&this.renderReplyToCustomer()),o.a.createElement(RD,null))}}]),t}();JD.displayName="CollapsedEditorView";var QD=Object(y.injectIntl)(JD),ZD=Object(eo.a)([Object(f.s)({onReplyToCustomer:"onReplyToCustomer",onAddInternalNote:"onAddInternalNote"}),Object(i.connect)(function(e){return{isCommentAttachmentInProgress:Object(Ra.x)(e)}},{})])(QD);function YD(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    /* The Atlaskit tab containers has 8px left and right paddings, we need to do the negative left and right margin here to make it align with the comment editor */\n    margin: 0 -","px ","px;\n"]);return YD=function(){return e},e}var $D=a.default.div(YD(),d.e,2*d.e);function XD(e){return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tL(e,t){return!t||"object"!==XD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nL(e){return(nL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rL(e,t){return(rL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oL="internal",iL={public:{id:"public",label:o.a.createElement(y.FormattedMessage,CD.replyToCustomer),content:o.a.createElement("div",null)},internal:{id:oL,label:o.a.createElement(y.FormattedMessage,CD.addInternalNote),content:o.a.createElement("div",null)}},aL=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=tL(this,(e=nL(t)).call.apply(e,[this].concat(o)))).onReplyToCustomer=function(){n.props.onCommentVisibilityChange(!1),n.expandEditor()},n.onAddInternalNote=function(){n.props.onCommentVisibilityChange(!0),n.expandEditor()},n.onTabSelect=function(e){n.props.onCommentVisibilityChange(e.id===oL)},n.expandEditor=function(){var e=n.props,t=e.isExpanded,r=e.onExpanded;t||r&&r()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rL(e,t)}(t,r["Component"]),function(e,t,n){t&&eL(e.prototype,t),n&&eL(e,n)}(t,[{key:"getExpandedView",value:function(){var e=this.props,t=e.isInternal,n=e.isPublicCommentAllowed,r=e.children,i=n&&!t?iL.public:iL.internal,a=n?[iL.internal,iL.public]:[iL.internal];return o.a.createElement(o.a.Fragment,null,o.a.createElement($D,null,o.a.createElement(OD.a,{tabs:a,selected:i,onSelect:this.onTabSelect})),r)}},{key:"getCollapsedView",value:function(){return o.a.createElement(ZD,{onReplyToCustomer:this.onReplyToCustomer,onAddInternalNote:this.onAddInternalNote,isPublicCommentAllowed:this.props.isPublicCommentAllowed})}},{key:"render",value:function(){return this.props.isExpanded?this.getExpandedView():this.getCollapsedView()}}]),t}();aL.displayName="ServiceDeskCommentEditorContainer",aL.defaultProps={onExpanded:u.a,isExpanded:!1,onCommentVisibilityChange:u.a,isInternal:!1,isPublicCommentAllowed:!1};var sL=Object(y.injectIntl)(aL),cL=Object(eo.a)([Object(i.connect)(function(e,t){return{isInternal:Object(Ra.C)(t.commentId)(e),isPublicCommentAllowed:Object(va.f)(e)}},function(e,t){return{onCommentVisibilityChange:function(n){return e(Object(JP.d)(t.commentId,n))}}})])(sL),uL=n("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js");function lL(){var e=mL(["\n    text-align: center;\n"]);return lL=function(){return e},e}function fL(){var e=mL(["\n    padding-top: ","px;\n"]);return fL=function(){return e},e}function pL(){var e=mL(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 14px;\n    padding-top: 1px;\n    letter-spacing: -0.005em;\n"]);return pL=function(){return e},e}function dL(){var e=mL(["\n    text-align: left;\n    color: grey;\n    font: inherit;\n    background: white;\n    width: 100%;\n    height: 40px;\n    padding-left: ","px;\n    padding-right: ","px;\n    padding-top: ","px;\n    padding-bottom: ","px;\n    border: 1px solid ",";\n    border-radius: ","px;\n    box-sizing: border-box;\n"]);return dL=function(){return e},e}function mL(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var bL=a.default.button(dL(),2.5*d.e,2.5*d.e,1.5*d.e,1.5*d.e,vt.colors.N40,d.a),yL=a.default.div(pL()),hL=a.default.span(fL(),d.e/2),gL=a.default.div(lL());function vL(e){return(vL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jL(e,t){return!t||"object"!==vL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wL(e){return(wL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kL(e,t){return(kL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var EL=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=jL(this,(e=wL(t)).call.apply(e,[this].concat(o)))).state={changed:!1},n.onClick=function(){n.props.onExpanded(),n.setState({changed:!0})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kL(e,t)}(t,r["Component"]),function(e,t,n){t&&OL(e.prototype,t),n&&OL(e,n)}(t,[{key:"getGeneralFallbackEditor",value:function(){return o.a.createElement(bL,{onClick:this.onClick},o.a.createElement(yL,null,this.props.placeholder,this.state.changed&&o.a.createElement(hL,null,o.a.createElement(L.a,{size:"small"}))))}},{key:"render",value:function(){return this.props.isServiceDesk?t.getServiceDeskFallbackEditor():this.getGeneralFallbackEditor()}}],[{key:"getServiceDeskFallbackEditor",value:function(){return o.a.createElement(gL,null,o.a.createElement(L.a,{size:"medium"}))}}]),t}();EL.displayName="FallbackAddCommentEditor",EL.defaultProps={placeholder:"",onExpanded:u.a};var SL=Object(eo.a)([Object(i.connect)(function(e){return{isServiceDesk:Object(w.u)(e)}},{})])(EL),CL=Object(me.asyncComponent)({resolve:function(){return ye.then(function(){return SD})},LoadingComponent:function(e){return Object(uL.a)(o.a.createElement(SL,e),"add-comment-editor")}}),PL=Object(y.defineMessages)({placeholder:{id:"issue.placeholder-for-empty-comment-editor",defaultMessage:"Add a comment\u2026",description:"Placeholder when there is no draft for a new comment"},draftPlaceholder:{id:"issue.draft-placeholder-for-empty-comment-editor",defaultMessage:"You have an unsaved comment",description:"Placeholder when there is a draft for a new comment"},commentShortcutHintHeading:{id:"issue.comment.shortcut-hint-pro-tip-text",defaultMessage:"Pro tip:",description:"Shortcut heading in bold for comment hint"},commentShortcutHintMessage:{id:"issue.comment.shortcut-hint-message-with-pro-tip-text",defaultMessage:"{proTipText} press {shortcutKey} to comment",description:"Shortcut hint for comment on issue view, {shortcutKey} is the key to press for the shortcut passed as a react component"}}),IL=n("./node_modules/@atlaskit/modal-dialog/styled/Content.js");function xL(){var e=NL(["\n    /* 100% is needed to make the text wrap in IE11 - without it,\n     the editor stays on a single line and grows horizontally. */\n    flex: 1 1 100%;\n    /* See: https://css-tricks.com/flexbox-truncated-text/ */\n    min-width: 0;\n    /* override the font size of add comment placeholder */\n    input {\n        font: inherit;\n    }\n"]);return xL=function(){return e},e}function _L(){var e=NL(["\n    margin-right: ","px;\n    margin-top: ","px;\n"]);return _L=function(){return e},e}function ML(){var e=NL(["\n    display: flex;\n    padding-top: ","px;\n    padding-bottom: ","px;\n    background: white;\n    ",";\n"]);return ML=function(){return e},e}function TL(){var e=NL(["\n    ",";\n"]);return TL=function(){return e},e}function AL(){var e=NL(["\n    @supports (position: sticky) or (position: -webkit-sticky) {\n        box-shadow: inset 0 2px 0 0 ",";\n    }\n"]);return AL=function(){return e},e}function DL(){var e=NL(["\n    @supports (position: sticky) or (position: -webkit-sticky) {\n        position: sticky;\n\n        /* This is required because the media image inside this block content */\n        /* are not respecting the 'position: sticky', so an approach to solve it */\n        /* is adding the same z-index used in modal. since we are rendering this content inside the modal */\n\n        z-index: 10;\n        transition: transform 0.3s cubic-bezier(0.86, 0, 0.07, 1) 0.1s;\n        transform: translate(0, ",");\n        bottom: 0;\n        background: white;\n        padding-left: ","px;\n        margin-left: -","px;\n        "," & {\n            bottom: -2px;\n        }\n    }\n"]);return DL=function(){return e},e}function LL(){var e=NL(["\n    color: ",";\n    display: block;\n    margin-top: ","px;\n    white-space: nowrap;\n    font-size: 12px;\n    line-height: 1.33333333333333;\n"]);return LL=function(){return e},e}function NL(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var RL=a.default.small(LL(),vt.colors.N200,d.e),FL=Object(a.css)(DL(),function(e){return e.isHidden?"".concat(100,"px"):"0"},d.e,d.e,IL.c.toString()),VL=Object(a.css)(AL(),vt.colors.N30),UL=a.default.div(TL(),function(e){return e.isSticky&&FL}),BL=a.default.div(ML(),2*d.e,2*d.e,function(e){return e.isSticky&&VL}),KL=a.default.div(_L(),1.5*d.e,d.e/4),WL=a.default.div(xL());function HL(e){return(HL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zL(){return(zL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function GL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JL(e,t){return!t||"object"!==HL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QL(e){return(QL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZL(e,t){return(ZL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var YL=["avatarUrl","hasDraft","isExpanded","isServiceDesk","isEditorFocused","isLoading"],$L=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=JL(this,(e=QL(t)).call.apply(e,[this].concat(o)))).state={isSticky:!1,shouldHide:!1},n.onSave=function(e){("string"==typeof e?!e:Object(I.b)(e))||(n.props.onSave(e),n.props.onCancel())},n.setAddCommentContainerRef=function(e){n.addCommentContainer=e},n.setEditorContainerRef=function(e){n.editorContainer=e},n.setContainerRef=function(e){n.container=e},n.getScrollParent=function(e){return e&&e.className!==Hr.V?"auto"===window.getComputedStyle(e).overflowY||"scroll"===window.getComputedStyle(e).overflowY?e:n.getScrollParent(e.parentElement):null},n.setOverflowNode=function(){n.overflowNode||(n.overflowNode=n.getScrollParent(n.container)),n.setSticky()},n.setSticky=function(){var e=n.container;if(n.overflowNode&&e){var t=n.overflowNode.getBoundingClientRect(),r=e.getBoundingClientRect(),o=Math.min(t.bottom,window.innerHeight),i=!n.props.isExpanded&&r.bottom>=o;i!==n.state.isSticky&&n.setState({isSticky:i})}},n.addCommentContainer=void 0,n.editorContainer=void 0,n.container=void 0,n.editorEndElement=void 0,n.overflowNode=void 0,n.observer=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZL(e,t)}(t,r["Component"]),function(e,t,n){t&&GL(e.prototype,t),n&&GL(e,n)}(t,[{key:"componentDidMount",value:function(){this.overflowNode=this.getScrollParent(this.container),Object(vD.d)()||(window.addEventListener("resize",this.setOverflowNode),this.overflowNode&&(this.overflowNode.addEventListener("scroll",gD()(this.setSticky,100)),this.setSticky())),this.props.isExpanded&&this.scrollEditorIntoView(),this.setupStickyObserver(),this.props.isEditorFocused&&this.setupStickyHidingObserver()}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=!YL.every(function(t){return n.props[t]===e[t]}),o=!Object.entries(this.state).every(function(e){var n=qL(e,2),r=n[0];return n[1]===t[r]});return r||o}},{key:"componentDidUpdate",value:function(e){!e.isExpanded&&this.props.isExpanded&&this.scrollEditorIntoView(),e.isEditorFocused!==this.props.isEditorFocused&&(this.props.isEditorFocused?this.setupStickyHidingObserver():this.removeStickyHidingObserver())}},{key:"componentWillUnmount",value:function(){Object(vD.d)()||(window.removeEventListener("resize",this.setOverflowNode),this.overflowNode&&this.overflowNode.removeEventListener("scroll",this.setSticky)),this.observer&&this.container&&this.observer.unobserve(this.container),this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}},{key:"setupStickyObserver",value:function(){var e=this;if(window.IntersectionObserver&&this.container){var t={root:this.overflowNode,rootMargin:"0px",threshold:0};this.observer=new IntersectionObserver(function(t){t.forEach(function(t){var n=!e.props.isExpanded&&!t.isIntersecting;switch(t.target){case e.container:e.state.isSticky!==n&&e.setState({isSticky:n});break;case e.editorEndElement:var r=!t.isIntersecting&&t.boundingClientRect.y>=0&&t.boundingClientRect.y>=t.rootBounds.y;e.state.shouldHide!==r&&e.setState({shouldHide:r})}})},t),this.observer.observe(this.container)}}},{key:"setupStickyHidingObserver",value:function(){var e=this;window.IntersectionObserver&&this.observer&&ye.then(function(){return setTimeout(function(){e.editorEndElement=document.getElementsByClassName(Hr.u)[0],e.editorEndElement&&e.observer&&e.observer.observe(e.editorEndElement)})})}},{key:"removeStickyHidingObserver",value:function(){window.IntersectionObserver&&this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}},{key:"scrollEditorIntoView",value:function(){var e=this;setTimeout(function(){Vs(e.addCommentContainer,{scrollMode:"if-needed",behaviour:"auto",block:"end"})})}},{key:"renderAddCommentEditor",value:function(){var e=this.props,t=e.hasDraft,n=e.newCommentDraft,r=e.isExpanded,i=e.intl,a=e.onExpand,s=e.onEdit,c=e.onCancel,u=e.onPaste,l=e.onBlur,f=e.isServiceDesk,p=e.onEditorExpandedWithAnalytics,d=e.isLoading,m=e.editorSecondaryToolbarComponents,b=o.a.createElement(CL,{externalId:"issue.comment.add-form",defaultValue:n,isExpanded:r,shouldFocus:!0,shouldUseAdfPipeline:!0,placeholder:t&&!Object(I.b)(n)?"\u2022 ".concat(i.formatMessage(PL.draftPlaceholder)):i.formatMessage(PL.placeholder),onExpanded:p,onChange:s,onSave:this.onSave,onPaste:u,onBlur:l,onCancel:c,isLoading:d,secondaryToolbarComponents:m});return f?o.a.createElement(cL,{isExpanded:r,onExpanded:a,commentId:QP.a},b):b}},{key:"render",value:function(){var e=this.props,t=e.isExpanded,n=e.isEditorFocused,r=e.avatarUrl,i=n&&this.state.shouldHide&&!t,a=o.a.createElement(ht.a,null,"M"),s=o.a.createElement("strong",null,o.a.createElement(y.FormattedMessage,PL.commentShortcutHintHeading));return o.a.createElement("span",{ref:this.setAddCommentContainerRef},o.a.createElement(UL,{isSticky:this.state.isSticky,isHidden:i},o.a.createElement(BL,{isSticky:this.state.isSticky},o.a.createElement(KL,null,o.a.createElement(Ws.a,{size:"medium",src:r})),o.a.createElement(WL,{innerRef:this.setEditorContainerRef,"data-test-id":"issue.activity.comment"},this.renderAddCommentEditor(),o.a.createElement(function(){return!t&&o.a.createElement(RL,null,o.a.createElement(y.FormattedMessage,zL({},PL.commentShortcutHintMessage,{values:{shortcutKey:a,proTipText:s}})))},null)))),o.a.createElement("span",{ref:this.setContainerRef}))}}]),t}();function XL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XL(Object(n),!0).forEach(function(t){tN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$L.displayName="AddCommentForm",$L.displayName="AddCommentForm",$L.defaultProps={onExpand:u.a,onSave:u.a,onEdit:u.a,onPaste:u.a,onBlur:u.a,onCancel:u.a,avatarUrl:void 0,hasDraft:!1,isServiceDesk:!1,newCommentDraft:null,isLoading:!1};var nN=Object(eo.a)([y.injectIntl,Object(f.f)("issueFields",{onSave:"created",onEditorExpandedWithAnalytics:"commentExpanded"}),Object(i.connect)(function(e){return{authorId:Object(w.a)(e),avatarUrl:Object(k.v)(e),newCommentDraft:Object(Ra.k)(QP.a)(e),hasDraft:wo(Object(TT.a)(QP.a))(e),isExpanded:Object(Ra.w)(e)||null!=Object(Ra.j)(QP.a)(e),isServiceDesk:Object(w.u)(e),isEditorFocused:Object(io.D)(e)||Object(Ra.A)(e),isLoading:Object(w.u)(e)&&Object(Ra.x)(e),shouldShowCommentVisibilitySelect:Object(Ra.z)(e),visibility:Object(Ra.m)(QP.a)(e)||MT.a}},function(e){return{onExpand:function(){return e(Object(JP.c)())},onEdit:function(t){return e(Object(JP.l)(QP.a,t))},onVisibilityChange:function(t){return e(Object(JP.m)(QP.a,t))},onPaste:function(t){return e(Object(JP.s)(QP.a,t))},onBlur:function(){return e(Object(JP.b)())},onCancel:function(){return e(Object(JP.a)())},getOnSave:function(t,n){return e(Object(JP.w)(eN({id:"".concat(QP.a,"_").concat((new Date).getTime()),createdDate:(new Date).toISOString(),isNewComment:!0},t),n))}}},function(e,t,n){return eN({},n,{},e,{},t,{editorSecondaryToolbarComponents:e.shouldShowCommentVisibilitySelect?[o.a.createElement(yD,{initialValue:e.visibility,onChange:t.onVisibilityChange})]:void 0,onSave:function(n,r){e.shouldShowCommentVisibilitySelect&&r.update({isCommentRestricted:e.visibility.type!==MT.c}),t.getOnSave({authorId:e.authorId,bodyAdf:n,bodyHtml:void 0,richContent:void 0,visibility:e.visibility},r)},onEditorExpandedWithAnalytics:function(n){t.onExpand(),Object(Ac.r)(n,"addCommentEditor expanded",{hasDraft:e.hasDraft})}})})])($L),rN=n("./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js"),oN=n("./node_modules/@atlaskit/comment/components/ActionItem.js"),iN=n("./node_modules/@atlaskit/comment/components/Comment.js"),aN=n("./node_modules/@atlaskit/comment/components/Author.js"),sN=n("./node_modules/@atlaskit/comment/components/Edited.js"),cN=Object(y.defineMessages)({editedBy:{id:"issue.common.messages.activity.edited-by",defaultMessage:"{timestamp} by {author}",description:"Text for showing when an activity item was edited by a user"},anonymous:{id:"issue.common.messages.activity.anonymous",defaultMessage:"Anonymous",description:"Text to show for an anonymous user"}}),uN=n.e(303).then(n.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-reactions/index.js")),lN=Object(me.asyncComponent)({resolve:function(){return uN},LoadingComponent:function(){return Object(uL.a)(null,"comment-reactions")}}),fN=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/html-view.js"),pN=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-area/index.js"),dN=Object(y.defineMessages)({fallbackMessage:{id:"issue.message-displayed-when-fallback-comment-editor-required",defaultMessage:"This text has unsupported formatting",description:""},save:{id:"issue.text-for-save-comment-action",defaultMessage:"Save",description:""},cancel:{id:"issue.text-for-cancel-comment-action",defaultMessage:"Cancel",description:""}});function mN(){var e=jN(["\n    margin: 0 8px;\n"]);return mN=function(){return e},e}function bN(){var e=jN(["\n    margin: 0 2px;\n"]);return bN=function(){return e},e}function yN(){var e=jN(["\n    align-items: center;\n    display: flex;\n    flex-grow: 1;\n    padding: 20px;\n    padding-top: 10px;\n"]);return yN=function(){return e},e}function hN(){var e=jN(["\n    padding: 12px 20px;\n"]);return hN=function(){return e},e}function gN(){var e=jN(["\n    background-color: ",";\n    color: ",";\n    font-size: 12px;\n    line-height: ","px;\n    padding: ","px 7px;\n"]);return gN=function(){return e},e}function vN(){var e=jN(["\n    border: 1px solid #dfe1e6;\n    border-radius: 3px;\n    box-sizing: border-box;\n    position: relative;\n    background-color: ",";\n"]);return vN=function(){return e},e}function ON(){var e=jN(["\n    /* 100% is needed to make the text wrap in IE11 - without it,\n     the editor stays on a single line and grows horizontally. */\n    flex: 1 1 100%;\n    /* See: https://css-tricks.com/flexbox-truncated-text/ */\n    min-width: 0;\n    /* override the font size of add comment placeholder */\n    input {\n        font: inherit;\n    }\n"]);return ON=function(){return e},e}function jN(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var wN=a.default.div(ON()),kN=a.default.div(vN(),vt.colors.N0),EN=a.default.div(gN(),vt.colors.N20,vt.colors.N500,2*d.e,d.e/2),SN=a.default.div(hN()),CN=a.default.div(yN()),PN=a.default.div(bN()),IN=a.default.div(mN());function xN(e){return(xN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MN(e,t){return!t||"object"!==xN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TN(e){return(TN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AN(e,t){return(AN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DN=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=MN(this,(e=TN(t)).call.apply(e,[this].concat(i)))).state={oldEditorValue:n.props.body||""},n.onChange=function(e){n.setState({oldEditorValue:e})},n.onSaveOld=function(){n.props.onSave(n.state.oldEditorValue)},n.renderEditor=function(){var e=o.a.createElement(kN,null,!n.props.isLoading&&o.a.createElement(EN,null,n.props.intl.formatMessage(dN.fallbackMessage)),o.a.createElement(SN,null,o.a.createElement(pN.a,{shouldAutoFocus:!0,height:19*d.e,value:n.state.oldEditorValue,onChange:n.onChange,isDisabled:n.props.isLoading})),o.a.createElement(CN,null,o.a.createElement(PN,null,o.a.createElement(D.b,{appearance:"primary",onClick:n.onSaveOld,isDisabled:n.props.isLoading},n.props.intl.formatMessage(dN.save))),!n.props.isLoading&&o.a.createElement(PN,null,o.a.createElement(D.b,{appearance:"subtle",onClick:n.props.onCancel},n.props.intl.formatMessage(dN.cancel))),o.a.createElement(IN,null,o.a.createElement(L.a,{size:"small",isCompleting:!n.props.isLoading}))));return n.props.isServiceDesk?o.a.createElement(cL,{isExpanded:!0,commentId:n.props.commentId},e):e},n.renderEditMode=function(){return n.props.shouldUseAdfPipeline?null:n.renderEditor()},n.renderViewMode=function(){return o.a.createElement(fN.a,{html:n.props.bodyHtml})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AN(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&_N(e.prototype,t),n&&_N(e,n)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isLoading||this.onChange(e.body||"")}},{key:"render",value:function(){return o.a.createElement(wN,null,this.props.isEditing?this.renderEditMode():this.renderViewMode())}}]),t}();DN.displayName="FallbackCommentContent",DN.defaultProps={body:void 0,bodyHtml:void 0,isLoading:!1,isServiceDesk:!1,onSave:u.a,onCancel:u.a,shouldUseAdfPipeline:!1};var LN=Object(eo.a)([y.injectIntl,Object(i.connect)(function(e){return{isServiceDesk:Object(w.u)(e)}},{})])(DN);n("./src/packages/issue/issue-view/src/common/service/mentions/issue-mention-provider.js");function NN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FN=Object(eo.a)([Object(i.connect)(function(e,t){var n=Object(w.f)(e),r=Object(j.a)(n);return function(e){return{baseUrl:n,mentionEncoder:r,mentionProvider:Object(j.b)(e),contextIdentifier:jD(e,t),mediaContext:Object(E.a)(e)}}},function(e){return{onMediaFileClick:function(t){e(Object(Co.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NN(Object(n),!0).forEach(function(t){RN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{location:"comment"})))}}})])(ci);function VN(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    /* 100% is needed to make the text wrap in IE11 - without it,\n     the editor stays on a single line and grows horizontally. */\n    flex: 1 1 100%;\n    /* See: https://css-tricks.com/flexbox-truncated-text/ */\n    min-width: 0;\n    /* override the font size of add comment placeholder */\n    input {\n        font: inherit;\n    }\n"]);return VN=function(){return e},e}var UN=a.default.div(VN());function BN(e){return(BN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WN(e,t){return!t||"object"!==BN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HN(e){return(HN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zN(e,t){return(zN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qN=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=WN(this,(e=HN(t)).call.apply(e,[this].concat(i)))).getEditValue=function(){return n.props.shouldUseAdfPipeline?n.props.draftValue||n.props.bodyAdf:n.props.bodyHtml},n.getRendererAdf=function(){return n.props.shouldUseAdfPipeline?n.props.bodyAdf:null},n.renderEditor=function(){var e=o.a.createElement(SD,{isExpanded:!0,isExpandedByDefault:!0,shouldFocus:!0,shouldUseAdfPipeline:n.props.shouldUseAdfPipeline,defaultValue:n.getEditValue(),secondaryToolbarComponents:n.props.secondaryToolbarComponents,onBlur:n.props.onBlur,onSave:n.props.onSave,onCancel:n.props.onCancel,onChange:n.props.onChange,onPaste:n.props.onPaste});return n.props.isServiceDesk?o.a.createElement(cL,{isExpanded:!0,commentId:n.props.commentId},e):e},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zN(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&KN(e.prototype,t),n&&KN(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(UN,null,this.props.isEditing?this.renderEditor():o.a.createElement(FN,{adf:this.getRendererAdf(),html:this.props.shouldUseAdfPipeline?null:this.props.bodyHtml}))}}]),t}();qN.displayName="CommentContent",qN.displayName="CommentContent",qN.defaultProps={onBlur:u.a,onSave:u.a,onCancel:u.a,onChange:u.a,onPaste:u.a,shouldUseAdfPipeline:!1,isServiceDesk:!1};var GN=Object(eo.a)([Object(i.connect)(function(e){return{isServiceDesk:Object(w.u)(e)}},{})])(qN);function JN(){return(JN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var QN=Object(me.asyncComponent)({resolve:function(){return Promise.all([ye]).then(function(){return GN})},LoadingComponent:function(e){return Object(uL.a)(o.a.createElement(LN,JN({},e,{isLoading:!0})),"comment-view-content")}}),ZN=Object(y.defineMessages)({edit:{id:"issue.text-for-edit-comment-action",defaultMessage:"Edit",description:""},delete:{id:"issue.text-for-delete-comment-action",defaultMessage:"Delete",description:""},edited:{id:"issue.text-for-edited-comment-flag",defaultMessage:"Edited",description:""},retrySave:{id:"issue.text-for-retry-save-comment-action",defaultMessage:"Retry",description:""},cancelSave:{id:"issue.text-for-cancel-save-comment-action",defaultMessage:"Cancel",description:""},saving:{id:"issue.text-for-save-comment-sending",defaultMessage:"Saving...",description:""},confirmationHeader:{id:"issue.confirm-delete-comment-modal-header",defaultMessage:"Delete this comment?",description:""},confirmationContent:{id:"issue.confirm-delete-comment-modal-text",defaultMessage:"Once you delete, it's gone for good.",description:""},confirmationActionText:{id:"issue.confirm-delete-comment-action-text",defaultMessage:"Delete",description:""},internalNote:{id:"issue.internal-comment-distinguishing-text",defaultMessage:"Internal note",description:"This text will be displayed next to lock icon if that comment is internal"}});function YN(){var e=XN(["\n    height: ","px;\n    margin-left: -7px;\n"]);return YN=function(){return e},e}function $N(){var e=XN(["\n    border-radius: ","px;\n    padding: ","px 0 ","px\n        ","px;\n    margin: ","px 0 -","px -","px;\n    ",";\n"]);return $N=function(){return e},e}function XN(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var eR={inner:{paddingTop:d.e,paddingBottom:d.e/2,paddingLeft:d.e},outer:{paddingTop:28}},tR=a.default.div($N(),d.e/2,eR.inner.paddingTop,eR.inner.paddingBottom,eR.inner.paddingLeft,eR.outer.paddingTop-eR.inner.paddingTop,eR.inner.paddingBottom,eR.inner.paddingLeft,function(e){return e.isEditing?"":"background-color: ".concat(vt.colors.Y50,";")}),nR=a.default.div(YN(),2.5*d.e);function rR(e){return(rR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oR(){return(oR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function iR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aR(e,t){return!t||"object"!==rR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sR(e){return(sR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cR(e,t){return(cR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uR=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=aR(this,(e=sR(t)).call.apply(e,[this].concat(i)))).onEditSave=function(e){("string"==typeof e?!e:Object(I.b)(e))||n.props.onEditSave(e)},n.getAuthorDisplayName=function(e){return e?e.displayName:n.props.intl.formatMessage(cN.anonymous)},n.getEditTooltip=function(){return o.a.createElement(y.FormattedMessage,oR({},cN.editedBy,{values:{author:n.getAuthorDisplayName(n.props.updateAuthor),timestamp:o.a.createElement(H_.b,{value:n.props.updatedDate,timeZone:n.props.timeZone})}}))},n.getCommentReactions=function(){return o.a.createElement(nR,null,o.a.createElement(lN,{commentId:n.props.commentId}))},n.getCommentActions=function(){return[n.props.canEdit&&o.a.createElement(oN.a,{onClick:n.props.onEditClick},n.props.intl.formatMessage(ZN.edit),n.props.hasDraft?" (".concat(n.props.intl.formatMessage(go.draftIndicator),")"):""),n.props.canDelete&&o.a.createElement(oN.a,{onClick:n.props.onDeleteClick},n.props.intl.formatMessage(ZN.delete)),n.props.showReactions&&n.getCommentReactions()].filter(function(e){return!!e})},n.getCommentSaveFailedActions=function(){return[o.a.createElement(oN.a,{onClick:n.props.onSaveRetry},n.props.intl.formatMessage(ZN.retrySave)),o.a.createElement(oN.a,{onClick:n.props.onSaveEdit},n.props.intl.formatMessage(ZN.edit)),o.a.createElement(oN.a,{onClick:n.props.onSaveCancel},n.props.intl.formatMessage(ZN.cancelSave))].filter(function(e){return!!e})},n.getCommentContent=function(){var e=n.props,t=e.bodyAdf,r=e.bodyWiki,i=e.bodyHtml,a=e.commentId,s=e.isOptimistic,c=e.isEditing,u=e.secondaryToolbarComponents,l=e.onEditCancel,f=e.onEditUpdate,p=e.onEditPaste,d=e.onBlur,m={bodyHtml:i,commentId:a,isEditing:c,secondaryToolbarComponents:u,onCancel:l,onChange:f,onSave:n.onEditSave,onPaste:p,onBlur:d,isLoading:s,shouldUseAdfPipeline:!0};return o.a.createElement(QN,oR({},m,{bodyAdf:t,bodyWiki:r}))},n.getCommentTime=function(){return o.a.createElement(H_.b,{value:n.props.createdDate,timeZone:n.props.timeZone,tooltipPosition:"top",extraStyles:t_.a})},n.renderComment=function(e){var t=n.props,r=t.author,i=t.intl,a=t.isOptimistic,s=t.hasSaveFailed,c=t.hasDeleteModal,u=t.onDeleteConfirm,l=t.onDeleteCancel,f=t.isEditing;return o.a.createElement(iN.a,{avatar:o.a.createElement(Js,{userAccount:r,analyticsData:{trigger:"comment-avatar"}},o.a.createElement(Ws.a,{borderColor:"transparent",src:r&&r.avatarUrl,size:"medium"})),author:o.a.createElement(Js,{userAccount:r,analyticsData:{trigger:"comment-author"}},o.a.createElement(aN.a,null,n.getAuthorDisplayName(r))),time:n.getCommentTime(),edited:n.props.edited?o.a.createElement(Je.a,{content:n.getEditTooltip(),position:"top"},o.a.createElement(sN.a,null,i.formatMessage(ZN.edited))):null,content:o.a.createElement("div",null,n.getCommentContent(),c&&o.a.createElement(tr.b,{appearance:"danger",headerMessage:n.props.intl.formatMessage(ZN.confirmationHeader),contentMessage:n.props.intl.formatMessage(ZN.confirmationContent),confirmActionText:n.props.intl.formatMessage(ZN.confirmationActionText),onConfirm:function(e){return u(e)},onCancel:l,externalId:"issue.comment.delete"})),restrictedTo:e,actions:a||f?[]:n.getCommentActions(),isError:s&&!f,errorActions:n.getCommentSaveFailedActions(),isSaving:a&&!s,savingText:n.props.intl.formatMessage(ZN.saving)})},n.renderInternalComment=function(){var e=n.props.visibility.type===MT.c?"".concat(n.props.intl.formatMessage(ZN.internalNote)):"".concat(n.props.visibility.value," \u2022 ").concat(n.props.intl.formatMessage(ZN.internalNote));return o.a.createElement(tR,{isEditing:n.props.isEditing},n.renderComment(e))},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cR(e,t)}(t,r["Component"]),function(e,t,n){t&&iR(e.prototype,t),n&&iR(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.visibility;return e.isInternal?this.renderInternalComment():this.renderComment(t.value)}}]),t}();function lR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lR(Object(n),!0).forEach(function(t){pR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}uR.displayName="Comment",uR.displayName="Comment",uR.defaultProps={visibility:MT.a,updatedDate:null,edited:!1,isEditing:!1};var dR=Object(eo.a)([y.injectIntl,Object(f.f)("issueFields",{onEditSave:"updated",onDeleteConfirm:"deleted"}),Object(i.connect)(function(e,t){var n=t.commentId;return function(e){return{bodyWiki:Object(Ra.g)(n)(e),bodyAdf:Object(Ra.k)(n)(e),bodyHtml:Object(Ra.f)(n)(e),hasDraft:wo(Object(TT.a)(n))(e),author:Object(Ra.e)(n)(e),updateAuthor:Object(Ra.r)(n)(e),createdDate:Object(Ra.h)(n)(e),updatedDate:Object(Ra.s)(n)(e),edited:Object(Ra.i)(n)(e),isOptimistic:Object(Ra.p)(n)(e),hasSaveFailed:Object(Ra.q)(n)(e),canEdit:Object(Ra.d)(n)(e),isEditing:Object(Ra.B)(n)(e),canDelete:Object(Ra.c)(n)(e),hasDeleteModal:Object(Ra.n)(n)(e),visibility:Object(Ra.t)(n)(e),visibilityEdited:Object(Ra.l)(n)(e),isInternal:Object(Ra.D)(n)(e),showReactions:Object(rN.b)(e),timeZone:Object(k.y)(e),shouldShowCommentVisibility:Object(Ra.z)(e)}}},function(e,t){var n=t.commentId;return{getOnEditClick:function(t){return e(Object(JP.i)(n,t))},onEditCancel:function(){return e(Object(JP.j)(n))},onEditUpdate:function(t){return e(Object(JP.l)(n,t))},onEditPaste:function(t){return e(Object(JP.s)(n,t))},onBlur:function(){return e(Object(JP.k)(n))},getOnEditSave:function(t,r){return e(Object(JP.w)(fR({id:n},t),r))},onCommentVisibilityChange:function(t){e(Object(JP.m)(n,t))},onDeleteClick:function(){return e(Object(JP.B)(n))},getOnDeleteConfirm:function(t){return e(Object(JP.g)(n,t))},onDeleteCancel:function(){return e(Object(JP.e)())},onSaveRetry:function(){return e(Object(JP.x)(n,(new Date).toISOString(),function(e){return e.includes(QP.a)}(n)))},onSaveEdit:function(){return e(Object(JP.u)(n))},onSaveCancel:function(){return e(Object(JP.t)(n))}}},function(e,t,n){var r=e.shouldShowCommentVisibility,i=e.author,a=e.visibility,s=e.visibilityEdited,c=e.createdDate,u=e.bodyWiki,l=e.bodyHtml,f=e.hasDraft,p=e.isInternal;return fR({},n,{},e,{},t,{secondaryToolbarComponents:r?[o.a.createElement(yD,{initialValue:s,onChange:t.onCommentVisibilityChange})]:void 0,onEditSave:function(e,o){var f=i&&i.id;return r&&o.update({isVisibilityUpdated:!DA(a,s)}),t.getOnEditSave({authorId:f,createdDate:c,bodyWiki:u,bodyAdf:e,bodyHtml:l,richContent:void 0,isNewComment:n.commentId.includes(QP.a),visibility:s},o)},onDeleteConfirm:function(e,n){return t.getOnDeleteConfirm(n)},onEditClick:function(e,n){t.getOnEditClick(p),Object(Ac.r)(n,"editCommentEditor expanded",{hasDraft:f})}})})])(uR);function mR(e){return(mR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yR(e,t){return!t||"object"!==mR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hR(e){return(hR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gR(e,t){return(gR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vR(){var e=jR(["\n    margin: ","px 0 ","px 0;\n"]);return vR=function(){return e},e}function OR(){var e=jR(["\n    margin: ","px 0;\n"]);return OR=function(){return e},e}function jR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var wR=a.default.div(OR(),2*d.e),kR=a.default.div(vR(),2*d.e,1.5*d.e),ER=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yR(this,hR(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gR(e,t)}(t,r["Component"]),function(e,t,n){t&&bR(e.prototype,t),n&&bR(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props.fetchCommentVisibilities;e&&e()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&e.fetchMoreComments()}},{key:"render",value:function(){var e=this.props,t=e.commentIds,n=e.canAddComments,r=e.fetchMoreComments,i=e.totalComments,a=e.loadedComments,s=e.isLoadingMoreComments;if(!t.length&&!n)return null;var c=o.a.createElement(wR,null,o.a.createElement(x_,{onClick:r,isDisabled:s,isLoading:s,shouldFitContainer:!0},o.a.createElement(y.FormattedMessage,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:Object(_T.a)(i,a)}})));return o.a.createElement("span",null,i>a?c:null,t.length?o.a.createElement(kR,{"data-test-id":"issue.activity.comments-list"},t.map(function(e){return o.a.createElement(dR,{key:e,commentId:e})})):null,n?o.a.createElement(nN,null):null)}}]),t}();ER.displayName="Comments",ER.displayName="Comments",ER.defaultProps={canAddComments:!1};var SR=Object(eo.a)([Object(f.e)("comment"),QT,Object(f.r)(),Object(i.connect)(function(e){return{commentIds:Object(Ra.K)(e),canAddComments:Object(Ra.b)(e),totalComments:Object(Ra.J)(e),loadedComments:Object(Ra.F)(e),isLoadingMoreComments:Object(Ra.E)(e),baseUrl:Object(w.f)(e),issueKey:Object(w.B)(e),shouldFetchCommentVisibilities:Object(Ra.z)(e)}},function(e){return{fetchMoreComments:function(){return e(Object(JP.o)())}}})])(ER),CR=n("./node_modules/@atlaskit/logo/dist/esm/JiraServiceDeskLogo/Icon.js"),PR=n("./src/packages/servicedesk/approval-decision/src/ui/index.js"),IR=function(e){var t=e.approval;if(t){var n=new Date(t.completedDate.epochMillis).toJSON();return o.a.createElement(PR.a,{icon:o.a.createElement(CR.a,{size:"small",label:"Jira Servicedesk Icon"}),finalDecision:t.finalDecision,status:t.status,time:n,approvers:t.approvers,timeZone:e.timeZone})}return null};IR.defaultProps={timeZone:void 0};var xR=IR;function _R(e){return(_R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TR(e,t){return!t||"object"!==_R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AR(e){return(AR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DR(e,t){return(DR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LR(){var e=RR(["\n    margin: ","px 0 ","px 0;\n"]);return LR=function(){return e},e}function NR(){var e=RR(["\n    margin: ","px 0;\n"]);return NR=function(){return e},e}function RR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var FR=a.default.div(NR(),2*d.e),VR=a.default.div(LR(),2*d.e,1.5*d.e),UR=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=TR(this,AR(t).call(this,e))).renderJsdActivityItems=function(e){var t=n.props.timeZone;return o.a.createElement(VR,{"data-test-id":"issue.issue-view.activity.servicedesk.jsd-activity-items-list"},e.map(function(e){switch(e.type){case Ha:return e.comment&&o.a.createElement(dR,{key:e.comment.id,commentId:e.comment.id});case za:return e.approval&&o.a.createElement(xR,{key:e.approval.id,approval:e.approval,timeZone:t});default:return null}}))},n.state={numberOfActivityItemsShown:5,totalActivityItems:e.totalComments+e.totalApprovalDecisions},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DR(e,t)}(t,r["Component"]),function(e,t,n){t&&MR(e.prototype,t),n&&MR(e,n)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=0,n=0;e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&e.fetchMoreComments();var r=Object.keys(e.optimisticComments).length-Object.keys(this.props.optimisticComments).length;r>0&&0===this.props.editingCommentIds.length&&(t+=r,n+=r);var o=e.totalApprovalDecisions-this.props.totalApprovalDecisions;o>0&&(t+=o,n+=o);var i=e.deletedCommentIds.length-this.props.deletedCommentIds.length;i>0&&(t-=i,n-=i),0===t&&0===n||this.setState({numberOfActivityItemsShown:this.state.numberOfActivityItemsShown+t,totalActivityItems:this.state.totalActivityItems+n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.canAddComments,r=t.fetchMoreComments,i=t.isLoadingMoreComments,a=t.jsdActivityItems;if(!a.length&&!n)return null;var s=o.a.createElement(FR,{"data-test-id":"issue.issue-view.activity.servicedesk.comments-view.view-older-comments-button"},o.a.createElement(x_,{onClick:function(){var t=Object(_T.a)(e.state.totalActivityItems,e.state.numberOfActivityItemsShown);r(),e.setState({numberOfActivityItemsShown:t+e.state.numberOfActivityItemsShown})},isDisabled:i,isLoading:i,shouldFitContainer:!0},o.a.createElement(y.FormattedMessage,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:Object(_T.a)(this.state.totalActivityItems,this.state.numberOfActivityItemsShown)}})));return o.a.createElement("span",null,this.state.totalActivityItems>this.state.numberOfActivityItemsShown?s:null,a.length?this.renderJsdActivityItems(a.slice(Math.max(a.length-this.state.numberOfActivityItemsShown,0))):null,n?o.a.createElement(nN,null):null)}}]),t}();UR.displayName="ServicedeskComments",UR.displayName="ServicedeskComments",UR.defaultProps={canAddComments:!1};var BR,KR=Object(eo.a)([Object(f.e)("ServicedeskComments"),Object(i.connect)(function(e){return{canAddComments:Object(Ra.b)(e),totalComments:Object(Ra.J)(e),loadedComments:Object(Ra.F)(e),isLoadingMoreComments:Object(Ra.E)(e),timeZone:Object(k.y)(e),jsdActivityItems:as(e),totalApprovalDecisions:is(e),optimisticComments:Object(Ra.H)(e),deletedCommentIds:Object(Ra.u)(e),editingCommentIds:Object(Ra.v)(e)}},function(e){return{fetchMoreComments:function(){return e(Object(JP.o)())}}})])(UR),WR=n("./src/packages/issue/issue-view/src/activity/worklog/view/worklog-error/assets/generic-error.svg"),HR=n.n(WR),zR=Object(y.defineMessages)({heading:{id:"issue.activity.worklog.worklog-error.heading",defaultMessage:"We couldn't load the worklog",description:"Heading for an error message when trying to load a list of logged work fails."},retry:{id:"issue.activity.worklog.worklog-error.retry",defaultMessage:"Reload work log",description:"Text for a button which reloads the contents of the panel containing logged work."}});function qR(e){return(qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JR(e,t){return!t||"object"!==qR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QR(e){return(QR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZR(e,t){return(ZR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var YR=Object(f.d)("worklogError",f.h.SCREEN)(BR=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),JR(this,QR(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZR(e,t)}(t,r["Component"]),function(e,t,n){t&&GR(e.prototype,t),n&&GR(e,n)}(t,[{key:"renderButton",value:function(){var e=this.props,t=e.onRetry,n=e.intl.formatMessage;return o.a.createElement(D.b,{appearance:"link",onClick:t},n(zR.retry))}},{key:"render",value:function(){var e=this.props.intl.formatMessage;return o.a.createElement(o.a.Fragment,null,o.a.createElement(BI.a,{description:e(zR.heading),imageUrl:HR.a,primaryAction:this.renderButton()}),o.a.createElement(f.i,null))}}]),t}())||BR,$R=Object(y.injectIntl)(YR),XR=Object(no.createSelector)(va.h,function(e){return{canLogWork:e.canLogWork,canEditAllWorklogs:e.canEditAllWorklogs,canEditOwnWorklogs:e.canEditOwnWorklogs,canDeleteAllWorklogs:e.canDeleteAllWorklogs,canDeleteOwnWorklogs:e.canDeleteOwnWorklogs}}),eF=n("./src/packages/issue/issue-view/src/activity/worklog/view/worklog-items/empty-state/assets/stopwatch.svg"),tF=n.n(eF),nF=Object(y.defineMessages)({noWorkLogged:{id:"issue.activity.worklog.worklog-items.empty-state.no-work-logged",defaultMessage:"No work has been logged for this issue yet. Logging work lets you track and report on the time spent on issues.",description:"Text shown to the user when no time has been logged for this issue"}});function rF(e){return(rF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iF(e,t){return!t||"object"!==rF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aF(e){return(aF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sF(e,t){return(sF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cF=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),iF(this,aF(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sF(e,t)}(t,r["Component"]),function(e,t,n){t&&oF(e.prototype,t),n&&oF(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.canLogWork,n=e.onLogWork,r=e.intl.formatMessage;return o.a.createElement(BI.a,{description:r(nF.noWorkLogged),imageUrl:tF.a,size:"narrow",primaryAction:t?o.a.createElement(D.b,{appearance:"link",onClick:n},r(Ve.a.logWork)):void 0})}}]),t}();cF.displayName="EmptyState",cF.defaultProps={canLogWork:!1,onLogWork:u.a};var uF,lF=g()(Object(f.s)({onLogWork:"logWork"}),y.injectIntl,Object(i.connect)(function(e){return{canLogWork:Object(S.b)(e)}},function(e){return{onLogWork:function(){e(Object(O.I)(Xr.a,null))}}}))(cF);function fF(e){return(fF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dF(e,t){return!t||"object"!==fF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mF(e){return(mF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bF(e,t){return(bF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yF=Object(f.d)("worklogItems",f.h.SCREEN)(uF=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dF(this,mF(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bF(e,t)}(t,r["Component"]),function(e,t,n){t&&pF(e.prototype,t),n&&pF(e,n)}(t,[{key:"canModifyWorklog",value:function(e){var t=this.props,n=t.permissions,r=n.canLogWork,o=n.canDeleteAllWorklogs,i=n.canDeleteOwnWorklogs,a=n.canEditAllWorklogs,s=n.canEditOwnWorklogs,c=t.loggedInAccountId;if(!r)return{canEditWorklog:!1,canDeleteWorklog:!1};var u=Object(M.fb)()?!!e.author&&e.author.accountId===c:!!e.author&&e.author.id===c;return{canEditWorklog:a||s&&u,canDeleteWorklog:o||i&&u}}},{key:"render",value:function(){var e=this,t=this.props,n=t.worklogs,r=t.WorklogItem,i=t.EmptyState;return o.a.createElement(o.a.Fragment,null,n.length?n.map(function(t){var n=e.canModifyWorklog(t),i=n.canEditWorklog,a=n.canDeleteWorklog;return o.a.createElement(r,{key:t.id,worklog:t,canEditWorklog:i,canDeleteWorklog:a})}):o.a.createElement(i,null),o.a.createElement(f.i,null))}}]),t}())||uF;function hF(e){return(hF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gF(){return(gF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vF(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function OF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jF(e,t){return!t||"object"!==hF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wF(e){return(wF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kF(e,t){return(kF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var EF=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jF(this,wF(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kF(e,t)}(t,r["Component"]),function(e,t,n){t&&OF(e.prototype,t),n&&OF(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.additionalHeaderContent,n=e.editedHeaderText,r=e.bodyContent,i=vF(e,["additionalHeaderContent","editedHeaderText","bodyContent"]);return o.a.createElement(iN.a,gF({time:t,edited:n,content:r},i))}}]),t}();EF.displayName="ActivityItem",EF.defaultProps={bodyContent:void 0,actions:void 0,editedHeaderText:void 0,highlighted:!1};var SF=Object(y.defineMessages)({logged:{id:"issue.activity.worklog.worklog-items.worklog-item.logged",defaultMessage:"logged",description:"Text that appears between the author name and the amount of time they logged."},edited:{id:"issue.activity.worklog.worklog-items.worklog-item.edited",defaultMessage:"Edited",description:"Text that appears to indicate that a worklog item has been edited"},edit:{id:"issue.activity.worklog.worklog-items.worklog-item.edit",defaultMessage:"Edit",description:"Label for the Edit action on a worklog item"},delete:{id:"issue.activity.worklog.worklog-items.worklog-item.delete",defaultMessage:"Delete",description:"Label for the Delete action on a worklog item"}}),CF=n("./node_modules/react-scroll-into-view-if-needed/dist/es/index.js");function PF(){var e=xF(["\n    /* we have to recreate the AkComment top margin behaviour because adding a container around AkComment triggers the \n    :first-child selector defined therein which clears the top margin */\n    margin-top: ","px;\n    &:first-child {\n        margin-top: 0;\n    }\n"]);return PF=function(){return e},e}function IF(){var e=xF(["\n    margin-top: ","px;\n"]);return IF=function(){return e},e}function xF(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _F=a.default.div(IF(),d.e),MF=Object(a.default)(CF.a)(PF(),3.5*d.e);function TF(e){return(TF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AF(){return(AF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function DF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LF(e,t){return!t||"object"!==TF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NF(e){return(NF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RF(e,t){return(RF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var FF=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=LF(this,(e=NF(t)).call.apply(e,[this].concat(o)))).onEdit=function(){n.props.onEdit(n.props.worklog.id)},n.onDelete=function(){n.props.onDelete(n.props.worklog.id)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RF(e,t)}(t,r["Component"]),function(e,t,n){t&&DF(e.prototype,t),n&&DF(e,n)}(t,[{key:"renderAvatar",value:function(){var e=this.props.worklog.author;return o.a.createElement(Js,{userAccount:e,analyticsData:{trigger:"worklog-avatar"}},o.a.createElement(Ws.a,{src:e&&e.avatarUrl||void 0}))}},{key:"renderAuthorName",value:function(){var e=this.props,t=e.worklog.author,n=e.intl.formatMessage;return t&&t.displayName?o.a.createElement(Js,{userAccount:t,analyticsData:{trigger:"worklog-author"}},o.a.createElement(aN.a,null,t.displayName)):n(cN.anonymous)}},{key:"renderDateLoggedFor",value:function(){var e=this.props.worklog.started;return o.a.createElement(Fx,null,function(t){var n=t.timestampDisplaySetting,r=t.onSwitchTimestampDisplaySetting,i=t.timeZone;return o.a.createElement(H_.a,{value:e,displaySetting:n,onSwitchDisplaySetting:r,extraStyles:t_.a,timeZone:i,tooltipPosition:"top"})})}},{key:"renderActions",value:function(){var e=this.props,t=e.canEditWorklog,n=e.canDeleteWorklog,r=e.intl.formatMessage,i=[];return t&&i.push(o.a.createElement(oN.a,{onClick:this.onEdit},r(SF.edit))),n&&i.push(o.a.createElement(oN.a,{onClick:this.onDelete},r(SF.delete))),i}},{key:"renderEditedText",value:function(){var e=this.props,t=e.worklog,n=t.updated,r=t.updateAuthor,i=e.intl.formatMessage;return n?o.a.createElement(Je.a,{content:o.a.createElement(y.FormattedMessage,AF({},cN.editedBy,{values:{timestamp:o.a.createElement(Fx,null,function(e){var t=e.timestampDisplaySetting,r=e.onSwitchTimestampDisplaySetting,i=e.timeZone;return o.a.createElement(H_.a,{value:n,displaySetting:t,onSwitchDisplaySetting:r,timeZone:i,tooltipPosition:"top"})}),author:r?r.displayName:i(cN.anonymous)}})),position:"top"},o.a.createElement(sN.a,null,i(SF.edited))):null}},{key:"renderComment",value:function(){var e=this.props,t=e.worklog.comment,n=e.mediaContext,r=e.mentionEncoder,i=e.mentionProvider,a=e.onMediaFileClick,s=e.contextIdentifier;if(null===t||"string"==typeof t)return null;var c=Object(M.ab)()?Object(I.d)(t):t;return o.a.createElement(_F,null,o.a.createElement(ci,{adf:c,mediaContext:n,mentionEncoder:r,mentionProvider:i,contextIdentifier:s,onMediaFileClick:a}))}},{key:"render",value:function(){var e=this.props,t=e.worklog.timeSpent,n=e.intl.formatMessage,r=e.isHighlighted;return o.a.createElement(MF,{active:r,options:{behavior:"smooth",scrollMode:"always"}},o.a.createElement(EF,{avatar:this.renderAvatar(),author:this.renderAuthorName(),actions:this.renderActions(),additionalHeaderContent:o.a.createElement(t_.b,null,n(SF.logged)," ",o.a.createElement(t_.c,null,t),o.a.createElement(t_.e,null,this.renderDateLoggedFor())),editedHeaderText:this.renderEditedText(),bodyContent:this.renderComment(),highlighted:r}))}}]),t}();function VF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}FF.displayName="WorklogItem",FF.defaultProps={mentionProvider:null,mentionEncoder:null,contextIdentifier:null};var BF=g()(Object(f.f)("button",{onDelete:"clicked",onEdit:"clicked"}),Object(f.s)({onEdit:"editWorklog",onDelete:"deleteWorklog"}),y.injectIntl,Object(i.connect)(function(e,t){return{isHighlighted:Object(P.z)(e)===t.worklog.id,mediaContext:Object(E.a)(e),mentionEncoder:Object(j.a)(Object(w.f)(e)),mentionProvider:Object(j.b)(e),contextIdentifier:jD(e,t)}},function(e){return{onEdit:function(t){e(Object(P.B)(P.e,t))},onDelete:function(t){e(Object(P.B)(P.c,t))},onMediaFileClick:function(t){return e(Object(Co.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VF(Object(n),!0).forEach(function(t){UF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{location:"worklog"})))}}}))(FF),KF=Object(i.connect)(function(e){return{worklogs:Object(S.f)(e),permissions:XR(e),loggedInAccountId:Object(w.a)(e),WorklogItem:BF,EmptyState:lF}},{})(yF);function WF(e){return(WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zF(e,t){return!t||"object"!==WF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qF(e){return(qF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GF(e,t){return(GF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var JF=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zF(this,qF(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GF(e,t)}(t,r["Component"]),function(e,t,n){t&&HF(e.prototype,t),n&&HF(e,n)}(t,[{key:"renderLoadingStage",value:function(){var e=this.props,t=e.loadingStage,n=e.onRetry;switch(t){case P.j:return o.a.createElement(e_,null);case P.g:return o.a.createElement($R,{onRetry:n});case P.b:default:return o.a.createElement(KF,null)}}},{key:"render",value:function(){return o.a.createElement(t_.d,null,this.renderLoadingStage())}}]),t}();JF.displayName="Worklog";var QF=Object(i.connect)(function(e){return{openModal:Object(S.d)(e),loadingStage:Object(P.A)(e)}},{})(JF);function ZF(e){return(ZF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $F(e,t){return!t||"object"!==ZF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XF(e){return(XF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eV(e,t){return(eV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tV=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$F(this,XF(t).call(this,e))).onRetryClick=function(){var e=n.props,t=e.issueKey,r=e.baseUrl;return(0,e.onRetryFetchWorklog)(r,t)};var r=e.baseUrl,o=e.issueKey;return(0,e.onFetchWorklog)(r,o),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eV(e,t)}(t,r["Component"]),function(e,t,n){t&&YF(e.prototype,t),n&&YF(e,n)}(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.baseUrl===this.props.baseUrl&&e.issueKey===this.props.issueKey||e.onFetchWorklog(e.baseUrl,e.issueKey)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var e=this.props,t=e.timestampDisplaySetting,n=e.onSwitchTimestampDisplaySetting,r=e.timeZone;return o.a.createElement(Vx,{value:{timestampDisplaySetting:t,onSwitchTimestampDisplaySetting:n,timeZone:r}},o.a.createElement(QF,{onRetry:this.onRetryClick}))}}]),t}();tV.displayName="Worklog";var nV=g()(Object(f.f)("worklogs",{onFetchWorklog:"fetched",onRetryFetchWorklog:"fetched"}),Object(i.connect)(function(e){return{issueKey:Object(w.B)(e),baseUrl:Object(w.f)(e)}},{onFetchWorklog:P.w,onRetryFetchWorklog:P.x,onUnmount:P.r}))(tV);function rV(e){return(rV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aV(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function sV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cV(e,t){return!t||"object"!==rV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uV(e){return(uV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lV(e,t){return(lV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fV(){var e=dV(["\n    min-width: ","px;\n"]);return fV=function(){return e},e}function pV(){var e=dV(["\n    max-width: ","px;\n    display: inline-block;\n    line-height: normal;\n    vertical-align: text-bottom;\n    ",";\n"]);return pV=function(){return e},e}function dV(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mV=a.default.span(pV(),20*d.e,Xo.g),bV=Object(a.default)(Ax.a)(fV(),16*d.e);bV.displayName="DropdownItem";var yV=Object(y.defineMessages)({comments:{id:"issue.activity-feed.comments",defaultMessage:"Comments",description:""},history:{id:"issue.actvity-feed.history",defaultMessage:"History",description:""},worklog:{id:"issue.actvity-feed.worklog",defaultMessage:"Work log",description:""},activity:{id:"issue.actvity-feed.acvitity",defaultMessage:"Activity"}}),hV=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=cV(this,(e=uV(t)).call.apply(e,[this].concat(i)))).state={isDropdownOpen:!1},n.getEcosystemActivity=function(){return n.props.ecosystemModules.map(function(e){return{key:"".concat(e.moduleKey).concat(e.appKey),type:ET,name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,options:e.options}})},n.getJSDCommentActivity=function(){var e=n.props,t=e.commentIds,r=e.canAddComments,o=e.intl;return t.length||r?[{key:wT,type:wT,name:o.formatMessage(yV.comments)}]:[]},n.getCommentActivity=function(){var e=n.props,t=e.commentIds,r=e.canAddComments,o=e.intl;return t.length||r?[{key:kT,type:kT,name:o.formatMessage(yV.comments)}]:[]},n.getHistoryActivity=function(){return[{key:ST,type:ST,name:n.props.intl.formatMessage(yV.history)}]},n.getWorklogActivity=function(){return n.props.shouldShowWorklog?[{key:CT,type:CT,name:n.props.intl.formatMessage(yV.worklog)}]:[]},n.getActivityItems=function(){var e=n.props.isServiceDesk;return[].concat(aV(e?n.getJSDCommentActivity():n.getCommentActivity()),aV(n.getHistoryActivity()),aV(n.getWorklogActivity()),aV(n.getEcosystemActivity()))},n.getSelectedItem=function(e){return n.props.selectedItem||e&&e[0]},n.handleOpenChange=function(e){var t=e.isOpen;t&&n.props.onDropdownOpened(),n.setState({isDropdownOpen:t})},n.renderDropdownActivityItems=function(e,t){return e.filter(function(e){return e.key!==t.key}).map(function(e){return o.a.createElement(bV,{key:e.key,onClick:function(){n.props.onDropdownItemClicked(e.key),n.props.onSwitchSelectedActivityItem(e)}},e.name)})},n.renderSelectedActivityItemComponent=function(e){switch(e.type){case wT:return o.a.createElement(KR,null);case kT:return o.a.createElement(SR,null);case ET:return n.props.onActivityComponentSelected(Wm(e.appKey,e.moduleKey)),o.a.createElement(ox,{appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,appName:e.name});case ST:return o.a.createElement(vT,{baseUrl:Object(Qg.toBaseUrl)(n.props.baseUrl),issueKey:Object(Qg.toIssueKey)(n.props.issueKey),timeZone:n.props.timeZone,timestampDisplaySetting:n.props.timestampDisplaySetting,onSwitchTimestampDisplaySetting:n.props.onSwitchTimestampDisplaySetting});case CT:return o.a.createElement(nV,{timeZone:n.props.timeZone,timestampDisplaySetting:n.props.timestampDisplaySetting,onSwitchTimestampDisplaySetting:n.props.onSwitchTimestampDisplaySetting});default:return null}},n.renderSkeleton=function(){return o.a.createElement(PT.a,null)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lV(e,t)}(t,r["Component"]),function(e,t,n){t&&sV(e.prototype,t),n&&sV(e,n)}(t,[{key:"render",value:function(){if(this.props.isPreview)return this.renderSkeleton();var e=this.getActivityItems(),t=this.state.isDropdownOpen,n=this.getSelectedItem(e);return e.length&&n?o.a.createElement("span",null,o.a.createElement(ho.c,{leftAlign:!0},o.a.createElement(ho.e,null,e.length>1?o.a.createElement(y.FormattedMessage,yV.activity):n.name),e.length>1?o.a.createElement(ho.d,{leftAlign:!0},o.a.createElement(Dx.a,{isOpen:t,onOpenChange:this.handleOpenChange,trigger:o.a.createElement(mV,null,n.name),triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact"},position:"bottom right"},this.renderDropdownActivityItems(e,n))):null),this.renderSelectedActivityItemComponent(n)):null}}]),t}();hV.displayName="ActivityFeed",hV.defaultProps={ecosystemModules:[],canAddComments:!1,onActivityComponentSelected:u.a,selectedItem:null,isServiceDesk:!1},hV.displayName="ActivityFeed";var gV=Object(eo.a)([y.injectIntl,Object(f.f)("dropdown",{onDropdownOpened:"opened"}),Object(f.f)("dropdownItem",{onDropdownItemClicked:"clicked"}),Object(f.s)({onDropdownOpened:"activityFeed",onDropdownItemClicked:function(e){return{name:"activityFeed",menuItem:e}}}),Object(Am.a)(function(e){return{onActivityComponentSelected:function(t){return e("activityComponentSelected",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oV(Object(n),!0).forEach(function(t){iV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t))}}}),Object(i.connect)(function(e){return{canAddComments:Object(Ra.b)(e),commentIds:Object(Ra.K)(e),ecosystemModules:Object(ob.a)(e),isPreview:Object(k.r)(e),baseUrl:Object(w.f)(e),issueKey:Object(w.B)(e),locale:Object(w.D)(e),timeZone:Object(k.y)(e),timestampDisplaySetting:Object(IT.a)(e),shouldShowWorklog:Object(S.e)(e),selectedItem:Object(xT.a)(e),isServiceDesk:Object(w.u)(e)}},{onSwitchSelectedActivityItem:function(e){return{type:OT.a,payload:e}},onSwitchTimestampDisplaySetting:jT.a})])(hV),vV=n("./src/packages/issue/issue-view/src/layout-descriptor/index.js"),OV=n("./src/packages/platform/services/issue/src/index.js");function jV(){return(jV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var wV=function(e){var t=e.layoutItems,n=e.area,r=e.ItemContainer,i=e.onOpenPanel,a=lS();return o.a.createElement(o.a.Fragment,null,t.map(function(e){return function(e,t,n,r,i){var a=e.key,s=e.type,c=e.payload,u=t[s],f=u&&u.item;if(!f)return m.a.safeError("issue.views.issue-base.".concat(n),'Could not find a matching component for "'.concat(s,'"'),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),null;return i?function(e){return r?o.a.createElement(r,{key:a},o.a.createElement(f,jV({},c,{area:n,onOpenPanel:function(t){return e(a,s,t)}}))):o.a.createElement(f,jV({},c,{key:a,area:n,onOpenPanel:function(t){return e(a,s,t)}}))}(i):function(){return r?o.a.createElement(r,{key:a},o.a.createElement(f,jV({},c,{area:n}))):o.a.createElement(f,jV({},c,{key:a,area:n}))}()}(e,a,n,r,i)}))};wV.defaultProps={ItemContainer:void 0,onOpenPanel:u.a};var kV=wV,EV=Object(i.connect)(function(){return{}},function(e){return{onOpenPanel:function(t,n,r){var o={title:r&&r.title||n,type:n,key:t,payload:r};e(Ma(o))}}})(kV),SV=n("./node_modules/@atlaskit/dropdown-menu/components/group/DropdownItemGroup.js"),CV=n("./node_modules/@atlaskit/dropdown-menu/components/DropdownMenu.js"),PV=n("./node_modules/@atlaskit/icon/glyph/more.js"),IV=n.n(PV),xV=n("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-action-creator.js"),_V=n("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),MV=n("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");function TV(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var AV=Object(MV.b)("issue-ecosystem"),DV=function(){try{return AV.get("collapsed-panels")||[]}catch(e){return m.a.safeError("issue.ecosystem.local-storage","getCollapsedPanels failed: ".concat(e),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),[]}},LV=function(e){var t=DV();try{AV.set("collapsed-panels",[].concat(TV(t),[e]))}catch(e){m.a.safeError("issue.ecosystem.local-storage","setCollapsedPanel failed: ".concat(e),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e}))}},NV=function(e){var t=DV();try{AV.set("collapsed-panels",t.filter(function(t){return t!==e}))}catch(e){m.a.safeError("issue.ecosystem.local-storage","unsetCollapsedPanel failed: ".concat(e),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e}))}};function RV(e){return(RV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FV(Object(n),!0).forEach(function(t){UV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function UV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KV(e,t){return!t||"object"!==RV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WV(e){return(WV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HV(e,t){return(HV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zV(){var e=ZV(["\n    flex: 1;\n    ",";\n    ",";\n    color: ",";\n"]);return zV=function(){return e},e}function qV(){var e=ZV(["\n    max-height: ",";\n    overflow-y: ",";\n    overflow-x: hidden;\n    ",";\n    transition: max-height 1s ease-out;\n"]);return qV=function(){return e},e}function GV(){var e=ZV(["\n    align-items: center;\n    display: flex;\n    flex-flow: row-reverse wrap;\n    & > * + * {\n        margin-left: ","px;\n    }\n"]);return GV=function(){return e},e}function JV(){var e=ZV(["\n    color: ",";\n    margin-left: 5px;\n    display: ",";\n    ",":hover & {\n        display: inline;\n    }\n"]);return JV=function(){return e},e}function QV(){var e=ZV(["\n    display: flex;\n    align-items: center;\n    height: ","px;\n    cursor: ",";\n"]);return QV=function(){return e},e}function ZV(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var YV=a.default.div(QV(),4*d.e,function(e){return e.clickable?"pointer":void 0}),$V=a.default.span(JV(),vt.colors.link,function(e){return e.alwaysShow?void 0:"none"},YV),XV=a.default.div(GV(),d.e),eU=a.default.div(qV(),function(e){return e.isCollapsed?"0":"1500px"},function(e){return e.isCollapsed?"hidden":"auto"},Object(Xo.h)("&")),tU=a.default.h1(zV(),Xo.g,vt.typography.h400(),vt.colors.heading),nU=Object(y.defineMessages)({actions:{id:"issue.content.ecosystem-panels.meatballs.actions",defaultMessage:"Actions",description:""},hide:{id:"issue.content.ecosystem-panels.meatballs.hide",defaultMessage:"Hide {appName}",description:""},collapse:{id:"issue.content.ecosystem-panels.collapse-content",defaultMessage:"hide",description:"Helper message indicating that when users click on this element, the content panel will be collapsed"},expand:{id:"issue.content.ecosystem-panels.expand-content",defaultMessage:"show",description:"Helper message indicating that when users click on this element, the content panel will be expanded"}}),rU=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=KV(this,WV(t).call(this,e))).setupConnectHost=function(e){e&&e.onIframeUnload(function(t){var n=t.extension;e.destroy(n.id)})},n.contentPanelContainer=void 0,n.handleRemoveContentPanel=function(){var e=n.props,t=e.appKey,r=e.moduleKey,o=e.removeContentPanel;(0,e.onContentPanelRemoveAnalytics)(Bm(t,r)),o("".concat(t,"_").concat(r))},n.toggleCollapsedState=function(){var e=n.props,t=e.appKey,r=e.moduleKey,o=e.onToggleCollapsedStateAnalytics,i=n.state.isCollapsed,a=Object(_V.a)("".concat(t,"_").concat(r),10);o(Km(t,r,i?"expand":"collapse")),i?NV(a):LV(a),n.setState({isCollapsed:!i})},n.state={connectHost:window.connectHost,isCollapsed:DV().includes(Object(_V.a)("".concat(e.appKey,"_").concat(e.moduleKey),10))},n.setupConnectHost(n.state.connectHost),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HV(e,t)}(t,r["Component"]),function(e,t,n){t&&BV(e.prototype,t),n&&BV(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.state.connectHost||eb(function(t){e.setupConnectHost(t),e.setState({connectHost:t})})}},{key:"componentDidUpdate",value:function(){this.props.isSelected&&(Us(this.contentPanelContainer),this.props.unSelectContentPanel("".concat(this.props.appKey,"_").concat(this.props.moduleKey)))}},{key:"renderHidePanelOption",value:function(){var e=this.props.intl;return o.a.createElement(SV.a,{title:e.formatMessage(nU.actions)},o.a.createElement(Ax.a,{onClick:this.handleRemoveContentPanel},e.formatMessage(nU.hide,{appName:this.props.name})))}},{key:"renderMeatBallMenu",value:function(){return o.a.createElement("span",null,o.a.createElement("style",null,".squareButtonWithIcon { padding: 0 6px }"),o.a.createElement(CV.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:o.a.createElement(IV.a,{size:"small",label:"meatball menu"}),className:"squareButtonWithIcon"},position:"bottom right"},this.renderHidePanelOption()))}},{key:"renderHeader",value:function(){var e=this.props.contentPanel.showByDefault;if(!e)return o.a.createElement(ho.c,null,o.a.createElement(YV,null,o.a.createElement(tU,null,this.props.name)),o.a.createElement(XV,null,this.renderMeatBallMenu()));var t=this.props.intl,n=this.state.isCollapsed;return o.a.createElement(ho.c,null,o.a.createElement(YV,{clickable:!0,onClick:this.toggleCollapsedState},o.a.createElement(tU,null,this.props.name),o.a.createElement($V,{alwaysShow:n},n?t.formatMessage(nU.expand):t.formatMessage(nU.collapse))),e?null:o.a.createElement(XV,null,this.renderMeatBallMenu()))}},{key:"render",value:function(){var e=this,t=this.props,n=t.appKey,r=t.moduleKey,i=this.state.isCollapsed,a=this.props.contentPanel,s=a.options,c=a.options,u=c.url,l=c.origin,f=a.showByDefault,p=new UI.a;return o.a.createElement("div",{ref:function(t){e.contentPanelContainer=t}},this.renderHeader(),o.a.createElement(eU,{isCollapsed:i&&f},this.state.connectHost&&o.a.createElement(VI.a,{key:"connect-iFrame-".concat(l,"-").concat(this.props.refreshedOn),connectHost:this.state.connectHost,appKey:n,moduleKey:r,url:u,options:p.convertConnectOptions(s),connectIframeProvider:p,width:"100%",height:"100%",timeoutIndicator:function(){return o.a.createElement($I,{appName:e.props.contentPanel.name,appKey:n})}})))}}]),t}();rU.displayName="EcosystemContentPanel",rU.displayName="ContentPanel",rU.defaultProps={isSelected:!1,unSelectContentPanel:u.a,removeContentPanel:u.a,onContentPanelRemoveAnalytics:u.a,refreshedOn:0};var oU=Object(eo.a)([y.injectIntl,Object(Am.a)(function(e){return{onContentPanelRemoveAnalytics:function(t){return e("remove",VV({},t))},onToggleCollapsedStateAnalytics:function(t){return e("toggleCollapsedState",VV({},t))}}}),Object(i.connect)(function(e,t){return{contentPanel:Object(ob.e)(t.appKey,t.moduleKey)(e),isSelected:Object(ob.m)(t.appKey,t.moduleKey)(e),refreshedOn:Object(k.d)(e)}},function(e){return{unSelectContentPanel:function(t){return e(Object(xV.e)(t))},removeContentPanel:function(t){return e(Object(xV.h)(t))}}})])(rU),iU=n("./src/packages/issue/issue-view/src/actions/attachment-delete-action-creator.js"),aU=n("./src/packages/issue/issue-view/src/selectors/attachment-selector.js");function sU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uU=Object(no.createSelector)(aU.a,function(e){return e.deleteModal}),lU=Object(no.createSelector)(uU,function(e){return e.pendingDeleteAttachmentIds}),fU=Object(no.createSelector)(uU,function(e){return e.deleteModalAttachmentId}),pU=Object(no.createSelector)(w.a,va.h,aU.c,function(e,t,n){return Object.values(n).reduce(function(n,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sU(Object(n),!0).forEach(function(t){cU(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,cU({},r.id,t.canDeleteAllAttachments||null!==e&&t.canDeleteOwnAttachments&&r.author===e))},{})}),dU=n("./node_modules/lodash/reverse.js"),mU=n.n(dU),bU=n("./node_modules/lodash/sortBy.js"),yU=n.n(bU);function hU(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var gU=Object(no.createSelector)(aU.d,AC.d,lU,function(e,t,n){var r=e.filter(function(e){return!n.includes(e.id)}),o=[].concat(hU(t),hU(r));return mU()(yU()(o,function(e){return e.createdDate})).map(function(e){return e.id})}),vU=n("./node_modules/@atlaskit/icon/glyph/cross.js"),OU=n.n(vU),jU=n("./node_modules/@atlaskit/media-filmstrip/dist/esm/filmstrip.js"),wU=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/with-props.js"),kU=n("./src/packages/issue/issue-view/src/actions/card-cover-action-creator.js"),EU=n("./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js"),SU=n("./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js");function CU(){return(CU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function PU(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var IU=n("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js"),xU=function(){return o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},o.a.createElement("path",{d:"M2 11v5h14v-5H2zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),o.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),o.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})))};xU.displayName="hideIcon";var _U=function(){return o.a.createElement("svg",{viewBox:"0 0 24 24"},o.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},o.a.createElement("path",{d:"M2 11v5h14v-5H2zm0-1V9h14v1-8H2v8zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),o.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),o.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})))};_U.displayName="showIcon";var MU=function(e){var t=e.icon,n=e.label,r="show-icon"===t?_U:xU;return o.a.createElement(Je.a,{position:"top",content:n},o.a.createElement(gt.a,{glyph:r,label:n,size:"small"}))};MU.displayName="CardCoverIcon";var TU=MU,AU=Object(y.defineMessages)({delete:{id:"attachments.delete-attachment-from-attachment-panel",defaultMessage:"Delete",description:""},show:{id:"attachments.show-on-card",defaultMessage:"Show on card",description:""},hide:{id:"attachments.hide-on-card",defaultMessage:"Hide on card",description:""}});function DU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function LU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NU=function(e){var t=e.attachmentIds,n=e.attachments,r=e.canDeleteAttachmentMap,i=e.cardCover,a=e.intl,s=e.isMobile,c=e.mediaContext,u=e.onCardCoverHide,l=e.onCardCoverShow,f=e.onShowDeleteAttachmentModal,p=e.viewMediaClientConfig,d=t.map(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DU(Object(n),!0).forEach(function(t){LU(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({mediaItemType:"file",id:n[e]?n[e].mediaApiFileId:e},c.viewContext&&c.viewContext.collection?{collectionName:c.viewContext.collection}:{}),p=Number(e),d=a.formatMessage(AU.hide),m=a.formatMessage(AU.show),b=i&&i.isEnabled&&i.availableAttachmentIds.includes(p)?[p===i.attachmentId?{label:d,handler:function(){u(p)},icon:o.a.createElement(TU,{icon:"hide-icon",label:d})}:{label:m,handler:function(){l(i.attachmentId,p)},icon:o.a.createElement(TU,{icon:"show-icon",label:m})}]:[],y=r[e]?[{label:a.formatMessage(AU.delete),handler:function(){f(e)},icon:o.a.createElement(OU.a,{size:"small",label:"delete"})}]:[];return{identifier:t,selectable:!1,actions:[].concat(b,y),isLazy:!s}});return o.a.createElement(jU.a,{shouldOpenMediaViewer:!0,items:d,mediaClientConfig:p})};NU.displayName="AttachmentFilmstrip";var RU=g()(function(e){return Object(SU.a)(function(e){return function(t){var n=t.tokenProvider,r=PU(t,["tokenProvider"]),i=r.mediaContext;if(!i.viewContext)return Object(M.k)()?o.a.createElement(e,CU({viewMediaClientConfig:void 0},r)):null;var a=i.viewContext,s=a.clientId,c=a.serviceHost,u={authProvider:Object(EU.a)(n,s,c)};return o.a.createElement(e,CU({viewMediaClientConfig:u},r))}}(e))},y.injectIntl,Object(Am.a)(function(e){return{onShowDeleteAttachmentModal:function(){e("delete.click")},onCardCoverShow:function(){e("card-cover-show.click")},onCardCoverHide:function(){e("card-cover-hide.click")}}}),Object(wU.a)({externalId:"issue.attachment.card"}),Object(i.connect)(function(){return function(e){return{attachments:Object(aU.c)(e),mediaContext:Object(E.a)(e),canDeleteAttachmentMap:pU(e),isMobile:Object(w.s)(e),cardCover:Object(IU.c)(e)?Object(IU.a)(e):null}}},function(e){return{onShowDeleteAttachmentModal:function(t){return e(Object(iU.e)(t))},onCardCoverShow:function(t,n){return e(Object(kU.d)(t,n))},onCardCoverHide:function(t){return e(Object(kU.d)(t))}}}),Object(Oo.a)())(NU);function FU(e){return(FU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UU(e,t){return!t||"object"!==FU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BU(e){return(BU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KU(e,t){return(KU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var WU={id:"attachments.confirm-delete-attachment-modal-header",defaultMessage:"Delete this attachment?"},HU={id:"attachments.confirm-delete-attachment-modal-text",defaultMessage:"Once you delete, it's gone for good."},zU=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=UU(this,(e=BU(t)).call.apply(e,[this].concat(o)))).onDeleteRequest=function(){n.props.onDeleteRequest(n.props.deleteModalAttachmentId)},n.onDeleteCancel=function(){n.props.onDeleteCancel(n.props.deleteModalAttachmentId)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KU(e,t)}(t,r["Component"]),function(e,t,n){t&&VU(e.prototype,t),n&&VU(e,n)}(t,[{key:"render",value:function(){return 0===this.props.attachmentIds.length?null:o.a.createElement("div",null,o.a.createElement(ho.c,null,o.a.createElement(ho.e,null,o.a.createElement(y.FormattedMessage,{id:"issue.attachments-panel-heading",defaultMessage:"Attachments"}))),o.a.createElement(RU,{attachmentIds:this.props.attachmentIds}),this.props.deleteModalAttachmentId&&o.a.createElement(tr.b,{appearance:"danger",headerMessage:this.props.intl.formatMessage(WU),contentMessage:this.props.intl.formatMessage(HU),onConfirm:this.onDeleteRequest,onCancel:this.onDeleteCancel,externalId:"issue.attachment.card.delete"}))}}]),t}();zU.displayName="UnsafeAttachments",zU.displayName="Attachments",zU.defaultProps={deleteModalAttachmentId:null,onDeleteRequest:u.a,onDeleteCancel:u.a};var qU=Object(y.injectIntl)(Object(Oo.a)()(zU)),GU=g()(Object(i.connect)(function(e){return{attachmentIds:gU(e),deleteModalAttachmentId:fU(e)}},function(e){return{onDeleteRequest:function(t){return e(Object(iU.c)(t))},onDeleteCancel:function(t){return e(Object(iU.a)(t))}}}),Object(Oo.a)())(qU),JU=n("./src/packages/issue/issue-view/src/actions/child-panel-action-type.js"),QU=function(e){return{type:JU.a,payload:{childIssue:{id:e}}}},ZU=function(){return{type:JU.b}},YU=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),$U=Object(no.createSelector)(k.H,function(e){return e.childPanel}),XU=Object(no.createSelector)($U,function(e){return e.subtaskQuickAddClickCount}),eB=Object(no.createSelector)($U,function(e){return e.issueInEpicQuickAddClickCount}),tB=Object(no.createSelector)($U,function(e){return e.childIssueQuickAddClickCount}),nB=Object(no.createSelector)(k.e,function(e){return e.childrenIssues}),rB=n("./src/packages/platform/utils/app-base/src/index.js"),oB=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),iB=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-shallow-equal.js"),aB=n("./src/packages/issue/issue-view/src/reducers/fetch-issue-types-status-reducer.js"),sB=function(){return Object(fl.c)("issue.details.preview-mode.enhanced",!1)},cB=function(){return Object(fl.b)("delorean.tti.extract-intl-provider",!1)},uB=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/entities/actions.js"),lB=Object(y.defineMessages)({linkParentErrorTitle:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-title",defaultMessage:"We couldn't link the child issue",description:"Heading text for error flag that appears when linking child issue to parent fails"},linkParentErrorDescription:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again.",description:"Body text for error flag that appears when linking child issue to parent fails"},reorderErrorTitle:{id:"issue.views.common.child-issues-panel.flags.reorder-error-title",defaultMessage:"We couldn't reorder those issues",description:"Heading text for error flag that appears when reordering fails"},reorderErrorDescription:{id:"issue.views.common.child-issues-panel.flags.reorder-error-description",defaultMessage:"Wait a few moments, then give it another try.",description:"Body text for error flag that appears when reordering fails"}}),fB=function(e){switch(e.type){case uB.o:return{type:"error",title:lB.linkParentErrorTitle,description:lB.linkParentErrorDescription};case uB.p:return{type:"error",title:lB.reorderErrorTitle,description:lB.reorderErrorDescription};default:return}},pB="classicSubtasks";function dB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bB(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var yB,hB=["summary","issuetype","parent","project"],gB=function(e){return!!Object.keys(e).find(function(t){return!function(e){return hB.find(function(t){return e===t})}(t)&&!e[t].hasDefaultValue&&e[t].required})},vB=function(e,t){var n=e.fields;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dB(Object(n),!0).forEach(function(t){mB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},bB(e,["fields"]),{hasRequiredField:!!n&&gB(n),hasEpicLinkField:!!n&&Object.keys(n).includes(t)})},OB=n("./node_modules/redux-observable/lib/es/index.js");function jB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wB=(jB(yB={},"CHILD_ISSUE_ADDED","CHILD_ISSUE_ADDED"),jB(yB,"ISSUE_CHILDREN_ORDER_CHANGED","ISSUE_CHILDREN_ORDER_CHANGED"),yB),kB=function(e){return e.context},EB=function(e){return e.entities},SB=function(e){return e.ui},CB=Object(no.createSelector)(EB,function(e){return e.issues||[]}),PB=Object(no.createSelector)(CB,function(e){return e.filter(function(e){return e.statusCategory===v.DONE})}),IB=Object(no.createSelector)(CB,function(e){return e.filter(function(e){return e.statusCategory!==v.DONE})}),xB=Object(no.createSelector)(CB,function(e){return e.filter(function(e){return e.statusCategory===v.IN_PROGRESS})}),_B=function(e){return Object(no.createSelector)(CB,function(t){return fC()(t,function(t){return t.id===e})})},MB=Object(no.createSelector)(EB,function(e){return e.issueTypes}),TB=Object(no.createSelector)(MB,function(e){return"issuetype in (".concat(e.map(function(e){return e.id}).join(","),")")}),AB=Object(no.createSelector)(SB,function(e){return e.addClickCount}),DB=Object(no.createSelector)(SB,function(e){return e.childPanelView}),LB=Object(no.createSelector)(SB,function(e){return e.childCreateSummary}),NB=Object(no.createSelector)(SB,MB,function(e,t){return e.selectedIssueType||t[0]}),RB=Object(no.createSelector)(SB,function(e){return e.hideDone}),FB=Object(no.createSelector)(SB,function(e){return e.fetchIssueTypesStatus}),VB=Object(no.createSelector)(FB,function(e){return e===aB.b}),UB=Object(no.createSelector)(kB,function(e){return e.baseUrl}),BB=(Object(no.createSelector)(kB,function(e){return e.locale}),Object(no.createSelector)(kB,function(e){return e.childIssuesPanelType})),KB=Object(no.createSelector)(BB,function(e){return!!e&&e===pB}),WB=Object(no.createSelector)(BB,function(e){return!!e&&"classicProjectEpicChildren"===e}),HB=Object(no.createSelector)(BB,function(e){return!!e&&"nextGenChildren"===e}),zB=Object(no.createSelector)(kB,function(e){return e.supportsIssueCreation}),qB=Object(no.createSelector)(kB,VB,function(e,t){return Object(M.t)()?e.requiresFullCreate||!t:e.requiresFullCreate}),GB=Object(no.createSelector)(kB,function(e){return e.parentKey}),JB=Object(no.createSelector)(kB,function(e){return e.parentId}),QB=Object(no.createSelector)(kB,function(e){return e.customFieldIdRank}),ZB=Object(no.createSelector)(kB,function(e){return e.epicLinkFieldKey}),YB=Object(no.createSelector)(kB,function(e){return e.projectId}),$B=Object(no.createSelector)(kB,function(e){return e.messages||{}}),XB=Object(no.createSelector)($B,function(e){return e.title}),eK=Object(no.createSelector)($B,function(e){return e.noValueText||null}),tK=Object(no.createSelector)(kB,function(e){return e.onNavigateToNewIssue}),nK=Object(no.createSelector)(kB,function(e){return e.onChange}),rK=Object(no.createSelector)(kB,function(e){return e.isIssueViewComplete}),oK=Object(no.createSelector)(kB,function(e){return null===e.user||""===e.user}),iK=function(e,t){return e.ofType(uB.g,uB.n,uB.q,uB.p).do(function(e){try{var n=t.getState(),r=nK(n),o=BB(n);switch(e.type){case uB.g:r({type:wB.CHILD_ISSUE_ADDED,meta:{childIssue:{id:Object(Qg.toIssueId)(e.payload.createdChild.id)}}});break;case uB.n:r({type:wB.CHILD_ISSUE_ADDED,meta:{childIssue:{id:Object(Qg.toIssueId)(e.payload.linkedChild.id)}}});break;case uB.q:var i=e.payload,a=i.currentOrder,s=i.newOrder,c=i.currentIndex,u=i.newIndex,f=a[c].id,p=f?[+f]:[],d=u>c,m=Number((s[d?u-1:u+1]||{}).id);"nextGenChildren"===o&&r({type:wB.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:p,rankId:m,isRankAfter:d}});break;case uB.p:var b=e.payload,y=b.originalOrder,h=b.originalIndex,g=b.newIndex,v=y[h].id,O=v?[+v]:[],j=h>g,w=Number((y[j?h-1:h+1]||{}).id);"nextGenChildren"===o&&w&&r({type:wB.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:O,rankId:w,isRankAfter:j}})}}catch(e){fl.h.safeError("issue.views.common.child-issues-panel.change-notification","Failed to call onChange callback",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e}))}}).ignoreElements()},aK=function(e,t){return e.ofType(uB.c).mergeMap(function(e){var n=e.payload,r=e.meta,o=t.getState(),i=n.optimisticId,a=n.createdChild;if(!HB(o))return Pl.Observable.of(Object(uB.A)(i,a,r.analyticsEvent));var s=UB(o),c=YB(o),u=JB(o);if(!c||!u)throw new Error("Attempted to link a child issue without a project or parent issue ID");return Pl.Observable.from(function(e,t,n,r){return Object(So.i)("".concat(e,"/rest/internal/simplified/1.0/projects/").concat(t,"/issues/").concat(n,"/children"),{body:JSON.stringify({issueIds:[r]})})}(s,c,u,a.id)).map(function(){return Object(uB.A)(i,a,r.analyticsEvent)}).catch(function(e){return fl.h.safeError("issue.views.common.child-issues-panel.created-in-dialog.link-to-parent","Failed to link child to parent",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),Pl.Observable.of(Object(uB.F)(i))})})},sK=function(e,t,n){return Object(So.j)("".concat(e,"/rest/greenhopper/1.0/epics/").concat(t,"/add"),{body:JSON.stringify({ignoreEpics:!0,issueKeys:[n]})})},cK=function(e,t,n){return function(e,t){return Object(So.i)("".concat(e,"/rest/api/2/issue"),{body:JSON.stringify(t)})}(e,t).then(function(t){return{id:t.id,issueKey:t.key,issueLink:"".concat(e,"/browse/").concat(t.key),issueSummary:n.issueSummary,issueTypeIconUrl:n.issueTypeIconUrl,issueTypeName:n.issueTypeName,assigneeUrl:n.assigneeUrl,assigneeDisplayName:n.assigneeDisplayName,isLoading:!1,errorType:void 0}})};function uK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uK(Object(n),!0).forEach(function(t){fK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pK=function(e,t){return fl.h.safeError("issue.views.common.child-issues-panel.create-child-request",t,new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e}))},dK=function(e,t){return e.ofType(uB.e).mergeMap(function(e){var n=e.payload,r=e.meta;return function(e,t,n){var r=UB(e),o=YB(e),i=JB(e),a=KB(e),s=HB(e),c=WB(e),u=NB(e);if(!o||!i)throw new Error("Attempted to create a new child issue without a project or parent issue ID");var l=a||s,f=u.hasEpicLinkField,p=c&&f,d=ZB(e),m={fields:lK({project:{id:o},issuetype:{id:t.issueTypeId},summary:t.issueSummary},l?{parent:{id:i}}:{},{},p&&d?fK({},d,GB(e)):{})};return Pl.Observable.from(cK(r,m,t)).mergeMap(function(e){return c&&!f?Pl.Observable.from(sK(r,i,e.id)).map(function(){return Object(uB.A)(t.id,e,n)}).catch(function(n){return pK(n,"Failed to link issue"),Pl.Observable.of(Object(uB.G)(e,t.id))}):Pl.Observable.of(Object(uB.A)(t.id,e,n))}).catch(function(e){return pK(e,"Failed to create child issue"),Pl.Observable.of(Object(uB.x)(t.id))})}(t.getState(),n.optimisticUiChildIssue,r.analyticsEvent)})};function mK(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var bK=function(e,t){return e.ofType(uB.f).map(function(e){var n=e.payload.optimisticId,r=e.meta,o=t.getState(),i=_B(n)(o),a=(i.isLoading,i.hasError,mK(i,["isLoading","hasError"]));return Object(uB.y)(a,r.analyticsEvent)})},yK=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js"),hK=function(e,t){var n=e.get(t);return n?n.value:void 0},gK=function(e,t,n){return function(e,t){return e.getIssue$(t,!0).toPromise().then(function(e){var t=e.error,n=e.issue;return t?Promise.reject(t):n?Promise.resolve(n):Promise.reject(new Error("Unexpected response from the dataprovider, expected an issue or an error but got neither"))})}(e,n).then(function(e){var n=e.id,r=e.key,o=e.fields,i=hK(o,"summary"),a=hK(o,"issuetype"),s=hK(o,"priority"),c=hK(o,"status"),u=hK(o,"assignee")||null;return{id:n?n.toString():"",issueKey:r,issueLink:Object(Wb.g)(Object(Qg.toBaseUrl)(t),Object(Qg.toIssueKey)(r)),issueSummary:i,issueTypeIconUrl:a&&a.iconUrl,issueTypeName:a&&a.name,issuePriorityUrl:s&&s.iconUrl,issuePriorityName:s&&s.name,statusName:c&&c.name,statusId:c&&c.id,statusCategory:c&&Object(v.statusCategoryForId)(c.statusCategory.id),statusCategoryId:c&&c.statusCategory.id,assigneeUrl:u&&Object(yK.c)(u).avatarUrl,assigneeDisplayName:u&&u.displayName,errorType:void 0,isLoading:!1}})},vK=n("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js"),OK=function(e,t){return function(e,t){return Object(vK.c)(e,t,["assignee"]).toPromise()}(e,t).then(function(e){return e.map(function(e){var t=e.id,n=e.fields;return{id:t,assigneeUrl:n&&n.assignee&&Object(yK.c)(n.assignee).avatarUrl,assigneeDisplayName:n&&n.assignee&&Object(yK.c)(n.assignee).displayName}})})},jK=function(e,t){return e.ofType(uB.h).switchMap(function(){var e=t.getState(),n=UB(e),r=CB(e).map(function(e){return e.issueKey}).filter(function(e){return void 0!==e});return Pl.Observable.from(OK(n,r)).map(function(e){return Object(uB.C)(e)}).catch(function(e){return fl.h.safeError("issue.views.common.child-issues-panel.fetch-details-for-issues","Failed to fetch details for issues",new l.a({eventNameSuffix:Hr.C,type:l.h,app:l.e,event:e})),Pl.Observable.empty()})})},wK=function(e,t,n){var r=UB(t),o=JB(t),i=_B(e)(t);if(!o)throw new Error("Attempted to link a next-gen issue to a parent without issue ID ");return Pl.Observable.from(function(e,t,n){return Object(So.j)("".concat(e,"/rest/api/3/issue/").concat(n),{body:JSON.stringify({fields:{parent:{id:t}}})})}(r,o,e)).map(function(){return Object(uB.E)(e,i,n)}).catch(function(t){return fl.h.safeError("issue.views.common.child-issues-panel.add-existing-issue","Failed to link a next-gen issue to a parent",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:t})),Pl.Observable.of(Object(uB.I)(e))})},kK=Object(OB.combineEpics)(function(e,t){return e.ofType(uB.l).mergeMap(function(e){var n=e.payload.issueId,r=e.meta.analyticsEvent,o=t.getState();switch(BB(o)){case"classicProjectEpicChildren":var i=UB(o),a=JB(o),s=_B(n)(o);if(!a)throw new Error("Attempted to link a classic issue to an epic without a parent issue ID");return Pl.Observable.from(sK(i,a,n)).map(function(){return Object(uB.E)(n,s,r)}).catch(function(e){return fl.h.safeError("issue.views.common.child-issues-panel.link-child-issue","Failed to link a classic issue to a parent",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),Pl.Observable.of(Object(uB.I)(n))});case"nextGenChildren":return wK(n,o,r);default:return Pl.Observable.empty()}})},function(e,t){return e.ofType(uB.a).mergeMap(function(e){var n=e.payload.issueId,r=e.meta.analyticsEvent,o=t.getState();switch(BB(o)){case"nextGenChildren":return wK(n,o,r);default:return Pl.Observable.empty()}})}),EK=function(e,t){var n=e.id,r=e.key,o=e.fields;return{id:n,issueKey:r,issueLink:Object(Wb.g)(Object(Qg.toBaseUrl)(t),Object(Qg.toIssueKey)(r)),issueSummary:o.summary,issueTypeIconUrl:o.issuetype.iconUrl,issueTypeName:o.issuetype.name,issuePriorityUrl:o.priority&&o.priority.iconUrl||void 0,issuePriorityName:o.priority&&o.priority.name||void 0,statusCategory:Object(v.statusCategoryForId)(o.status.statusCategory.id),statusCategoryId:o.status.statusCategory.id,statusName:o.status.name,statusId:o.status.id,assigneeUrl:o.assignee&&Object(yK.c)(o.assignee).avatarUrl,assigneeDisplayName:o.assignee&&Object(yK.c)(o.assignee).displayName,isLoading:!1,errorType:void 0}},SK=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js");function CK(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['query {\n      issue(issueIdOrKey: "','", latestVersion: true, screen:"view", fields:"subtasks") {\n        fields {\n          key\n          value\n        }\n      }\n    }']);return CK=function(){return e},e}var PK=function(e){return Object(SK.a)(CK(),e)},IK=function(e){if(!e||!e.data||!e.data.issue)return[];var t=e.data.issue.fields.find(function(e){return e.key===oo.i});return t&&t.value?t.value.map(function(e){var t=e.id,n=e.key,r=e.self,o=e.fields,i=o.assignee,a=o.issuetype,s=o.priority,c=o.summary;return{id:t,key:n,self:r,fields:{issueType:a,priority:s,status:o.status,summary:c,assignee:i}}}):[]},xK=function(e,t){return function(e,t){return Object(So.d)(function(e){return"".concat(e,"/rest/graphql/1/")}(e),{method:"POST",body:JSON.stringify({query:PK(t)})})}(e,t).map(IK)},_K=function(e,t,n,r){return function(e,t,n,r){return Object(So.e)(function(e){return"".concat(e,"/rest/greenhopper/1.0/api/rank/after")}(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:n,rankAfterId:r})})}(e,t,n,r)},MK=function(e,t,n,r){return function(e,t,n,r){return Object(So.e)(function(e){return"".concat(e,"/rest/greenhopper/1.0/api/rank/before")}(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:n,rankBeforeId:r})})}(e,t,n,r)};function TK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function AK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TK(Object(n),!0).forEach(function(t){DK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function DK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LK(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var NK=function(e,t){return function(e,t){return Object(So.g)("".concat(e,"/rest/api/2/issue/").concat(t,"?fields=subtasks"))}(e,t).then(function(e){var t=e&&e.fields;return t&&t.subtasks||[]})};function RK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function FK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RK(Object(n),!0).forEach(function(t){VK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var UK=function(e,t){var n=UB(e),r=JB(e);if(!r)throw new Error("Attempted to reorder subtasks without parentId");var o=t.currentOrder,i=t.newOrder,a=t.currentIndex,s=t.newIndex;return Pl.Observable.from(function(e,t,n,r){return fetch("".concat(e,"/secure/MoveIssueLink.jspa?id=").concat(t,"&currentSubTaskSequence=").concat(n,"&subTaskSequence=").concat(r)).then(function(e){return e.ok?null:e.text().then(function(t){throw new jw.b(e.status,t)})})}(n,r,a,s)).switchMap(function(){return NK(n,r)}).flatMap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map(function(e){return e.id}),r=i.map(function(e){return e.id});if(Tx()(t,r))return Pl.Observable.of(Object(uB.L)(i));if(Tx()(t.slice().sort(),r.slice().sort())){var o=t.map(function(e){return i.find(function(t){return t.id===e})});return Pl.Observable.of(Object(uB.L)(o))}var a=e.map(function(e){var t=e.id;return FK({},i.find(function(e){return e.id===t})||{},{},EK(e,n))});return Pl.Observable.of(Object(uB.L)(a),Object(uB.B)())}).catch(function(e){return fl.h.safeError("issue.views.common.child-issues-panel.reorder-subtask","Failed to reorder subtasks",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),Pl.Observable.of(Object(uB.J)(o,i,a,s))})},BK=function(e,t){return e.ofType(uB.q).mergeMap(function(e){var n=t.getState();switch(BB(n)){case pB:return UK(n,e.payload);case"nextGenChildren":return function(e,t,n){var r=UB(e),o=JB(e),i=QB(e);if(!o)throw new Error("Attempted to reorder children without parentId");if(!i)throw new Error("Attempted to reorder children without customFieldId");var a=t.currentOrder,s=t.newOrder,c=t.currentIndex,u=t.newIndex,f=n.analyticsEvent,p=a[c].id,d=p?[+p]:[],m=u>c,b=Number((s[m?u-1:u+1]||{}).id);if(!b)throw new Error("Attempted to reorder children without rankId");return(m?_K(r,i,d,b):MK(r,i,d,b)).switchMap(function(){return xK(r,o)}).flatMap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map(function(e){return e.id}),n=s.map(function(e){return e.id});if(Object(Ac.t)(f,"issueRank updated",{numIssues:1,previousIssueIndex:c,currentIssueIndex:u,isRankAfter:m}),Tx()(t,n))return Pl.Observable.of(Object(uB.L)(s));if(Tx()(LK(t).sort(),LK(n).sort())){var o=t.map(function(e){return s.find(function(t){return t.id===e})});return Pl.Observable.of(Object(uB.L)(o))}var i=e.map(function(e){var t=e.id;return AK({},s.find(function(e){return e.id===t})||{},{},EK(e,r))});return Pl.Observable.of(Object(uB.L)(i),Object(uB.B)())}).catch(function(e){return fl.h.safeError("issue.views.common.child-issues-panel.reorder-children","Failed to reorder children",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),Pl.Observable.of(Object(uB.J)(a,s,c,u))})}(n,e.payload,e.meta);default:return Pl.Observable.empty()}})},KK=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/context/actions.js"),WK=function(e,t){return t?Pl.Observable.from(function(e,t){return Object(So.g)("".concat(e,"/rest/internal/2/project/").concat(t,"/hasValidatorsOnSubtasks"))}(e,t)).map(function(e){return Object(KK.h)(e)}).catch(function(e){var t="issue.views.common.child-issues-panel.has-validators-on-subtasks",n="Failed to check if project has validators on subtasks";return Object(DT.a)(e)?Object(DT.b)(t,n,e):fl.h.safeError(t,n,new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),Pl.Observable.of(Object(KK.f)())}):Pl.Observable.of(Object(KK.f)())},HK=function(e,t){return e.ofType(KK.a).switchMap(function(){var e=t.getState();switch(BB(e)){case pB:var n=UB(e),r=YB(e);return oK(e)?Pl.Observable.of(Object(KK.h)(!0)):WK(n,r);default:return Pl.Observable.empty()}})},zK=function(e){return Object(OB.combineEpics)(dK,function(e){return function(t,n){return t.ofType(uB.g).do(function(e){var t=e.payload.createdChild,r=e.meta,o=n.getState(),i=KB(o),a={action:"created",actionSubjectId:t.id,attributes:{isInlineCreatedOnIssue:!0,isClassicSubtask:i}};Object(f.k)(r.analyticsEvent,a)}).switchMap(function(t){var r=t.payload.createdChild,o=n.getState(),i=UB(o);return Pl.Observable.from(gK(e,i,r.issueKey)).map(function(e){return Object(uB.D)(e)}).catch(function(e){return fl.h.safeError("issue.views.common.child-issues-panel.create-child-success.fetch-single-issue","Failed to fetch single issue after a successful create",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),Pl.Observable.empty()})})}}(e),bK,jK,aK,HK,BK,iK,kK,function(e){return function(t,n){return t.ofType(uB.n).do(function(e){var t=e.payload.linkedChild,r=e.meta,o=n.getState(),i=BB(o),a={action:"linked",actionSubjectId:t.id,attributes:{isInlineChildAdded:!0,panelType:i}};Object(f.k)(r.analyticsEvent,a)}).switchMap(function(t){var r=t.payload.linkedChild,o=n.getState(),i=UB(o);return Pl.Observable.from(gK(e,i,r.issueKey)).map(function(e){return Object(uB.D)(e)}).catch(function(e){return fl.h.safeError("issue.views.common.child-issues-panel.link-child-success.fetch-single-issue","Failed to fetch single issue after a successful child issue linking",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e})),Pl.Observable.empty()})})}}(e))},qK=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/index.js"),GK=n("./src/packages/issue/issue-view/src/views/common/child-issues-panel/state/ui/actions.js"),JK=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/index.js"),QK=n("./src/packages/common-legacy-do-not-add-anything-new/src/match-jira-url/index.js"),ZK=n("./node_modules/debounce-promise/dist/index.js"),YK=n.n(ZK),$K=n("./node_modules/lodash/uniqBy.js"),XK=n.n($K);function eW(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var tW=function(e,t){var n=e.sections,r=n[0],o=n[1],i=r.issues,a=o?o.issues:[],s=XK()([].concat(eW(i),eW(a)),"key");return[{label:o?t.matchingIssues:t.recentIssues,options:s.map(function(e){return{issueId:Object(Qg.toIssueId)(String(e.id)),value:e.key,issueKey:e.key,summary:e.summaryText,imageUrl:e.img}})}]};function nW(e){return(nW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oW(e,t){return!t||"object"!==nW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iW(e){return(iW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aW(e,t){return(aW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sW=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=oW(this,(e=iW(t)).call.apply(e,[this].concat(o)))).state={options:[],isLoading:!1,error:null},n.fetchData=function(e){var t=n.props,r=t.baseUrl,o=t.issueKey,i=t.projectId,a=t.jql,s=t.labels,c=Object(QK.b)(e,window.location.host,r)||e;return n.setState({isLoading:!0,error:null}),Object(So.c)("".concat(r,"/rest/api/3/issue/picker?currentIssueKey=").concat(o,"&currentProjectId=").concat(i,"&showSubTasks=true&showSubTaskParent=true&currentJQL=").concat(a,"&query=").concat(c)).then(function(e){return n.setState({options:tW(e,s),isLoading:!1}),e}).catch(function(e){return n.setState({isLoading:!1,options:[],error:e})})},n.debouncedFetchData=YK()(n.fetchData,300,{leading:!0}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aW(e,t)}(t,r["Component"]),function(e,t,n){t&&rW(e.prototype,t),n&&rW(e,n)}(t,[{key:"componentDidMount",value:function(){this.fetchData(this.props.initialValue)}},{key:"render",value:function(){var e=this.props.children,t=this.state;return e({options:t.options,isLoading:t.isLoading,error:t.error,loadOptions:this.debouncedFetchData})}}]),t}();sW.displayName="IssueOptionService",sW.defaultProps={initialValue:""};var cW=function(){return Object(fl.b)("issue.details.issue-picker-one-line-item",!1)};function uW(){var e=pW(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    flex: 1 1 100%;\n    min-width: 0;\n"]);return uW=function(){return e},e}function lW(){var e=pW(["\n    margin-right: ","px;\n    width: ","px;\n    height: ","px;\n"]);return lW=function(){return e},e}function fW(){var e=pW(["\n    display: flex;\n    align-items: center;\n"]);return fW=function(){return e},e}function pW(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dW=a.default.div(fW()),mW=a.default.div(lW(),d.e,2*d.e,2*d.e),bW=a.default.div(uW());function yW(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var hW=function(e){var t=e.imageUrl,n=e.children;return o.a.createElement(dW,null,o.a.createElement(mW,null,o.a.createElement("img",{src:t,alt:""})),n)};hW.displayName="IssueCard";var gW=function(e){var t=e.label;return o.a.createElement(dW,null,o.a.createElement(wl.a,{size:"small",primaryColor:vt.colors.B400}),o.a.createElement(D.b,{appearance:"link",isSelected:!1},t))};gW.displayName="CreateIssueOption";var vW=function(e){var t=e.imageUrl,n=e.issueKey,r=e.summary;return cW()?o.a.createElement(hW,{imageUrl:t},o.a.createElement(bW,null,n," ",r)):o.a.createElement(hW,{imageUrl:t},o.a.createElement("div",null,n," ",r))},OW=function(e){var t=e.imageUrl,n=e.issueKey,r=e.summary;return cW()?o.a.createElement(hW,{imageUrl:t},o.a.createElement(bW,null,"".concat(n," ").concat(r))):o.a.createElement(hW,{imageUrl:t},o.a.createElement("div",null,"".concat(n," ").concat(r)))},jW=function(e){e.children;var t=yW(e,["children"]);return o.a.createElement(Hh.d.SingleValue,t,o.a.createElement(OW,{imageUrl:t.data.imageUrl,issueKey:t.data.issueKey,summary:t.data.summary}))};jW.displayName="SingleValue";var wW=Object(y.defineMessages)({defaultPlaceholder:{id:"issue-picker.default-placeholder",defaultMessage:"Search by issue key or summary",description:"Placeholder for the user input in the issue picker"},defaultRecentIssues:{id:"issue-picker.default-recent-issues",defaultMessage:"Recent Issues",description:"Group heading for the recent search results"},defaultMatchingIssues:{id:"issue-picker.default-matching-issues",defaultMessage:"Matching Issues",description:"Group heading for the recent search results"},defaultFailedLoadingIssues:{id:"issue-picker.default-failed-loading-issues",defaultMessage:"Failed to load issues",description:"Message when there is a connectivity failure"},createIssue:{id:"issue-picker.create-issue",defaultMessage:"Create an issue for '{value}'",description:"label for creating a new issue with specified value"}});function kW(e){return(kW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SW(e,t){return!t||"object"!==kW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CW(e){return(CW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PW(e,t){return(PW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var IW=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=SW(this,(e=CW(t)).call.apply(e,[this].concat(i)))).onBlur=function(e){e("")},n.onChange=function(e,t,r){switch(t.action){case"select-option":var o=e.issueId,i=e.issueKey,a=e.summary,s=e.imageUrl;n.props.onChange&&n.props.onChange({issueId:o,issueKey:i,issueSummary:a,issueTypeIconUrl:s}),r("");break;case"clear":n.props.onClear&&n.props.onClear()}},n.onCreate=function(e){n.props.onCreate&&n.props.onCreate(e)},n.onInputChange=function(e){return function(t,n){"input-change"===n.action&&e(t)}},n.onSetSelectRef=function(e){n.akSelect=e},n.formatOptionLabel=function(e,t){var r=t.context;if(e.__isNew__){var i=n.props.intl.formatMessage(wW.createIssue,{value:e.value});return o.a.createElement(gW,{label:i})}return"menu"===r?o.a.createElement(vW,{imageUrl:e.imageUrl,issueKey:e.issueKey,summary:e.summary}):e.label},n.akSelect=void 0,n.filterOption=function(){return!0},n.renderNoOptionsMessage=function(e){if(e){var t=n.props.intl;return o.a.createElement(JK.a,{description:t.formatMessage(wW.defaultFailedLoadingIssues),imageWidth:56,isSubtle:!0})}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PW(e,t)}(t,r["Component"]),function(e,t,n){t&&EW(e.prototype,t),n&&EW(e,n)}(t,[{key:"focus",value:function(){this.akSelect.focus()}},{key:"reset",value:function(){this.akSelect.select.select.select.clearValue(),this.akSelect.blur(),this.akSelect.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.initialValue,r=t.issueKey,i=t.projectId,a=t.jql,s=t.intl;return o.a.createElement(Gs.d,null,function(t){var c=t.tenantContext.baseUrl;return o.a.createElement(sW,{labels:{recentIssues:s.formatMessage(wW.defaultRecentIssues),matchingIssues:s.formatMessage(wW.defaultMatchingIssues)},baseUrl:c,issueKey:r,projectId:i,jql:a,initialValue:n},function(t){var r=t.loadOptions,i=t.options,a=t.isLoading,c=t.error;return o.a.createElement(yf.a,{ref:e.onSetSelectRef,isLoading:a,formatOptionLabel:e.formatOptionLabel,options:i,defaultInputValue:n,autoFocus:!0,allowCreateWhileLoading:!0,defaultOptions:!0,onCreateOption:e.onCreate,placeholder:s.formatMessage(wW.defaultPlaceholder),components:{SingleValue:jW},onChange:function(t,n){return e.onChange(t,n,r)},onInputChange:e.onInputChange(r),onBlur:function(){return e.onBlur(r)},isClearable:!0,filterOption:e.filterOption,noOptionsMessage:function(){return e.renderNoOptionsMessage(c)},openMenuOnFocus:!0})})})}}]),t}();IW.displayName="IssuePicker",IW.defaultProps={initialValue:""};var xW=IW,_W=n("./node_modules/keycode/index.js"),MW=n.n(_W),TW=Object(y.defineMessages)({childLinkButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-link-button",defaultMessage:"Add",description:"Button label to link child issue"},childCancelButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-cancel-button",defaultMessage:"Cancel",description:"Button label to cancel linking of child issue"}});function AW(){var e=LW(["\n    margin-top: ","px;\n    display: flex;\n    justify-content: flex-end;\n"]);return AW=function(){return e},e}function DW(){var e=LW(["\n    margin-left: ","px !important;\n"]);return DW=function(){return e},e}function LW(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var NW=Object(a.default)(D.b)(DW(),d.e),RW=a.default.div(AW(),d.e);function FW(e){return(FW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VW(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function UW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BW(e,t){return!t||"object"!==FW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KW(e){return(KW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WW(e,t){return(WW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HW=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=BW(this,(e=KW(t)).call.apply(e,[this].concat(o)))).state={selectedIssue:void 0,isDisabled:!0},n.onChildContainerRefSet=function(e){n.childContainer=e},n.onAdd=function(){n.state.selectedIssue&&(n.props.onAdd(n.state.selectedIssue),n.resetPicker())},n.onChange=function(e){n.setState({selectedIssue:e,isDisabled:!1})},n.onClear=function(){return n.setState({selectedIssue:void 0,isDisabled:!0})},n.onCancelClicked=function(){n.onClear(),n.props.onCancel()},n.onSetSelectRef=function(e){n.issuePicker=e},n.onKeyDown=function(e){e.keyCode===MW()("enter")&&(n.onAdd(),e.stopPropagation())},n.issuePicker=void 0,n.childContainer=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WW(e,t)}(t,r["Component"]),function(e,t,n){t&&UW(e.prototype,t),n&&UW(e,n)}(t,[{key:"componentDidMount",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){VW(i,r,o,a,s,"next",e)}function s(e){VW(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Us(this.childContainer);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.addClickCount!==e.addClickCount&&(Us(this.childContainer),this.focusPicker())}},{key:"resetPicker",value:function(){this.issuePicker&&this.issuePicker.reset()}},{key:"focusPicker",value:function(){this.issuePicker&&this.issuePicker.focus()}},{key:"render",value:function(){var e=this.props,t=e.initialValue,n=e.issueKey,r=e.projectId,i=e.jql,a=e.intl;return n&&r?o.a.createElement(T.a,{onEscape:this.onCancelClicked},o.a.createElement("div",{onKeyDown:this.onKeyDown,ref:this.onChildContainerRefSet},o.a.createElement(xW,{ref:this.onSetSelectRef,initialValue:t,issueKey:n,projectId:r,jql:i,onChange:this.onChange,onClear:this.onClear,intl:a,onCreate:this.props.onCreate}),o.a.createElement(RW,null,o.a.createElement(NW,{appearance:"primary",onClick:this.onAdd,isDisabled:this.state.isDisabled},a.formatMessage(TW.childLinkButton)),o.a.createElement(NW,{appearance:"subtle",onClick:this.onCancelClicked},a.formatMessage(TW.childCancelButton))))):null}}]),t}();HW.displayName="AddExistingIssue",HW.defaultProps={initialValue:""};var zW=Object(eo.a)([y.injectIntl,Object(f.f)("button",{onAdd:"clicked",onCancel:"clicked",onCreate:"clicked"}),Object(f.s)({onAdd:"addExistingChildIssueRequest",onCancel:"hideAddExistingChildIssue",onCreate:"switchToCreateChildIssue"}),Object(i.connect)(function(e){return{addClickCount:AB(e),initialValue:LB(e),issueKey:GB(e),jql:TB(e),projectId:YB(e)}},function(e){return{onAdd:function(t,n){return e(Object(uB.u)(t,n))},onCancel:function(){return e(Object(GK.i)())},onCreate:function(t){e(Object(GK.k)(t)),e(Object(GK.l)(GK.a.InlineCreate))}}})])(HW),qW=n("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js"),GW=Object(y.defineMessages)({createChildLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-child-label",defaultMessage:"Create child",description:'Aria label for a "+" button to create a child issue'},createSubtaskLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-subtask-label",defaultMessage:"Create subtask",description:'Aria label for a "+" button to create a child issue'}});function JW(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-left: ","px;\n"]);return JW=function(){return e},e}var QW=a.default.div(JW(),.75*d.e);function ZW(e){return(ZW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $W(e,t){return!t||"object"!==ZW(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XW(e){return(XW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eH(e,t){return(eH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$W(this,XW(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eH(e,t)}(t,r["Component"]),function(e,t,n){t&&YW(e.prototype,t),n&&YW(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.onClick,r=e.isClassicSubtaskPanel?GW.createSubtaskLabel:GW.createChildLabel;return o.a.createElement(QW,null,o.a.createElement(qW.a,{onClick:n,label:t(r)}))}}]),t}();tH.displayName="AddChild",tH.defaultProps={isClassicSubtaskPanel:!1};var nH=Object(eo.a)([y.injectIntl,Object(f.f)("button",{onClick:"clicked"}),Object(f.s)({onClick:"showChildIssuesInlineCreate"}),Object(i.connect)(function(e){return{isClassicSubtaskPanel:KB(e)}},function(e,t){return Object(M.t)()?{onClick:function(){e(Object(GK.n)()),t.onClick.apply(t,arguments)}}:{onClick:function(){return e(Object(GK.n)())}}})])(tH),rH=n("./node_modules/@atlaskit/dropdown-menu/components/group/DropdownItemGroupCheckbox.js"),oH=n("./node_modules/@atlaskit/dropdown-menu/components/item/DropdownItemCheckbox.js"),iH=Object(y.defineMessages)({actions:{id:"issue.views.common.child-issues-panel.heading.meatballs.actions",defaultMessage:"Actions",description:"Heading for the dropdown menu group containing the actions for children-issues"},filter:{id:"issue.views.common.child-issues-panel.heading.meatballs.filter",defaultMessage:"Filter",description:"Heading for the dropdown menu group containing the filters for children-issues"},bulkEdit:{id:"issue.views.common.child-issues-panel.heading.meatballs.bulk-edit",defaultMessage:"Bulk edit",description:"An action link to go begin the bulk edit process for these issues"},hideDone:{id:"issue.views.common.child-issues-panel.heading.meatballs.hide-done",defaultMessage:"Hide done",description:"A filter option to hide children-issues which are in the DONE category"},search:{id:"issue.views.common.child-issues-panel.heading.meatballs.search",defaultMessage:"View in search",description:"An action link to view the list of visible children-issues in Jira search"},tooltip:{id:"issue.views.common.child-issues-panel.heading.meatballs.tooltip",defaultMessage:"Issue actions",description:"A tooltip message for the dropdown menu containing children-issue actions"}});function aH(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    .childIssuesPanelMeatballButton {\n        padding: 0 ","px;\n    }\n"]);return aH=function(){return e},e}var sH=a.default.div(aH(),.75*d.e);function cH(e){return(cH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lH(e,t){return!t||"object"!==cH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fH(e){return(fH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pH(e,t){return(pH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dH=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=lH(this,(e=fH(t)).call.apply(e,[this].concat(o)))).onHideDoneClickedAnalytics=function(e){var t=n.props,r=t.onHideDoneClicked,o=t.allIssues,i=t.incompleteIssues,a=t.hideDone;r(o.length,i.length,!a,e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pH(e,t)}(t,r["Component"]),function(e,t,n){t&&uH(e.prototype,t),n&&uH(e,n)}(t,[{key:"onBulkEditClickedAnalytics",value:function(e){var t=this;return function(n){t.props.onBulkEditClicked(e,n)}}},{key:"onViewInSearchClickedAnalytics",value:function(e){var t=this;return function(n){t.props.onViewInSearchClicked(e,n)}}},{key:"isHideDoneCheckboxVisible",value:function(){var e=this.props,t=e.allIssues,n=e.incompleteIssues;return!vu()(n)&&n.length!==t.length}},{key:"generateBulkEditLink",value:function(e){return"".concat(this.props.baseUrl,"/secure/GHBulkChange.jspa?issueKeys=").concat(encodeURIComponent(e))}},{key:"generateSearchLink",value:function(e){var t=encodeURIComponent("issueKey in (".concat(e,")"));return"".concat(this.props.baseUrl,"/issues/?jql=").concat(t)}},{key:"renderHideDoneCheckbox",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.hideDone;return this.isHideDoneCheckboxVisible()?o.a.createElement(rH.a,{title:t(iH.filter),id:"child-issues-panel-checkbox-group"},o.a.createElement(oH.a,{id:"hideDone",key:"hideDone",onClick:this.onHideDoneClickedAnalytics,isSelected:n},t(iH.hideDone))):null}},{key:"renderActionLinks",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.hideDone,r=e.allIssues,i=e.incompleteIssues,a=n?i:r,s=a.length,c=a.map(function(e){return e.issueKey}).join(","),u=this.generateBulkEditLink(c),l=this.generateSearchLink(c),f=this.isHideDoneCheckboxVisible()?t(iH.actions):"";return o.a.createElement(SV.a,{title:f},o.a.createElement(Ax.a,{onClick:this.onBulkEditClickedAnalytics(s),href:u},t(iH.bulkEdit)),o.a.createElement(Ax.a,{onClick:this.onViewInSearchClickedAnalytics(s),href:l},t(iH.search)))}},{key:"render",value:function(){return o.a.createElement(sH,null,o.a.createElement(CV.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:o.a.createElement(IV.a,{size:"small",label:this.props.intl.formatMessage(iH.tooltip)}),className:"childIssuesPanelMeatballButton"},position:"bottom right"},this.renderHideDoneCheckbox(),this.renderActionLinks()))}}]),t}();dH.displayName="Meatballs",dH.defaultProps={hideDone:!1};var mH=Object(eo.a)([y.injectIntl,Object(f.f)("item",{onBulkEditClicked:"clicked",onViewInSearchClicked:"clicked",onHideDoneClicked:"clicked"}),Object(f.s)({onBulkEditClicked:function(e){return{name:"bulkEdit",issueCount:e}},onViewInSearchClicked:function(e){return{name:"viewInSearch",issueCount:e}},onHideDoneClicked:function(e,t,n){return{name:"toggleHideDone",totalIssues:e,incompleteIssues:t,hideDone:n}}}),Object(i.connect)(function(e){return{baseUrl:UB(e),parentKey:GB(e),hideDone:RB(e),allIssues:CB(e),incompleteIssues:IB(e)}},{onHideDoneClicked:GK.o})])(dH),bH=Object(y.defineMessages)({title:{id:"issue.views.common.child-issues-panel.heading.title.title",defaultMessage:"Child issues",description:"Heading for the child issues panel"}});function yH(e){return(yH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gH(e,t){return!t||"object"!==yH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vH(e){return(vH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OH(e,t){return(OH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gH(this,vH(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OH(e,t)}(t,r["Component"]),function(e,t,n){t&&hH(e.prototype,t),n&&hH(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.title;return o.a.createElement(ho.e,null,t(n))}}]),t}();jH.displayName="Title",jH.defaultProps={title:bH.title};var wH=Object(eo.a)([y.injectIntl,Object(i.connect)(function(e){return{title:XB(e)}},{})])(jH);function kH(e){return(kH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SH(e,t){return!t||"object"!==kH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CH(e){return(CH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PH(e,t){return(PH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var IH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),SH(this,CH(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PH(e,t)}(t,r["Component"]),function(e,t,n){t&&EH(e.prototype,t),n&&EH(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.Title,n=e.Meatballs,r=e.AddChild,i=e.supportsIssueCreation,a=e.allIssues,s=e.onAddChildClick;return o.a.createElement(ho.c,null,o.a.createElement(t,null),o.a.createElement(ho.d,null,a.length>0?o.a.createElement(n,null):null,i&&0!==a.length?o.a.createElement(r,{onClick:s}):null))}}]),t}();IH.displayName="Heading",IH.defaultProps={supportsIssueCreation:!1,allIssues:[]};var xH=Object(eo.a)([Object(i.connect)(function(e){return{Title:wH,Meatballs:mH,AddChild:nH,allIssues:CB(e),supportsIssueCreation:zB(e)}},{})])(IH),_H=Object(y.defineMessages)({typesPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.child-types-select.types-placeholder",defaultMessage:"Issue type",description:"Placeholder message to show in the issue type dropdown menu when creating a new child issue inline"}});function MH(){var e=DH(["\n    padding-left: ","px;\n    display: inline-block;\n"]);return MH=function(){return e},e}function TH(){var e=DH(["\n    display: flex;\n    align-items: center;\n"]);return TH=function(){return e},e}function AH(){var e=DH(["\n    border: solid "," ","px;\n    padding: ","px;\n"]);return AH=function(){return e},e}function DH(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}a.default.div(AH(),vt.colors.N50,d.e,d.e);var LH=a.default.div(TH()),NH=a.default.span(MH(),d.e);function RH(e){return(RH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FH(){return(FH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function VH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UH(e,t){return!t||"object"!==RH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BH(e){return(BH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KH(e,t){return(KH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zH=function(e){var t=e.name,n=e.id,r=e.iconUrl,i=e.hasRequiredField,a=e.hasEpicLinkField;return{content:t,value:n,elemBefore:o.a.createElement(Lm.a,{url:r,title:t}),iconUrl:r,hasRequiredField:i,hasEpicLinkField:a}},qH={singleValue:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WH(Object(n),!0).forEach(function(t){HH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{position:"static",transform:"none"})}},GH=function(e){return[{items:e.map(zH)}]},JH=function(e){return e.name},QH=function(e){return e.id},ZH=function(e){return o.a.createElement(LH,null,o.a.createElement(Lm.a,{url:e.iconUrl,title:e.name}),o.a.createElement(NH,null,e.name))};ZH.displayName="formatOptionLabel";var YH=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=UH(this,(e=BH(t)).call.apply(e,[this].concat(o)))).state={isSelectOpen:!1},n.onChildSelected=function(e){var t=Object(M.d)()?e:{name:e.content,id:e.value,iconUrl:e.iconUrl,hasRequiredField:e.hasRequiredField,hasEpicLinkField:e.hasEpicLinkField};n.setState({isSelectOpen:!1}),n.props.onChange(t)},n.onChange=function(e,t){"select-option"===t.action&&null!=e&&n.onChildSelected(e)},n.onOpenChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1},t=e.isOpen;n.setState({isSelectOpen:!!t})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KH(e,t)}(t,r["Component"]),function(e,t,n){t&&VH(e.prototype,t),n&&VH(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.issueTypes,r=e.selectedIssueType,i=Object(M.d)()?o.a.createElement(Uc.a,FH({},bp,{styles:op(yp,qH),options:n,value:r,getOptionLabel:JH,getOptionValue:QH,formatOptionLabel:ZH,onChange:this.onChange,placeholder:t(_H.typesPlaceholder)})):o.a.createElement(xd.StatelessSelect,{items:GH(n),selectedItem:zH(r),onSelected:this.onChildSelected,placeholder:t(_H.typesPlaceholder),isOpen:this.state.isSelectOpen,onOpenChange:this.onOpenChange});return o.a.createElement(df.a,null,i)}}]),t}();YH.displayName="ChildTypesSelect",YH.defaultProps={issueTypes:[]};var $H=g()(y.injectIntl,Object(i.connect)(function(e){return{selectedIssueType:NB(e),issueTypes:MB(e)}},{onChange:GK.j}))(YH),XH=n("./node_modules/lodash/trim.js"),ez=n.n(XH),tz=n("./node_modules/@atlaskit/icon/glyph/search.js"),nz=n.n(tz),rz=function(e){var t=e.children,n=e.onClick;return o.a.createElement(D.b,{appearance:"subtle-link",iconBefore:o.a.createElement(nz.a,null),isSelected:!1,onClick:n},t)};rz.displayName="AddExistingIssueButton",rz.displayName="AddExistingIssueButton";var oz=Object(y.defineMessages)({summaryLabel:{id:"issue.views.common.child-issues-panel.inline-create.summary-label",defaultMessage:"Child summary",description:"Label for child summary input field"},summaryPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.summary-placeholder",defaultMessage:"What needs to be done?",description:"Placeholder text to prompt users to enter the summary of the issue to be created"},summaryTooLong:{id:"issue.views.common.child-issues-panel.inline-create.summary-too-long",defaultMessage:"Summary must be less than 255 characters.",description:"Inline error text"},childCreateButton:{id:"issue.views.common.child-issues-panel.inline-create.child-create-button",defaultMessage:"Create",description:"Button label to create child issue"},childCancelButton:{id:"issue.views.common.child-issues-panel.inline-create.child-cancel-button",defaultMessage:"Cancel",description:"Button label to cancel creation of child issue"},addExistingIssuePlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.add-existing-issue-placeholder",defaultMessage:"Choose an existing issue",description:"Placeholder text to prompt users to search for an existing issue to be added as a sub-task"}});function iz(){var e=uz(["\n    justify-content: flex-end;\n    display: flex;\n"]);return iz=function(){return e},e}function az(){var e=uz(["\n    margin-top: ","px;\n    display: flex;\n    justify-content: space-between;\n"]);return az=function(){return e},e}function sz(){var e=uz(["\n    flex-grow: 1;\n"]);return sz=function(){return e},e}function cz(){var e=uz(["\n    display: flex;\n    align-items: center;\n    background-color: ",";\n    width: 100%;\n"]);return cz=function(){return e},e}function uz(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var lz=a.default.div(cz(),vt.colors.N10),fz=a.default.div(sz()),pz=Object(K_.a)(D.b,{target:"e1o0mbwp0"})("margin-left:",d.e,"px !important;"),dz=a.default.div(az(),d.e),mz=a.default.div(iz());function bz(e){return(bz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yz(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hz(Object(n),!0).forEach(function(t){vz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oz(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function jz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wz(e,t){return!t||"object"!==bz(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kz(e){return(kz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ez(e,t){return(Ez=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sz=function(e){return ez()(e).length>255},Cz=function(e){var t=ez()(e);return vu()(t)||Sz(e)},Pz=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wz(this,kz(t).call(this,e))).onSubmitClicked=function(){n.createChild(),n.props.onSubmitClickAnalytics()},n.onCancelClicked=function(){n.closeAndReset(),n.props.onCancelClickAnalytics()},n.onEnterPressed=function(){n.createChild(),n.props.onEnterKeyPressedAnalytics()},n.onEscPressed=function(){n.closeAndReset(),n.props.onEscapeKeyPressedAnalytics()},n.onUpdateChildSummary=function(e){var t=e.target.value;n.props.onChangeSummary(t)},n.onChildContainerRefSet=function(e){n.childContainer=e},n.onFieldContainerRefSet=function(e){n.fieldContainer=e},n.onAddExisting=function(){n.props.onAddExistingIssue(),n.props.onAddExistingClickAnalytics()},n.childContainer=void 0,n.fieldContainer=void 0,n.createIssueFormFactory=void 0,n.createIssueFormFactory=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ez(e,t)}(t,r["Component"]),function(e,t,n){t&&jz(e.prototype,t),n&&jz(e,n)}(t,[{key:"componentDidMount",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Oz(i,r,o,a,s,"next",e)}function s(e){Oz(i,r,o,a,s,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Us(this.childContainer),this.fieldContainer&&this.fieldContainer.focus(),t=this.props.childIssuesPanelType===pB?"quick-edit/form/factory/create-subtask":"quick-edit/form/factory/create-issue",e.next=5,Object(Xm.a)({name:t});case 5:this.createIssueFormFactory=e.sent;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.addClickCount!==e.addClickCount&&(Us(this.childContainer),this.fieldContainer&&this.fieldContainer.focus())}},{key:"createChild",value:function(){var e=this,t="OPTIMISTIC_CHILD_".concat(Date.now()),n=this.props,r=n.baseUrl,o=n.epicLinkFieldKey,i=n.selectedIssueType,a=n.projectId,s=n.parentIssueId,c=n.parentIssueKey,u=n.childIssuesPanelType,l=n.requiresFullCreate,f=n.summary;if(!Cz(f)&&i){var p={id:t,issueSummary:f,issueTypeId:"".concat(i.id),issueTypeIconUrl:"".concat(i.iconUrl),issueTypeName:"".concat(i.name),assigneeUrl:null,assigneeDisplayName:null};if(i.hasRequiredField||l){var d="classicProjectEpicChildren"===u,m=this.createIssueFormFactory(gz({pid:a,issueType:i&&i.id,fields:gz({summary:f||""},d&&o?vz({},o,c):{}),customFieldsToPreserveOnFormRecreation:yz(d&&o?[o]:[])},u===pB?{parentIssueId:s}:{}));m.bind("issueCreated",function(n,i){d&&i.createdIssueDetails.fields[o]!==c||e.props.onFullDialogCreate(t,EK(i.createdIssueDetails,r)),e.resetAndFocus()}),m.asDialog({id:u===pB?"create-subtask-dialog":"create-issue-dialog"}).show()}else this.props.onSubmit(p),this.resetAndFocus()}}},{key:"closeAndReset",value:function(){this.reset(),this.props.onCancel()}},{key:"resetAndFocus",value:function(){this.reset(),this.fieldContainer&&this.fieldContainer.focus()}},{key:"reset",value:function(){this.props.onChangeSummary("")}},{key:"renderAddExistingIssueButton",value:function(){var e=this.props.intl.formatMessage;switch(this.props.childIssuesPanelType){case"nextGenChildren":return o.a.createElement(Je.a,{content:e(oz.addExistingIssuePlaceholder)},o.a.createElement(rz,{onClick:this.onAddExisting},e(oz.addExistingIssuePlaceholder)));case"portfolioChildren":case"classicProjectEpicChildren":case pB:default:return o.a.createElement("div",null)}}},{key:"render",value:function(){var e=this.props,t=e.intl.formatMessage,n=e.issueTypes,r=e.ChildTypesSelect,i=e.summary,a=Sz(i)?t(oz.summaryTooLong):"";return o.a.createElement("div",{ref:this.onChildContainerRefSet},o.a.createElement(lz,null,n.length>1?o.a.createElement(r,null):null,o.a.createElement(fz,null,o.a.createElement(T.a,{onEnter:this.onEnterPressed,onEscape:this.onEscPressed},o.a.createElement(Ue.a,{ref:this.onFieldContainerRefSet,placeholder:t(oz.summaryPlaceholder),label:t(oz.summaryLabel),onChange:this.onUpdateChildSummary,value:i,isInvalid:Sz(i),invalidMessage:a,isLabelHidden:!0,shouldFitContainer:!0})))),o.a.createElement(dz,null,this.renderAddExistingIssueButton(),o.a.createElement(mz,null,o.a.createElement(pz,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:Cz(i)},t(oz.childCreateButton)),o.a.createElement(pz,{appearance:"subtle",onClick:this.onCancelClicked},t(oz.childCancelButton)))))}}]),t}();Pz.displayName="InlineCreate",Pz.defaultProps={addClickCount:0,requiresFullCreate:!1,parentIssueKey:void 0,epicLinkFieldKey:null};var Iz=Object(f.e)("issue")(Pz),xz=Object(eo.a)([y.injectIntl,Object(f.f)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked",onAddExistingClickAnalytics:"clicked"}),Object(f.f)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(f.f)("childIssuePanelInlineCreate",{onSubmit:"onSubmit",onFullDialogCreate:"onFullDialogCreate"}),Object(f.s)({onSubmitClickAnalytics:"createChildIssue",onCancelClickAnalytics:"hideChildIssueInlineCreate",onEnterKeyPressedAnalytics:"confirmChildIssueCreate",onEscapeKeyPressedAnalytics:"cancelChildIssueCreate",onAddExistingClickAnalytics:"addExistingChildClick"}),Object(i.connect)(function(e){return{ChildTypesSelect:$H,baseUrl:UB(e),issues:CB(e),addClickCount:AB(e),issueTypes:MB(e),selectedIssueType:NB(e),projectId:YB(e),parentIssueId:JB(e),parentIssueKey:GB(e),epicLinkFieldKey:ZB(e),childIssuesPanelType:BB(e),requiresFullCreate:qB(e),summary:LB(e)}},{onCancel:GK.i,onAddExistingIssue:function(){return Object(GK.l)(GK.a.AddExistingIssue)},onChangeSummary:function(e){return Object(GK.k)(e)},onSubmit:function(e,t){return Object(uB.y)(e,t)},onFullDialogCreate:function(e,t,n){return Object(uB.w)(e,t,n)}})])(Iz),_z=n("./src/packages/issue/issue-view/src/common/model/children-issues-type.js"),Mz=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),Tz=n("./node_modules/@atlaskit/icon/glyph/editor/close.js"),Az=n.n(Tz),Dz=n("./node_modules/@atlaskit/icon/glyph/list.js"),Lz=n.n(Dz),Nz=n("./src/packages/platform/utils/constants/src/index.js"),Rz=n("./src/packages/issue/fields/assignee/src/common/ui/assignee-avatar/index.js"),Fz=Object(me.asyncComponent)({resolve:function(){return n.e(292).then(n.bind(null,"./src/packages/issue/fields/assignee/src/ui/main.js")).then(function(e){return e.AssigneeEditView})},LoadingComponent:function(e){var t=e.initialValue;return t&&t.name?o.a.createElement(Rz.a,{url:t.avatarUrl||null,name:t.name}):null}}),Vz=n("./src/packages/issue/fields/status/index.js");function Uz(e){return(Uz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kz(e,t){return!t||"object"!==Uz(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wz(e){return(Wz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hz(e,t){return(Hz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zz(){var e=nq(["\n    padding-left: ",";\n    width: ",";\n    opacity: ",";\n    transition: ",";\n"]);return zz=function(){return e},e}function qz(){var e=nq(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n"]);return qz=function(){return e},e}function Gz(){var e=nq(["\n    "," padding-left: ","px;\n    flex: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return Gz=function(){return e},e}function Jz(){var e=nq(["\n    outline: none;\n    padding-left: ","px;\n    color: ",";\n    font-weight: 600;\n    font-size: 12px;\n    text-decoration: ",";\n    white-space: nowrap;\n\n    &:hover,\n    &:active,\n    &:visited,\n    &:link {\n        outline: none;\n        color: ",";\n        text-decoration: ",";\n    }\n"]);return Jz=function(){return e},e}function Qz(){var e=nq(["\n    padding-left: ","px;\n"]);return Qz=function(){return e},e}function Zz(){var e=nq(["\n    cursor: grab;\n"]);return Zz=function(){return e},e}function Yz(){var e=nq(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n"]);return Yz=function(){return e},e}function $z(){var e=nq(["\n    width: ","px;\n    height: 100%;\n    margin-left: ","px;\n    margin-right: -","px;\n    ",";\n    ",";\n"]);return $z=function(){return e},e}function Xz(){var e=nq(["\n    background: ",";\n"]);return Xz=function(){return e},e}function eq(){var e=nq(["\n    background: ",";\n"]);return eq=function(){return e},e}function tq(){var e=nq(["\n    display: flex;\n    align-items: center;\n"]);return tq=function(){return e},e}function nq(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var rq=Object(y.defineMessages)({issueTypeTitle:{id:"issue.view.common.issue-line-card.issue-type.title",defaultMessage:"Issue type: {issueTypeName}",description:"A text title for the issue type icon, mainly for accessibility purposes."},issuePriorityTitle:{id:"issue.view.common.issue-line-card.priority.title",defaultMessage:"Priority: {issuePriorityName}",description:"A text title for the issue priority icon, mainly for accessibility purposes."}}),oq=Nz.a.DONE,iq=Nz.a.statusCategoryForId,aq=a.default.div(tq()),sq=Object(a.css)(eq(),vt.colors.N30),cq=Object(a.css)(Xz(),vt.colors.N0),uq=Object(a.default)(aq)($z(),4*d.e,d.e/4,d.e,function(e){return e.isHovering&&sq},function(e){return e.isFocused&&cq}),lq=Object(a.default)(aq)(Yz()),fq=Object(a.default)(aq)(Zz()),pq=Object(a.default)(aq)(Qz(),d.e),dq=a.default.a(Jz(),d.e,function(e){return e.isActive?vt.colors.B400:vt.colors.N90},function(e){return e.isDone?"line-through":"none"},function(e){return e.isActive?vt.colors.B400:vt.colors.N90},function(e){return e.isDone?"line-through":"none"}),mq=a.default.div(Gz(),function(e){return e.isActive&&"color: ".concat(vt.colors.B400,";")},d.e),bq=a.default.div(qz()),yq=a.default.div(zz(),function(e){return e.isVisible?"".concat(d.e,"px"):"0"},function(e){return e.isVisible?"25px":"0"},function(e){return e.isVisible?"1":"0"},function(e){return e.isVisible?"width 0.2s linear, opacity 0.2s linear":"width 0.2s linear, opacity 0.05s linear"}),hq=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Kz(this,(e=Wz(t)).call.apply(e,[this].concat(o)))).handleEditStatus=function(e){(0,n.props.onEdit)({statusId:e.id,statusName:e.name,statusCategory:iq(e.statusCategory.id),statusCategoryId:e.statusCategory.id})},n.handleEditAssignee=function(e){e&&n.props.onEdit({assigneeUrl:e.avatarUrl,assigneeDisplayName:e.name})},n.handleErrorDialogClick=function(e){e.stopPropagation()},n.handleErrorDialogMouseDown=function(e){e.preventDefault(),e.stopPropagation()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hz(e,t)}(t,r["Component"]),function(e,t,n){t&&Bz(e.prototype,t),n&&Bz(e,n)}(t,[{key:"shouldRenderKey",value:function(){return!!this.props.issueKey}},{key:"isActionVisible",value:function(){return!this.props.isActive&&(this.props.isHovering||this.props.isFocused)}},{key:"shouldShowRemoveAction",value:function(){return this.props.isActive||this.props.isHovering||this.props.isFocused}},{key:"deleteButtonAction",value:function(e){e.stopPropagation(),this.props.issueKey&&this.props.onDelete(this.props.issueKey)}},{key:"renderAssignee",value:function(){var e=this.props,t=e.assigneeDisplayName,n=e.assigneeUrl,r=e.isDraggable,i=e.isHovering,a=e.isFocused;if(Object(M.C)()){var s=this.props.issueKey;return s?o.a.createElement(yq,{isVisible:i||n||a,onClick:function(e){return e.preventDefault()}},o.a.createElement(Fz,{allowedValues:[],issueKey:Object(Qg.toIssueKey)(s),onSuccess:this.handleEditAssignee,initialValue:{name:t||"",avatarUrl:n}})):null}return n?o.a.createElement(pq,null,o.a.createElement(Je.a,{content:t||"",hideTooltipOnMouseDown:r,position:"bottom"},o.a.createElement(Ws.a,{name:t||"",src:n,size:"small",enableTooltip:!1}))):null}},{key:"renderStatus",value:function(){var e=this.props,t=e.isInteractive,n=e.issueKey,r=e.statusCategory,i=e.statusCategoryId,a=e.statusId,s=e.statusName;return n&&r&&s&&a&&i?o.a.createElement(pq,{onClick:function(e){return e.preventDefault()},onFocus:function(e){return e.stopPropagation()}},o.a.createElement(Ac.b,{sourceName:"childIssuesPanel"},o.a.createElement(Vz.StatusField,{isEditable:t,appearance:"lozenge",issueKey:Object(Qg.toIssueKey)(n),initialValue:{id:a,name:s,statusCategory:{id:i}},onSuccess:this.handleEditStatus}))):null}},{key:"renderPriority",value:function(){var e=this.props,t=e.intl,n=e.isDraggable,r=e.issuePriorityUrl,i=e.issuePriorityName;if(!r)return null;var a=t.formatMessage(rq.issuePriorityTitle,{issuePriorityName:i});return o.a.createElement(Je.a,{content:i||"",hideTooltipOnMouseDown:n,position:"bottom"},o.a.createElement(Lm.a,{alt:a,url:r,width:20,height:20}))}},{key:"renderLoadingSpinner",value:function(){return this.props.isLoading?o.a.createElement(pq,null,o.a.createElement(L.a,{size:"small"})):null}},{key:"renderError",value:function(){return this.props.hasError||this.props.errorInlineMessage?o.a.createElement(pq,{onClick:this.handleErrorDialogClick,onMouseDown:this.handleErrorDialogMouseDown},this.props.errorInlineMessage):null}},{key:"renderSummary",value:function(){var e=this.props,t=e.isActive,n=e.issueSummary,r=e.isDraggable;return o.a.createElement(mq,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",isActive:t},o.a.createElement(Je.a,{content:n,hideTooltipOnMouseDown:r,position:"bottom"},o.a.createElement(bq,null,n)))}},{key:"renderKey",value:function(){return o.a.createElement(dq,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,tabIndex:-1,isActive:this.props.isActive,isDone:this.props.statusCategory===oq,onClick:function(e){return e.stopPropagation()}},this.props.issueKey)}},{key:"renderRemoveButton",value:function(){var e=this;return o.a.createElement(D.b,{iconBefore:o.a.createElement(Az.a,{label:""}),onClick:function(t){return e.deleteButtonAction(t)},tabIndex:-1,appearance:"subtle",spacing:"none"})}},{key:"renderRemoveButtonContainer",value:function(){var e=this.props,t=e.onDelete,n=e.isLoading,r=e.hasError,i=e.isHovering,a=e.isFocused;return t===u.a||n||r?null:o.a.createElement(uq,{isHovering:i,isFocused:a},this.shouldShowRemoveAction()&&this.renderRemoveButton())}},{key:"renderType",value:function(){var e=this.props,t=e.intl,n=e.isDraggable,r=e.issueTypeIconUrl,i=e.issueTypeName;if(!i)return null;var a=t.formatMessage(rq.issueTypeTitle,{issueTypeName:i});return o.a.createElement(Je.a,{content:i,hideTooltipOnMouseDown:n,position:"bottom"},o.a.createElement("div",null,n&&this.isActionVisible()?o.a.createElement(fq,null,o.a.createElement(Lz.a,{label:a,size:"small"})):o.a.createElement(aq,null,o.a.createElement(Lm.a,{alt:a,url:r}))))}},{key:"render",value:function(){return o.a.createElement(lq,{isFocused:this.props.isFocused,isHovering:this.props.isHovering},this.renderType(),this.shouldRenderKey()&&this.renderKey(),this.renderSummary(),this.renderPriority(),this.renderAssignee(),this.renderStatus(),this.renderLoadingSpinner(),this.renderError(),this.renderRemoveButtonContainer())}}]),t}();hq.displayName="IssueLineCard",hq.defaultProps={isLoading:!1,hasError:!1,isDraggable:!1,isHovering:!1,isActive:!1,isFocused:!1,isInteractive:!0,onDelete:u.a,onEdit:u.a};var gq=Object(y.injectIntl)(hq);function vq(e){return(vq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oq(){return(Oq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eq(e,t){return!t||"object"!==vq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sq(e){return(Sq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cq(e,t){return(Cq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pq=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Eq(this,(e=Sq(t)).call.apply(e,[this].concat(o)))).handleClick=function(e,t){n.props.onClick(e,t),e.issueLink&&(Object(kl.e)(t)||Object(kl.a)(t))&&window.open(e.issueLink,"_blank")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cq(e,t)}(t,r["Component"]),function(e,t,n){t&&kq(e.prototype,t),n&&kq(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.issues,n=e.onOrderChange,r=e.groupId,i=e.isReorderEnabled,a=e.isInteractive,s=e.onDelete,c=e.onEditIssue;return o.a.createElement(Mz.a,{items:t,onOrderChange:n,groupId:r,spotlightTargetName:Object(M.o)()&&Object(M.n)()?"issue-inline-card-spotlight":"",isReorderEnabled:i,isInteractive:a,onClick:this.handleClick},function(e,t,n,u){return o.a.createElement(gq,Oq({isHovering:e,isActive:t,isFocused:n,isDraggable:i,isInteractive:a,issueId:u.id,onDelete:s&&function(e){return s&&s(r,e)},onEdit:c&&function(e){return c&&c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jq(Object(n),!0).forEach(function(t){wq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},u,{},e))}},u))})}}]),t}();Pq.displayName="IssueLineCardGroup",Pq.defaultProps={isReorderEnabled:!1,isInteractive:!0};var Iq=n("./node_modules/@atlaskit/inline-message/components/InlineMessage/index.js");function xq(){var e=Aq(["\n    margin-left: ","px;\n"]);return xq=function(){return e},e}function _q(){var e=Aq(["\n    display: flex;\n    justify-content: flex-start;\n"]);return _q=function(){return e},e}function Mq(){var e=Aq(["\n    margin-bottom: ","px;\n"]);return Mq=function(){return e},e}function Tq(){var e=Aq(["\n    "," margin-bottom: ","px;\n"]);return Tq=function(){return e},e}function Aq(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Dq=Object(y.defineMessages)({retry:{id:"issue.issue-line-card-retry",defaultMessage:"Try again",description:""},cancel:{id:"issue.issue-line-card-cancel",defaultMessage:"Cancel",description:""}}),Lq=a.default.h1(Tq(),vt.typography.h400(),2*d.e),Nq=a.default.div(Mq(),2*d.e),Rq=a.default.div(_q()),Fq=a.default.div(xq(),d.e),Vq=function(e,t,n,r,i){return o.a.createElement(Iq.a,{type:"warning",placement:"bottom-end"},o.a.createElement("div",null,o.a.createElement(Lq,null,t),o.a.createElement(Nq,null,n),o.a.createElement(Rq,null,o.a.createElement(D.b,{onClick:r},e.formatMessage(Dq.retry)),o.a.createElement(Fq,null,o.a.createElement(D.b,{appearance:"subtle",onClick:i},e.formatMessage(Dq.cancel))))))};Vq.displayName="renderInlineMessage";var Uq=Object(y.defineMessages)({createChildErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-child-error-title",defaultMessage:"We couldn't create the child issue",description:"Heading of inline error message"},createSubtaskErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-subtask-error-title",defaultMessage:"We couldn't create the subtask",description:"Heading of inline error message"},createErrorBody:{id:"issue.views.common.child-issues-panel.issues.create-error-body",defaultMessage:"Check your connection, then give it another try",description:"Body of inline error message"},linkIssueErrorTitle:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-title",defaultMessage:"We couldn't link the child issue",description:"Heading of inline error message"},linkIssueErrorBody:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-body",defaultMessage:"Check your connection, then give it another try",description:"Body of inline error message"}});function Bq(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-top: ","px;\n    margin-bottom: ","px;\n    padding-right: 1px;\n"]);return Bq=function(){return e},e}var Kq=a.default.div(Bq(),d.e,d.e);function Wq(e){return(Wq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gq(e,t){return!t||"object"!==Wq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jq(e){return(Jq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qq(e,t){return(Qq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zq=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Gq(this,(e=Jq(t)).call.apply(e,[this].concat(o)))).onChildIssueClick=function(e,t){var r=e.issueKey;r&&Object(kl.d)(t)&&n.props.onNavigateToNewIssue({fromIssueKey:n.props.parentKey,toIssueKey:r})},n.onOrderChange=function(e,t,r,o,i){n.props.onReorderChildren(n.props.allIssues,e,r,o,i)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qq(e,t)}(t,r["Component"]),function(e,t,n){t&&qq(e.prototype,t),n&&qq(e,n)}(t,[{key:"inlineErrorMessage",value:function(e,t){var n=this.props,r=n.intl,o=n.onInlineErrorCreateRetry,i=n.onInlineErrorLinkingRetry,a=n.onInlineErrorCancel,s=n.isClassicSubtaskPanel;switch(t){case _z.a.linkIssue:return Vq(r,r.formatMessage(Uq.linkIssueErrorTitle),r.formatMessage(Uq.linkIssueErrorBody),function(t,n){return i(e,n)},function(){return a(e)});case _z.a.create:default:var c=s?Uq.createSubtaskErrorTitle:Uq.createChildErrorTitle;return Vq(r,r.formatMessage(c),r.formatMessage(Uq.createErrorBody),function(t,n){return o(e,n)},function(){return a(e)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.allIssues,r=t.incompleteIssues,i=t.hideDone,a=t.isClassicSubtaskPanel,s=t.isNextGenChildrenPanel,c=t.onEditIssue,u=t.isIssueViewComplete,l=n.length>1,f=n.filter(function(e){return e.isLoading}).length>0,p=(function(){return Object(fl.b)("jsw.agility.subtasks-ranking",!1)}()&&s||a)&&!i&&l&&!f;Object(M.k)()&&(p=p&&u);var d=(i?r:n).map(function(t){return t.errorType?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hq(Object(n),!0).forEach(function(t){zq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{errorInlineMessage:e.inlineErrorMessage(t.id,t.errorType)}):t});return o.a.createElement(Kq,null,o.a.createElement(Pq,{groupId:"child-issues-panel",issues:d,onClick:this.onChildIssueClick,isReorderEnabled:p,isInteractive:Object(M.k)()?u:void 0,onOrderChange:this.onOrderChange,onEditIssue:c}))}}]),t}();Zq.displayName="Issues",Zq.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,allIssues:[],incompleteIssues:[],onReorderChildren:u.a,onEditIssue:u.a};var Yq=Object(f.e)("issue")(Zq),$q=Object(eo.a)([y.injectIntl,Object(f.f)("button",{onInlineErrorCancel:"clicked",onInlineErrorCreateRetry:"clicked"}),Object(f.f)("inlineIssue",{onNavigateToNewIssue:"clicked",onReorderChildren:"dragged"}),Object(f.s)({onInlineErrorCancel:"cancelInlineErrorCreate",onInlineErrorCreateRetry:"retryInlineErrorCreate",onNavigateToNewIssue:"navigateToNewIssue",onReorderChildren:"reorderChildren"}),Object(i.connect)(function(e){return{allIssues:CB(e),incompleteIssues:IB(e),hideDone:RB(e),parentKey:GB(e),isClassicSubtaskPanel:KB(e),isNextGenChildrenPanel:HB(e),onNavigateToNewIssue:tK(e),isIssueViewComplete:rK(e)}},{onInlineErrorCancel:uB.v,onInlineErrorCreateRetry:uB.z,onInlineErrorLinkingRetry:uB.H,onReorderChildren:uB.K,onEditIssue:uB.N})])(Yq),Xq=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/progress-bar/index.js"),eG=Object(y.defineMessages)({completionPercentageText:{id:"issue.views.common.child-issues-panel.progress-summary.completion-percentage-text",defaultMessage:"{completionPercentage}% Done",description:"Text to be displayed next to the child issues progress bar which indicates percentage of child issues completed. Please ensure translation for the word Done aligns with the status category translation."},todoIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-issues-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} issues",description:"Tooltip for the To Do segment of the progress bar in child issues panels, i.e. not classic subtasks."},todoSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-subtasks-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} subtasks",description:"Tooltip for the To Do segment of the progress bar in classic subtask panels."},inProgressIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-issues-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} issues",description:"Tooltip for the In Progress segment of the progress bar in child issues panels, i.e. not classic subtasks."},inProgressSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-subtasks-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} subtasks",description:"Tooltip for the In Progress segment of the progress bar in classic subtask panels."},completedIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-issues-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} issues",description:"Tooltip for the Done segment of the progress bar in child issues panels, i.e. not classic subtasks."},completedSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-subtasks-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} subtasks",description:"Tooltip for the Done segment of the progress bar in classic subtask panels."}});function tG(){var e=iG(["\n    display: inline-block;\n    width: ","px;\n    text-align: right;\n"]);return tG=function(){return e},e}function nG(){var e=iG(["\n    margin-left: ","px;\n    margin-right: ","px;\n    flex-shrink: 0;\n    color: ",";\n"]);return nG=function(){return e},e}function rG(){var e=iG(["\n    flex-grow: 1;\n"]);return rG=function(){return e},e}function oG(){var e=iG(["\n    display: flex;\n    align-items: center;\n"]);return oG=function(){return e},e}function iG(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var aG=vt.colors.N30,sG=vt.colors.B400,cG=vt.colors.G300,uG=a.default.div(oG()),lG=a.default.div(rG()),fG=a.default.div(nG(),2*d.e,.25*d.e,vt.colors.N200),pG=a.default.span(tG(),3*d.e);function dG(){return(dG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var mG={remainingTooltip:eG.todoSubtasksSegmentTooltipText,completedTooltip:eG.completedSubtasksSegmentTooltipText,inProgressTooltip:eG.inProgressSubtasksSegmentTooltipText},bG={remainingTooltip:eG.todoIssuesSegmentTooltipText,completedTooltip:eG.completedIssuesSegmentTooltipText,inProgressTooltip:eG.inProgressIssuesSegmentTooltipText},yG=Object(eo.a)([y.injectIntl,Object(i.connect)(function(e){return{isClassicSubtaskPanel:KB(e),totalIssueCount:CB(e).length,inProgressIssueCount:xB(e).length,completedIssueCount:PB(e).length}},{})])(function(e){var t=e.isClassicSubtaskPanel,n=e.intl.formatMessage,r=e.totalIssueCount,i=e.inProgressIssueCount,a=e.completedIssueCount,s=r-i-a,c=Math.floor(a/r*100),u=t?mG:bG,l=u.remainingTooltip,f=u.completedTooltip,p=u.inProgressTooltip;return o.a.createElement(uG,null,o.a.createElement(lG,null,o.a.createElement(Xq.b,{sum:r,backgroundColor:aG,remainingTooltipContent:n(l,{todoIssueCount:s,totalIssueCount:r})},o.a.createElement(Xq.a,{value:a,color:cG,tooltipContent:n(f,{completedIssueCount:a,totalIssueCount:r})}),o.a.createElement(Xq.a,{value:i,color:sG,tooltipContent:n(p,{inProgressIssueCount:i,totalIssueCount:r})}))),o.a.createElement(fG,null,o.a.createElement(y.FormattedMessage,dG({},eG.completionPercentageText,{values:{completionPercentage:o.a.createElement(pG,null,c)}}))))});function hG(e){return(hG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vG(e,t){return!t||"object"!==hG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OG(e){return(OG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jG(e,t){return(jG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vG(this,OG(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jG(e,t)}(t,r["Component"]),function(e,t,n){t&&gG(e.prototype,t),n&&gG(e,n)}(t,[{key:"hasIssues",value:function(){return this.props.allIssues.length>0}},{key:"hasContent",value:function(){var e=this.props,t=e.noValueText,n=e.addClickCount;return this.hasIssues()||n>0||!!t}},{key:"renderEmptyValue",value:function(){var e=this.props,t=e.noValueText,n=e.addClickCount,r=e.intl.formatMessage;return this.hasIssues()||null===t||0!==n?null:o.a.createElement(Xo.c,null,r(t))}},{key:"renderIssues",value:function(){var e=this.props,t=e.ProgressSummary,n=e.Issues,r=e.allIssues,i=r.length>=2?o.a.createElement(t,null):null;return r.length>0?o.a.createElement(o.a.Fragment,null,i,o.a.createElement(n,null)):null}},{key:"renderCreate",value:function(){var e=this.props,t=e.InlineCreate,n=e.addClickCount,r=e.AddExistingIssue,i=e.childPanelView;if(n>0)switch(i){case GK.a.InlineCreate:return o.a.createElement(t,null);case GK.a.AddExistingIssue:return o.a.createElement(r,null);default:return null}return null}},{key:"render",value:function(){var e=this.props,t=e.Heading,n=e.onAddChildClick;return this.hasContent()?o.a.createElement(o.a.Fragment,null,o.a.createElement(t,{onAddChildClick:n}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null}}]),t}();wG.displayName="ChildIssuesPanel",wG.defaultProps={addClickCount:0,noValueText:null};var kG=Object(eo.a)([y.injectIntl,Object(i.connect)(function(e){return{Heading:xH,InlineCreate:xz,Issues:$q,ProgressSummary:yG,AddExistingIssue:zW,childPanelView:DB(e),allIssues:CB(e),incompleteIssues:IB(e),addClickCount:AB(e),noValueText:eK(e)}},{})])(wG);function EG(e){return(EG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CG(e,t){return!t||"object"!==EG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function PG(e){return(PG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IG(e,t){return(IG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xG=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=CG(this,PG(t).call(this,e))).store=void 0;var r=n.props,o=r.issueTypes,i=r.issues,a=r.parentKey,s=r.epicLinkFieldKey,c=r.childIssuesPanelType;if(n.store=Object(qK.a)(zK(n.props.dataProvider),a,c),n.dispatchContext(),n.store.dispatch(Object(KK.g)()),n.store.dispatch(Object(uB.M)({issueTypes:o.map(function(e){return vB(e,s)}),issues:i})),c!==pB&&i.length>0&&n.store.dispatch(Object(uB.B)()),Object(M.t)()){var u=e.fetchIssueTypesStatus;u&&n.store.dispatch(Object(GK.m)(u))}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IG(e,t)}(t,r["Component"]),function(e,t,n){t&&SG(e.prototype,t),n&&SG(e,n)}(t,[{key:"componentDidUpdate",value:function(e){if(!Object(iB.a)(e,this.props)&&(e.parentId!==this.props.parentId||e.parentKey===this.props.parentKey)){var t=this.props,n=t.isIssueViewComplete,r=t.issues;if(t.quickAddClickCount>e.quickAddClickCount&&this.store.dispatch(Object(GK.n)()),r.length||sB()&&this.props.issueTypes.length){sB()&&this.store.dispatch(Object(KK.g)());var o=this.props,i=o.issueTypes,a=o.epicLinkFieldKey;this.store.dispatch(Object(uB.M)({issueTypes:i.map(function(e){return vB(e,a)}),issues:r}))}if(sB()&&(n!==e.isIssueViewComplete&&this.store.dispatch(Object(KK.j)(n)),e.supportsIssueCreation!==this.props.supportsIssueCreation&&this.dispatchContext()),Object(M.t)()){var s=this.props.fetchIssueTypesStatus;s!==e.fetchIssueTypesStatus&&this.store.dispatch(Object(GK.m)(s||aB.c))}}}},{key:"dispatchContext",value:function(){var e=this.props,t=e.supportsIssueCreation,n=e.baseUrl,r=e.locale,o=e.user,i=e.parentKey,a=e.customFieldIdRank,s=e.epicLinkFieldKey,c=e.parentId,u=e.projectId,l=e.messages,f=e.onNavigateToNewIssue,p=e.onChange,d=e.childIssuesPanelType,m=e.isIssueViewComplete;this.store.dispatch(Object(KK.i)({baseUrl:n,locale:r,user:o,projectId:u,parentId:c,parentKey:i,customFieldIdRank:a,epicLinkFieldKey:s,supportsIssueCreation:t,messages:l,onNavigateToNewIssue:f,onChange:p,childIssuesPanelType:d,isIssueViewComplete:m,requiresFullCreate:!1}))}},{key:"render",value:function(){var e=this.props,t=e.locale,n=e.onAddChildClick,r=e.childIssuesPanelType,i=e.analyticsSource,a=e.issueHierarchyLevel;return o.a.createElement(rB.a,{store:this.store,locale:t,hasIntlProvider:!cB()},o.a.createElement(Ac.b,{sourceName:"childIssuesPanel",sourceType:Ac.m,attributes:{childIssuesPanelType:r,issueHierarchyLevel:a-1,analyticsSource:"issue-view (".concat(i,")")}},o.a.createElement(oB.a,null,o.a.createElement(kG,{onAddChildClick:Object(M.t)()?n:void 0}),o.a.createElement(dC.FlagsDispatcher,{mapper:fB}))))}}]),t}();xG.displayName="ChildIssuesPanel",xG.defaultProps={issues:[],issueTypes:[],isIssueViewComplete:!1};var _G=Object(OV.fb)(xG),MG=n("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js"),TG=Object(y.defineMessages)({title:{id:"issue.children-issues.title",defaultMessage:"Child issues",description:"The title of the children issues section used in Agility hierarchy levels"}});function AG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AG(Object(n),!0).forEach(function(t){LG(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function LG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NG=Object(eo.a)([Object(i.connect)(function(e){return DG({childIssuesPanelType:"nextGenChildren",baseUrl:Object(w.f)(e),locale:Object(w.D)(e),user:Object(w.a)(e),projectId:Object(k.B)(e),parentKey:Object(w.B)(e),parentId:Object(w.A)(e),customFieldIdRank:Object(io.b)(oo.V)(e),issueTypes:Object(YU.j)(e),issues:nB(e),supportsIssueCreation:Object(YU.k)(e),quickAddClickCount:tB(e),isIssueViewComplete:Object(k.l)(e),messages:TG,onNavigateToNewIssue:Object(w.G)(e)},Object(M.t)()?{fetchIssueTypesStatus:Object(MG.a)(e)}:{},{issueHierarchyLevel:Object(YU.e)(e),analyticsSource:Object(w.b)(e)})},function(e){return DG({onChange:function(t){switch(t.type){case wB.CHILD_ISSUE_ADDED:e(QU(t.meta.childIssue.id));break;case wB.ISSUE_CHILDREN_ORDER_CHANGED:e(function(e){var t=e.issueIds,n=e.rankId,r=e.isRankAfter;return{type:JU.d,payload:{issueIds:t,rankId:n,isRankAfter:r}}}(t.meta))}}},Object(M.t)()?{onAddChildClick:function(){return e(ZU())}}:{})})])(_G),RG=n("./src/packages/issue/issue-view/src/actions/applink-authentication-action-creator.js"),FG=n("./src/packages/issue/issue-view/src/actions/confluence-pages-action-creator.js"),VG=n("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),UG=n("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),BG=n("./node_modules/@atlaskit/icon/glyph/warning.js"),KG=n.n(BG),WG=n("./src/packages/issue/issue-view/src/common/constants/remote-link-error-type.js");function HG(){var e=JG(["\n    display: inline-block;\n    vertical-align: middle;\n    margin-top: ","px;\n    width: ","px;\n    height: ","px;\n    margin-left: ","px;\n"]);return HG=function(){return e},e}function zG(){var e=JG(["\n    height: 100%;\n    margin-left: ","px;\n    ",";\n    transform: scale(",");\n    margin-right: ","px;\n"]);return zG=function(){return e},e}function qG(){var e=JG(["\n    background-image: ",";\n"]);return qG=function(){return e},e}function GG(){var e=JG(["\n    background-image: ",";\n"]);return GG=function(){return e},e}function JG(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var QG=function(e){return"linear-gradient(90deg, rgba(255,255,255,0.00) 0%, ".concat(e," 25%)")},ZG=Object(a.css)(GG(),QG(vt.colors.N0)),YG=Object(a.css)(qG(),QG(vt.colors.N30)),$G=a.default.div(zG(),d.e/4,function(e){return e.invert?ZG:YG},function(e){return e.show?"1":"0"},-d.e),XG=a.default.div(HG(),d.e,4*d.e,3*d.e,d.e),eJ=function(e){var t=e.show,n=e.invert,r=e.onClick;return o.a.createElement($G,{show:t,invert:n},o.a.createElement(XG,null,o.a.createElement(D.b,{iconBefore:o.a.createElement(Az.a,null),appearance:"subtle",onClick:r,spacing:"none"})))};function tJ(e){return(tJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rJ(e,t){return!t||"object"!==tJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oJ(e){return(oJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iJ(e,t){return(iJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aJ(){var e=dJ(["\n    padding-left: ","px;\n"]);return aJ=function(){return e},e}function sJ(){var e=dJ(["\n    padding-left: ","px;\n    overflow: hidden;\n"]);return sJ=function(){return e},e}function cJ(){var e=dJ(["\n    padding-left: ","px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return cJ=function(){return e},e}function uJ(){var e=dJ(["\n    margin-left: -1px;\n"]);return uJ=function(){return e},e}function lJ(){var e=dJ(["\n    margin-left: -2px;\n"]);return lJ=function(){return e},e}function fJ(){var e=dJ(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n"]);return fJ=function(){return e},e}function pJ(){var e=dJ(["\n    display: flex;\n    align-items: center;\n"]);return pJ=function(){return e},e}function dJ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}eJ.displayName="DeleteButton";var mJ=a.default.div(pJ()),bJ=Object(a.default)(mJ)(fJ()),yJ=a.default.div(lJ()),hJ=a.default.div(uJ()),gJ=a.default.div(cJ(),d.e/2),vJ=a.default.div(sJ(),d.e),OJ=a.default.div(aJ(),d.e),jJ=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=rJ(this,(e=oJ(t)).call.apply(e,[this].concat(i)))).onDeleteClick=function(e){var t=n.props,r=t.onDeleteClick,o=t.globalId;e.stopPropagation(),r(o)},n.authenticateApplink=function(e){var t=n.props,r=t.error,o=t.repairLinkHref,i=t.onAuthenticateApplink;r===WG.b&&o&&i&&i(o),e.stopPropagation()},n.openRepairApplink=function(e){var t=n.props.repairLinkHref;t&&window.open(t,"_blank"),e.stopPropagation()},n.openConfluenceLink=function(e){window.open(n.props.href,"_blank"),e.stopPropagation()},n.renderErrorIcon=function(){return o.a.createElement(yJ,null,o.a.createElement(KG.a,{primaryColor:vt.colors.Y300}))},n.renderPadlockIcon=function(){return o.a.createElement(hJ,null,o.a.createElement(XT.a,{primaryColor:vt.colors.B300}))},n.renderErrorText=function(){return o.a.createElement(gJ,null,o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.loading-error",defaultMessage:"We couldn't load this page."}))},n.renderAuthRequiredText=function(){return o.a.createElement(gJ,null,o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-required",defaultMessage:"Authenticate with Confluence to see this page."}))},n.renderMissingApplinkText=function(){return o.a.createElement(gJ,null,o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.missing-applink",defaultMessage:"Confluence site not linked."}))},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iJ(e,t)}(t,r["Component"]),function(e,t,n){t&&nJ(e.prototype,t),n&&nJ(e,n)}(t,[{key:"renderIcon",value:function(){return this.props.error===WG.b?this.renderPadlockIcon():this.renderErrorIcon()}},{key:"renderText",value:function(){var e=this.props.error;return e===WG.b?this.renderAuthRequiredText():e===WG.a?this.renderMissingApplinkText():this.renderErrorText()}},{key:"renderAuthorizationRepairLink",value:function(){return o.a.createElement(OJ,null,o.a.createElement(D.b,{appearance:"link",spacing:"none",onClick:this.authenticateApplink},o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-repair-link",defaultMessage:"Authenticate"})))}},{key:"renderApplinkRepairLink",value:function(){return o.a.createElement(OJ,null,o.a.createElement(D.b,{appearance:"link",spacing:"none",onClick:this.openRepairApplink},o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.applink-repair-link",defaultMessage:"Repair"})))}},{key:"renderRepairLink",value:function(){var e=this.props,t=e.error,n=e.href;if(e.repairLinkHref){var r;t===WG.a?r=this.renderApplinkRepairLink():t===WG.b&&(r=this.renderAuthorizationRepairLink());var i=n?o.a.createElement(vJ,null,"\u2022"):null;return o.a.createElement(o.a.Fragment,null,r,i)}return null}},{key:"renderLink",value:function(){return o.a.createElement(OJ,null,o.a.createElement(D.b,{appearance:"link",spacing:"none",onClick:this.openConfluenceLink},o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.open-link",defaultMessage:"Open in Confluence"})))}},{key:"renderDeleteButton",value:function(){var e=this.props,t=e.isHovering,n=e.isFocused;return o.a.createElement(eJ,{show:t||n,onClick:this.onDeleteClick,invert:n})}},{key:"render",value:function(){return o.a.createElement(bJ,null,this.renderIcon(),this.renderText(),this.renderRepairLink(),this.renderLink(),this.renderDeleteButton())}}]),t}();jJ.displayName="ConfluencePageLineCardError";var wJ=n("./node_modules/@atlaskit/icon-object/glyph/blog/16.js"),kJ=n.n(wJ),EJ=n("./node_modules/@atlaskit/icon-object/glyph/page/16.js"),SJ=n.n(EJ),CJ=n("./src/packages/issue/issue-view/src/common/constants/confluence-page-type.js");function PJ(e){return(PJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xJ(e,t){return!t||"object"!==PJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _J(e){return(_J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MJ(e,t){return(MJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function TJ(){var e=RJ(["\n    padding-left: ","px;\n    flex: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return TJ=function(){return e},e}function AJ(){var e=RJ(["\n    height: ","px;\n    padding-right: 2px;\n"]);return AJ=function(){return e},e}function DJ(){var e=RJ(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n"]);return DJ=function(){return e},e}function LJ(){var e=RJ(["\n    padding-left: ","px;\n"]);return LJ=function(){return e},e}function NJ(){var e=RJ(["\n    display: flex;\n    align-items: center;\n"]);return NJ=function(){return e},e}function RJ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var FJ=a.default.div(NJ()),VJ=Object(a.default)(FJ)(LJ(),d.e),UJ=Object(a.default)(FJ)(DJ()),BJ=a.default.div(AJ(),3.5*d.e),KJ=a.default.div(TJ(),d.e),WJ=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=xJ(this,(e=_J(t)).call.apply(e,[this].concat(o)))).onDeleteClick=function(e){var t=n.props,r=t.onDeleteClick,o=t.globalId;e.stopPropagation(),r(o)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MJ(e,t)}(t,r["Component"]),function(e,t,n){t&&IJ(e.prototype,t),n&&IJ(e,n)}(t,[{key:"renderPageIcon",value:function(){var e=this.props.pageType===CJ.a,t=e?o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card.blog-icon",defaultMessage:"Confluence blog post"}):o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.line-card.page-icon",defaultMessage:"Confluence page"});return o.a.createElement(Je.a,{content:t,position:"bottom"},e?o.a.createElement(kJ.a,null):o.a.createElement(SJ.a,null))}},{key:"renderPageTitle",value:function(){return o.a.createElement(KJ,null,this.props.pageTitle)}},{key:"renderLastUpdateAvatar",value:function(){var e=this.props,t=e.userDisplayName,n=e.userAvatarUrl;return n?t?o.a.createElement(VJ,null,o.a.createElement(Je.a,{content:t,position:"bottom"},o.a.createElement(BJ,null,o.a.createElement(Ws.a,{name:t,src:n,size:"small",enableTooltip:!1})))):o.a.createElement(VJ,null,o.a.createElement(Ws.a,{src:n,size:"small"})):null}},{key:"renderDeleteButton",value:function(){var e=this.props,t=e.isHovering,n=e.isFocused;return o.a.createElement(eJ,{show:t||n,invert:n,onClick:this.onDeleteClick})}},{key:"render",value:function(){return o.a.createElement(UJ,null,this.renderPageIcon(),this.renderPageTitle(),this.renderLastUpdateAvatar(),this.renderDeleteButton())}}]),t}();WJ.displayName="ConfluencePageLineCard";var HJ=WJ;function zJ(e){return(zJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GJ(e,t){return!t||"object"!==zJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JJ(e){return(JJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QJ(e,t){return(QJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZJ=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=GJ(this,(e=JJ(t)).call.apply(e,[this].concat(i)))).state={modalOpen:!1,linkToDeleteId:null},n.onCancelDelete=function(){n.setState({modalOpen:!1,linkToDeleteId:null})},n.onConfirmDelete=function(){var e=n.props.onDeleteConfluencePageLink,t=n.state.linkToDeleteId;null!=t&&e(t),n.setState({modalOpen:!1,linkToDeleteId:null})},n.onDeleteClick=function(e){n.setState({modalOpen:!0,linkToDeleteId:e})},n.handleErrorLineCardClick=function(e){e.link&&e.link.href&&window.open(e.link.href,"_blank")},n.handleLineCardClick=function(e){e.href&&window.open(e.href,"_blank")},n.handleClick=function(e,t){n.props.onClick&&n.props.onClick(e,t),e.error?n.handleErrorLineCardClick(e):n.handleLineCardClick(e)},n.renderErrorLineCard=function(e,t,r){return o.a.createElement(jJ,{globalId:e.link.globalId,error:e.error,href:e.link.href,repairLinkHref:e.repairLink?e.repairLink.href:null,onAuthenticateApplink:n.props.onAuthenticateApplink,onDeleteClick:n.onDeleteClick,isHovering:t,isFocused:r})},n.renderLineCard=function(e,t,r){return o.a.createElement(HJ,{globalId:e.globalId,pageTitle:e.title,pageType:e.type,userDisplayName:e.lastUpdatedContext&&e.lastUpdatedContext.user.displayName,userAvatarUrl:e.lastUpdatedContext&&e.lastUpdatedContext.user.avatarUrl,onDeleteClick:n.onDeleteClick,isHovering:t,isFocused:r})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QJ(e,t)}(t,r["Component"]),function(e,t,n){t&&qJ(e.prototype,t),n&&qJ(e,n)}(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Mz.a,{items:this.props.pages,groupId:this.props.groupId,onClick:this.handleClick},function(t,n,r,o){return o.error?e.renderErrorLineCard(o,t,r):e.renderLineCard(o,t,r)}),this.state.modalOpen&&o.a.createElement(tr.a,{appearance:"danger",headerMessage:o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.title",defaultMessage:"Delete the Confluence page link?"}),contentMessage:o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.content",defaultMessage:"You can add the page later again if you need to."}),confirmActionText:o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"}),cancelActionText:o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}),onConfirm:this.onConfirmDelete,onCancel:this.onCancelDelete}))}}]),t}();function YJ(e){return(YJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XJ(e,t){return!t||"object"!==YJ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eQ(e){return(eQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tQ(e,t){return(tQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ZJ.displayName="ConfluencePageLineCardGroup";var nQ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),XJ(this,eQ(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tQ(e,t)}(t,r["Component"]),function(e,t,n){t&&$J(e.prototype,t),n&&$J(e,n)}(t,[{key:"getItems",value:function(){return Xv()(this.props.itemCount).map(function(e){return o.a.createElement(Ux.a,{key:e,fontSize:20,lineHeight:41,intrusion:0})})}},{key:"render",value:function(){var e=this.props,t=e.paddingTopInPixels,n=e.paddingBottomInPixels;return o.a.createElement(mo.a,null,o.a.createElement(po.b,null),o.a.createElement(fo.a,{paddingTop:t,paddingBottom:n},this.getItems()))}}]),t}();function rQ(e){return(rQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iQ(e,t){return!t||"object"!==rQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aQ(e){return(aQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sQ(e,t){return(sQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cQ(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-left: auto;\n"]);return cQ=function(){return e},e}nQ.displayName="ItemLineCardGroup",nQ.defaultProps={paddingTopInPixels:0,paddingBottomInPixels:0};var uQ=Object(y.defineMessages)({label:{id:"issue.confluence-links-add-label",defaultMessage:"Link a Confluence Page",description:"Link a Confluence Page"}}),lQ=a.default.span(cQ()),fQ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),iQ(this,aQ(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sQ(e,t)}(t,r["Component"]),function(e,t,n){t&&oQ(e.prototype,t),n&&oQ(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(lQ,null,o.a.createElement(qW.a,{label:this.props.intl.formatMessage(uQ.label),onClick:this.props.onClick}))}}]),t}();fQ.displayName="AddButton",fQ.defaultProps={onClick:u.a};var pQ,dQ=Object(y.injectIntl)(fQ),mQ=n("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-creator.js"),bQ=Object(no.createSelector)(k.H,UG.h,UG.j,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.recentlyVisitedConfluencePages||[],o=t.concat(n).map(function(e){return e.href});return r.filter(function(e){return!o.includes(e.href)})}),yQ="addconfluencelink.error.duplicate",hQ="addconfluencelink.error.page.forbidden",gQ="addconfluencelink.error.issueId.invalid",vQ="addconfluencelink.error.no.matching.app.link",OQ="addconfluencelink.error.pageid.notfound",jQ="addconfluencelink.error.page.unauthorized",wQ="addconfluencelink.error.url.invalid",kQ="addconfluencelink.error.url.required",EQ=Object(y.defineMessages)({fieldLabel:{id:"issue.views.confluence-pages.link.label",defaultMessage:"Search pages or paste in a link",description:"Label for Confluence page linking field"},fieldPlaceholder:{id:"issue.views.confluence-pages.link.placeholder",defaultMessage:"Search pages or paste in a link",description:"Placeholder text to prompt users to enter a link to a Confluence page"},genericErrorText:{id:"issue.views.confluence-pages.link.error.generic",defaultMessage:"We're having trouble. Check your connection and try again.",description:"Inline error text when we are not sure what went wrong"},duplicateErrorText:{id:"issue.views.confluence-pages.link.error.duplicate",defaultMessage:"That page is already linked to this issue.",description:"Duplicate page add attempt error."},forbiddenErrorText:{id:"issue.views.confluence-pages.link.error.forbidden",defaultMessage:"You don't have permission to link to Confluence pages.",description:"User doesn't have permission to add the page."},issueIdErrorText:{id:"issue.views.confluence-pages.link.error.issue-id",defaultMessage:"We're having trouble. Check your connection and try again.",description:"Inline error text when we can't retrieve the issue id."},noMatchingApplinkErrorText:{id:"issue.views.confluence-pages.link.error.no-matching-app-link",defaultMessage:"You don't have an application link set up for that Confluence site.",description:"The page reuqested doesn't exist in the Confluence sites connected to this Jira."},pageIdNotFoundErrorText:{id:"issue.views.confluence-pages.link.error.page-id-not-found",defaultMessage:"We can't find that page. It might be deleted or restricted.",description:"This page can't be found."},unauthorizedErrorText:{id:"issue.views.confluence-pages.link.error.unauthorized",defaultMessage:"You need to authorize this pages' Confluence site.",description:"The Conflue applink has not been authorized yet."},urlInvalidErrorText:{id:"issue.views.confluence-pages.link.error.url-invalid",defaultMessage:"That URL doesn't look right. Try entering it again.",description:"The link the user entered is invalid"},urlRequiredErrorText:{id:"issue.views.confluence-pages.link.error.url-required",defaultMessage:"That URL doesn't look right. Try entering it again.",description:"User sent an incomplete url"},linkButton:{id:"issue.views.confluence-pages.link.link-button",defaultMessage:"Link",description:"Button text to link the confluence page"},cancelButton:{id:"issue.views.confluence-pages.link.cancel-button",defaultMessage:"Cancel",description:"Button text to cancel operation and close the field"}});function SQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CQ=(SQ(pQ={},yQ,EQ.duplicateErrorText),SQ(pQ,hQ,EQ.forbiddenErrorText),SQ(pQ,gQ,EQ.issueIdErrorText),SQ(pQ,vQ,EQ.noMatchingApplinkErrorText),SQ(pQ,OQ,EQ.pageIdNotFoundErrorText),SQ(pQ,jQ,EQ.unauthorizedErrorText),SQ(pQ,wQ,EQ.urlInvalidErrorText),SQ(pQ,kQ,EQ.urlRequiredErrorText),pQ),PQ=function(e){return CQ[e]||EQ.genericErrorText},IQ=n("./node_modules/@atlaskit/icon/glyph/link-filled.js"),xQ=n.n(IQ);function _Q(){var e=DQ(["\n    line-height: 1.25em;\n    font-size: 14px;\n    font-weight: 500;\n"]);return _Q=function(){return e},e}function MQ(){var e=DQ(["\n    display: flex;\n    flex-direction: column;\n"]);return MQ=function(){return e},e}function TQ(){var e=DQ(["\n    margin-right: ","px;\n    line-height: 1;\n"]);return TQ=function(){return e},e}function AQ(){var e=DQ(["\n    display: flex;\n    align-items: center;\n    height: 34px;\n"]);return AQ=function(){return e},e}function DQ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var LQ=a.default.div(AQ()),NQ=a.default.div(TQ(),2*d.e),RQ=a.default.div(MQ()),FQ=a.default.div(_Q());function VQ(e){return(VQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BQ(e,t){return!t||"object"!==VQ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KQ(e){return(KQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WQ(e,t){return(WQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HQ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),BQ(this,KQ(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WQ(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&UQ(e.prototype,t),n&&UQ(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.onSelect;return o.a.createElement(LQ,{onClick:function(){return n&&n(t)}},o.a.createElement(NQ,null,o.a.createElement(xQ.a,{size:"medium",primaryColor:vt.colors.B200})),o.a.createElement(RQ,null,o.a.createElement(FQ,null,o.a.createElement(Xo.b,null,t))))}}]),t}();HQ.displayName="LinkItem";var zQ=HQ,qQ=n("./node_modules/@atlaskit/icon-object/glyph/blog/24.js"),GQ=n.n(qQ),JQ=n("./node_modules/@atlaskit/icon-object/glyph/page/24.js"),QQ=n.n(JQ);function ZQ(){var e=tZ(["\n    font-size: 12px;\n    color: ",";\n"]);return ZQ=function(){return e},e}function YQ(){var e=tZ(["\n    line-height: 1.25em;\n    font-size: 14px;\n    font-weight: 500;\n"]);return YQ=function(){return e},e}function $Q(){var e=tZ(["\n    display: flex;\n    flex-direction: column;\n"]);return $Q=function(){return e},e}function XQ(){var e=tZ(["\n    margin-right: ","px;\n    line-height: 1;\n"]);return XQ=function(){return e},e}function eZ(){var e=tZ(["\n    display: flex;\n    align-items: center;\n    height: 34px;\n"]);return eZ=function(){return e},e}function tZ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var nZ=a.default.div(eZ()),rZ=a.default.div(XQ(),2*d.e),oZ=a.default.div($Q()),iZ=a.default.div(YQ()),aZ=a.default.div(ZQ(),vt.colors.N200);function sZ(e){return(sZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uZ(e,t){return!t||"object"!==sZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lZ(e){return(lZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fZ(e,t){return(fZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pZ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),uZ(this,lZ(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fZ(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&cZ(e.prototype,t),n&&cZ(e,n)}(t,[{key:"render",value:function(){var e=this;if(!this.props.page)return null;var t=this.props.page,n=t.title,r=t.space,i=t.type,a=t.href;return o.a.createElement(nZ,{onClick:function(){return e.props.onSelect&&e.props.onSelect(a)}},o.a.createElement(rZ,null,i===CJ.a?o.a.createElement(GQ.a,null):o.a.createElement(QQ.a,null)),o.a.createElement(oZ,null,o.a.createElement(iZ,null,o.a.createElement(Xo.b,null,n)),o.a.createElement(aZ,null,o.a.createElement(Xo.b,null,r))))}}]),t}();pZ.displayName="ConfluencePageItem";var dZ=pZ,mZ=Object(y.defineMessages)({enterOrSelectConfluenceLink:{id:"issue.views.confluence-pages.link.selector.placeholder",defaultMessage:"Search pages or paste in a link",description:"Placeholder for searching or pasting in a Confluence page link"},noOptionsMessage:{id:"issue.views.confluence-pages.link.selector.noOptionsMessage",defaultMessage:"No recently visited pages",description:"Message for no options in drop down"}});function bZ(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    height: 46px;\n"]);return bZ=function(){return e},e}var yZ=a.default.div(bZ());function hZ(e){return(hZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vZ(e,t){return!t||"object"!==hZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OZ(e){return(OZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jZ(e,t){return(jZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wZ(){return(wZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var kZ=function(e){var t=e.innerProps,n=e.innerRef,r=e.getStyles,i=e.data,a=r("option",e);return o.a.createElement(yZ,{style:a},o.a.createElement("div",wZ({},t,{ref:n}),i.page?o.a.createElement(dZ,wZ({key:"item_key-".concat(i.page.href)},i)):o.a.createElement(zQ,{href:Object(Qg.toHref)(e.value)})))};kZ.displayName="Option";var EZ=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=vZ(this,(e=OZ(t)).call.apply(e,[this].concat(o)))).state={isMenuOpen:!1,value:void 0},n.onKeyDown=function(e){switch(e.keyCode){case MW()("enter"):n.props.onEnter&&!n.state.isMenuOpen&&(n.props.onEnter(),e.stopPropagation())}},n.onMenuOpen=function(){return n.setState({isMenuOpen:!0})},n.onMenuClose=function(){return n.setState({isMenuOpen:!1})},n.handleChange=function(e){e&&e.page&&n.props.onSelect&&n.props.onSelect(),n.setState({value:e}),n.props.onChange(e?e.value:null)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jZ(e,t)}(t,r["Component"]),function(e,t,n){t&&gZ(e.prototype,t),n&&gZ(e,n)}(t,[{key:"render",value:function(){var e=this.state.value,t=this.props,n=t.pages,r=t.intl.formatMessage,i=t.link,a=t.isLoading,s=n.map(function(e){return{label:e.title,value:e.href,page:e}});return o.a.createElement(Wu,{validationState:this.props.validationState||"default",validationMessage:this.props.validationMessage},o.a.createElement(yf.a,{isClearable:!0,isDisabled:a,isLoading:a,onChange:this.handleChange,value:""!==i&&e?e:null,components:{Option:kZ},options:s,placeholder:r(mZ.enterOrSelectConfluenceLink),validationState:this.props.validationState||"default",getOptionLabel:function(e){return e.page?e.page.href:e.value},maxMenuHeight:256,autoFocus:!0,menuPlacement:"auto",minMenuHeight:100,onKeyDown:this.onKeyDown,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,noOptionsMessage:function(){return r(mZ.noOptionsMessage)}}))}}]),t}();EZ.displayName="LinkSelect",EZ.defaultProps={isLoading:!1,link:void 0};var SZ=EZ;function CZ(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-top: ","px;\n    display: flex;\n    justify-content: flex-end;\n"]);return CZ=function(){return e},e}var PZ=Object(K_.a)(D.b,{target:"eplslgz0"})("margin-left:",d.e,"px !important;"),IZ=a.default.div(CZ(),d.e);function xZ(e){return(xZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MZ(e,t){return!t||"object"!==xZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TZ(e){return(TZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AZ(e,t){return(AZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DZ=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=MZ(this,TZ(t).call(this,e))).onChildContainerRefSet=function(e){n.childContainer=e},n.onChange=function(e){var t=n.props,r=t.isInvalid,o=t.onInvalidLinkModified,i=ez()(e),a=vu()(i);n.setState({isDisabled:a,link:i}),r&&o()},n.onSubmitClicked=function(){n.onSubmit(),n.props.onSubmitClickAnalytics()},n.onCancelClicked=function(){n.closeAndReset(),n.props.onCancelClickAnalytics()},n.onEnterPressed=function(){n.onSubmit(),n.props.onEnterKeyPressedAnalytics()},n.onEscPressed=function(){n.closeAndReset(),n.props.onEscapeKeyPressedAnalytics()},n.onSelect=function(e){n.setState({link:e,isDisabled:!1}),n.props.onSelectAnalytics()},n.childContainer=void 0,n.initialState={link:"",isDisabled:!0,showList:!1},n.state=n.initialState,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AZ(e,t)}(t,r["Component"]),function(e,t,n){t&&_Z(e.prototype,t),n&&_Z(e,n)}(t,[{key:"componentDidMount",value:function(){Us(this.childContainer),this.props.requestRecentlyViewedPages()}},{key:"componentDidUpdate",value:function(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&Us(this.childContainer),this.props.linkedPagesCount>e.linkedPagesCount&&!this.props.isLoading&&e.isLoading&&this.resetAndFocus()}},{key:"onSubmit",value:function(){var e=this.state,t=e.isDisabled,n=e.link,r=this.props,o=r.isLoading,i=r.onSubmit;t||o||i(n)}},{key:"closeAndReset",value:function(){this.props.isLoading||(this.reset(),this.props.onCancel())}},{key:"resetAndFocus",value:function(){this.reset()}},{key:"reset",value:function(){this.setState(this.initialState)}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.intl.formatMessage,r=e.errorMessage,i=e.isInvalid,a=e.isLoading,s=e.recentlyViewedPages,c=this.state,u=c.link,l=c.isDisabled;return o.a.createElement("div",{ref:this.onChildContainerRefSet},o.a.createElement(T.a,{onEscape:this.onEscPressed},o.a.createElement(SZ,{pages:s,onChange:this.onChange,intl:t,validationMessage:i?n(PQ(r)):void 0,validationState:i?"error":"default",onSelect:this.props.onSelectAnalytics,onEnter:this.onEnterPressed,link:u,isLoading:a})),o.a.createElement(IZ,null,o.a.createElement(PZ,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:l,isLoading:a},n(EQ.linkButton)),o.a.createElement(PZ,{appearance:"subtle",onClick:this.onCancelClicked},n(EQ.cancelButton))))}}]),t}();DZ.displayName="ConfluencePageCreateLinkView";var LZ=Object(eo.a)([y.injectIntl,Object(f.f)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked"}),Object(f.f)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(f.f)("confluencePagesCreateLinkView",{onSubmit:"onSubmit"}),Object(f.s)({onSubmitClickAnalytics:"linkConfluencePage",onCancelClickAnalytics:"cancelLinkConfluencePage",onEnterKeyPressedAnalytics:"linkConfluencePage",onEscapeKeyPressedAnalytics:"cancelLinkConfluencePage"}),Object(f.f)("recentlyVisitedPages",{onSelectAnalytics:"selected"}),Object(f.s)({onSelectAnalytics:"selectConfluencePage"}),Object(i.connect)(function(e){return{linkedPagesCount:Object(UG.g)(e),errorMessage:Object(UG.b)(e),isInvalid:Object(UG.d)(e),isLoading:Object(UG.e)(e),createLinkClickedCount:Object(UG.a)(e),recentlyViewedPages:bQ(e)}},function(e){return{onInvalidLinkModified:function(){return e(Object(FG.b)())},onCancel:function(){return e(Object(FG.i)())},onSubmit:function(t,n){return e(Object(FG.c)(Object(Qg.toHref)(t),n))},requestRecentlyViewedPages:function(){return e(Object(mQ.b)())}}})])(DZ);function NZ(e){return(NZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FZ(e,t){return!t||"object"!==NZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VZ(e){return(VZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UZ(e,t){return(UZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BZ(){var e=WZ(["\n    margin: ","px 0;\n    padding-right: 1px;\n"]);return BZ=function(){return e},e}function KZ(){var e=WZ(["\n    "," margin: 0;\n"]);return KZ=function(){return e},e}function WZ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var HZ=a.default.h3(KZ(),vt.typography.h200()),zZ=a.default.div(BZ(),d.e),qZ="linked-confluence-pages",GZ="mentioned-confluence-pages",JZ=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=FZ(this,(e=VZ(t)).call.apply(e,[this].concat(i)))).renderHeading=function(){var e=n.props,t=e.canLinkConfluencePage,r=e.onAddButtonClicked;return o.a.createElement(ho.c,null,o.a.createElement(ho.e,null,o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.heading",defaultMessage:"Confluence pages"})),o.a.createElement(ho.d,null,t&&n.hasLinkedPages()&&o.a.createElement(dQ,{onClick:r})))},n.renderLinkedPagesIfAny=function(){return n.hasAnyLinkedPageLoaded()&&n.props.linkedPages?o.a.createElement(ZJ,{groupId:qZ,pages:n.props.linkedPages,onClick:n.props.onLinkedPageClicked,onAuthenticateApplink:n.props.onAuthenticateApplink,onDeleteConfluencePageLink:n.props.onDeleteConfluencePageLink}):null},n.renderMentionedPagesIfAny=function(){return n.hasAnyMentionedPageLoaded()&&n.props.mentionedPages?o.a.createElement(ZJ,{groupId:GZ,pages:n.props.mentionedPages,onClick:n.props.onMentionedPageClicked,onAuthenticateApplink:n.props.onAuthenticateApplink,onDeleteConfluencePageLink:n.props.onDeleteConfluencePageLink}):null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UZ(e,t)}(t,r["Component"]),function(e,t,n){t&&RZ(e.prototype,t),n&&RZ(e,n)}(t,[{key:"shouldShowConfluencePages",value:function(){return this.props.isCreateLinkedPageOpened||this.hasLinkedPages()||this.hasMentionedPages()}},{key:"hasLinkedPages",value:function(){return Object(M.k)()&&this.props.isPreview?this.props.linkedPagesCachedCount>0:this.props.linkedPages&&this.props.linkedPages.length>0}},{key:"hasMentionedPages",value:function(){return Object(M.k)()&&this.props.isPreview?this.props.mentionedPagesCachedCount>0:this.props.mentionedPages&&this.props.mentionedPages.length>0}},{key:"hasAnyLinkedPageLoaded",value:function(){return this.props.linkedPages&&this.props.linkedPages.length>0}},{key:"hasAnyMentionedPageLoaded",value:function(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}},{key:"renderLinkedPages",value:function(){return Object(M.k)()?o.a.createElement(zZ,null,this.props.isPreview?o.a.createElement(nQ,{itemCount:this.props.linkedPagesCachedCount}):this.renderLinkedPagesIfAny()):o.a.createElement(zZ,null,this.props.linkedPages?this.renderLinkedPagesIfAny():o.a.createElement(nQ,{itemCount:this.props.linkedPagesCachedCount}))}},{key:"renderMentionedPages",value:function(){return Object(M.k)()?o.a.createElement(zZ,null,o.a.createElement(HZ,null,o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.mentioned-on",defaultMessage:"mentioned on"})),this.props.isPreview?o.a.createElement(nQ,{itemCount:this.props.mentionedPagesCachedCount}):this.renderMentionedPagesIfAny()):o.a.createElement(zZ,null,o.a.createElement(HZ,null,o.a.createElement(y.FormattedMessage,{id:"issue.details.confluence-pages.mentioned-on",defaultMessage:"mentioned on"})),this.props.mentionedPages?this.renderMentionedPagesIfAny():o.a.createElement(nQ,{itemCount:this.props.mentionedPagesCachedCount}))}},{key:"renderCreateLinkedPage",value:function(){return this.props.isCreateLinkedPageOpened?o.a.createElement(LZ,null):null}},{key:"renderConfluencePageFragment",value:function(){return o.a.createElement(o.a.Fragment,null,this.renderHeading(),this.hasLinkedPages()&&this.renderLinkedPages(),this.hasMentionedPages()&&this.renderMentionedPages(),this.renderCreateLinkedPage())}},{key:"render",value:function(){return this.props.isConfluencePageLinksEnabled&&this.shouldShowConfluencePages()?this.renderConfluencePageFragment():null}}]),t}();JZ.displayName="ConfluencePagesView",JZ.defaultProps={linkedPagesCachedCount:0,mentionedPagesCachedCount:0,isConfluencePageLinksEnabled:!1};var QZ=Object(eo.a)([Object(f.f)("ItemLineCardGroup",{onMentionedPageClicked:"clicked",onLinkedPageClicked:"clicked"}),Object(f.s)({onMentionedPageClicked:"MentionedConfluencePage",onLinkedPageClicked:"LinkedConfluencePage"}),Object(f.f)("DeleteConfluencePage",{onDeleteConfluencePageLink:"clicked"}),Object(f.s)({onDeleteConfluencePageLink:function(e){return{name:"onDeleteConfluencePageLink",globalId:e}}}),Object(i.connect)(function(e){return{isCreateLinkedPageOpened:Object(UG.f)(e),linkedPages:Object(UG.h)(e),linkedPagesCachedCount:Object(UG.g)(e),mentionedPages:Object(UG.j)(e),mentionedPagesCachedCount:Object(UG.i)(e),isConfluencePageLinksEnabled:Object(UG.c)(e),canLinkConfluencePage:Object(VG.a)(e),isPreview:Object(k.r)(e)}},function(e){return{onAuthenticateApplink:function(t){return e(Object(RG.a)(t))},onDeleteConfluencePageLink:function(t){return e(Object(FG.f)(t))},onAddButtonClicked:function(){return e(Object(FG.h)())}}})])(JZ),ZZ=Object(no.createSelector)(MG.c,function(e){return!!e.find(MG.b)}),YZ=Object(no.createSelector)(va.h,ZZ,w.s,w.o,function(e,t,n,r){return e.canCreateIssuesInClassicProjectEpic&&!(!!t&&(n||r))}),$Z=Object(y.defineMessages)({noValueText:{id:"issue.placeholder-for-empty-epic-issues-field",defaultMessage:"There are no issues in this epic",description:""},title:{id:"issue.epic-issues-title",defaultMessage:"Issues in this epic",description:""}});function XZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XZ(Object(n),!0).forEach(function(t){tY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nY=Object(eo.a)([Object(i.connect)(function(e){return eY({childIssuesPanelType:"classicProjectEpicChildren",baseUrl:Object(w.f)(e),locale:Object(w.D)(e),user:Object(w.a)(e),projectId:Object(k.B)(e),parentId:Object(w.A)(e),parentKey:Object(w.B)(e),epicLinkFieldKey:Object(k.f)(e),issueTypes:Object(MG.c)(e),issues:nB(e),messages:$Z,quickAddClickCount:eB(e),supportsIssueCreation:YZ(e),isIssueViewComplete:Object(k.l)(e),onNavigateToNewIssue:Object(w.G)(e)},Object(M.t)()?{fetchIssueTypesStatus:Object(MG.a)(e)}:{})},function(e){return eY({onChange:function(t){switch(t.type){case wB.CHILD_ISSUE_ADDED:e(QU(t.meta.childIssue.id))}}},Object(M.t)()?{onAddChildClick:function(){return e(ZU())}}:{})})])(_G),rY=n("./src/packages/forge-ui/src/async.js"),oY=function(e){var t=e.title,n=e.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ho.c,null,o.a.createElement(ho.e,null,t)),n)},iY=function(){return o.a.createElement(rY.a,{module:"issuePanel",decorator:oY})};iY.displayName="ForgeUiIssuePanel";var aY=iY,sY=n("./node_modules/lodash/once.js"),cY=n.n(sY),uY=n("./src/packages/platform/utils/constants/src/project-types.js"),lY=n("./src/packages/linked-issue-modal/src/index.js"),fY=n("./src/packages/issue/issue-view/src/actions/issue-links-action-creator.js"),pY=n("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),dY=n("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");function mY(e){return(mY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yY(e,t){return!t||"object"!==mY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hY(e){return(hY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gY(e,t){return(gY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vY(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-left: auto;\n"]);return vY=function(){return e},e}var OY=Object(y.defineMessages)({label:{id:"issue.issue-links-add-label",defaultMessage:"Link an issue",description:""}}),jY=a.default.span(vY()),wY=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yY(this,hY(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gY(e,t)}(t,r["Component"]),function(e,t,n){t&&bY(e.prototype,t),n&&bY(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(jY,null,o.a.createElement(qW.a,{label:this.props.intl.formatMessage(OY.label),onClick:this.props.onClick}))}}]),t}();wY.displayName="AddIssueLinkButton",wY.defaultProps={onClick:u.a};var kY=Object(y.injectIntl)(wY),EY=n("./node_modules/@atlaskit/button/components/ButtonGroup.js");function SY(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    min-width: 200px;\n"]);return SY=function(){return e},e}var CY=a.default.div(SY()),PY=function(e){var t=e.selectItems,n=e.selectedItem,r=e.onChange,i=e.onSelected;return o.a.createElement(CY,null,Object(M.F)()?o.a.createElement(Uc.a,{options:t,defaultValue:n,styles:yp,onChange:r}):o.a.createElement(_d.a,{items:t,defaultSelected:n,onSelected:i,shouldFitContainer:!0}))};PY.displayName="IssueLinkTypeSelect",PY.defaultProps={selectedItem:null};var IY=n("./node_modules/lodash/keys.js"),xY=n.n(IY),_Y=n("./src/packages/platform/utils/constants/src/issue-link-types.js"),MY=Object(y.defineMessages)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue",description:"Text on the create linked issue button. The button allows user to create a new issue and link it to the current issue."},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue",description:"Title of the create linked issue dialog."}}),TY=n("./src/packages/issue/issue-view/src/common/model/linked-issue-type.js");function AY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var LY=function(e,t){var n={},r=fC()(Na()(e,["fields","issuelinks"]),function(e){return Na()(e.outwardIssue||e.inwardIssue,"id")===t});if(void 0!==r){var o=function(e){return e.outwardIssue?TY.a:TY.c}(r);n={issueLink:{id:r.id,direction:o,linkType:{id:Na()(r,["type","id"],""),label:o===TY.a?Na()(r,["type","inward"],""):Na()(r,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AY(Object(n),!0).forEach(function(t){DY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:Object(Qg.toIssueId)(e.id),key:Object(Qg.toIssueKey)(e.key),summary:Na()(e,["fields","summary"],""),issueTypeIconUrl:Na()(e,["fields","issuetype","iconUrl"],"")},n)},NY=function(e,t,n){var r=LY(e,t);if(void 0===r.issueLink)return{issueLinks:{},linkedIssues:{}};var o=r.issueLink;return{issueLinks:DY({},"".concat(o.id),{id:o.id,linkedIssueKey:r.key,direction:o.direction,typeName:o.linkType.label,typeId:o.linkType.id}),linkedIssues:DY({},"".concat(r.key),{id:r.id,issueKey:r.key,issueLink:Object(Wb.g)(n,r.key),issueSummary:r.summary,issueTypeIconUrl:r.issueTypeIconUrl})}};function RY(e){return(RY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FY(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function VY(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){FY(i,r,o,a,s,"next",e)}function s(e){FY(i,r,o,a,s,"throw",e)}a(void 0)})}}function UY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BY(e,t){return!t||"object"!==RY(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KY(e){return(KY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WY(e,t){return(WY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HY="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view",zY=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=BY(this,(e=KY(t)).call.apply(e,[this].concat(o)))).showCreateLinkedIssueDialog=VY(regeneratorRuntime.mark(function e(){var t,r,o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.baseUrl,o=t.sourceIssueId,i=t.sourceIssueKey,a=t.onLinkedIssueCreated,n.showLoadingIndicator(),e.prev=2,e.next=5,Object(Xm.a)({name:"wrm/require"});case 5:return s=e.sent,e.next=8,new Promise(function(e){s("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)});case 8:return e.next=10,Object(Xm.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"});case 10:e.sent.show({sourceIssueId:o,sourceIssueKey:i}).getQuickForm().bind("issueCreated",function(e,t){var n=t.createdIssueDetails;a(NY(n,o,r))}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),n.hideLoadingIndicator(),m.a.safeError(HY,e.t0);case 18:case"end":return e.stop()}},e,null,[[2,14]])})),n.onCreateLinkedIssueClick=function(e,t){Object(f.m)(t,{name:"createLinkedIssue"}),n.showCreateLinkedIssueDialog()},n.showLoadingIndicator=VY(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Xm.a)({name:"quick-edit/util/loading-indicator"});case 3:e.sent.showLoadingIndicator(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m.a.safeError(HY,e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.hideLoadingIndicator=VY(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Xm.a)({name:"quick-edit/util/loading-indicator"});case 3:e.sent.hideLoadingIndicator(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m.a.safeError(HY,e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WY(e,t)}(t,r["Component"]),function(e,t,n){t&&UY(e.prototype,t),n&&UY(e,n)}(t,[{key:"render",value:function(){var e=this.props.intl.formatMessage;return o.a.createElement(D.b,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:o.a.createElement(wl.a,{size:"small",label:e(MY.createLinkedIssueButtonLabel)})},e(MY.createLinkedIssueButtonLabel))}}]),t}();zY.displayName="CreateLinkedIssueButton";var qY=Object(eo.a)([y.injectIntl,Object(f.f)("createLinkedIssueButton",{onLinkedIssueCreated:"created"}),Object(i.connect)(function(e){return{baseUrl:Object(w.f)(e),sourceIssueKey:Object(w.B)(e),sourceIssueId:Object(Qg.toIssueId)(String(Object(w.A)(e)))}},function(e){return{onLinkedIssueCreated:function(t,n){e(Object(fY.c)(t)),e(Object(fY.b)()),function(e,t){var n=e.issueLinks,r=e.linkedIssues,o=xY()(n)[0];if(void 0!==o){var i=n[o],a={action:"created",actionSubjectId:r[i.linkedIssueKey].id,attributes:{linkTypeName:Object(_Y.a)(i.typeName),linkTypeId:i.typeId,issueLinkId:o}};Object(f.k)(t,a)}}(t,n)}}})])(zY);function GY(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var JY=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,QY=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.sections,o=void 0===n?[]:n;return o.map(function(e){return e.issues}).filter(function(e){return!!e}).reduce(function(t,n){return t.concat(n.map(function(t){var n={content:"".concat(t.key," ").concat(t.summaryText),value:t.key,elemBefore:Object(r.createElement)("img",{src:"".concat(t.img),width:16,height:16}),fullObject:t,filterValues:[e]};return Object(M.E)()&&(n.iconUrl=t.img),n}))},[]).reduce(function(e,t){return e.findIndex(function(e){return e.value===t.value})<0?[].concat(GY(e),[t]):e},[])}},ZY=function(e,t,n){return function(e){if(e){var t=JY.exec(e);return!(!t||3!==t.length)}return!1}(n)?function(e,t,n){return Object(So.d)(Object(Wb.a)(e,t,n))}(e,t,Object(Qg.toIssueKey)(n)).map(QY(n)).catch(function(){return Pl.Observable.of([])}):Pl.Observable.of([])},YY=function(e,t,n){return Object(So.d)(Object(Wb.m)(e,t,n)).map(QY(n))};function $Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XY=function(e,t,n,r){return{issueLinks:$Y({},e,{id:e,linkedIssueKey:n.key,direction:t.direction,typeName:t.label,typeId:t.id}),linkedIssues:$Y({},"".concat(n.key),{id:n.key,issueKey:n.key,issueLink:Object(Wb.g)(r,n.key),issueSummary:n.summaryText?n.summaryText:"",issueTypeIconUrl:n.img?n.img:""})}},e$=/^(([A-Z][A-Z0-9]+)-([0-9]+))($|\?.*)/,t$=function(e,t){var n=e;if(void 0===n||void 0===t)return t||"";if(n.endsWith("/")||(n+="/"),n+="browse/",0!==t.indexOf(n))return t;var r=t.slice(n.length).match(e$);return null===r?t:r[1]||""};function n$(e){return(n$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o$(e,t){return!t||"object"!==n$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i$(e){return(i$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a$(e,t){return(a$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s$=Object(y.defineMessages)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues",description:""},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues",description:""},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key",description:""},selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"You cannot link an issue to itself",description:"The error message shown to the user when they attempt to add an issue link to the issue they are currently on"},singleInvalidIssue:{id:"issue.issue-link-invalid-single",defaultMessage:"We can't find an issue with the key",description:""},multipleInvalidIssues:{id:"issue.issue-link-invalid-plural",defaultMessage:"We can't find issues with the keys",description:""},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key",description:"Shown to a user when there are no automatically suggested issues available to display"}}),c$=function(){return""!==window.location.port?"".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port):"".concat(window.location.protocol,"//").concat(window.location.hostname)},u$=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=o$(this,(e=i$(t)).call.apply(e,[this].concat(o)))).getErrorMessage=function(e,t,n){return n.includes(e)?"".concat(t.formatMessage(s$.selfLinkInvalidIssue)," (").concat(e,")"):1===n.length?"".concat(t.formatMessage(s$.singleInvalidIssue)," ").concat(n[0]):n.length>1?"".concat(t.formatMessage(s$.multipleInvalidIssues)," ").concat(n.join(", ")):void 0},n.fetchSuggestions=function(e,t,n,r,o){var i=c$(),a=t$(i,r);return YY(t,n,a).map(function(t){return t.length?[{heading:e,items:t}]:Object(M.E)()?[{items:[{content:o,isDisabled:!0,value:""}]}]:[{items:[{content:o,isDisabled:!0}]}]})},n.stripQueryValueToIssueKey=function(e){var t=c$();return t$(t,e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a$(e,t)}(t,r["Component"]),function(e,t,n){t&&r$(e.prototype,t),n&&r$(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.baseUrl,i=t.issueKey,a=t.onChange,s=t.intl,c=t.invalidSelections,u=s.formatMessage(s$.openIssues);return Object(M.E)()?o.a.createElement(jp,{fieldId:"issue-link-search",value:n,fetchSuggestions:function(t){return e.fetchSuggestions(u,r,i,t,s.formatMessage(s$.noHistoryResults)).toPromise()},onChangeMulti:a,canCreateNewItem:!0,formatCreateLabel:function(e){return"".concat(e," (").concat(s.formatMessage(s$.exactKey),")")},placeholder:s.formatMessage(s$.searchPlaceholder),invalidMessage:this.getErrorMessage(i,s,c),changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom"}):o.a.createElement(of,{value:n,fetchSuggestions:function(t){return e.fetchSuggestions(u,r,i,t,s.formatMessage(s$.noHistoryResults))},onChange:a,canCreateNewItem:!0,createNewItemLabel:s.formatMessage(s$.exactKey),placeholder:s.formatMessage(s$.searchPlaceholder),isOpen:!0,invalidMessage:this.getErrorMessage(i,s,c),onQueryValueChange:this.stripQueryValueToIssueKey})}}]),t}();u$.displayName="IssueSearchSelect";var l$=Object(y.injectIntl)(u$);function f$(e){return(f$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p$(Object(n),!0).forEach(function(t){m$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y$(e,t){return!t||"object"!==f$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h$(e){return(h$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g$(e,t){return(g$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v$(){var e=k$(["\n    flex-grow: 1;\n    margin-left: -","px;\n"]);return v$=function(){return e},e}function O$(){var e=k$(["\n    margin-top: ","px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n    margin-left: auto;\n"]);return O$=function(){return e},e}function j$(){var e=k$(["\n    flex: 1;\n    /* Needed for IE11, or else the second child has zero height when the flex\n     * container is using 'flex-direction: column'. */\n    flex-basis: auto;\n"]);return j$=function(){return e},e}function w$(){var e=k$(["\n    display: flex;\n    flex-direction: ",";\n    justify-content: space-around;\n    align-content: stretch;\n    > * {\n        margin-top: ","px;\n    }\n    > :not(:last-child) {\n        margin-right: ",";\n    }\n"]);return w$=function(){return e},e}function k$(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E$=a.default.div(w$(),function(e){return e.isCompact?"column":"row"},d.e,function(e){return e.isCompact?"0":"".concat(d.e,"px")}),S$=a.default.div(j$()),C$=a.default.div(O$(),d.e),P$=a.default.div(v$(),1.5*d.e),I$=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y$(this,h$(t).call(this,e))).getInitialState=function(){return{newIssueLinks:[],issueLinkType:Object(M.F)()?n.transformIssueLinkTypesForSelect()[0]:n.transformIssueLinkTypesForSingleSelect()[0].items[0],isDisabled:!0}},n.onIssueLinkTypeSelected=function(e){return n.setState({issueLinkType:e.item})},n.onIssueLinkTypeChange=function(e){return n.setState({issueLinkType:e})},n.onIssueSearchChangeWithUserInput=function(e){var t=!1,r=[],o=n.updateInvalidSelections(e),i=e.map(function(e){return e.fullObject||o&&o.includes(e.value)||(t=!0,r.push(function(){return n.query$.next(e)})),d$({},e,{tag:{elemBefore:e.elemBefore}})}),a=!(!t&&vu()(o)&&!vu()(i));n.setState({newIssueLinks:i,isDisabled:a,invalidSelections:o}),r.map(function(e){return e()})},n.onIssueSearchChange=function(e){n.onIssueSearchChangeWithUserInput(e)},n.onSave=function(){var e=n.state,t=e.issueLinkType,r=e.newIssueLinks,o=n.props.issueLinks;if(t&&r&&r.length>0){var i=t.fullObject&&t.fullObject.label,a=(o&&o[i]||[]).map(function(e){return e.linkedIssueKey});r.map(function(e){return e.fullObject?e:d$({},e,{fullObject:{key:e.value}})}).filter(function(e){return!a.includes(e.fullObject.key)}).forEach(function(e,r){var o="OPTIMISTIC_LINKED_ISSUE_".concat(Date.now(),"_").concat(r);n.props.onAdd({optimisticId:o,linkedIssueKey:e.fullObject.key,issueLinkType:t.fullObject,issueLinks:XY(o,t.fullObject,e.fullObject,n.props.baseUrl)})}),n.props.onClose()}},n.updateInvalidSelections=function(e){var t=e?e.map(function(e){return e.value}):[];return n.state.invalidSelections?n.state.invalidSelections.filter(function(e){return t.includes(e)}):[]},n.handleUpdate=function(e){var t=e.issue,r=e.results.map(function(e){return d$({},e,{tag:{elemBefore:e.elemBefore}})});0===r.length?n.setState(function(e){return{newIssueLinks:e.newIssueLinks.slice(),isDisabled:!0,invalidSelections:e.invalidSelections?e.invalidSelections.concat(t):[t]}}):n.setState(function(e){var n=e.newIssueLinks.slice(),o=r[0],i=n.findIndex(function(e){return e.value===o.value});n[i]=o;var a=e.invalidSelections&&e.invalidSelections.filter(function(e){return e!==t});return{newIssueLinks:n,isDisabled:a&&a.length>0,invalidSelections:a}})},n.transformIssueLinkTypesForSingleSelect=function(){return[{items:n.props.issueLinkTypes.map(function(e){return{content:e.label,value:e.id+e.direction,fullObject:e}})}]},n.transformIssueLinkTypesForSelect=function(){return n.props.issueLinkTypes.map(function(e){return{label:e.label,value:e.id+e.direction,fullObject:e}})},n.subscription=void 0,n.query$=void 0,n.addLinkContainer=void 0,n.state=n.getInitialState(),n.query$=new Pl.Subject,n.subscription=n.query$.flatMap(function(t){return ZY(e.baseUrl,e.issueKey,t.content).map(function(e){return{issue:t.content,results:e}})}).subscribe(n.handleUpdate),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g$(e,t)}(t,r["Component"]),function(e,t,n){t&&b$(e.prototype,t),n&&b$(e,n)}(t,[{key:"componentDidMount",value:function(){this.addLinkContainer&&Us(this.addLinkContainer)}},{key:"componentDidUpdate",value:function(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Us(this.addLinkContainer)}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"render",value:function(){var e=this,t=Object(M.F)()?this.transformIssueLinkTypesForSelect():this.transformIssueLinkTypesForSingleSelect(),n=this.props,r=n.baseUrl,i=n.issueKey,a=n.containerWidth,s=n.onClose,c=n.canCreateLinkedIssue,u=this.state,l=u.issueLinkType,f=u.newIssueLinks,p=u.isDisabled,d=u.invalidSelections,m=void 0===d?[]:d,b=a&&a<=480;return o.a.createElement("div",{ref:function(t){e.addLinkContainer=t}},o.a.createElement(E$,{isCompact:b},o.a.createElement(df.a,null,o.a.createElement(PY,{selectItems:t,selectedItem:l,onChange:this.onIssueLinkTypeChange,onSelected:this.onIssueLinkTypeSelected})),o.a.createElement(S$,null,o.a.createElement(l$,{value:f,baseUrl:r,issueKey:i,onChange:this.onIssueSearchChange,invalidSelections:m}))),o.a.createElement(C$,null,c&&o.a.createElement(P$,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},o.a.createElement(qY,null)),o.a.createElement(EY.a,null,o.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},o.a.createElement(D.b,{appearance:"primary",onClick:this.onSave,isDisabled:p},o.a.createElement(y.FormattedMessage,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),o.a.createElement(D.b,{appearance:"subtle",onClick:s},o.a.createElement(y.FormattedMessage,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}}]),t}();I$.displayName="AddIssueLinkView",I$.displayName="AddIssueLinkView",I$.defaultProps={issueLinks:null,onAdd:u.a,onClose:u.a,quickAddClickedCount:0,containerWidth:null};var x$=Object(eo.a)([Object(f.r)({onAdd:{action:"added"}}),Object(i.connect)(function(e){return{quickAddClickedCount:Object(pY.i)(e),canCreateLinkedIssue:Object(pY.a)(e)}},function(e){return{onAdd:function(t,n){return e(Object(fY.n)(t,n))}}}),ua])(I$);function _$(e){return(_$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T$(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D$(e,t){return!t||"object"!==_$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L$(e){return(L$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N$(e,t){return(N$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F$(){var e=B$(["\n    margin: ","px 0;\n    padding-right: 1px;\n"]);return F$=function(){return e},e}function V$(){var e=B$(["\n    margin: ","px 0;\n    padding-right: 1px;\n"]);return V$=function(){return e},e}function U$(){var e=B$(["\n    ",";\n    margin: 0;\n"]);return U$=function(){return e},e}function B$(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var K$=a.default.h3(U$(),vt.typography.h200()),W$=a.default.div(V$(),d.e),H$=a.default.div(F$(),d.e),z$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?Object.keys(e).reduce(function(t,n){return e[n].length+t},0):0},q$=Object(y.defineMessages)({removeIssueLinkHeader:{id:"issues.confirm-delete-issuelink-modal-header",defaultMessage:"Remove the link to {issueKey}?",description:""},removeIssueLinkContent:{id:"issues.confirm-delete-issuelink-modal-text",defaultMessage:"You can add it again later if you need to.",description:""},removeIssueLinkButton:{id:"issues.conirm-delete-issue-link-confirm-btn-text",defaultMessage:"Remove",description:""},issueLinkFailureHeader:{id:"issue.issue-links-failure-header",defaultMessage:"We couldn't link the issue",description:""},issueLinkFailureContent:{id:"issue.issue-links-failure-content",defaultMessage:"Wait a few moments, then give it another try.",description:""}}),G$=cY()(function(){var e,t=(R$(e={},uY.k,[]),R$(e,uY.d,[]),R$(e,uY.j,[]),e);return Object(M.R)()&&(t[uY.k].push(uY.j),t[uY.d].push(uY.j)),Object(M.Q)()&&t[uY.j].push(uY.k,uY.d),t}),J$=function(e,t,n){return!n&&G$()[e].indexOf(t)>-1},Q$=Object(f.d)("removeLinkedIssue",f.h.MODAL)(tr.b),Z$=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=D$(this,(e=L$(t)).call.apply(e,[this].concat(o)))).state={hasDeleteModal:!1,hasLinkedIssueModal:!1,groupId:null,linkedIssue:null,issueKey:null},n.onLinkedIssueModalClose=function(){n.setState({hasLinkedIssueModal:!1,linkedIssue:null})},n.getLinkByGroupAndIssueKey=function(e,t){return(n.props.issueLinks&&e&&n.props.issueLinks[e]||[]).find(function(e){return e.linkedIssueKey===t})},n.showLinkedIssueModal=function(e,t,r){n.setState({hasLinkedIssueModal:!0,linkedIssue:{id:e,issueKey:t,projectType:r}})},n.renderIssueLinkInlineMessage=function(e){var t=n.props,r=t.intl,o=t.retryLinkedIssue,i=t.cancelLinkedIssue;return Vq(r,r.formatMessage(q$.issueLinkFailureHeader),r.formatMessage(q$.issueLinkFailureContent),function(){return o(e)},function(){return i(e)})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N$(e,t)}(t,r["Component"]),function(e,t,n){t&&A$(e.prototype,t),n&&A$(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.issueLinks,n=e.onIssueLinkRendered,r=e.hasLinks,o=e.onMountCreatePermissionFetching;r&&n(z$(t)),o()}},{key:"onIssueClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.issueKey,r=e.issueLink,o=e.projectType,i=void 0===o?void 0:o,a=arguments.length>1?arguments[1]:void 0;if(n){var s=this.props,c=s.isModal,u=s.onIssueLinkClicked,l=s.projectType,f=s.linkActions;u&&u(t,i,z$(this.props.issueLinks)),Object(kl.d)(a)&&(J$(l,i,c)?this.showLinkedIssueModal(t,Object(Qg.toIssueKey)(n),i):r&&Object(Yo.a)(r,a.metaKey,f.push))}}},{key:"onDeleteConfirm",value:function(e,t){var n=this.getLinkByGroupAndIssueKey(e,t);if(n){var r=n.id;this.props.deleteLinkedIssue(r);var o=this.flattenedIssueLinks().findIndex(function(e){return e.id===r});this.props.onRemoveIssueLinkInitiated(o)}this.modalClosedStateChanges()}},{key:"onDeleteCancel",value:function(){this.modalClosedStateChanges()}},{key:"onDeleteAction",value:function(e,t){this.setState({groupId:e,issueKey:t,hasDeleteModal:!0})}},{key:"getRemovalConfirmationText",value:function(e){var t=this.props.intl.formatMessage;return{confirmationHeader:t(q$.removeIssueLinkHeader,{issueKey:e}),confirmationContent:t(q$.removeIssueLinkContent)}}},{key:"modalClosedStateChanges",value:function(){this.setState({groupId:null,issueKey:null,hasDeleteModal:!1})}},{key:"flattenedIssueLinks",value:function(){var e=this.props.issueLinks;return e?Object.keys(e).reduce(function(t,n){return[].concat(T$(t),T$(e[n]))},[]):[]}},{key:"renderDeleteConfirmationModal",value:function(){var e=this,t=this.props.intl.formatMessage,n=this.state,r=n.groupId,i=n.issueKey,a=this.getRemovalConfirmationText(i),s=a.confirmationHeader,c=a.confirmationContent;return o.a.createElement("div",null,o.a.createElement(Q$,{appearance:"warning",headerMessage:s,contentMessage:c,onConfirm:function(){return e.onDeleteConfirm(r,i)},onCancel:function(){return e.onDeleteCancel()},externalId:"issue.issueLinks.delete",confirmActionText:t(q$.removeIssueLinkButton)}),o.a.createElement(f.i,null))}},{key:"renderGroup",value:function(e,t){var n=this,r=t.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M$(Object(n),!0).forEach(function(t){R$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.linkedIssue,{isLoading:e.isLoading,hasError:e.hasError,errorInlineMessage:e.hasError?n.renderIssueLinkInlineMessage(e.id):void 0})});return o.a.createElement(W$,{key:e},o.a.createElement(K$,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.issue-links-view.relationship-heading"},e),o.a.createElement(Pq,{issues:r,groupId:e,isInteractive:this.props.isIssueViewComplete,onClick:function(e,t){return n.onIssueClick(e,t)},onDelete:function(e,t){return n.onDeleteAction(e,Object(Qg.toIssueKey)(t))}}))}},{key:"renderHeading",value:function(){var e=this.props,t=e.hasLinks,n=e.canAddIssueLinks,r=e.onIssueLinkAddClick;return o.a.createElement(ho.c,null,o.a.createElement(ho.e,null,o.a.createElement(y.FormattedMessage,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"})),o.a.createElement(ho.d,null,n&&t&&o.a.createElement(kY,{onClick:r})))}},{key:"renderExistingLinks",value:function(){var e=this,t=this.props.issueLinks;return o.a.createElement("div",null,t&&Object.keys(t).sort().map(function(n){return e.renderGroup(n,t[n])}))}},{key:"renderAddIssueLink",value:function(){var e=this.props,t=e.issueLinkTypes,n=e.baseUrl,r=e.issueKey,i=e.onIssueLinkAddClosed,a=e.issueLinks;return o.a.createElement(H$,null,o.a.createElement("div",null,o.a.createElement(x$,{issueLinkTypes:t,baseUrl:n,issueKey:r,onClose:i,issueLinks:a})))}},{key:"renderLinkedIssueModal",value:function(){var e=this.props.projectType,t=this.state.linkedIssue;if(!t)return null;var n=t.id,r=t.issueKey,i=t.projectType;return o.a.createElement(tC.a,null,o.a.createElement(s.a,{medium:12},o.a.createElement(lY.default,{issueId:parseInt(n,10),issueKey:r,sourceProjectType:e,targetProjectType:i,onClose:this.onLinkedIssueModalClose})))}},{key:"render",value:function(){var e=this.props,t=e.issueLinks,n=e.hasLinks,r=e.displayAddIssueLinks,i=n&&!vu()(t),a=this.state.hasDeleteModal,s=this.state.hasLinkedIssueModal;return o.a.createElement("div",null,i||r?this.renderHeading():null,i?this.renderExistingLinks():null,r?this.renderAddIssueLink():null,a?this.renderDeleteConfirmationModal():null,s?this.renderLinkedIssueModal():null)}}]),t}();Z$.displayName="IssueLinksView",Z$.displayName="IssueLinksView",Z$.defaultProps={issueLinks:null,issueLinkTypes:[],isIssueViewComplete:!1,onIssueLinkClicked:u.a,onIssueLinkRendered:u.a,onIssueLinkAddClick:u.a,onIssueLinkAddClosed:u.a};var Y$=Object(eo.a)([y.injectIntl,Object(f.r)({deleteLinkedIssue:{action:"deleted"}}),Object(f.e)("linkedIssue"),Object(Am.a)(function(e){return{onIssueLinkClicked:function(t,n,r){return e("linked-issue-clicked",{targetIssueId:t,targetProjectType:fl.i.apply(void 0,T$(uY.h))(n),linkedIssuesCount:r})},onIssueLinkRendered:function(t){return e("linked-issue-render",{linkedIssuesCount:t})},onRemoveIssueLinkInitiated:function(t){return e("linked-issue-removed",{indexOfDeletedLink:t})}}}),Ho.a,Object(i.connect)(function(e){return{canAddIssueLinks:Object(dY.a)(e),hasLinks:Object(pY.b)(e),issueLinks:Object(pY.g)(e),issueLinkTypes:Object(dY.b)(e),isModal:Object(w.t)(e),baseUrl:Object(w.f)(e),issueKey:Object(w.B)(e),externalId:"issue.issue-links",displayAddIssueLinks:Object(pY.j)(e),projectType:Object(k.E)(e),isIssueViewComplete:Object(k.l)(e)}},function(e){return{deleteLinkedIssue:function(t,n){return e(Object(fY.e)(t,n))},cancelLinkedIssue:function(t){return e(Object(fY.l)(t))},retryLinkedIssue:function(t){return e(Object(fY.o)(t))},onIssueLinkAddClick:function(){return e(Object(fY.a)())},onIssueLinkAddClosed:function(){return e(Object(fY.b)())},onMountCreatePermissionFetching:function(){return e(Object(fY.g)())}}})])(Z$),$$=n("./src/packages/issue/issue-view/src/actions/link-incident-action-type.js"),X$=function(){return{type:$$.a}},eX=Object(no.createSelector)(k.e,function(e){return e.incidentManagement}),tX=Object(no.createSelector)(eX,function(e){return e.createLinkedIncident}),nX=(Object(no.createSelector)(tX,function(e){return e.errorMessage}),Object(no.createSelector)(tX,function(e){return e.isInvalid}),Object(no.createSelector)(tX,function(e){return e.isLoading}),Object(no.createSelector)(tX,function(e){return e.clickedCount}),Object(no.createSelector)(k.H,function(e){return e.incidentManagement})),rX=Object(no.createSelector)(nX,function(e){return e.showCreateIncidentPanel}),oX=n("./src/packages/servicedesk/incident-management/issue-view/link-incident/src/async.js");function iX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var aX=Object(eo.a)([Object(i.connect)(function(e){return{issueKey:Object(w.B)(e),issueId:Object(w.A)(e),isCreateVisible:rX(e)}},function(e){return{onCreateLinkedIncidentClick:function(){return e(X$())},onCloseLinkedIncidentPanelClick:function(){return e(function(){return{type:$$.b}}())}}})])(function(e){var t=e.issueKey,n=e.useFieldValue,r=void 0===n?_c.c:n,i=e.issueId,a=e.isCreateVisible,s=e.onCreateLinkedIncidentClick,c=e.onCloseLinkedIncidentPanelClick;return iX(r({issueKey:t,fieldKey:oo.fb}),1)[0]&&void 0!==i?o.a.createElement(oX.a,{issueId:i,isCreateVisible:a,onCreateLinkedIncidentClick:s,onCloseLinkedIncidentPanelClick:c}):null}),sX=Object(y.defineMessages)({title:{id:"issue.portfolio-child-issues.title",defaultMessage:"Child issues",description:"The title of the children issues section used in Classic projects."},noValueText:{id:"issue.placeholder-for-empty-child-issues-field",defaultMessage:"There are no child issues.",description:""}}),cX=Object(eo.a)([Object(i.connect)(function(e){return{childIssuesPanelType:"portfolioChildren",baseUrl:Object(w.f)(e),locale:Object(w.D)(e),user:Object(w.a)(e),projectId:Object(k.B)(e),parentKey:Object(w.B)(e),parentId:Object(w.A)(e),issues:nB(e),isIssueViewComplete:Object(k.l)(e),messages:sX}},function(e){return{onNavigateToNewIssue:function(t){var n=t.fromIssueKey,r=t.toIssueKey;return e(Object(bj.b)({fromIssueKey:n,toIssueKey:r}))},onChange:function(t){switch(t.type){case wB.CHILD_ISSUE_ADDED:e(QU(t.meta.childIssue.id))}}}})])(_G),uX=n("./src/packages/platform/utils/constants/src/analytics-sources.js"),lX=n("./src/packages/issue/issue-view/src/actions/request-panel-metadata-action-creator.js"),fX=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),pX=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/fields/index.js"),dX=n("./src/packages/platform/services/spa-apdex-analytics/src/index.js"),mX=n("./node_modules/@atlassian/servicedesk-frontend-apdex/dist/servicedesk-frontend-apdex.min.js");function bX(e){return(bX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hX(e,t){return!t||"object"!==bX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gX(e){return(gX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vX(e,t){return(vX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var OX=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=hX(this,(e=gX(t)).call.apply(e,[this].concat(o)))).onExpand=function(e,t){n.props.onExpand(),Object(Ac.u)(t,"showRequestDetails")},n.onCollapse=function(e,t){n.props.onCollapse(),Object(Ac.u)(t,"hideRequestDetails")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vX(e,t)}(t,r["Component"]),function(e,t,n){t&&yX(e.prototype,t),n&&yX(e,n)}(t,[{key:"renderShowDetailsButton",value:function(){return o.a.createElement(mx.a,{externalId:"showdetailslink.expand",appearance:"link",onClick:this.onExpand},o.a.createElement(y.FormattedMessage,{id:"request.text-on-show-details-button",defaultMessage:"Show details"}))}},{key:"renderHideDetailsButton",value:function(){return o.a.createElement(mx.a,{externalId:"showdetailslink.collapse",appearance:"link",onClick:this.onCollapse},o.a.createElement(y.FormattedMessage,{id:"request.text-on-hide-details-button",defaultMessage:"Hide details"}))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.isContentExpanded?this.renderHideDetailsButton():this.renderShowDetailsButton())}}]),t}();OX.displayName="ContentSectionExpander";var jX=Object(y.defineMessages)({viewRequest:{id:"issue.view-request",defaultMessage:"View request in portal",description:"Text to be displayed on the link to portal"}});function wX(){var e=EX(["\n    font-size: 12px;\n"]);return wX=function(){return e},e}function kX(){var e=EX(["\n    display: flex;\n    align-items: center;\n    padding-left: ","px;\n"]);return kX=function(){return e},e}function EX(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var SX=a.default.div(kX(),4*d.e+d.e/2),CX=a.default.a(wX());function PX(e){return(PX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xX(e,t){return!t||"object"!==PX(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _X(e){return(_X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MX(e,t){return(MX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var TX=Object(Ac.a)("link",{onClick:"clicked"})(CX),AX=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=xX(this,(e=_X(t)).call.apply(e,[this].concat(o)))).onClick=function(e,t){Object(Ac.u)(t,"viewRequestInHelpCenter")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MX(e,t)}(t,r["Component"]),function(e,t,n){t&&IX(e.prototype,t),n&&IX(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.intl,n=e.link;return o.a.createElement(SX,null,o.a.createElement(TX,{href:n,target:"_blank",onClick:this.onClick},t.formatMessage(jX.viewRequest)))}}]),t}();AX.displayName="HelpCenter";var DX=n("./src/packages/issue/issue-view/src/common/model/request-channel-type.js"),LX=Object(y.defineMessages)({portal:{id:"issue.portal-channel",defaultMessage:"Portal",description:"Portal Channel name to be displayed in description section"},email:{id:"issue.email-channel",defaultMessage:"Email",description:"Email Channel name to be displayed in description section"},api:{id:"issue.api-channel",defaultMessage:"API",description:"API Channel name to be displayed in description section"},jira:{id:"issue.jira-channel",defaultMessage:"Jira",description:"Jira Channel name to be displayed in description section"},anonymousportal:{id:"issue.anonymousportal-channel",defaultMessage:"Anonymous Portal",description:"Anonymous Portal Channel name to be displayed in description section"},unknown:{id:"issue.unknown-channel",defaultMessage:"Unknown",description:"Unknown will be displayed when no channel source is available"},requestRaised:{id:"issue.request-raised",defaultMessage:"raised this request",description:"Text to be displayed at the top in description section showing reporter and channel details"},via:{id:"issue.via",defaultMessage:"via",description:"Text to be displayed at the top in description section showing reporter and channel details"},noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous",description:"Text to show when there is no reporter"}});function NX(){var e=KX(["\n    padding-left: ","px;\n"]);return NX=function(){return e},e}function RX(){var e=KX(["\n    ",";\n    min-width: 0;\n"]);return RX=function(){return e},e}function FX(){var e=KX(["\n    font-weight: 600;\n    padding-left: ","px;\n"]);return FX=function(){return e},e}function VX(){var e=KX(["\n    font-weight: 600;\n    padding-right: ","px;\n    flex-shrink: 0;\n"]);return VX=function(){return e},e}function UX(){var e=KX(["\n    display: flex;\n    align-items: center;\n    min-width: 0;\n"]);return UX=function(){return e},e}function BX(){var e=KX(["\n    display: flex;\n    padding-right: ","px;\n"]);return BX=function(){return e},e}function KX(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var WX=a.default.div(BX(),d.e),HX=a.default.div(UX()),zX=a.default.div(VX(),d.e/2),qX=a.default.div(FX(),d.e/2),GX=a.default.div(RX(),wp.a),JX=a.default.div(NX(),d.e/2),QX=Object(lo.a)(function(e){return{avatarUrl:"",name:e.formatMessage(LX.noReporter)}}),ZX=Object(lo.a)(function(e,t){var n=t.displayName;return{avatarUrl:t.avatarUrls["48x48"],name:n}}),YX=function(e){var t=e.intl,n=e.reporter,r=e.requestChannel,i=QX(t);n&&(i=ZX(t,n));var a=i,s=a.name,c=a.avatarUrl,u=function(e,t){switch(e){case DX.e:return t.formatMessage(LX.portal);case DX.c:return t.formatMessage(LX.email);case DX.b:return t.formatMessage(LX.api);case DX.d:return t.formatMessage(LX.jira);case DX.a:return t.formatMessage(LX.anonymousportal);case DX.f:return t.formatMessage(LX.unknown);default:return}}(r,t);return o.a.createElement(HX,null,o.a.createElement(WX,null,o.a.createElement(Ws.a,{src:c,size:"small"})),o.a.createElement(zX,null,s),o.a.createElement(GX,null,t.formatMessage(LX.requestRaised)),void 0!==u&&o.a.createElement(o.a.Fragment,null,o.a.createElement(JX,null,t.formatMessage(LX.via)),o.a.createElement(qX,null,u)))};YX.displayName="ReporterAndChannel";var $X=YX;function XX(){var e=r0(["\n    margin-bottom: ","px;\n"]);return XX=function(){return e},e}function e0(){var e=r0(["\n    ",";\n"]);return e0=function(){return e},e}function t0(){var e=r0(["\n    display: flex;\n    justify-content: space-between;\n"]);return t0=function(){return e},e}function n0(){var e=r0(["\n    margin-top: ","px;\n    margin-bottom: ","px;\n    display: flex;\n    flex-direction: column;\n    border-radius: ","px;\n    border: 1px solid #dfe1e6;\n    background-color: ",";\n    padding: 16px;\n    ",";\n"]);return n0=function(){return e},e}function r0(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o0=a.default.div(n0(),d.e,3*d.e,d.e/2,vt.colors.N0,function(e){var t=e.isExpanded,n=e.hasContentItems;return t&&n&&"padding-bottom: 0"}),i0=a.default.div(t0()),a0=a.default.div(e0(),function(e){return e.hasContentItems&&"margin-top: ".concat(2*d.e,"px")}),s0=a.default.div(XX(),3*d.e);function c0(e){return(c0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l0(e,t){return!t||"object"!==c0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f0(e){return(f0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p0(e,t){return(p0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d0=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l0(this,f0(t).call(this,e))).onExpand=function(){n.setState({isExpanded:!0})},n.onCollapse=function(){n.setState({isExpanded:!1})},n.props.fetchRequestPanelMetadata(),n.state={isExpanded:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p0(e,t)}(t,r["Component"]),function(e,t,n){t&&u0(e.prototype,t),n&&u0(e,n)}(t,[{key:"componentDidMount",value:function(){if(!this.props.isLoading&&(this.props.isInServiceDeskQueue||this.props.isInServiceDeskReport)&&(!Object(M.T)()||!__SPA__)){var e=this.props.baseUrl,t=window.location.pathname.replace(e,"");Object(mX.end)(t)}}},{key:"render",value:function(){var e=this.state.isExpanded,t=this.props,n=t.requestPanelItems,r=t.isInServiceDeskReport,i=t.isInServiceDeskQueue,a=t.isLoading,s=t.LayoutItemsComponent,c=n.length>0,u=r?"servicedesk.reports.custom.issue":"servicedesk.queues.issue";return o.a.createElement(fX.f,{location:pX.b},o.a.createElement(o0,{isExpanded:e,hasContentItems:c},!a&&(i||r)&&Object(M.T)()&&__SPA__&&o.a.createElement(dX.e,{metricKey:u,withMarks:[dX.f],isExpectedToHaveSsr:!1}),o.a.createElement(fX.c,{location:"panel-header-expand"},o.a.createElement(i0,null,o.a.createElement($X,{intl:this.props.intl,reporter:this.props.reporter&&this.props.reporter.value,requestChannel:this.props.requestChannel}),c&&o.a.createElement(OX,{isContentExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse}))),(c&&e||!c)&&this.props.requestUrl&&o.a.createElement(AX,{intl:this.props.intl,link:this.props.requestUrl}),e&&o.a.createElement(a0,{hasContentItems:c},o.a.createElement(s,{layoutItems:n,area:vo.b,ItemContainer:s0}))))}}]),t}();d0.displayName="RequestDetailsPanelView",d0.defaultProps={LayoutItemsComponent:kV};var m0=function(e){return(Object(w.b)(e)&&Object(w.b)(e).valueOf())===uX.a.SERVICEDESK_QUEUES_ISSUE},b0=function(e){return(Object(w.b)(e)&&Object(w.b)(e).valueOf())===uX.a.SERVICEDESK_REPORTS_ISSUE},y0=Object(eo.a)([y.injectIntl,Object(i.connect)(function(e){return{baseUrl:Object(w.f)(e),reporter:Object(io.p)(so.s)(e),requestChannel:eO(e),isLoading:Object(k.q)(e),isInServiceDeskQueue:m0(e),isInServiceDeskReport:b0(e),requestUrl:tO(e),LayoutItemsComponent:EV}},function(e){return Object(M.b)()?function(e){return{fetchRequestPanelMetadata:function(){return e(Object(lX.a)())},onOpenPanel:function(t,n,r){var o={title:r&&r.title||n,type:n,key:t,payload:r};e(Ma(o))}}}(e):function(e){return{fetchRequestPanelMetadata:function(){return e(Object(lX.a)())}}}(e)})])(d0),h0=n("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),g0=Object(y.defineMessages)({title:{id:"issue.subtasks-heading",defaultMessage:"Subtasks",description:"Heading text for subtasks issues panel"},createSubtaskErrorHeader:{id:"issue.subtask-error-header",defaultMessage:"We couldn't create the subtask",description:""},createSubtaskErrorContent:{id:"issue.subtask-error-content",defaultMessage:"Wait a few moments, then give it another try.",description:""}});function v0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v0(Object(n),!0).forEach(function(t){j0(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w0=Object(eo.a)([Object(i.connect)(function(e){return O0({childIssuesPanelType:pB,baseUrl:Object(w.f)(e),locale:Object(w.D)(e),user:Object(w.a)(e),projectId:Object(k.B)(e),parentKey:Object(w.B)(e),parentId:Object(w.A)(e),issueTypes:Object(h0.c)(e),issues:Object(Bw.d)(e),messages:g0,supportsIssueCreation:Object(Bw.a)(e),quickAddClickCount:XU(e),isIssueViewComplete:Object(k.l)(e),onNavigateToNewIssue:Object(w.G)(e)},Object(M.t)()?{fetchIssueTypesStatus:Object(MG.a)(e)}:{})},function(e){return O0({onChange:function(t){switch(t.type){case wB.CHILD_ISSUE_ADDED:e(QU(t.meta.childIssue.id))}}},Object(M.t)()?{onAddChildClick:function(){return e(ZU())}}:{})})])(_G),k0=n("./src/packages/issue/issue-view/src/actions/web-links-action-creator.js"),E0=n("./src/packages/issue/issue-view/src/selectors/web-links-selector.js"),S0=Object(y.defineMessages)({headerMessage:{id:"issue.details.web-links.delete-confirmation-modal.title",defaultMessage:"Delete the web link?",description:"A header to explain this modal is used to delete the web link."},contentMessage:{id:"issue.details.web-links.delete-confirmation-modal.content",defaultMessage:"You can add the link later again if you need to.",description:"Content letting users know that web links can be added again."},confirmActionText:{id:"issue.details.web-links.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete",description:"Confirmation button that will delete the web link when clicked."},cancelActionText:{id:"issue.details.web-links.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel",description:"Cancel button that will close the modal and cancel the operation."}}),C0=function(e){var t=e.intl,n=e.onDelete,r=e.onCancel;return o.a.createElement(tr.b,{appearance:"danger",headerMessage:t.formatMessage(S0.headerMessage),contentMessage:t.formatMessage(S0.contentMessage),confirmActionText:t.formatMessage(S0.confirmActionText),cancelActionText:t.formatMessage(S0.cancelActionText),onConfirm:n,onCancel:r})};C0.displayName="DeleteModal";var P0=Object(y.injectIntl)(C0),I0=n("./node_modules/@atlaskit/icon/glyph/world.js"),x0=n.n(I0),_0=n("./src/packages/platform/ui/flags/src/model/index.js"),M0=n("./node_modules/shortid/index.js"),T0=Object(y.defineMessages)({createErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-heading",defaultMessage:"We couldn't create the web link",description:"Inline message heading shown when web link creation failed and user clicks on the error icon."},deleteErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.delete-error-heading",defaultMessage:"We couldn't delete the web link",description:"Inline message heading shown when web link deletion failed and user clicks on the error icon."},errorBody:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-body",defaultMessage:"Wait a few moments, then give it another try.",description:"Inline message body shown when web link creation failed and user clicks on the error icon."},retryAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.retry-action",defaultMessage:"Try again",description:"Action label to retry when a creation or deletion error occurs."},cancelAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.cancel-action",defaultMessage:"Cancel",description:"Action label to cancel when a creation or deletion error occurs."}}),A0=function(e){return e.stopPropagation()},D0=function(e){var t=e.errorHeading,n=e.errorBody,r=e.onRetry,i=e.onCancel,a=e.intl;return o.a.createElement("div",{onClick:A0,onKeyPress:A0},Vq(a,a.formatMessage(t),a.formatMessage(n),r,i))};D0.displayName="ErrorMessage";var L0=g()([Object(f.f)("webLinks",{onRetry:"retry"}),Object(i.connect)(null,function(e,t){var n=t.webLink;return{onCreateWebLinkRetry:function(){e(Object(k0.d)(n.id))},onCreateWebLinkCancel:function(){e(Object(k0.f)(n.id))},onDeleteWebLinkRetry:function(){e(Object(k0.h)(n.id))},onDeleteWebLinkCancel:function(){e(Object(k0.a)(n.id))}}},function(e,t,n){return{intl:n.intl,errorHeading:n.webLink.createFailed?T0.createErrorHeading:T0.deleteErrorHeading,errorBody:T0.errorBody,onRetry:function(e,r,o){n.webLink.createFailed?(t.onCreateWebLinkRetry(),Object(f.m)(o,{name:"createRetry"})):(t.onDeleteWebLinkRetry(),Object(f.m)(o,{name:"deleteRetry"}))},onCancel:n.webLink.createFailed?t.onCreateWebLinkCancel:t.onDeleteWebLinkCancel}}),y.injectIntl])(D0);function N0(){var e=B0(["\n    margin-left: ","px;\n    margin-right: ","px;\n"]);return N0=function(){return e},e}function R0(){var e=B0(["\n    padding-left: ","px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return R0=function(){return e},e}function F0(){var e=B0(["\n    flex: 1;\n    overflow: hidden;\n    align-items: center;\n"]);return F0=function(){return e},e}function V0(){var e=B0(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n"]);return V0=function(){return e},e}function U0(){var e=B0(["\n    display: flex;\n    align-items: center;\n"]);return U0=function(){return e},e}function B0(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var K0=a.default.div(U0()),W0=Object(a.default)(K0)(V0()),H0=a.default.div(F0()),z0=a.default.div(R0(),d.e),q0=a.default.div(N0(),d.e/4,d.e/4);function G0(e){return(G0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q0(e,t){return!t||"object"!==G0(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z0(e){return(Z0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y0(e,t){return(Y0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $0=function(e){return!(!e.createFailed&&!e.deleteFailed)},X0=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Q0(this,(e=Z0(t)).call.apply(e,[this].concat(o)))).onDeleteClick=function(e){var t=n.props,r=t.onDelete,o=t.webLink.id;e.stopPropagation(),r(o)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y0(e,t)}(t,r["Component"]),function(e,t,n){t&&J0(e.prototype,t),n&&J0(e,n)}(t,[{key:"componentDidMount",value:function(){if(this.props.webLink.deleteFailed){var e=this.props,t=e.onDeleteWebLinkRetry,n=e.onDeleteWebLinkCancel;this.showErrorFlag(T0.deleteErrorHeading,t,n)}}},{key:"componentDidUpdate",value:function(e){if(!e.webLink.createFailed&&this.props.webLink.createFailed){var t=this.props,n=t.onCreateWebLinkRetry,r=t.onCreateWebLinkCancel;this.showErrorFlag(T0.createErrorHeading,n,r)}}},{key:"showErrorFlag",value:function(e,t,n){var r=this.props,o=r.showFlag,i=r.dismissFlag,a=Object(dC.toFlagId)(Object(M0.generate)());o(function(e,t,n,r){return{id:e,title:t,description:T0.errorBody,type:"warning",isAutoDismiss:!0,actions:[{content:T0.retryAction,onClick:n},{content:T0.cancelAction,onClick:r}]}}(a,e,function(){i({id:a,command:_0.a}),t()},function(){i({id:a,command:_0.a}),n()}))}},{key:"renderLinkIcon",value:function(){var e=this.props.webLink,t=e.iconUrl,n=e.linkText,r=void 0===n?"":n;return t?o.a.createElement(Ws.a,{src:t,size:"small",appearance:"square"}):o.a.createElement(q0,null,o.a.createElement(x0.a,{label:r}))}},{key:"renderLinkText",value:function(){var e=this.props.webLink,t=e.linkText,n=e.href;return o.a.createElement(H0,null,t?o.a.createElement(Je.a,{content:n,truncate:!0,position:"bottom"},o.a.createElement(z0,null,t)):o.a.createElement(z0,null,n))}},{key:"renderDeleteButton",value:function(){var e=this.props,t=e.isHovering,n=e.isFocused;return o.a.createElement(eJ,{show:t||n,invert:n,onClick:this.onDeleteClick})}},{key:"render",value:function(){var e=this.props.webLink;return o.a.createElement(W0,null,this.renderLinkIcon(),this.renderLinkText(),function(e){return!(e.isCreating||$0(e))}(e)&&this.renderDeleteButton(),$0(e)&&o.a.createElement(L0,{webLink:e}))}}]),t}();X0.displayName="WebLinkLineCard";var e1=X0;function t1(){return(t1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n1=function(e){return o.a.createElement(dC.FlagServiceSubscriber,null,function(t){var n=t.showFlag,r=t.dismissFlag;return o.a.createElement(e1,t1({showFlag:n,dismissFlag:r},e))})};n1.displayName="WithFlagSubscriber";var r1=g()([Object(f.f)("webLinks",{onCreateWebLinkRetry:"retry",onDeleteWebLinkRetry:"retry"}),Object(i.connect)(null,function(e,t){var n=t.webLink;return{onCreateWebLinkRetry:function(t){e(Object(k0.d)(n.id)),Object(f.m)(t,{name:"createRetry"})},onCreateWebLinkCancel:function(){e(Object(k0.f)(n.id))},onDeleteWebLinkRetry:function(t){e(Object(k0.h)(n.id)),Object(f.m)(t,{name:"deleteRetry"})},onDeleteWebLinkCancel:function(){e(Object(k0.a)(n.id))}}})])(n1);function o1(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    div[class*='item-line-card-view__Card']:focus {\n        border-bottom-color: ",";\n    }\n"]);return o1=function(){return e},e}var i1=a.default.div(o1(),vt.colors.N30);function a1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s1=function(e){var t=a1(Object(r.useState)(!1),2),n=t[0],i=t[1],a=a1(Object(r.useState)(null),2),s=a[0],c=a[1],u=function(e){i(!0),c(e)},l=function(){i(!1),c(null)},f=l;return o.a.createElement(i1,null,o.a.createElement(Ac.k,{onMount:function(t){return Object(Ac.r)(t,"webLinkLineCardGroup rendered",{linkCount:e.links.length})}}),o.a.createElement(Mz.a,{items:e.links,groupId:"web-links",onClick:function(t,n){e.onClick&&e.onClick(t,n),n&&n.currentTarget&&n.currentTarget.blur(),function(e){e.href&&window.open(e.href,"_blank")}(t)}},function(e,t,n,r){return function(e){var t=e.link,n=e.isHovering,r=e.isFocused;return o.a.createElement(r1,{webLink:t,isHovering:n,isFocused:r,onDelete:u})}({link:r,isHovering:e,isFocused:n})}),n?o.a.createElement(P0,{onDelete:function(){s&&e.onDelete(s),l()},onCancel:f}):null)};s1.displayName="WebLinkLineCardGroup";var c1=s1,u1=Object(eo.a)([Object(f.f)("webLinkCard",{onClick:"clicked",onDelete:"deleted"}),Object(f.s)({onClick:"visitWebLink",onDelete:"deleteWebLink"}),Object(i.connect)(null,function(e){return{onDelete:function(t){return e(Object(k0.h)(t))}}})])(c1),l1=Object(y.defineMessages)({label:{id:"issue.web-links-add-label",defaultMessage:"Link to a web page",description:"Link to a web page"}});function f1(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-left: auto;\n"]);return f1=function(){return e},e}var p1=a.default.span(f1()),d1=function(e){var t=e.intl,n=e.onClick;return o.a.createElement(p1,null,o.a.createElement(qW.a,{label:t.formatMessage(l1.label),onClick:n}))};d1.displayName="AddButton";var m1=Object(y.injectIntl)(d1),b1=n("./node_modules/url-parse/index.js"),y1=n.n(b1),h1=function(e,t,n){if(null!=e&&Object(dh.a)(e)){var r=new y1.a(e.toString(),"null").origin,o="null"===r?null:"".concat(r,"/favicon.ico");if(null!==o){var i=new Image;i.onload=t,i.onerror=n,i.src=o}}else n()},g1=function(e){var t=e.trim();return/^(((https?):)?\/\/)[^\s\/$.?#].[^\s]*$/i.test(t)},v1=n("./node_modules/@atlaskit/textfield/dist/esm/components/Textfield.js");function O1(){var e=w1(["\n    flex: auto;\n"]);return O1=function(){return e},e}function j1(){var e=w1(["\n    color: ",";\n    font-weight: 600;\n    font-size: ","px;\n"]);return j1=function(){return e},e}function w1(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k1=a.default.span(j1(),vt.colors.N300,1.5*d.e),E1=a.default.div(O1());function S1(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var C1=function(e){var t=e.headingText,n=S1(e,["headingText"]);return o.a.createElement(E1,null,o.a.createElement(k1,null,t),o.a.createElement(v1.a,n))};C1.displayName="InlineField";var P1=Object(y.defineMessages)({url:{id:"issue.views.web-links.addLink.label.url",defaultMessage:"URL",description:"The URL to a link outside Jira"},linkText:{id:"issue.views.web-links.addLink.label.linkText",defaultMessage:"Link text",description:"The text to show to describe a link"},linkTextPlaceholder:{id:"issue.views.web-links.addLink.label.linkTextPlaceholder",defaultMessage:"Add a description...",description:"Placeholder for the link title/text when adding a link"},invalidUrlMessage:{id:"issue.views.web-links.addLink.label.invalidUrlMessage",defaultMessage:"Please enter a valid URL",description:"Text that gets displayed when URL is incorrect"},errorIconLabel:{id:"issue.views.web-links.addLink.label.errorIcon",defaultMessage:"Error icon",description:"Error icon label"}});function I1(){var e=A1(["\n    margin-left: ","px;\n"]);return I1=function(){return e},e}function x1(){var e=A1(["\n    align-items: center;\n    color: ",";\n    display: flex;\n    margin-top: ","px;\n"]);return x1=function(){return e},e}function _1(){var e=A1(["\n    margin-left: ","px;\n    flex: 1;\n"]);return _1=function(){return e},e}function M1(){var e=A1(["\n    margin-right: ","px;\n    flex: 1;\n"]);return M1=function(){return e},e}function T1(){var e=A1(["\n    margin-top: ","px;\n    display: flex;\n"]);return T1=function(){return e},e}function A1(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var D1=a.default.div(T1(),2*d.e),L1=a.default.div(M1(),d.e),N1=a.default.div(_1(),d.e),R1=a.default.div(x1(),function(e){return e.colour},d.e/2),F1=a.default.div(I1(),d.e/2);function V1(e){return(V1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B1(e,t){return!t||"object"!==V1(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K1(e){return(K1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W1(e,t){return(W1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H1=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=B1(this,(e=K1(t)).call.apply(e,[this].concat(o)))).state={isHrefFocused:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W1(e,t)}(t,r["Component"]),function(e,t,n){t&&U1(e.prototype,t),n&&U1(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.href,r=t.linkText,i=t.onHrefChange,a=t.onHrefBlur,s=t.intl,c=t.onLinkTextChange,u=t.isHrefValid;return o.a.createElement(D1,null,o.a.createElement(L1,null,o.a.createElement(C1,{value:n,headingText:s.formatMessage(P1.url),autoFocus:!0,placeholder:"https://",onChange:i,onBlur:function(){e.setState({isHrefFocused:!1}),a()},onFocus:function(){return e.setState({isHrefFocused:!0})},isInvalid:!u}),!u&&!this.state.isHrefFocused&&o.a.createElement(R1,{colour:vt.colors.R400},o.a.createElement(Mu.a,{label:s.formatMessage(P1.errorIconLabel),role:"presentation"}),o.a.createElement(F1,null,s.formatMessage(P1.invalidUrlMessage)))),o.a.createElement(N1,null,o.a.createElement(C1,{value:r,headingText:s.formatMessage(P1.linkText),autoFocus:!1,placeholder:s.formatMessage(P1.linkTextPlaceholder),onChange:c})))}}]),t}();H1.displayName="InlineFields";var z1=Object(y.injectIntl)(H1),q1=Object(y.defineMessages)({linkButton:{id:"issue.views.web-links.link.link-button",defaultMessage:"Link",description:"Button text to link the web link"},cancelButton:{id:"issue.views.web-links.link.cancel-button",defaultMessage:"Cancel",description:"Button text to cancel operation and close the field"}});function G1(){var e=Y1(["\n    margin-top: ","px;\n    display: flex;\n    justify-content: flex-end;\n"]);return G1=function(){return e},e}function J1(){var e=Y1(["\n    margin-left: ","px !important;\n"]);return J1=function(){return e},e}function Q1(){var e=Y1(["\n    flex-grow: 1;\n"]);return Q1=function(){return e},e}function Z1(){var e=Y1(["\n    display: flex;\n    align-items: center;\n    background-color: ",";\n    width: 100%;\n"]);return Z1=function(){return e},e}function Y1(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}a.default.div(Z1(),vt.colors.N10),a.default.div(Q1());var $1=Object(a.default)(D.b)(J1(),d.e),X1=a.default.div(G1(),d.e);function e2(e){return(e2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n2(e,t){return!t||"object"!==e2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r2(e){return(r2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o2(e,t){return(o2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i2={href:"",icon:void 0,linkText:"",isDisabled:!0,isHrefValid:!0},a2=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=n2(this,(e=r2(t)).call.apply(e,[this].concat(o)))).state=i2,n.onChildContainerRefSet=function(e){n.childContainer=e},n.onHrefChange=function(e){var t=e.target.value;n.updateDisabledState(t),n.setState({href:t,isHrefValid:g1(t)})},n.onIconError=function(){n.updateDisabledState(),n.setState({icon:void 0})},n.onIconLoaded=function(e){if(e&&e.currentTarget){var t=e.currentTarget.src;n.updateDisabledState(),n.setState({icon:t})}},n.onHrefBlur=function(){var e=n.state.href;n.setState({isDisabled:!0},function(){h1(e,n.onIconLoaded,n.onIconError)})},n.onLinkTextChange=function(e){var t=e.target.value.slice(0,255);n.updateDisabledState(n.state.href,t),n.setState({linkText:t})},n.onSubmit=function(){var e=n.state,t=e.href,r=e.linkText,o=e.icon,i=null==o?Object(Qg.toHref)(""):Object(Qg.toHref)(o);n.props.onSubmit(t,r,i)},n.childContainer=void 0,n.closeAndReset=function(){n.resetState(),n.props.onCancel()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o2(e,t)}(t,r["Component"]),function(e,t,n){t&&t2(e.prototype,t),n&&t2(e,n)}(t,[{key:"componentDidMount",value:function(){Us(this.childContainer),this.updateDisabledState()}},{key:"componentDidUpdate",value:function(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&(Us(this.childContainer),this.focusOnInput()),this.props.linkedPagesCount>e.linkedPagesCount&&(this.resetState(),this.focusOnInput())}},{key:"focusOnInput",value:function(){if(null!==this.childContainer){var e=this.childContainer.querySelector("input");null!==e&&e.focus()}}},{key:"updateDisabledState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.href,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.linkText,n=ez()(e),r=ez()(t),o=vu()(n)||vu()(r)||!g1(e);this.setState({isDisabled:o})}},{key:"resetState",value:function(){this.setState(i2)}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=this.state,n=t.href,r=t.linkText,i=t.isDisabled,a=t.isHrefValid,s=i?null:this.onSubmit;return o.a.createElement("div",{ref:this.onChildContainerRefSet},o.a.createElement(T.a,{onEscape:this.closeAndReset,onEnter:s},o.a.createElement(z1,{href:n,linkText:r,isHrefValid:a,onHrefChange:this.onHrefChange,onLinkTextChange:this.onLinkTextChange,onHrefBlur:this.onHrefBlur})),o.a.createElement(X1,null,o.a.createElement($1,{appearance:"primary",onClick:this.onSubmit,isDisabled:i},e(q1.linkButton)),o.a.createElement($1,{appearance:"subtle",onClick:this.closeAndReset},e(q1.cancelButton))))}}]),t}();a2.displayName="WebLinkCreateLinkView";var s2=Object(eo.a)([y.injectIntl,Object(f.f)("createWebLink",{onSubmit:"submitted",onCancel:"cancelled"}),Object(f.s)({onSubmit:"onWebLinkSubmit",onCancel:"onWebLinkCancel"}),Object(i.connect)(function(e){return{linkedPagesCount:Object(E0.e)(e),createLinkClickedCount:Object(E0.b)(e)}},function(e){return{onCancel:function(){return e(Object(k0.j)())},onSubmit:function(t,n,r){return e(Object(k0.c)(Object(Qg.toHref)(t),n,r))}}})])(a2),c2=Object(y.defineMessages)({heading:{id:"issue.details.web-links.heading",defaultMessage:"Web links",description:"The heading used for the web links content section"}});function u2(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin: ","px 0;\n    padding-right: 1px;\n"]);return u2=function(){return e},e}var l2=a.default.div(u2(),d.e);function f2(e){return(f2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d2(e,t){return!t||"object"!==f2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m2(e){return(m2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b2(e,t){return(b2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y2=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d2(this,m2(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b2(e,t)}(t,r["Component"]),function(e,t,n){t&&p2(e.prototype,t),n&&p2(e,n)}(t,[{key:"renderHeading",value:function(){var e=this.props,t=e.intl,n=e.isCreateWebLinkOpened,r=e.onAddButtonClicked,i=e.links,a=Boolean(i&&i.length);return n||a?o.a.createElement(ho.c,null,o.a.createElement(ho.e,null,t.formatMessage(c2.heading)),o.a.createElement(ho.d,null,o.a.createElement(m1,{onClick:r}))):null}},{key:"renderLineCards",value:function(){var e=this.props.links;return e&&e.length?o.a.createElement(l2,null,o.a.createElement(u1,{links:e})):null}},{key:"renderCreateLinkView",value:function(){return this.props.isCreateWebLinkOpened?o.a.createElement(s2,null):null}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.renderHeading(),this.renderLineCards(),this.renderCreateLinkView())}}]),t}();y2.displayName="WebLinksView",y2.defaultProps={linkCount:0};var h2=Object(eo.a)([y.injectIntl,Object(f.f)("addWebLink",{onAddButtonClicked:"clicked"}),Object(f.s)({onAddButtonClicked:"addWebLink"}),Object(i.connect)(function(e){return{isCreateWebLinkOpened:Object(E0.c)(e),links:Object(E0.f)(e),linkCount:Object(E0.e)(e),canAddWebLinks:Object(E0.a)(e)}},function(e){return{onAddButtonClicked:function(){return e(Object(k0.k)())}}})])(y2);function g2(e){return(g2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O2(e,t){return!t||"object"!==g2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j2(e){return(j2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w2(e,t){return(w2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k2=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O2(this,j2(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w2(e,t)}(t,r["Component"]),function(e,t,n){t&&v2(e.prototype,t),n&&v2(e,n)}(t,[{key:"maybeWrapInSectionWrapper",value:function(e){var t=this.props.isCompactMode;return e?o.a.createElement(Xo.d,{isCompactMode:t},e):e}},{key:"renderEcosystemContentPanels",value:function(){return this.props.contentPanels.map(function(e){return o.a.createElement(oU,{key:e.name,name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,externalId:"issue.ecosystem.content-panel"})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isComplete,r=t.fields,i=t.isCompactMode,a=Object.keys(r),s=a.includes(OV.N)?o.a.createElement(Y$,null):null,c=Object(M.eb)()?o.a.createElement(h2,null):null,u=a.includes("subtasks")?o.a.createElement(w0,null):null,l=Object(k.o)(r)?o.a.createElement(nY,null):null,f=a.includes(so.e)?o.a.createElement(NG,null):null,p=Object(M.k)()?o.a.createElement(GU,null):null,d=n?o.a.createElement(GU,null):p,m=a.includes(so.r)?o.a.createElement(cX,null):null,b=Object(M.O)()&&o.a.createElement(aX,null),y=Object(M.A)()&&o.a.createElement(aY,null);return o.a.createElement(vV.a,null,function(t){var n=t.layoutDescriptor;return o.a.createElement(Xo.a,{isCompactMode:i},function(e){var t=e.content,n=t.visibleContentItems,r=t.requestPanelContentItems;return o.a.createElement(o.a.Fragment,null,r&&o.a.createElement(y0,{requestPanelItems:r}),o.a.createElement(EV,{layoutItems:n,area:vo.a}))}(n),e.maybeWrapInSectionWrapper(d),e.maybeWrapInSectionWrapper(l),e.maybeWrapInSectionWrapper(f),e.maybeWrapInSectionWrapper(m),e.maybeWrapInSectionWrapper(u),e.maybeWrapInSectionWrapper(b),e.maybeWrapInSectionWrapper(s),e.maybeWrapInSectionWrapper(o.a.createElement(QZ,null)),e.maybeWrapInSectionWrapper(c),e.maybeWrapInSectionWrapper(y),e.maybeWrapInSectionWrapper(e.renderEcosystemContentPanels()))})}}]),t}();k2.displayName="ContentItems",k2.displayName="ContentItems",k2.defaultProps={contentPanels:[],fields:{},isComplete:!1,isCompactMode:!1};var E2=Object(eo.a)([Object(i.connect)(function(e){return{contentPanels:Object(ob.b)(e),isComplete:Object(k.l)(e),fields:Object(io.s)(e)}},{})])(k2),S2=n("./src/packages/issue/issue-view/src/actions/context-items-action-type.js"),C2=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/slide-down-on-mount.js"),P2=n("./node_modules/@atlaskit/icon/glyph/folder.js"),I2=n.n(P2),x2=fS.f,_2=n("./src/packages/issue/issue-glance/src/index.js"),M2=Object(eo.a)()(_2.a);function T2(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function A2(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var D2=function(e,t){return e.items.reduce(function(e,n){switch(n.type){case x2:return[].concat(A2(e),[Object(io.m)(n.id)(t)]);default:return fl.h.safeError("issue.views.issue-base.context.tab-glance","Unknown tab item '".concat(JSON.stringify(n),"'"),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),e}},[]).join(", ")},L2=function(){return o.a.createElement(I2.a,{primaryColor:vt.colors.N500})};L2.displayName="TabIcon";var N2=Object(lo.a)(function(e){return{tabItems:e}}),R2=function(e){if(void 0!==e.shouldHideTab)return null;e.tabId;var t=T2(e,["tabId"]);return o.a.createElement(M2,t)};R2.displayName="TabGlance";var F2=Object(i.connect)(function(){var e=SS();return function(t,n){var r=e(t,n.tabId);return r?{title:r.name,content:D2(r,t),onClickPayload:N2(r.items),Icon:L2}:{shouldHideTab:!0}}},{})(R2);function V2(e){return(V2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U2(){return(U2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K2(e,t){return!t||"object"!==V2(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W2(e){return(W2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H2(e,t){return(H2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z2=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=K2(this,(e=W2(t)).call.apply(e,[this].concat(o)))).onOpenPanel=function(e){var t=n.props.item,r=t.key,o=t.type,i={title:e&&e.title||o,type:o,key:r,payload:e};n.props.onOpenPanel(i)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H2(e,t)}(t,r["Component"]),function(e,t,n){t&&B2(e.prototype,t),n&&B2(e,n)}(t,[{key:"render",value:function(){var e=this.props.item,t=e.type,n=e.payload;if(t===fS.g)return n&&n.tabId?o.a.createElement(F2,{tabId:n.tabId,onOpenPanel:this.onOpenPanel}):(m.a.safeError("context.context-item.view","Could not find payload for Tab Item when trying to render TabGlance",new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),null);var r=lS()[t],i=r&&r.item;return i?o.a.createElement(i,U2({},n,{onOpenPanel:this.onOpenPanel,area:vo.c})):(m.a.safeError("issue",'Could not find a matching component for "'.concat(t,'"'),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),null)}}]),t}();z2.displayName="ContextItemView";var q2=g()(Object(f.f)("contextPanel",{onOpenPanel:"viewed"}),Object(i.connect)(function(){return{}},{onOpenPanel:function(e,t){return Object(f.m)(t,{name:"issue",attributes:{contextPanelKey:e.key,contextPanelType:e.type,tabItemsCount:e.payload&&e.payload.tabItems&&e.payload.tabItems.length}}),Ma(e)}}),Object(Oo.a)())(z2),G2=n("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js"),J2=n("./node_modules/@atlaskit/icon/glyph/chevron-up.js"),Q2=n.n(J2),Z2=Object(y.defineMessages)({showLessText:{id:"issue.views.issue-base.context.context-items.expander.show-less-button.show-less-text",defaultMessage:"Show less",description:"Show less fields in context panel"}});function Y2(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    & > span {\n        color: ",";\n        & > span:first-child {\n            align-self: auto;\n            margin-left: ","px;\n            margin-right: ","px;\n        }\n    }\n\n    &&,\n    &:hover,\n    &:focus {\n        height: inherit;\n        text-align: left;\n    }\n"]);return Y2=function(){return e},e}var $2=Object(a.default)(mx.a)(Y2(),vt.colors.B400,-d.e,-d.e/2),X2=function(e){var t=e.onCollapse,n=e.intl;return o.a.createElement($2,{externalId:"showmorelink.collapse",appearance:"subtle",iconBefore:o.a.createElement(Q2.a,{primaryColor:vt.colors.B400,size:"large"}),alt:n.formatMessage(Z2.showLessText),shouldFitContainer:!0,onClick:function(e,n){t(),Object(Ac.u)(n,"showLess")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-less-button.container"},o.a.createElement(y.FormattedMessage,Z2.showLessText))};X2.displayName="ShowLessButton";var e4=Object(y.injectIntl)(X2),t4=n("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/index.js");function n4(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-left: ","px;\n    margin-bottom: ","px;\n"]);return n4=function(){return e},e}var r4=a.default.div(n4(),-d.e,1.5*d.e);function o4(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i4=function(e){var t=e.isShowMoreExpanded,n=e.onCollapse,r=o4(e,["isShowMoreExpanded","onCollapse"]);return o.a.createElement("div",null,o.a.createElement(r4,null,t?o.a.createElement(e4,{onCollapse:n}):o.a.createElement(t4.a,r)))};i4.displayName="ContextItemsExpander";var a4=i4,s4=Object(eo.a)([Object(i.connect)(function(e,t){return{visibleSecondaryContextItemNameList:Object(G2.a)(t.visibleSecondaryContextItems,jS(e),Object(io.s)(e))}},{})])(a4);function c4(){var e=f4(["\n    padding-top: ","px;\n    box-shadow: inset 0 2px 0 0 ",";\n    margin-left: ","px;\n"]);return c4=function(){return e},e}function u4(){var e=f4(["\n    margin-top: ","px;\n    padding-bottom: 0;\n"]);return u4=function(){return e},e}function l4(){var e=f4(["\n    padding-bottom: 0;\n"]);return l4=function(){return e},e}function f4(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var p4=a.default.div(l4()),d4=a.default.div(u4(),-d.e),m4=a.default.div(c4(),d.e,vt.colors.N30,-d.e);function b4(e){return(b4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h4(e,t){return!t||"object"!==b4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g4(e){return(g4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v4(e,t){return(v4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O4=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=h4(this,(e=g4(t)).call.apply(e,[this].concat(o)))).state={layoutDescriptor:n.props.layoutDescriptor,contextItemsMap:{}},n.onExpand=function(){n.props.onSecondaryContextItemsVisibilityToggle(!0),n.setState({layoutDescriptor:n.props.layoutDescriptor})},n.onCollapse=function(){n.props.onSecondaryContextItemsVisibilityToggle(!1),n.setState({layoutDescriptor:n.props.layoutDescriptor})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v4(e,t)}(t,r["Component"]),function(e,t,n){t&&y4(e.prototype,t),n&&y4(e,n)}(t,[{key:"componentDidMount",value:function(){this.onRender(),this.onUpdateLayoutDescriptor()}},{key:"componentDidUpdate",value:function(e,t){this.shouldUpdateItemVisibility(e,t)&&this.onUpdateLayoutDescriptor()}},{key:"onUpdateLayoutDescriptor",value:function(){this.setState({layoutDescriptor:this.props.layoutDescriptor}),this.onRender()}},{key:"onRender",value:function(){var e=this.props.layoutDescriptor.context,t=e.primaryContextItems,n=e.secondaryContextItems,r=t.concat(n);this.props.onRendered(r)}},{key:"hasSkeletonBeenRemoved",value:function(){var e=function(e){return 0!==e.filter(function(e){return e.key===oo.l}).length},t=e(this.state.layoutDescriptor.context.primaryContextItems),n=e(this.props.layoutDescriptor.context.primaryContextItems);return t&&!n}},{key:"shouldUpdateItemVisibility",value:function(e,t){var n="VISIBLE"===this.props.secondaryContextItemVisibility,r=e.layoutDescriptor.context.primaryContextItems,o=this.props.layoutDescriptor.context.primaryContextItems,i=!Tx()(t.contextItemsMap,this.state.contextItemsMap),a=!n&&r.length<o.length,s=!n&&r.length===o.length&&!Tx()(r,o);return i||a||s||this.hasSkeletonBeenRemoved()}},{key:"renderContextItem",value:function(e){var t=this.state.contextItemsMap[e];return void 0!==t?o.a.createElement(q2,{item:t,key:e}):null}},{key:"renderPrimaryItems",value:function(){var e=this,t=this.state.layoutDescriptor.context.primaryContextItems.map(function(t){return e.renderContextItem(t.key)});return o.a.createElement(p4,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},t)}},{key:"renderSecondaryItems",value:function(){var e=this,t=this.state.layoutDescriptor.context.secondaryContextItems.map(function(t){return e.renderContextItem(t.key)});return o.a.createElement(C2.a,null,o.a.createElement(d4,null,t))}},{key:"render",value:function(){var e="HIDDEN"!==this.props.secondaryContextItemVisibility,t=this.props.visibleSecondaryContextItems,n=t.length;return o.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},this.renderPrimaryItems(),e?this.renderSecondaryItems():null,o.a.createElement(_s.a,{name:Ks.e},o.a.createElement("div",null,n>0&&o.a.createElement(s4,{isShowMoreExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse,visibleSecondaryContextItems:t,fieldCount:n}))),o.a.createElement(m4,null))}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.layoutDescriptor.context,n=t.primaryContextItems,r=t.secondaryContextItems,o={};return n.concat(r).forEach(function(e){o[e.key]=e}),{contextItemsMap:o}}}]),t}();O4.displayName="ContextItems",O4.displayName="ContextItems",O4.defaultProps={onRendered:u.a};var j4=Object(eo.a)([Object(i.connect)(function(e,t){return{visibleSecondaryContextItems:gS(t.layoutDescriptor.context.secondaryContextItems)(e)}},{})])(O4);function w4(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k4(e){return(k4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S4(e,t){return!t||"object"!==k4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C4(e){return(C4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P4(e,t){return(P4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I4=function(e){return function(t){Object(f.k)(t,{action:"viewed",actionSubjectId:e})}},x4=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S4(this,C4(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P4(e,t)}(t,r["Component"]),function(e,t,n){t&&E4(e.prototype,t),n&&E4(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"render",value:function(){return null}}]),t}();x4.displayName="ChangeboardingTrigger";var _4=function(e){var t=e.layoutDescriptor,n=e.isProjectAdmin,r=t.context,i=r.primaryContextItems,a=r.secondaryContextItems;if([].concat(w4(i),w4(a)).filter(function(e){return e.type===fS.g}).length>0){var s=n?"bentoTabsProjectAdminChangeboarding":"bentoTabsChangeboarding",c=g()(Object(f.f)(s,{onMount:"onMount"}),Object(f.e)(s))(x4);return o.a.createElement(c,{onMount:I4(s)})}return null};function M4(){return(M4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T4=function(e){var t=e.isCompletedLoading,n=e.isProjectAdmin,r=!e.hasJsd;return o.a.createElement(vV.a,null,function(i){var a=i.layoutDescriptor;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j4,M4({layoutDescriptor:a},e)),t&&r&&o.a.createElement(_4,{layoutDescriptor:a,isProjectAdmin:n}))})};T4.displayName="ContextItemsWithLayoutDescriptor";var A4=Object(eo.a)([Object(Am.a)(function(e){return{onRendered:function(t){var n=t.filter(function(e){return e.type===oo.r}).map(function(e){return e.payload});n.length>0&&e("ecosystem.glances",function(e){var t=e.reduce(function(e,t){e[t.appKey]||(e[t.appKey]={total:0,status:{}});var n=e[t.appKey];if(n.total+=1,t.status&&t.status.type){var r=n.status[t.status.type];n.status[t.status.type]=r>0?r+1:1}else{var o=n.status["N/A"];n.status["N/A"]=o>0?o+1:1}return e},{}),n=JSON.stringify(t);return{total:e.length,data:Object(fl.i)(n)(n)}}(n))}}}),Object(i.connect)(function(e){var t=Object(w.C)(e)||{};return{secondaryContextItemVisibility:Object(CS.c)(e)?"VISIBLE":"HIDDEN",isProjectAdmin:Object(va.c)(e),isCompletedLoading:Object(k.l)(e),hasJsd:!!t["jira-servicedesk"]}},function(e){return{onSecondaryContextItemsVisibilityToggle:function(t){return e(t?function(){return{type:S2.b}}():function(){return{type:S2.a}}())}}})])(T4),D4=n("./node_modules/@atlaskit/icon/glyph/arrow-left.js"),L4=n.n(D4);function N4(){return(N4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R4(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: ","px;\n    ",";\n    transition: ",";\n    overflow: hidden;\n    opacity: ",";\n    visibility: ",";\n"]);return R4=function(){return e},e}var F4=a.default.div(R4(),function(e){return e.show?e.width:0},function(e){return null!=e.height?"height: ".concat(e.height,"px"):""},function(e){return e.show?"width 0.5s cubic-bezier(0.15, 1, 0.3, 1)":"width 0.5s cubic-bezier(0.15, 1, 0.3, 1), opacity 0, 0.5s, visibility 0, 0.5s"},function(e){return e.show?1:0},function(e){return e.show?"visible":"hidden"}),V4=Object(r.forwardRef)(function(e,t){return o.a.createElement(F4,N4({innerRef:t},e),e.children)}),U4=n("./src/packages/issue/issue-view/src/common/util/dom-util/index.js");function B4(){var e=W4(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    flex: 1;\n    height: 30px;\n    margin: ","px ","px 0;\n"]);return B4=function(){return e},e}function K4(){var e=W4(["\n    width: inherit;\n    height: inherit;\n    opacity: 1;\n    background-color: ",";\n    display: flex;\n    flex-direction: column;\n    position: fixed;\n    overflow: hidden;\n    ",";\n"]);return K4=function(){return e},e}function W4(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var H4=a.default.div(K4(),vt.colors.N0,function(e){var t=e.top;return null!=t&&"top: ".concat(t,"px;")}),z4=a.default.div(B4(),d.e,d.e);function q4(e){return(q4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J4(e,t){return!t||"object"!==q4(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q4(e){return(Q4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z4(e,t){return(Z4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y4="issue.views.issue-base.context.side-panel",$4=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=J4(this,Q4(t).call(this,e))).getGlanceOffsetTop=function(e){var t=n.panelPositionerRef.current;if(e&&t){var r=e.getBoundingClientRect().top,o=t.getBoundingClientRect().top-r,i=Hr.D,a=document.getElementById(Hr.y);return a&&e.contains(a)&&(i=a.getBoundingClientRect().bottom+Hr.D-r),i=Math.max(i,Hr.D),Math.max(o,i)}},n.setSidePanelPosition=function(e){if(e){var t=e.panelTop,r=e.panelHeight;n.currentPosition.panelTop!==t&&n.fixedPanelRef.current&&(n.currentPosition.panelTop=t,n.fixedPanelRef.current.style.top=null!=t?"".concat(t,"px"):""),n.currentPosition.panelHeight!==r&&n.panelPositionerRef.current&&(n.currentPosition.panelHeight=r,n.panelPositionerRef.current.style.height=null!=r?"".concat(r,"px"):"")}},n.calculateSidePanelPosition=function(){var e=n.getScrollContainer(),t=Object(U4.a)(e);if(null!=e&&null!=t){var r=n.getGlanceOffsetTop(e)||0,o=r+e.getBoundingClientRect().top,i=t-r;return i<=0&&fl.h.safeError(Y4,"panel height is <= 0: panelHeight = '".concat(i),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),{panelTop:o,panelHeight:i<0?void 0:i}}},n.updateSidePanelPosition=function(){if(n.props.isOpen){var e=n.calculateSidePanelPosition();n.setSidePanelPosition(e)}},n.currentPosition={panelTop:void 0,panelHeight:void 0},n.fixedPanelRef=void 0,n.panelPositionerRef=void 0,n.scrollContainerCached=null,n.panelPositionerRef=Object(r.createRef)(),n.fixedPanelRef=Object(r.createRef)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z4(e,t)}(t,r["Component"]),function(e,t,n){t&&G4(e.prototype,t),n&&G4(e,n)}(t,[{key:"componentDidMount",value:function(){this.updateSidePanelPosition(),this.attachSidePanelListeners()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.updateSidePanelPosition()}},{key:"componentWillUnmount",value:function(){this.detachSidePanelListeners()}},{key:"getScrollContainer",value:function(){return this.scrollContainerCached||(this.scrollContainerCached=Object(U4.b)(this.panelPositionerRef.current,!1)),this.scrollContainerCached}},{key:"attachSidePanelListeners",value:function(){var e=this.getScrollContainer();e&&(e.addEventListener("scroll",this.updateSidePanelPosition),window.addEventListener("resize",this.updateSidePanelPosition,{passive:!0}))}},{key:"detachSidePanelListeners",value:function(){var e=this.getScrollContainer();e&&(e.removeEventListener("scroll",this.updateSidePanelPosition),window.removeEventListener("resize",this.updateSidePanelPosition))}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.children,r=e.width;return o.a.createElement(V4,{ref:this.panelPositionerRef,width:r,show:t},o.a.createElement(H4,{innerRef:this.fixedPanelRef},n))}}]),t}();$4.displayName="SidePanel",$4.displayName="SidePanel";var X4=function(e,t){var n=lS();return e.reduce(function(e,r){switch(r.type){case x2:var i=Object(ao.a)(Object(io.u)(r.id,t));if(!i||!Object.keys(n).includes(i))return fl.h.safeError("issue.views.issue-base.context.tab-panel","Could not find a matching component for field '".concat(i||"(unknown type)","' with id '").concat(r.id,"'"),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),e;var a=n[i].item;return e.push({fieldType:i,component:o.a.createElement(a,{key:r.id,fieldId:r.id})}),e;default:return fl.h.safeError("issue.views.issue-base.context.tab-panel","Unknown tab item '".concat(JSON.stringify(r),"'"),new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e})),e}},[])},e3=Object(y.defineMessages)({emptyStateHeader:{id:"issue.context.tab-panel.empty-state.header",defaultMessage:"No fields to show",description:"The error message displayed when a user opens a field tab and no fields are present"},emptyStateMessage:{id:"issue.context.tab-panel.empty-state.message",defaultMessage:"If you expect to see fields here, ask your Jira admin to check permissions and field configuration.",description:"The detailed message displayed when a user opens a field tab and no fields are present along with a call to action"},emptyStateMessageAdmin:{id:"issue.context.tab-panel.empty-state.message.admin",defaultMessage:"If you expect to see fields here, check your permission and field configuration settings.",description:"The detailed message displayed when a project admin opens a field tab and no fields are present along with a call to action"}});function t3(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    padding: ","px ","px ","px ","px;\n    overflow: auto;\n"]);return t3=function(){return e},e}var n3=a.default.div(t3(),2*d.e,d.e,d.e,d.e);function r3(e){return(r3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o3(Object(n),!0).forEach(function(t){a3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c3(e,t){return!t||"object"!==r3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u3(e){return(u3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l3(e,t){return(l3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f3=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c3(this,u3(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l3(e,t)}(t,r["Component"]),function(e,t,n){t&&s3(e.prototype,t),n&&s3(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.renderedItems,n=e.tabItems,r=new Set(t.map(function(e){return e.fieldType})),o=n.map(function(e){return e.id}).filter(function(e){return!r.has(e)});this.props.onComponentMounted({renderedFieldsCount:r.size,unrenderedFieldsCount:o.length,unrenderedFieldTypes:o.join(",")})}},{key:"render",value:function(){var e=this.props,t=e.renderedItems,n=e.isProjectAdmin,r=e.intl.formatMessage;return t.every(function(e){return null==e.component})?o.a.createElement(JK.a,{size:"narrow",isSubtle:!0,header:r(e3.emptyStateHeader),description:r(n?e3.emptyStateMessageAdmin:e3.emptyStateMessage)}):o.a.createElement(n3,null,t.map(function(e){return e.component}))}}]),t}();f3.displayName="TabPanel";var p3=Object(eo.a)([y.injectIntl,Object(f.f)("fieldTab",{onComponentMounted:"rendered"}),Object(i.connect)(function(e,t){return{onComponentMounted:function(e,n){Object(f.m)(n,{name:t.panelKey,attributes:i3({contextPanelType:t.type},e)})}}},{})])(f3),d3=Object(eo.a)([Object(f.b)({attributes:{contextPanelType:fS.g}}),Object(i.connect)(function(e,t){var n=t.type,r=t.panelKey,o=t.payload.tabItems;return{renderedItems:X4(o,Object(io.s)(e)),tabItems:o,type:n,panelKey:r,isProjectAdmin:Object(va.c)(e)}},{})])(p3);function m3(){var e=y3(["\n    display: flex;\n    height: 28px;\n    width: 28px;\n    border: none;\n    border-radius: 50%;\n    background: ",";\n    color: ",";\n    align-items: center;\n    padding-left: 2px;\n    margin-left: ","px;\n    &:hover {\n        cursor: pointer;\n    }\n"]);return m3=function(){return e},e}function b3(){var e=y3(["\n    width: 100%;\n    align-items: center;\n    flex-shrink: 0;\n    height: 40px;\n    display: flex;\n    position: relative;\n    box-shadow: inset 0 -2px 0 0 ",";\n    background: ",";\n    &:hover {\n        cursor: pointer;\n    }\n    &:focus {\n        box-shadow: 0 0 0 2px ",";\n        outline: 0;\n    }\n"]);return b3=function(){return e},e}function y3(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h3=a.default.div(b3(),vt.colors.N30,vt.colors.N0,vt.colors.B100),g3=a.default.button(m3(),vt.colors.N30,vt.colors.N60,d.e/2);function v3(e){return(v3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j3(e,t){return!t||"object"!==v3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w3(e){return(w3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k3(e,t){return(k3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E3=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j3(this,w3(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k3(e,t)}(t,r["Component"]),function(e,t,n){t&&O3(e.prototype,t),n&&O3(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.panel,r=e.onHidePanel,i=e.isOpen,a=e.layoutItemEntryMap,s=null;if(n){var c=a[n.type];s=n.type===fS.g?d3:c&&c.panel}var u=o.a.createElement(o.a.Fragment,null,o.a.createElement(h3,{onClick:r,tabIndex:"0","data-test-id":"issue.views.issue-base.context.context-panel.back"},o.a.createElement(g3,null,o.a.createElement(L4.a,{size:"medium",label:"Return"})),o.a.createElement(z4,null,n&&n.title)),s?o.a.createElement(s,n?{type:n.type,panelKey:n.key,payload:n.payload}:null):null);return o.a.createElement($4,{width:t+d.e,isOpen:i},u)}}]),t}();E3.displayName="ContextPanel",E3.displayName="ContextPanel";var S3=g()(Object(i.connect)(function(e){return{isOpen:Object(Ty.b)(e),panel:Object(Ty.a)(e),layoutItemEntryMap:lS()}},{onHidePanel:Ta}),Object(Oo.a)())(E3);function C3(e){return(C3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _3(e,t){return!t||"object"!==C3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M3(e){return(M3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T3(e,t){return(T3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A3(){var e=N3(["\n    display: flex;\n    height: 28px;\n    width: 26px;\n    border: none;\n    border-radius: 50%;\n    background: ",";\n    color: ",";\n    align-items: center;\n    padding-left: 2px;\n    margin-left: ","px;\n"]);return A3=function(){return e},e}function D3(){var e=N3(["\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    position: relative;\n    padding: ","px;\n"]);return D3=function(){return e},e}function L3(){var e=N3(["\n    width: 100%;\n    align-items: center;\n    height: 40px;\n    display: flex;\n    position: relative;\n    box-shadow: inset 0 -2px 0 0 ",";\n    background: ",";\n    &:hover {\n        cursor: pointer;\n    }\n    &:focus {\n        box-shadow: 0 0 0 2px ",";\n        outline: 0;\n    }\n"]);return L3=function(){return e},e}function N3(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R3=a.default.div(L3(),vt.colors.N30,vt.colors.N0,vt.colors.B100),F3=a.default.div(D3(),d.e),V3=a.default.div(A3(),vt.colors.N30,vt.colors.N60,d.e/2),U3=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_3(this,M3(t).call(this,e))).handleHideGlancePanel=function(){var e=n.props,t=e.appKey,r=e.moduleKey,o=e.glance,i=e.onGlanceHideAnalytics,a=e.onHideGlance;i(Vm(t,r,o.status)),a()},n.state={connectHost:window.connectHost},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T3(e,t)}(t,r["Component"]),function(e,t,n){t&&x3(e.prototype,t),n&&x3(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.state.connectHost||(fl.h.safeInfo("issue.ecosystem.glance.panel","Delayed initialization of ecosystem glance panel"),eb(function(t){return e.setState({connectHost:t})}))}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.appKey!==e.appKey,r=this.props.moduleKey!==e.moduleKey,o=this.state.connectHost!==t.connectHost,i=this.props.statusCategory!==e.statusCategory,a=this.props.refreshedOn!==e.refreshedOn;return n||r||o||i||a}},{key:"render",value:function(){var e=this.props,t=e.glance,n=e.glance.options.origin,r=e.refreshedOn,i=e.statusCategory,a=this.props.appKey,s=this.props.moduleKey,c=new UI.a;return o.a.createElement(o.a.Fragment,null,o.a.createElement(R3,{onClick:this.handleHideGlancePanel,tabIndex:"0"},o.a.createElement(V3,null,o.a.createElement(L4.a,{size:"medium",label:"Return"})),o.a.createElement(z4,null,t.name)),this.state.connectHost&&o.a.createElement(F3,null,o.a.createElement(VI.a,{key:"connect-iFrame-".concat(n,"-").concat(i,"-").concat(r),connectHost:this.state.connectHost,appKey:a,moduleKey:s,url:t.options.url,options:c.convertConnectOptions(t.options),height:"100%",width:"100%",connectIframeProvider:c,timeoutIndicator:function(){return o.a.createElement($I,{appName:t.name,appKey:a})}})))}}]),t}();U3.displayName="GlancePanel",U3.displayName="GlancePanel",U3.defaultProps={onGlanceHideAnalytics:u.a,refreshedOn:0};var B3=Object(eo.a)([Object(Am.a)(function(e){return{onGlanceHideAnalytics:function(t){return e("hide",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P3(Object(n),!0).forEach(function(t){I3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t))}}}),Object(i.connect)(function(e,t){return{glance:Object(ob.g)(t.appKey,t.moduleKey)(e),statusCategory:Object(C.b)(e),refreshedOn:Object(k.d)(e)}},function(e){return{onHideGlance:function(){e(function(){return{type:Nm.a}}()),e(Object(Kr.d)())}}})])(U3);function K3(e){return(K3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H3(e,t){return!t||"object"!==K3(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z3(e){return(z3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q3(e,t){return(q3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G3=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H3(this,z3(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q3(e,t)}(t,r["Component"]),function(e,t,n){t&&W3(e.prototype,t),n&&W3(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props.width;this.props.onMount({width:e})}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.openedGlance,r=e.glance,i=n&&n.appKey===r.appKey&&n.moduleKey===r.moduleKey,a=o.a.createElement(B3,{appKey:r.appKey,moduleKey:r.moduleKey,key:"issue.ecosystem.glance.panel_".concat(r.appKey,"_").concat(r.moduleKey)});return o.a.createElement($4,{width:t+d.e,isOpen:i},a)}}]),t}();G3.displayName="GlanceAnimatedPanel",G3.defaultProps={openedGlance:null,onMount:u.a};var J3,Q3=Object(Am.a)(function(e){return{onMount:function(t){return e("mounted",t)}}})(G3),Z3=n("./src/packages/platform/utils/constants/src/epic-color.js"),Y3=n("./node_modules/lodash/invert.js"),$3=n.n(Y3);function X3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var e5=(X3(J3={},Z3.f,vt.colors.P200),X3(J3,Z3.a,vt.colors.B200),X3(J3,Z3.c,vt.colors.G200),X3(J3,Z3.g,vt.colors.T200),X3(J3,Z3.h,vt.colors.Y200),X3(J3,Z3.e,vt.colors.R200),J3),t5=$3()(e5),n5=[{label:"purple",value:e5[Z3.f]},{label:"blue",value:e5[Z3.a]},{label:"green",value:e5[Z3.c]},{label:"teal",value:e5[Z3.g]},{label:"yellow",value:e5[Z3.h]},{label:"orange",value:e5[Z3.e]}],r5=Object(no.createSelector)(Object(io.p)(oo.G),function(e){return e&&e.value.id}),o5=Object(no.createSelector)(Object(io.e)(oo.j),function(e){return e&&e.key}),i5=Object(no.createSelector)(r5,o5,MG.d,function(e,t,n){if(!n)return!1;var r=n.find(function(t){return t.id===e});return!(!r||!r.fields)&&t in r.fields}),a5=function(e){return function(e){return e5[e]}(Object(Z3.j)(e))},s5=function(e){return Object(Z3.i)(function(e){return t5[e]||Z3.f}(e))},c5=n("./node_modules/@atlaskit/color-picker/index.js"),u5=Object(y.defineMessages)({label:{id:"issue.views.issue-base.foundation.label",defaultMessage:"Edit color",description:"Field label. Appears when a user hovers the field."},purple:{id:"issue.views.issue-base.foundation.purple",defaultMessage:"purple",description:"Color field option label. Appears when a user hovers the option."},blue:{id:"issue.views.issue-base.foundation.blue",defaultMessage:"blue",description:"Color field option label. Appears when a user hovers the option."},green:{id:"issue.views.issue-base.foundation.green",defaultMessage:"green",description:"Color field option label. Appears when a user hovers the option."},teal:{id:"issue.views.issue-base.foundation.teal",defaultMessage:"teal",description:"Color field option label. Appears when a user hovers the option."},yellow:{id:"issue.views.issue-base.foundation.yellow",defaultMessage:"yellow",description:"Color field option label. Appears when a user hovers the option."},orange:{id:"issue.views.issue-base.foundation.orange",defaultMessage:"orange",description:"Color field option label. Appears when a user hovers the option."}});function l5(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-left: -2px;\n    padding-top: ","px;\n    padding-right: ","px;\n    height: ","px;\n\n    /* color picker focused style clashes with some global css style on the page */\n    button:focus {\n        box-shadow: none;\n    }\n"]);return l5=function(){return e},e}var f5=a.default.div(l5(),d.e,d.e,4*d.e);function p5(e){return(p5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m5(e,t){return!t||"object"!==p5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b5(e){return(b5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y5(e,t){return(y5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h5=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=m5(this,(e=b5(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.onChange,o=t.onConfirm;r(e),o()},n.generatePalette=Object(lo.a)(function(e,t){return e.map(function(e){var n=e.value,r=e.label;return{value:n,label:t.formatMessage(u5[r])}})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y5(e,t)}(t,r["Component"]),function(e,t,n){t&&d5(e.prototype,t),n&&d5(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.intl;return o.a.createElement(f5,null,o.a.createElement(c5.a,{label:n.formatMessage(u5.label),popperProps:{positionFixed:!0,modifiers:{offset:{offset:"-10 5"}}},selectedColor:t,palette:this.generatePalette(n5,n),onChange:this.onChange}))}}]),t}();h5.displayName="UnsafeColorPicker",h5.displayName="ColorPicker";var g5=Object(eo.a)([y.injectIntl,Object(Ro.a)(function(e,t){return{fieldId:t.fieldId,transformFromStateValue:a5,transformToStateValue:s5}})])(h5),v5=Object(eo.a)([Object(i.connect)(function(e){return{field:Object(io.e)(oo.j)(e),isFieldExistsForIssueType:Object(M.t)()||i5(e),isPreview:Object(M.t)()||Object(k.r)(e)}},{})])(function(e){return e.field&&(Object(M.t)()||e.isFieldExistsForIssueType||e.isPreview)?o.a.createElement(g5,{fieldId:e.field.key}):null}),O5=n("./node_modules/@atlaskit/icon/glyph/settings.js"),j5=n.n(O5),w5=n("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),k5=n("./src/packages/issue/issue-view/src/selectors/request-type-selector.js"),E5=so.I[uY.k],S5=Object(no.createSelector)(w.f,w5.a,k.C,k.E,k5.a,function(e,t,n,r,o){return Object(M.P)()?n&&t?r===uY.j?o?"".concat(e,"/servicedesk/admin/").concat(n,"/request-types/request-type/").concat(o):so.I[uY.j]:"".concat(e,"/plugins/servlet/project-config/").concat(n,"/issuelayout?screenId=").concat(t):r?so.I[r]:E5:n&&t?"".concat(e,"/plugins/servlet/project-config/").concat(n,"/issuelayout?screenId=").concat(t):E5}),C5=n("./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js"),P5=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/messages.js"),I5=Object(y.defineMessages)({configureTooltipAdmin:{id:"issue.details.configuration-button.configure-fields.tooltip-admin",defaultMessage:"Configure fields",description:"Tooltip that appears when you hover over the button as Site Admin or Project Admin"},configureTooltipEndUser:{id:"issue.details.configuration-button.configure-fields.tooltip-end-user",defaultMessage:"Contact your admin to change the field order & layout",description:"Tooltip that appears when you hover over the button as End User"},configureTooltipAdminNoRequestType:{id:"issue.details.configuration-button.configure-fields.tooltip-admin-no-request-type",defaultMessage:"You can\u2019t configure the layout of an issue while it doesn\u2019t have a request type.",description:"Tooltip that appears when you hover over the button but the issue is in a Service Desk project and has no request type (as Site Admin or Project Admin)"}});function x5(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin: ","px ","px 0 0;\n    display: block;\n    min-width: 0;\n    max-width: 50%;\n    [type='button'] {\n        padding: 0;\n        font-size: 12px;\n        span {\n            margin: 0;\n            text-overflow: unset;\n        }\n        span[class*='Icon__IconWrapper'] {\n            width: 16px;\n        }\n    }\n"]);return x5=function(){return e},e}var _5=a.default.div(x5(),d.e/2,1.5*d.e),M5=Object(r.memo)(function(e){var t,n,r,i=e.isJiraServiceDesk,a=e.isSimplifiedProject,s=e.shouldShowClassicConfiguration,c=e.classicConfigurationLinkMode,u=e.configScreenUrl,l=e.intl.formatMessage;if(Object(M.P)()){var f=function(e,t){switch(e){case C5.d:return{tooltipText:t(I5.configureTooltipAdmin),isDisabled:!1};case C5.b:return{tooltipText:t(I5.configureTooltipEndUser),isDisabled:!0};case C5.a:return{tooltipText:t(I5.configureTooltipAdminNoRequestType),isDisabled:!0};case C5.c:default:return{isHidden:!0}}}(c,l);if(f.isHidden)return null;t=f.tooltipText,r=f.isDisabled,n=l(P5.a.configure)}else{if(i||a)return null;t=l(s?I5.configureTooltipAdmin:I5.configureTooltipEndUser),n=l(P5.a.configure),r=!s}return o.a.createElement(_5,null,o.a.createElement(Je.a,{position:"mouse",mousePosition:"left",content:t},o.a.createElement(D.b,{target:"_blank",isDisabled:r,appearance:"subtle-link",iconBefore:o.a.createElement(j5.a,null),href:u,rel:"noopener noreferrer",onClick:function(e,t){return Object(Ac.u)(t,"configureButton")}},n)))}),T5=Object(eo.a)([Object(i.connect)(function(e){return{isJiraServiceDesk:Object(w.u)(e),isSimplifiedProject:Object(k.s)(e),shouldShowClassicConfiguration:Object(C5.i)(e),classicConfigurationLinkMode:Object(C5.g)(e),configScreenUrl:S5(e)}},{}),y.injectIntl])(M5),A5=Object(no.createSelector)(k.e,function(e){return e.createdDate});function D5(){var e=R5(["\n        :hover {\n            color: ",";\n        }\n    "]);return D5=function(){return e},e}function L5(){var e=R5(["\n    color: ",";\n    padding-top: ","px;\n    white-space: nowrap;\n    margin-top: 0;\n    font-size: ","px;\n    line-height: ",";\n"]);return L5=function(){return e},e}function N5(){var e=R5(["\n    display: flex;\n    margin-top: ","px;\n"]);return N5=function(){return e},e}function R5(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var F5=a.default.div(N5(),d.e/2),V5=a.default.small(L5(),vt.colors.N200,d.e/4,1.5*d.e,d.e/6),U5={whenDisplaySettingSwitchable:Object(a.css)(D5(),vt.colors.N500)},B5=function(e){var t=e.text,n=e.date,r=e.timeZone;return o.a.createElement(F5,null,o.a.createElement(V5,null,t,"\xa0",o.a.createElement(H_.b,{value:n,timeZone:r,extraStyles:U5,tooltipPosition:"right"})))};B5.displayName="AuditDate";var K5=B5,W5=Object(eo.a)([Object(i.connect)(function(e){return{timeZone:Object(k.y)(e)}},{})])(K5);function H5(e){return(H5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q5(e,t){return!t||"object"!==H5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G5(e){return(G5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J5(e,t){return(J5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q5=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q5(this,G5(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J5(e,t)}(t,r["Component"]),function(e,t,n){t&&z5(e.prototype,t),n&&z5(e,n)}(t,[{key:"render",value:function(){var e=this.props.date;return e&&o.a.createElement(W5,{date:e,text:o.a.createElement(y.FormattedMessage,{id:"issue.created-date-text-short",defaultMessage:"Created"})})}}]),t}();Q5.displayName="CreatedDate",Q5.defaultProps={date:null};var Z5=Object(eo.a)([Object(i.connect)(function(e){return{date:A5(e)}},{})])(Q5),Y5=Object(no.createSelector)(k.e,function(e){return e.updatedDate});function $5(e){return($5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e6(e,t){return!t||"object"!==$5(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function t6(e){return(t6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n6(e,t){return(n6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e6(this,t6(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n6(e,t)}(t,r["Component"]),function(e,t,n){t&&X5(e.prototype,t),n&&X5(e,n)}(t,[{key:"render",value:function(){var e=this.props.date;return e&&o.a.createElement(W5,{date:e,text:o.a.createElement(y.FormattedMessage,{id:"issue.updated-date-text-short",defaultMessage:"Updated"})})}}]),t}();r6.displayName="UpdatedDate",r6.defaultProps={date:null};var o6=Object(eo.a)([Object(i.connect)(function(e){return{date:Y5(e)}},{})])(r6);function i6(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-top: ","px;\n    margin-right: ","px;\n    flex: 1;\n"]);return i6=function(){return e},e}var a6=a.default.div(i6(),d.e/2,2*d.e),s6=function(){return o.a.createElement(a6,null,o.a.createElement(Z5,null),o.a.createElement(o6,null))},c6=n("./src/packages/common-legacy-do-not-add-anything-new/src/growth-experiments/index.js"),u6=n("./src/packages/issue/issue-view/src/actions/confluence-pages-xflow-action-type.js"),l6=n("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-creator.js");function f6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d6=function(e){var t=e.fieldKey,n=e.propName,r=e.isEnabled,i=void 0===r?function(){return!0}:r,a=e.FieldValueSubscriber,s=void 0===a?_c.a:a;return function(e){return function(r){if(!i())return o.a.createElement(e,r);var a=r.issueKey;return o.a.createElement(s,{issueKey:a,fieldKey:t},function(t){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f6(Object(n),!0).forEach(function(t){p6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,p6({},n,t));return o.a.createElement(e,i)})}}},m6=(n("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),[uX.c.AGILITY_BACKLOG,uX.c.FULL_ISSUE,uX.c.SERVICEDESK_QUEUES_ISSUE,uX.c.STANDARD_ROADMAP_ISSUE,uX.c.GLOBAL_ISSUE_NAVIGATOR_ISSUE,uX.c.PROJECT_ISSUE_NAVIGATOR,uX.c.SIMPLE_SOFTWARE_BOARD,uX.c.SOFTWARE_ISSUE,uX.c.SOFTWARE_BACKLOG_ISSUE]),b6=Object(no.createSelector)(VG.a,w.t,w.b,function(e,t,n){return!e&&!t&&function(e){return m6.includes(e.toString())}(n)}),y6=n("./node_modules/@atlaskit/icon/glyph/child-issues.js"),h6=n.n(y6),g6=n("./node_modules/@atlaskit/icon/glyph/link.js"),v6=n.n(g6),O6=n("./node_modules/@atlaskit/icon/glyph/page.js"),j6=n.n(O6),w6=n("./node_modules/@atlaskit/icon/glyph/subtask.js"),k6=n.n(w6),E6=n("./src/packages/wrm/src/index.js");function S6(){var e=x6(["\n    width: 32px;\n    height: 32px;\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMngzMl9yb3VuZGVkZWRnZTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IjMyeDMyX3JvdW5kZWRlZGdlIiBmaWxsPSIjRkZGRkZGIj4gICAgICAgICAgICA8cGF0aCBkPSJNMywwIEMxLjM0MzE0NTc1LDMuMDQzNTkxODhlLTE2IC0yLjAyOTA2MTI1ZS0xNiwxLjM0MzE0NTc1IDAsMyBMMCwwIEwzLDAgWiBNMjksMCBMMzIsMCBMMzIsMyBDMzIsMS4zNDMxNDU3NSAzMC42NTY4NTQyLC0zLjA0MzU5MTg4ZS0xNiAyOSwwIFogTTMyLDI5IEwzMiwzMiBMMjksMzIgQzMwLjY1Njg1NDIsMzIgMzIsMzAuNjU2ODU0MiAzMiwyOSBaIE0zLDMyIEwwLDMyIEwwLDI5IEMyLjAyOTA2MTI1ZS0xNiwzMC42NTY4NTQyIDEuMzQzMTQ1NzUsMzIgMywzMiBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==);\n"]);return S6=function(){return e},e}function C6(){var e=x6(["\n    width: 8px;\n"]);return C6=function(){return e},e}function P6(){var e=x6(["\n    flex-grow: 1;\n"]);return P6=function(){return e},e}function I6(){var e=x6(["\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n"]);return I6=function(){return e},e}function x6(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _6=a.default.div(I6()),M6=Object(a.default)(po.a)(P6()),T6=Object(a.default)(po.a)(C6()),A6=a.default.div(S6()),D6=function(){return o.a.createElement(mo.a,null,o.a.createElement(po.b,null),o.a.createElement(fo.a,{paddingTop:4,paddingBottom:9},o.a.createElement(_6,null,o.a.createElement(A6,null),o.a.createElement(T6,null),o.a.createElement(A6,null),o.a.createElement(T6,null),o.a.createElement(A6,null),o.a.createElement(M6,null))))},L6=n("./node_modules/@atlaskit/icon/glyph/addon.js"),N6=n.n(L6),R6=n("./node_modules/lodash/differenceBy.js"),F6=n.n(R6),V6=n("./src/packages/common-legacy-do-not-add-anything-new/src/analytics-v2-wrapped-components/dropdown-item.js");function U6(e){return(U6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B6(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function K6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K6(Object(n),!0).forEach(function(t){H6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function H6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q6(e,t){return!t||"object"!==U6(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G6(e){return(G6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J6(e,t){return(J6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q6(){var e=$6(["\n    color: ",";\n"]);return Q6=function(){return e},e}function Z6(){var e=$6(["\n    display: inline-flex;\n"]);return Z6=function(){return e},e}function Y6(){var e=$6(["\n    padding: ","px;\n"]);return Y6=function(){return e},e}function $6(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var X6=3,e8=3*d.e,t8=a.default.span(Y6(),d.e/2),n8=a.default.div(Z6()),r8=a.default.span(Q6(),vt.colors.B400),o8=Object(y.defineMessages)({quickAddAddonLabel:{id:"issue.quickadd.addon",defaultMessage:"Add app",description:""},addMore:{id:"issue.quickadd.addon.add.more",defaultMessage:"Add apps",description:""},addWebLinkTooltip:{id:"issue.quick-add.add-web-link-label",defaultMessage:"Add web link",description:"The tooltip to be used on the quick add button for adding web link"}}),i8=function(e){return!!e.tooltip&&!!e.iconUrl},a8=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=q6(this,(e=G6(t)).call.apply(e,[this].concat(i)))).getExtensionsToShowIconsFor=function(){return n.props.availableAddons.filter(i8).slice(0,X6)},n.getExtensionsToShowInDropdown=function(){return F6()(n.props.availableAddons,n.getExtensionsToShowIconsFor(),"moduleKey")},n.transformExtension=function(e){var r=o.a.createElement(V6.b,{key:e.moduleKey,elemBefore:t.getIcon(e),onClick:n.itemSelected(e)},e.name);return e.tooltip?o.a.createElement(Je.a,{content:e.tooltip,key:e.moduleKey},r):r},n.createDropdownItems=function(e){return o.a.createElement(SV.a,null,e.map(n.transformExtension),n.props.canInstallAddons&&o.a.createElement(V6.b,{key:o8.addMore.id,elemBefore:o.a.createElement(r8,null,o.a.createElement(wl.a,{label:n.props.intl.formatMessage(o8.addMore)})),onClick:n.props.onAddExtensionsClick,href:"".concat(n.props.baseUrl,"/plugins/servlet/upm/marketplace/featured"),target:"_new"},o.a.createElement(r8,null,n.props.intl.formatMessage(o8.addMore))))},n.createAddWebLinkDropDownItem=function(){return o.a.createElement(SV.a,null,o.a.createElement(V6.b,{key:o8.addWebLinkTooltip.id,elemBefore:o.a.createElement(x0.a,{label:n.props.intl.formatMessage(o8.addWebLinkTooltip)}),onClick:n.props.onAddWebLinkClick},n.props.intl.formatMessage(o8.addWebLinkTooltip)))},n.itemSelected=function(e){return function(){var t=Object(_V.a)(e.moduleKey,10),r="".concat(e.appKey,"_").concat(e.moduleKey);e.showByDefault||n.props.contentPanelsInIssue.includes("".concat(e.appKey,"_").concat(t))||n.props.contentPanelsInIssue.includes(r)?(n.props.onContentPanelFocusAnalytics(Bm(e.appKey,e.moduleKey)),n.props.onSelectContentPanel(r),n.sendQuickAddClickedEvent(!1,e.appKey,e.moduleKey)):(n.props.onContentPanelAddAnalytics(Bm(e.appKey,e.moduleKey)),n.props.onAddExtension(r),n.sendQuickAddClickedEvent(!0,e.appKey,e.moduleKey))}},n.sendQuickAddClickedEvent=function(e,t,r){n.props.onQuickAddClick(rb,{addon_key:t,key:r},{isNewToIssue:e.toString()})},n.transformExtensionToQuickIcon=function(e,r){return n.props.createItemView({id:Object(M.v)()?e.appKey:e.moduleKey,label:e.tooltip||e.name,icon:t.getIcon(e),onClick:n.itemSelected(e),itemIndex:n.props.startIndex+r})},n.renderVisibleExtensionIcons=function(){return n.getExtensionsToShowIconsFor().map(function(e,t){return n.transformExtensionToQuickIcon(e,t)})},n.renderDropdownExtensions=function(){var e=n.props,t=e.intl,r=e.canInstallAddons,i=n.getExtensionsToShowInDropdown();return i.length>0||r||Object(M.eb)()?o.a.createElement(CV.a,{key:"ecosystem-actions-dropdown",triggerType:"button",triggerButtonProps:{spacing:"none",theme:function(e,t){var n=e(t);return W6({},n,{buttonStyles:W6({},n.buttonStyles,{margin:0})})},iconBefore:o.a.createElement(t8,null,o.a.createElement(IV.a,{size:"medium",label:t.formatMessage(o8.quickAddAddonLabel)}))}},Object(M.eb)()&&n.createAddWebLinkDropDownItem(),n.createDropdownItems(i)):null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J6(e,t)}(t,r["Component"]),function(e,t,n){t&&z6(e.prototype,t),n&&z6(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.availableAddons,n=e.contentPanelsInIssue,r=e.onContentPanelListLoadedAnalytics;t.length>0&&r(function(e,t){var n=0,r=e.reduce(function(e,r){e[r.appKey]||(e[r.appKey]={total:0,totalOnPage:0});var o=e[r.appKey];o.total+=1;var i="".concat(r.appKey,"_").concat(r.moduleKey);return t.includes(i)&&(o.totalOnPage+=1,n+=1),e},{}),o=JSON.stringify(r);return{totalOnPage:n,total:e.length,data:Object(fl.i)(o)(o)}}(t,n))}},{key:"render",value:function(){var e=this.renderVisibleExtensionIcons(),t=this.renderDropdownExtensions();return o.a.createElement(n8,null,[].concat(B6(e),[t]))}}],[{key:"getIcon",value:function(e){var t=this;return e.iconUrl?o.a.createElement(Lm.a,{title:e.name,url:e.iconUrl,width:e8,height:e8,fallback:function(){return t.getFallbackIcon({name:e.name})}}):this.getFallbackIcon({name:e.name})}}]),t}();a8.displayName="UnsafeAddonsQuickAdd",a8.defaultProps={availableAddons:[],contentPanelsInIssue:[],onContentPanelListLoadedAnalytics:u.a,onContentPanelAddAnalytics:u.a,onContentPanelFocusAnalytics:u.a,onAddExtensionsClick:u.a,onQuickAddClick:u.a,canInstallAddons:!1,onAddWebLinkClick:u.a},a8.getFallbackIcon=function(e){return o.a.createElement(N6.a,{size:"medium",label:e.name})};var s8=g()(Object(Am.a)(function(e){return{onContentPanelListLoadedAnalytics:function(t){return e("load",W6({},t))},onContentPanelAddAnalytics:function(t){return e("add",W6({},t))},onContentPanelFocusAnalytics:function(t){return e("focus",W6({},t))}}}),Object(f.f)("addWebLink",{onAddWebLinkClick:"clicked"}),Object(f.s)({onAddExtensionsClick:"quickAddDropdownMenuItem",onAddWebLinkClick:"quickAddWebLink"}),Object(i.connect)(function(e){return{availableAddons:Object(ob.c)(e),contentPanelsInIssue:Object(ob.k)(e),baseUrl:Object(w.f)(e),canInstallAddons:Object(ob.d)(e),onQuickAddClick:function(e,t,n){nb(e,t,n)}}},function(e){return{onAddWebLinkClick:function(){return e(Object(k0.k)())}}}),Object(Oo.a)())(Object(y.injectIntl)(a8)),c8=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/index.js"),u8=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg"),l8=n.n(u8),f8=Object(y.defineMessages)({addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment",description:"The tooltip to be used on the quick add button for adding an attachment to an issue"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask",description:"The tooltip to be used on the quick add button for adding a subtask for an issue"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue",description:"The tooltip to be used on the quick add button for creating an issue link"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue",description:"The tooltip to be used on the quick add button for creating a child in an agility issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page",description:"The tooltip to be used on the quick add button for linking a Confluence page"},linkConfluencePageXFlowTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-xflow-label",defaultMessage:"Link a Confluence page",description:"The tooltip to be used on the quick add button for opening the XFlow dialog expanding Confluence"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic",description:"The tooltip to be used on the quick add button for adding an issue to the epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach",description:"The label to be used on the quick add button for adding an attachment to an issue"},createSubtaskLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask",description:"The label to be used on the quick add button for adding a subtask for an issue"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue",description:"The label to be used on the quick add button for creating an issue link"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue",description:"The label to be used on the quick add button for creating a child in an agility issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link page",description:"The label to be used on the quick add button for linking a Confluence page"},linkConfluencePageXFlowLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-xflow-label",defaultMessage:"Link page",description:"The label to be used on the quick add button for opening the XFlow dialog expanding Confluence"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic",description:"The label to be used on the quick add button for adding an issue to the epic"},linkIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident",description:"The label to be used on the quick add button for linking Opsgenie incidents with JSD requests"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident",description:"The tooltip to be used on the quick add button for linking Opsgenie incidents with JSD requests"}});function p8(){var e=m8(["\n    height: ","px;\n    width: ","px;\n"]);return p8=function(){return e},e}function d8(){var e=m8(["\n    margin-bottom: ","px;\n    padding: ","px 0;\n    display: inline-flex;\n"]);return d8=function(){return e},e}function m8(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b8=a.default.div(d8(),d.e/2,d.e/2),y8=a.default.img(p8(),3*d.e,3*d.e);function h8(e){return(h8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g8(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O8(e,t){return!t||"object"!==h8(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j8(e){return(j8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w8(e,t){return(w8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k8=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=O8(this,(e=j8(t)).call.apply(e,[this].concat(i)))).state={shouldUseCompactButtons:!1},n.componentDidMount=function(){n.props.fetchConfluenceAppLinks(),n.setShouldUseCompactButtons(),n.props.shouldFireLinkConfluencePageXFlowExposureEvent&&Object(c6.a)()},n.componentDidUpdate=function(){n.setShouldUseCompactButtons()},n.setQuickAddRef=function(e){n.quickAddRef=e},n.setShouldUseCompactButtons=function(){var e=!n.props.containerWidth||n.props.containerWidth<=n.updateAndGetQuickAddExpandedWidth();n.state.shouldUseCompactButtons!==e&&n.setState({shouldUseCompactButtons:e})},n.getQuickAddRefClientWidth=function(){return n.quickAddRef?n.quickAddRef.clientWidth:0},n.updateAndGetQuickAddExpandedWidth=function(){return n.quickAddExpandedWidth<n.getQuickAddRefClientWidth()&&(n.quickAddExpandedWidth=n.getQuickAddRefClientWidth()),n.quickAddExpandedWidth},n.quickAddExpandedWidth=0,n.quickAddRef=void 0,n.sendAnalyticsEventFunc=function(e,t,r){return function(){r(),n.props.triggerButtonClickAnalytics(e,t,4)}},n.createItemView=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.tooltip,i=e.label,a=e.compactMode,s=e.icon,c=e.onClick,u=e.itemIndex,l=e.testId;return o.a.createElement(Je.a,{content:r,position:"bottom",key:t},o.a.createElement(c8.a,{key:t,id:t,icon:s,onClick:n.sendAnalyticsEventFunc(t,u,c),label:i,compactMode:a,testId:l}))},n.renderSkeleton=function(){return o.a.createElement(D6,null)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w8(e,t)}(t,r["Component"]),function(e,t,n){t&&v8(e.prototype,t),n&&v8(e,n)}(t,[{key:"render",value:function(){var e=this;if(this.props.isPreview)return this.renderSkeleton();var t=this.props,n=t.intl,r=t.locale,i=t.canCreateAttachment,a=t.shouldShowCreateSubtaskButton,s=t.shouldShowIssueInEpicButton,c=t.canCreateIssueLink,u=t.onAddAttachmentClick,l=t.onCreateSubtaskClick,f=t.onCreateIssueInEpicClick,p=t.onAddIssueLinkClick,d=t.onChildCreateClick,m=t.supportsChildCreation,b=t.isServiceDesk,y=t.canLinkConfluencePage,h=t.canLinkConfluencePageXFlow,g=t.onLinkConfluencePageClick,v=t.onLinkConfluencePageXFlowClick,O=t.incidentLinking,j=t.onLinkIncidentClick,w=t.projectType,k=[{id:"attachment",tooltip:n.formatMessage(f8.addAttachmentTooltip),label:n.formatMessage(f8.addAttachmentLabel),icon:o.a.createElement(ID.a,{size:"medium",label:n.formatMessage(f8.addAttachmentTooltip)}),onClick:u,itemIndex:0,shouldRender:!b&&i,testId:""},{id:"create-subtask",tooltip:n.formatMessage(f8.createSubtaskTooltip),label:n.formatMessage(f8.createSubtaskLabel),icon:o.a.createElement(k6.a,{size:"medium",label:n.formatMessage(f8.createSubtaskTooltip)}),onClick:l,itemIndex:1,shouldRender:a,testId:""},{id:"create-issue-in-epic",tooltip:n.formatMessage(f8.createIssueInEpicTooltip),label:n.formatMessage(f8.createIssueInEpicLabel),icon:o.a.createElement(h6.a,{size:"medium",label:n.formatMessage(f8.createIssueInEpicTooltip)}),onClick:f,itemIndex:1,shouldRender:s,testId:""},{id:"create-child",tooltip:n.formatMessage(f8.createChildTooltip),label:n.formatMessage(f8.createChildLabel),icon:o.a.createElement(h6.a,{size:"medium",label:n.formatMessage(f8.createChildTooltip)}),onClick:d,itemIndex:1,shouldRender:m,testId:""},{id:"issue-links",tooltip:n.formatMessage(f8.addIssueLinkTooltip),label:n.formatMessage(f8.addIssueLinkLabel),icon:o.a.createElement(v6.a,{size:"medium",label:n.formatMessage(f8.addIssueLinkTooltip)}),onClick:p,itemIndex:2,shouldRender:c,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:n.formatMessage(f8.linkConfluencePageTooltip),label:n.formatMessage(f8.linkConfluencePageLabel),icon:o.a.createElement(j6.a,{size:"medium",label:n.formatMessage(f8.linkConfluencePageTooltip)}),onClick:g,itemIndex:3,shouldRender:y,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-confluence-page-xflow",tooltip:n.formatMessage(f8.linkConfluencePageXFlowTooltip),label:n.formatMessage(f8.linkConfluencePageXFlowLabel),icon:o.a.createElement(j6.a,{size:"medium",label:n.formatMessage(f8.linkConfluencePageXFlowTooltip)}),onClick:function(){return v(w)},itemIndex:3,shouldRender:h,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page-xflow"},{id:"link-incident",tooltip:n.formatMessage(f8.linkIncidentTooltip),label:n.formatMessage(f8.linkIncidentLabel),icon:o.a.createElement(y8,{src:l8.a}),onClick:j,itemIndex:3,shouldRender:!!O,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"}].filter(function(e){return e.shouldRender}).map(function(t){var n=t.id,r=t.tooltip,o=t.label,i=t.icon,a=t.onClick,s=t.itemIndex,c=t.testId;return e.createItemView({compactMode:e.state.shouldUseCompactButtons,id:n,itemIndex:s,tooltip:r,label:o,icon:i,onClick:a,testId:c})}),E=o.a.createElement(s8,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:function(t){e.props.onSelectContentPanel(t),e.props.triggerButtonClickAnalytics("select_contentpanel",3,4)},onAddExtension:function(t){e.props.onAddExtension(t),e.props.triggerButtonClickAnalytics("add_contentpanel",3,4)},createItemView:this.createItemView,startIndex:k.length}),S=[].concat(g8(k),[E]);return o.a.createElement(_s.a,{name:Ks.d},S.length?o.a.createElement(E6.b,{modules:[Object(E6.d)(r)]},function(){return o.a.createElement(b8,{innerRef:e.setQuickAddRef},S)}):o.a.createElement("div",null))}}]),t}();k8.displayName="UnsafeQuickAddItems",k8.displayName="QuickAddItems",k8.defaultProps={shouldFireLinkConfluencePageXFlowExposureEvent:!1,triggerButtonClickAnalytics:u.a,canCreateIssueLink:!1,canCreateSubtask:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canLinkConfluencePageXFlow:!1};var E8=Object(y.injectIntl)(Object(Oo.a)()(k8));function S8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P8=g()(d6({fieldKey:oo.fb,propName:"incidentLinking",isEnabled:M.O}),Object(i.connect)(function(e){var t=Object(Bw.a)(e),n=YZ(e),r=Object(YU.k)(e),o=Object(k.p)(e),i=n&&!r&&o,a=t&&!r&&!i,s=Object(c6.w)()&&Object(c6.l)()&&b6(e),c=Object(c6.w)()&&Object(c6.k)()&&b6(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S8(Object(n),!0).forEach(function(t){C8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({locale:Object(w.D)(e),canCreateAttachment:Object(aU.b)(e),shouldFireLinkConfluencePageXFlowExposureEvent:s,shouldShowCreateSubtaskButton:a,shouldShowIssueInEpicButton:i,supportsChildCreation:r,canCreateIssueLink:Object(dY.a)(e),isPreview:Object(k.r)(e),isServiceDesk:Object(w.u)(e),canLinkConfluencePage:Object(VG.a)(e),canLinkConfluencePageXFlow:c,projectType:Object(k.E)(e)},Object(M.O)()?{issueKey:Object(w.B)(e)}:{})},function(e){return{fetchConfluenceAppLinks:function(){return e(Object(l6.a)())},onAddAttachmentClick:function(){return e(Object(LC.c)())},onCreateSubtaskClick:function(){return e(function(){return{type:JU.f}}())},onCreateIssueInEpicClick:function(){return e(function(){return{type:JU.e}}())},onAddIssueLinkClick:function(){return e(Object(fY.a)())},onChildCreateClick:function(){return e(function(){return{type:JU.c}}())},onLinkConfluencePageClick:function(){return e(Object(FG.h)())},onLinkConfluencePageXFlowClick:function(t){return e(function(e){return{type:u6.a,payload:e}}(t))},onLinkIncidentClick:function(){return e(X$())},onAddExtension:function(t){return e(Object(xV.b)(t))},onSelectContentPanel:function(t){return e(Object(xV.d)(t))}}}),Object(Am.a)(function(e){return{triggerButtonClickAnalytics:function(t,n,r){return e("".concat(t,".click"),{index:n,actions:r})}}}),ua)(E8),I8=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-action-creator.js"),x8=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),_8=n("./node_modules/@atlaskit/icon/glyph/flag-filled.js"),M8=n.n(_8);function T8(){var e=D8(["\n    color: ",";\n    display: inline-block;\n    overflow: hidden;\n    line-height: ","px;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: ","px;\n"]);return T8=function(){return e},e}function A8(){var e=D8(["\n    margin-top: ","px;\n    display: inline-flex;\n    vertical-align: baseline;\n    margin-left: -","px;\n    height: ","px;\n"]);return A8=function(){return e},e}function D8(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var L8=25*d.e,N8=a.default.div(A8(),d.e/2,d.e/4,3*d.e),R8=a.default.span(T8(),vt.colors.N90,3*d.e,L8);function F8(e){return(F8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U8(e,t){return!t||"object"!==F8(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B8(e){return(B8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K8(e,t){return(K8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W8=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=U8(this,(e=B8(t)).call.apply(e,[this].concat(i)))).state={hasOverflow:!1},n.altStatusLabel=null,n.renderAltStatus=function(){return o.a.createElement(R8,{innerRef:function(e){n.altStatusLabel=e}},n.props.name)},n.renderAltStatusWithTooltip=function(){return o.a.createElement(Je.a,{content:n.props.name,position:"bottom"},n.renderAltStatus())},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K8(e,t)}(t,r["Component"]),function(e,t,n){t&&V8(e.prototype,t),n&&V8(e,n)}(t,[{key:"componentDidMount",value:function(){this.updateOverflow()}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this.setState({hasOverflow:!1})}},{key:"componentDidUpdate",value:function(){this.updateOverflow()}},{key:"updateOverflow",value:function(){if(!this.altStatusLabel)return!1;var e=this.altStatusLabel.clientWidth>=L8;return e!==this.state.hasOverflow&&this.setState({hasOverflow:e}),e}},{key:"render",value:function(){return o.a.createElement(N8,{onClick:this.props.onClick,"data-test-id":"issue.views.issue-base.foundation.status.alt-view"},this.props.icon,this.state.hasOverflow?this.renderAltStatusWithTooltip():this.renderAltStatus())}}]),t}();W8.displayName="AltStatusField",W8.defaultProps={onClick:u.a};var H8,z8=Object(y.defineMessages)({flagged:{id:"issue.status-field.flagged",defaultMessage:"Flagged",description:""}});function q8(e){return(q8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J8(e,t){return!t||"object"!==q8(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q8(e){return(Q8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z8(e,t){return(Z8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y8=Object(y.injectIntl)(H8=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J8(this,Q8(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z8(e,t)}(t,r["Component"]),function(e,t,n){t&&G8(e.prototype,t),n&&G8(e,n)}(t,[{key:"render",value:function(){var e=this.props.intl.formatMessage(z8.flagged);return o.a.createElement(W8,{onClick:this.props.onClick,name:e,icon:o.a.createElement(M8.a,{size:"medium",primaryColor:vt.colors.R300,label:e})})}}]),t}())||H8,$8=Object(Am.a)(function(e){return{onClick:function(){e("click")}}})(Y8),X8=Object(y.defineMessages)({label:{id:"issue.title-for-status-field",defaultMessage:"Status",description:"The description for a field called Status"}}),e9=function(e){return o.a.createElement(W8,{name:e.name,icon:o.a.createElement(YT.a,{size:"medium",label:e.name,primaryColor:vt.colors.G400})})};function t9(){var e=o9(["\n    padding-right: ","px;\n"]);return t9=function(){return e},e}function n9(){var e=o9(["\n    display: flex;\n    flex-wrap: wrap;\n    padding-bottom: ","px;\n"]);return n9=function(){return e},e}function r9(){var e=o9(["\n    padding-top: ","px;\n"]);return r9=function(){return e},e}function o9(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var i9=a.default.div(r9(),1.5*d.e),a9=a.default.div(n9(),d.e),s9=a.default.div(t9(),d.e);function c9(e){return(c9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l9(e,t){return!t||"object"!==c9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f9(e){return(f9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p9(e,t){return(p9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d9=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=l9(this,(e=f9(t)).call.apply(e,[this].concat(o)))).onStatusSubmitted=function(e,t,r,o){Object(Ac.t)(o,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:r.transition.hasScreen,isConditional:r.transition.isConditional,newStatusField:!0,issueHierarchyLevel:n.props.issueHierarchyLevel})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p9(e,t)}(t,r["Component"]),function(e,t,n){t&&u9(e.prototype,t),n&&u9(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.onExperienceSuccess()}},{key:"render",value:function(){var e=this.props,t=e.issueKey,n=e.initialValue,r=e.isEditable,i=e.isFlagged,a=e.resolution,s=e.intl.formatMessage,c=e.onStatusChanged,u=e.onEditCancel;return o.a.createElement(i9,null,!Object(M.z)()&&o.a.createElement(Eo.a,null,o.a.createElement(Eo.b,null,s(X8.label))),o.a.createElement(a9,null,o.a.createElement(s9,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper"},o.a.createElement(Vz.StatusField,{issueKey:t,initialValue:n,isEditable:r,appearance:"button",onSubmit:this.onStatusSubmitted,onSuccess:c,onEditCancel:u,preFetchTransitions:!0})),i&&o.a.createElement($8,{externalId:"issue.status.flagged"}),a&&!i&&o.a.createElement(e9,{name:a})))}}]),t}();d9.displayName="StatusView",d9.displayName="StatusView";var m9={canContainMediaContent:!1,isOptimistic:!1,isRichTextField:!1,shouldSaveDraft:!1,shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,saveField:u.a},b9=Object(eo.a)([Object(i.connect)(function(e){return{issueKey:Object(w.B)(e),initialValue:Object(C.c)(e),isFlagged:Object(x8.b)(e),isEditable:Object(k.l)(e),resolution:Object(C.a)(e),issueHierarchyLevel:Object(YU.e)(e)}},function(e){return{onStatusChanged:function(t){e(Object(I8.c)(so.w,m9,t)),e(Object(I8.e)(so.w,t))},onEditCancel:function(){e(Object(WE.c)(so.w,m9))}}}),y.injectIntl,Object(ko.f)(so.w),Object(ko.e)(so.w)])(d9);function y9(){var e=g9(["\n    ",";\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    color: ",";\n    ",";\n"]);return y9=function(){return e},e}function h9(){var e=g9(["\n    /* Style only for Google Chrome */\n    @media screen and (-webkit-min-device-pixel-ratio: 0) {\n        word-break: break-word;\n    }\n\n    /* Style only for Safari */\n    @media screen and (-webkit-transition) {\n        word-break: break-word;\n    }\n\n    /* Style only for Mozilla Firefox */\n    @-moz-document url-prefix() {\n        overflow-wrap: anywhere;\n    }\n\n    /* Style only for Internet Explorer/Edge */\n    @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n        word-break: break-all;\n    }\n"]);return h9=function(){return e},e}function g9(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v9=Object(a.css)(h9()),O9=a.default.h1(y9(),vt.typography.h700(),vt.colors.heading,v9),j9=function(e){var t=e.value,n=e.onChange;return o.a.createElement(O9,{"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},o.a.createElement(pN.a,{shouldAutoFocus:!0,value:t,onChange:n}))};j9.displayName="SummaryFieldView";var w9=j9,k9=function(e){var t=e.value;return o.a.createElement(O9,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},t)};k9.displayName="SummaryReadOnlyView";var E9=k9;function S9(e){return(S9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P9(e,t){return!t||"object"!==S9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I9(e){return(I9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x9(e,t){return(x9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _9=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P9(this,I9(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x9(e,t)}(t,r["Component"]),function(e,t,n){t&&C9(e.prototype,t),n&&C9(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.onExperienceSuccess()}},{key:"renderReadView",value:function(){return o.a.createElement(E9,{value:this.props.value})}},{key:"renderEditView",value:function(){return o.a.createElement(w9,{value:this.props.value,onChange:this.props.onChange})}},{key:"render",value:function(){var e=this.props.intl;return o.a.createElement(T.a,{onEnter:this.props.onConfirm,onEscape:this.props.onCancel},o.a.createElement(Vo.a,{label:this.props.label,isLabelHidden:!0,readView:this.renderReadView(),editView:this.props.isEditable&&this.renderEditView(),value:this.props.value,isEditing:this.props.isEditing,invalidMessage:this.props.invalidMessage,isInvalid:!!this.props.invalidMessage,onCancel:this.props.onCancel,onConfirm:this.props.onConfirm,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(Fo.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(Fo.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(Fo.a.cancelButtonLabel,{fieldName:this.props.label})}))}}]),t}();_9.displayName="SummaryInlineEditView",_9.displayName="SummaryInlineEditView",_9.defaultProps={invalidMessage:null,isEditable:!1,isEditing:!1,isMobile:!1,onExperienceSuccess:u.a};var M9=g()(Object(ko.f)(so.y),Object(ko.e)(so.y),y.injectIntl)(_9),T9=Object(Ro.a)(function(){return{fieldId:so.y}})(M9);function A9(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    margin-top: ","px;\n"]);return A9=function(){return e},e}var D9,L9=function(e){return D9||(D9=function(){return a.default.div(A9(),3*d.e)}()),o.a.createElement(D9,e)};function N9(e){return(N9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F9(e,t){return!t||"object"!==N9(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V9(e){return(V9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U9(e,t){return(U9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B9(){var e=G9(["\n    visibility: ",";\n"]);return B9=function(){return e},e}function K9(){var e=G9(["\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: row;\n    align-items: flex-start;\n    justify-content: space-between;\n    align-content: stretch;\n    margin-left: ","px;\n    margin-bottom: ","px;\n    padding-left: ","px;\n"]);return K9=function(){return e},e}function W9(){var e=G9(["\n    margin-bottom: ","px;\n"]);return W9=function(){return e},e}function H9(){var e=G9(["\n    display: flex;\n    flex: 1 1 auto;\n\n    > div {\n        display: flex;\n        flex: 1 1 auto;\n    }\n"]);return H9=function(){return e},e}function z9(){var e=G9(["\n    display: flex;\n    flex: 1 1 auto;\n    min-width: 0;\n    width: 100%;\n"]);return z9=function(){return e},e}function q9(){var e=G9(["\n    position: relative;\n"]);return q9=function(){return e},e}function G9(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}L9.displayName="CompactContextItemsContainer";var J9="QUICK_ADD_ITEMS",Q9="CONTEXT_ITEMS",Z9="issue.context-items",Y9="META_CONTAINER",$9="CONTENT_ITEMS",X9="FOOTNOTE_WRAPPER_KEY",e7="ACTIVITY_FEED",t7="issue.activity-feed",n7="CONFIGURE_FIELDS",r7=a.default.div(q9()),o7=a.default.div(z9()),i7=a.default.div(H9()),a7=a.default.div(W9(),2*d.e),s7=a.default.div(K9(),-d.e,3*d.e,1.25*d.e),c7=a.default.div(B9(),function(e){return e.show?"visible":"hidden"}),u7=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=F9(this,V9(t).call(this,e))).setContextWidth=function(e){n.setState({contextWidth:e?e.offsetWidth:0})},n.getContextWidth=function(){return n.state.contextWidth},n.renderContextItems=function(){return o.a.createElement(L9,{key:Q9},o.a.createElement(A4,{externalId:Z9}))},n.renderFullSizeLayoutSideContent=function(){return o.a.createElement(c7,{innerRef:n.setContextWidth,show:n.props.arePanelsClosed,key:"sideContentWrapper"},n.renderStatusFieldAndApprovals(),o.a.createElement(A4,{key:Q9,externalId:Z9}),o.a.createElement(s7,null,o.a.createElement(s6,{key:Y9}),o.a.createElement(T5,{key:n7})))},n.renderActivityFeed=function(){return o.a.createElement(gV,{key:e7,externalId:t7})},n.renderFullSizeLayout=function(){return o.a.createElement(r7,{"data-test-id":"issue.views.issue-details.issue-layout.issue-layout"},o.a.createElement(tC.a,null,o.a.createElement(s.a,{medium:8},n.renderSummary(),o.a.createElement(P8,{key:J9,externalId:"issue.quick-add"}),o.a.createElement(E2,{key:$9,isCompactMode:!1}),n.renderActivityFeed()),o.a.createElement(s.a,{medium:4},n.renderFullSizeLayoutSideContent())),n.renderGlancePanels(),n.renderContextPanel())},n.renderCompactLayoutItems=function(){return[n.renderSummary(),o.a.createElement(P8,{key:J9,externalId:"issue.quick-add"}),n.renderStatusFieldAndApprovals(),o.a.createElement(E2,{key:$9,isCompactMode:!0}),n.renderContextItems(),o.a.createElement(s7,{key:X9},o.a.createElement(s6,{key:Y9}),o.a.createElement(T5,{key:n7})),n.renderActivityFeed()]},n.renderCompactLayout=function(){return o.a.createElement(r7,{"data-test-id":"issue.views.issue-details.issue-layout.issue-layout"},o.a.createElement(tC.a,{isCompact:!0},o.a.createElement(s.a,null,o.a.createElement(c7,{innerRef:n.setContextWidth,show:n.props.arePanelsClosed,key:"sideContentWrapper"},n.renderCompactLayoutItems()))),n.renderGlancePanels(),n.renderContextPanel())},n.state={contextWidth:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U9(e,t)}(t,r["Component"]),function(e,t,n){t&&R9(e.prototype,t),n&&R9(e,n)}(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.didPropsChange(e)||this.didContextWidthChangeWhilePanelExpanded(t)}},{key:"didContextWidthChangeWhilePanelExpanded",value:function(e){return!this.props.arePanelsClosed&&this.state.contextWidth!==e.contextWidth}},{key:"didPropsChange",value:function(e){return!Tx()(this.props,e)}},{key:"renderStatusFieldAndApprovals",value:function(){return o.a.createElement(a7,{key:"STATUS","data-test-id":"issue.views.issue-details.issue-layout.status-and-approval"},o.a.createElement(b9,{key:"STATUS"}),this.props.shouldShowApprovalPanel&&o.a.createElement(ds,null))}},{key:"renderSummary",value:function(){return o.a.createElement(o7,{key:"SUMMARY"},o.a.createElement(v5,null),o.a.createElement(i7,null,o.a.createElement(T9,null)))}},{key:"renderGlancePanels",value:function(){var e=this;return this.props.glances.map(function(t){return o.a.createElement(Q3,{key:"glanceAnimatedPanel-".concat(t.appKey,"__").concat(t.moduleKey),width:e.getContextWidth(),glance:t,openedGlance:e.props.openedGlance,externalId:"issue.glance-panel"})})}},{key:"renderContextPanel",value:function(){return o.a.createElement(S3,{key:"context-panel",width:this.getContextWidth()})}},{key:"render",value:function(){return this.props.isCompact?this.renderCompactLayout():this.renderFullSizeLayout()}}]),t}();u7.displayName="IssueLayout",u7.displayName="IssueLayout",u7.defaultProps={isCompact:!1,openedGlance:null,glances:[],shouldShowApprovalPanel:!1};var l7=Object(i.connect)(function(e){return{glances:Object(ob.h)(e),openedGlance:Object(ib.a)(e),arePanelsClosed:!Object(ib.a)(e)&&!Object(Ty.b)(e),shouldShowApprovalPanel:Object(w.u)(e)}},{})(u7),f7=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcuts.js"),p7=n("./src/packages/issue/issue-view/src/actions/external-action-creator.js");function d7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m7=function(e,t){var n=e.find(function(e){return e.length});return n&&(n[t]||n[n.length-1])},b7=function(e,t){var n=e.find(function(e){return e.includes(t)})||[],r=n.indexOf(t);return[n,r]},y7=function(e,t){var n=e.findIndex(function(e){return e.includes(t)});return[n,e[n].indexOf(t)]},h7=function(e,t){if(!e)return t;var n=d7(b7(e,t),2);return n[0][n[1]+1]||t},g7=function(e,t){if(!e)return t;var n=d7(b7(e,t),2);return n[0][n[1]-1]||t},v7=function(e,t){if(!e)return t;var n=d7(y7(e,t),2),r=n[0],o=n[1],i=e.slice(r+1);return m7(i,o)||t},O7=function(e,t){if(!e)return t;var n=d7(y7(e,t),2),r=n[0],o=n[1],i=e.slice(0,r).reverse();return m7(i,o)||t};function j7(e){return(j7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S7(e,t){return!t||"object"!==j7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C7(e){return(C7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P7(e,t){return(P7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I7=Object(y.defineMessages)({nextIssue:{id:"issue.shortcuts.navigatingIssues.nextIssue",defaultMessage:"Next issue",description:""},previousIssue:{id:"issue.shortcuts.navigatingIssues.previousIssue",defaultMessage:"Previous issue",description:""},nextActivity:{id:"issue.shortcuts.navigatingIssues.nextActivity",defaultMessage:"Next activity",description:""},previousActivity:{id:"issue.shortcuts.navigatingIssues.previousActivity",defaultMessage:"Previous activity",description:""},editAssignee:{id:"issue.shortcuts.editAssignee",defaultMessage:"Edit assignee",description:""},commentOnIssue:{id:"issue.shortcuts.commentOnIssue",defaultMessage:"Comment on issue",description:""},editLabels:{id:"issue.shortcuts.editLabels",defaultMessage:"Edit labels",description:""},assignToMe:{id:"issue.shorctus.assignToMe",defaultMessage:"Assign to me",description:""}}),x7="a",_7="i",M7="l",T7="m",A7=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(r=S7(this,(e=C7(t)).call.apply(e,[this].concat(a)))).navigateToIssue=function(e){var t=r.props.currentIssueKey;e!==t&&r.props.onNextIssue(t,e)},r.issueActionShortcuts=(k7(n={},x7,{callback:function(){var e=Object(p7.d)(Object(p7.c)(oo.g));r.props.triggerShortcutAction(e,"assignIssue",x7)},label:o.a.createElement(y.FormattedMessage,I7.editAssignee)}),k7(n,_7,{callback:function(){var e=Object(p7.d)(Object(p7.b)());r.props.triggerShortcutAction(e,"assignToMe",_7)},label:o.a.createElement(y.FormattedMessage,I7.assignToMe)}),k7(n,M7,{callback:function(){var e=Object(p7.d)(Object(p7.c)(oo.J));r.props.triggerShortcutAction(e,"editLabels",M7)},label:o.a.createElement(y.FormattedMessage,I7.editLabels)}),k7(n,T7,{callback:function(){var e=Object(p7.d)(Object(p7.a)());r.props.triggerShortcutAction(e,"commentIssue",T7)},label:o.a.createElement(y.FormattedMessage,I7.commentOnIssue)}),n),r.boardNavigationShortcuts={j:{callback:function(){r.navigateToIssue(h7(r.props.rapidViewMap,r.props.currentIssueKey))},label:o.a.createElement(y.FormattedMessage,I7.nextIssue)},k:{callback:function(){r.navigateToIssue(g7(r.props.rapidViewMap,r.props.currentIssueKey))},label:o.a.createElement(y.FormattedMessage,I7.previousIssue)},n:{callback:function(){r.navigateToIssue(v7(r.props.rapidViewMap,r.props.currentIssueKey))},label:o.a.createElement(y.FormattedMessage,I7.nextActivity)},p:{callback:function(){r.navigateToIssue(O7(r.props.rapidViewMap,r.props.currentIssueKey))},label:o.a.createElement(y.FormattedMessage,I7.previousActivity)}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P7(e,t)}(t,r["Component"]),function(e,t,n){t&&E7(e.prototype,t),n&&E7(e,n)}(t,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w7(Object(n),!0).forEach(function(t){k7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props.rapidViewMap?this.boardNavigationShortcuts:{},{},this.issueActionShortcuts);return o.a.createElement(f7.a,{keyMap:e})}}]),t}();A7.displayName="KeyboardShortcuts",A7.displayName="KeyboardShortcuts";var D7=Object(eo.a)([Object(f.f)("keyboardShortcut",{triggerShortcutAction:"pressed"}),Object(f.s)({triggerShortcutAction:function(e,t,n){return{name:t,key:n}}}),Object(i.connect)(function(e){return{rapidViewMap:Object(w.L)(e),currentIssueKey:Object(w.B)(e)}},function(e){return{onNextIssue:function(t,n){return e(Object(bj.b)({fromIssueKey:t,toIssueKey:n}))},triggerShortcutAction:function(t){return setTimeout(function(){return e(t)},0)}}})])(A7);function L7(e){return(L7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N7(Object(n),!0).forEach(function(t){F7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U7(e,t){return!t||"object"!==L7(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B7(e){return(B7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K7(e,t){return(K7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W7(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    padding-bottom: ","px;\n"]);return W7=function(){return e},e}n.d(t,"Issue",function(){return z7});var H7=a.default.div(W7(),4*d.e),z7=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=U7(this,(e=B7(t)).call.apply(e,[this].concat(i)))).state={isIssueContainerReady:!1},n.setIssueBodyContainerRef=function(e){e&&(n.issueBodyContainerRef=e,n.setState({isIssueContainerReady:!0}))},n.hasErrored=!1,n.issueBodyContainerRef=void 0,n.renderError=function(e){var t=n.props.isComplete;switch(e){case $r.a:return t?o.a.createElement(ko.c,{location:"auth-error"},o.a.createElement(kx,null)):o.a.createElement(kx,null);case $r.c:return t?o.a.createElement(ko.c,{location:"not-found-or-no-permission-error"},o.a.createElement(xx,null)):o.a.createElement(xx,null);case $r.d:case $r.b:default:return t&&e!==$r.b?o.a.createElement(ko.b,{location:"unknown-error"},o.a.createElement(_x.a,null)):o.a.createElement(_x.a,null)}},n.renderAttachmentPickers=function(){var e=n.props,t=e.isServiceDesk;return e.isComplete?t?o.a.createElement(o.a.Fragment,null,o.a.createElement(wI,null),o.a.createElement(xI,null),n.state.isIssueContainerReady&&n.issueBodyContainerRef&&o.a.createElement(II,{container:n.issueBodyContainerRef})):o.a.createElement("div",null,o.a.createElement(PP,null),o.a.createElement(GP,null),n.state.isIssueContainerReady&&o.a.createElement(KP,{container:n.issueBodyContainerRef})):null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K7(e,t)}(t,r["Component"]),function(e,t,n){t&&V7(e.prototype,t),n&&V7(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onRefresh;(0,e.onMount)(),p.a.addRefreshIssueListener(t)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.error,r=t.isLoading&&e.isLoading;return e.error!==n||!r}},{key:"componentDidUpdate",value:function(e){this.props.error&&(this.hasErrored=!0),this.hasErrored||this.isCompleteStateForFirstTime(e)&&this.props.onLoadedIssueView()}},{key:"componentWillUnmount",value:function(){p.a.removeRefreshIssueListener(this.props.onRefresh)}},{key:"isCompleteStateForFirstTime",value:function(e){return this.props.isComplete&&!e.isComplete}},{key:"renderAttachmentViewer",value:function(){return this.props.isComplete?o.a.createElement(MI,null):null}},{key:"renderWorklogModal",value:function(){switch(this.props.worklogModal){case Xr.a:return o.a.createElement(Yn,null);case Xr.d:return o.a.createElement(Br,null);case Xr.c:return o.a.createElement(Mr,null);case Xr.g:default:return null}}},{key:"renderMainContent",value:function(){var e=this.props,t=e.error,n=e.isLoading,r=e.isCompact;return t?o.a.createElement(tC.a,{isCompact:r},o.a.createElement(s.a,{medium:12},this.renderError(t))):n?o.a.createElement(nC.a,null):o.a.createElement("div",{ref:this.setIssueBodyContainerRef},o.a.createElement(l7,{isCompact:r}),this.renderAttachmentViewer(),this.renderWorklogModal(),this.renderAttachmentPickers(),o.a.createElement(FI,{externalId:"issue.ecosystem"}),Object(M.w)()&&this.props.isComplete&&o.a.createElement(dx,null))}},{key:"render",value:function(){return o.a.createElement(H7,null,o.a.createElement(XS,{isLoading:this.props.isLoading,isPreview:this.props.isPreview,isComplete:this.props.isComplete,error:this.props.error,metrics:this.props.metrics,issueKey:this.props.issueKey}),this.props.isComplete?o.a.createElement(f.i,null):null,o.a.createElement(MC,{externalId:"issue.flags"}),o.a.createElement(D7,null),Object(M.x)()?o.a.createElement(Wr.a,{baseUrl:this.props.baseUrl},this.renderMainContent()):this.renderMainContent())}}]),t}();z7.displayName="Issue",z7.displayName="Issue",z7.defaultProps={onLoadedIssueView:u.a,onMount:u.a};t.default=Object(eo.a)([Object(f.r)({onLoadedIssueView:{action:"mounted"}}),Object(i.connect)(function(e){return{baseUrl:Object(w.f)(e),isLoading:Object(k.q)(e),isPreview:Object(k.r)(e),isComplete:Object(k.l)(e),error:Object(k.g)(e),issueKey:Object(w.B)(e),isServiceDesk:Object(w.u)(e),worklogModal:Object(S.d)(e)}},function(e){return{onRefresh:function(){return e(Object(Kr.f)())},onMount:function(){e(function(){return{type:b.a}}())},onLoadedIssueView:function(e){try{Object(f.k)(e,{action:"viewed"})}catch(e){m.a.safeError("issue.viewed",e,new l.a({eventNameSuffix:Hr.C,type:l.i,app:l.e,event:e}))}}}}),rC.a,function(){return function(e){var t,n;return n=t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=Qr(this,(e=Zr(n)).call.apply(e,[this].concat(o)))).MetricsContext=Object(zr.c)(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yr(e,t)}(n,r["Component"]),function(e,t,n){t&&Jr(e.prototype,t),n&&Jr(e,n)}(n,[{key:"render",value:function(){var t=this,n=this.MetricsContext;return o.a.createElement(n.Consumer,null,function(n){return o.a.createElement(e,Gr({},t.props,{metrics:n}))})}}]),n}(),t.displayName="WithMetricsConsumer(".concat(e.displayName||e.name,")"),n}}(),Object(f.g)(function(e){var t=Object(NS.a)(e),n=LS(e),r=Object(eC.b)(e);return R7({},t,{attributes:R7({},t.attributes,{},n,{},r,{},Object(k.i)())})})])(z7)},"./src/packages/issue/issue-view/src/views/issue-details/modal-issue-app.js":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/lodash/noop.js"),a=n.n(i),s=n("./src/packages/platform/observability/analytics-web-react/src/index.js"),c=n("./src/packages/issue/issue-view/src/common/constants/index.js"),u=n("./src/packages/issue/issue-view/src/common/model/view-mode-type.js"),l=n("./src/packages/issue/issue-view/src/views/issue-details/app-provider.js"),f=n("./src/packages/issue/issue-view/src/views/issue-details/issue-data-provider-refresher.js"),p=n("./node_modules/react-intl/lib/index.es.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/@atlaskit/onboarding/components/SpotlightManager.js"),b=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),y=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),h=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),g=n("./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js"),v=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),O=n("./src/packages/issue/issue-view/src/common/util/events/index.js"),j=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),w=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/index.js"),k=n("./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js"),E=n("./src/packages/issue/issue-view/src/views/banner/index.js"),S=n("./src/packages/issue/issue-view/src/views/changeboarding/index.js"),C=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),P=n("./src/packages/issue/issue-view/src/views/issue-details/async-issue-view.js"),I=n("./node_modules/styled-components/dist/styled-components.browser.es.js");function x(){var e=M(["\n    position: fixed;\n    top: 0;\n    left: 0;\n"]);return x=function(){return e},e}function _(){var e=M(["\n    width: 100%;\n"]);return _=function(){return e},e}function M(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=I.default.div(_()),A=I.default.div(x());function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function e(t){return t&&(t.className&&" ".concat(t.className," ").includes(" jira-dialog ")||e(t.parentNode))},B=Object(p.defineMessages)({closeWarningTitle:{id:"issue.closeWarningTitle",defaultMessage:"Leaving so soon?",description:""},closeWarningContent:{id:"issue.closeWarningContent",defaultMessage:"You were editing something but didn't save it. If you leave now, you'll lose those changes.",description:""},confirmAction:{id:"issue.closeWarningConfirmAction",defaultMessage:"Leave",description:""},cancelAction:{id:"issue.closeWarningCancelAction",defaultMessage:"Keep editing",description:""}}),K=function(){return!!document.querySelector(".e2e-upload-button")},W=function(){return!!document.querySelector(".mvng-hide-controls")},H=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=R(this,(e=F(t)).call.apply(e,[this].concat(i)))).state={showCloseConfirmation:!1},n.onClose=function(e){Object(O.c)(e)&&(U(e.target)||K()||W())||n.closeModal()},n.closeModal=function(){n.props.displayWarningOnClose?n.setState({showCloseConfirmation:!0}):n.props.onClose(n.props.currentIssueKey)},n.beforeUnloadListener=function(e){if(n.props.displayWarningOnClose){var t=n.props.intl.formatMessage(B.closeWarningContent);return(e||window.event).returnValue=t,t}},n.renderHeader=function(e){return o.a.createElement(y.d,L({},e,{id:c.y}),o.a.createElement(T,null,o.a.createElement(E.a,{renderTopBanner:n.props.renderTopBanner}),o.a.createElement(C.a,{shouldShowCloseButton:!0,onClose:n.closeModal,renderFeedback:n.props.renderFeedback,issueDeleteCallbacks:{onIssueDeleteSuccess:n.props.onIssueDeleteSuccess,onIssueDeleteFailure:n.props.onIssueDeleteFailure},viewModeOptions:n.props.viewModeOptions})))},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),function(e,t,n){t&&N(e.prototype,t),n&&N(e,n)}(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.beforeUnloadListener)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.beforeUnloadListener)}},{key:"renderConfirmation",value:function(){var e=this;return this.state.showCloseConfirmation?o.a.createElement(b.b,{headerMessage:this.props.intl.formatMessage(B.closeWarningTitle),contentMessage:this.props.intl.formatMessage(B.closeWarningContent),confirmActionText:this.props.intl.formatMessage(B.confirmAction),cancelActionText:this.props.intl.formatMessage(B.cancelAction),onConfirm:this.props.onClose,onCancel:function(){return e.setState({showCloseConfirmation:!1})},externalId:"issue.close-warning-dialog"}):null}},{key:"render",value:function(){var e=this;return o.a.createElement(m.c,null,o.a.createElement(w.d,null,o.a.createElement(w.a,null,o.a.createElement(g.a,null,function(t){return o.a.createElement(y.f,{autoFocus:!1,onClose:e.onClose,width:130*h.e,header:e.renderHeader,stackIndex:t},o.a.createElement("div",null,e.props.innerBanner),e.renderConfirmation(),o.a.createElement(S.a,{isFeedbackEnabled:void 0!==e.props.renderFeedback}),o.a.createElement(k.a,null),o.a.createElement(P.a,{externalId:"issue"}),o.a.createElement(A,{className:c.I}),o.a.createElement("div",{className:c.t}))}))))}}]),t}();H.displayName="IssueModal",H.displayName="IssueModal",H.defaultProps={currentIssueKey:null,displayWarningOnClose:!1,renderFeedback:function(){return null},viewModeOptions:{viewMode:u.a,viewModeSwitchEnabled:!1}};var z,q,G,J=Object(j.a)([p.injectIntl,Object(d.connect)(function(e){return{currentIssueKey:Object(v.B)(e)}},{})])(H);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return ee});var ee=Object(s.e)("issue")((G=q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,$(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&Z(e.prototype,t),n&&Z(e,n)}(t,[{key:"render",value:function(){return o.a.createElement(l.a,{backButtonUrl:this.props.backButtonUrl,analyticsSource:this.props.analyticsSource,boardId:this.props.boardId,boardType:this.props.boardType,dataProvider:this.props.dataProvider,dispatchExternalActionRef:this.props.dispatchExternalActionRef,ecosystemEnabled:this.props.ecosystemEnabled,estimationStatistic:this.props.estimationStatistic,isLoadedWithPage:this.props.isLoadedWithPage,isModal:!0,issueActions:this.props.issueActions,issueKey:this.props.issueKey,locationTransformer:this.props.locationTransformer,loginRedirectUrl:this.props.loginRedirectUrl,metrics:this.props.metrics,onChange:this.props.onChange,onError:this.props.onError,rapidViewId:this.props.rapidViewId,rapidViewMap:this.props.rapidViewMap,store:this.props.store,tenantContext:this.props.tenantContext,viewMode:this.props.viewModeOptions&&this.props.viewModeOptions.viewMode,onIssueKeyChange:this.props.onIssueKeyChange,history:this.props.history},o.a.createElement("div",{className:c.V},o.a.createElement(f.a,{onClose:this.props.onClose},o.a.createElement(J,{innerBanner:this.props.innerBanner,renderTopBanner:this.props.renderTopBanner,renderFeedback:this.props.renderFeedback,onClose:this.props.onClose,onIssueDeleteSuccess:this.props.onIssueDeleteSuccess,onIssueDeleteFailure:this.props.onIssueDeleteFailure,viewModeOptions:this.props.viewModeOptions}))))}}]),t}(),q.defaultProps={onClose:a.a,onIssueDeleteSuccess:a.a,onIssueDeleteFailure:a.a,viewModeOptions:{viewMode:u.a,viewModeSwitchEnabled:!1}},z=G))||z},"./src/packages/issue/workflow-readonly-modal/src/common/constants.js":function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return u});var r="WORKFLOW_READONLY_MODAL_LOAD_START_MARK_KEY",o="WORKFLOW_READONLY_MODAL_LOAD_END_MARK_KEY",i="DIAGRAM_RENDERING_START_MARK_KEY",a="WORKFLOW_READONLY_MODAL_READY_MARK_KEY",s="jira.fe.spa.transition.workflow-readonly-modal",c="START",u={INITIAL:"INITIAL",GLOBAL:"GLOBAL",DIRECTED:"DIRECTED"}}}]);try{window.__jsEvalStop("async-issue-view~issue.js")}catch(e){}
//# sourceMappingURL=async-issue-view~issue.f61f35ea04c9d5ff0576.8.js.map