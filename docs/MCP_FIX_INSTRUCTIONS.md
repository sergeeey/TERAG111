# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é MCP-—Å–µ—Ä–≤–µ—Ä–æ–≤ TERAG

**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ TERAG MCP —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–Ω

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 - TERAG MCP —Å–µ—Ä–≤–µ—Ä

### –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- ‚úÖ `src/cognitive/__init__.py`
- ‚úÖ `src/cognitive/terag_mcp_server.py`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—Ç –≤ `mcp.json` –∏ `terag_mcp_server.py` (8000 ‚Üí 8001)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API –Ω–∞ –ø–æ—Ä—Ç—É 8001

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ `terag/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ `terag/metrics` - AI-REPS –º–µ—Ç—Ä–∏–∫–∏ (RSS, COS, FAITH)
- ‚úÖ `terag/reason` - Graph-RAG reasoning –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `terag/status` - –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ `terag/feedback` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

### API Endpoints:
- `/api/v2/health` –∏–ª–∏ `/api/health` (fallback)
- `/api/v2/metrics` –∏–ª–∏ `/api/metrics` (fallback)
- `/api/query?question=...` –¥–ª—è reasoning
- `/api/v2/status`
- `/api/v2/feedback` –∏–ª–∏ `/api/feedback` (fallback)

---

## üü° –¢–†–ï–ë–£–ï–¢–°–Ø: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 - GitHub MCP

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å GitHub Personal Access Token

1. –ü–µ—Ä–µ–π—Ç–∏: https://github.com/settings/tokens/new
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å:
   - **Note**: `Cursor MCP - TERAG Project`
   - **Expiration**: 90 days (–∏–ª–∏ No expiration)
   - **Scopes**: –í—ã–±—Ä–∞—Ç—å:
     - ‚úÖ `repo` (Full control of private repositories)
     - ‚úÖ `workflow` (Update GitHub Action workflows)
     - ‚úÖ `write:packages` (Upload packages)
3. –ù–∞–∂–∞—Ç—å **Generate token**
4. **–°–ö–û–ü–ò–†–û–í–ê–¢–¨ –¢–û–ö–ï–ù** (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û—Ç–∫—Ä—ã—Ç—å `c:\Users\serge\.cursor\mcp.json` –∏ –∑–∞–º–µ–Ω–∏—Ç—å:

```json
"GITHUB_PERSONAL_ACCESS_TOKEN": "ghp_–¢–í–û–ô_–¢–û–ö–ï–ù_–ó–î–ï–°–¨"
```

–Ω–∞:

```json
"GITHUB_PERSONAL_ACCESS_TOKEN": "ghp_–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_—Ç–æ–∫–µ–Ω"
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Cursor

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å Cursor –∑–∞–Ω–æ–≤–æ.

---

## üü° –¢–†–ï–ë–£–ï–¢–°–Ø: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 - Nx MCP

### –†–µ—à–µ–Ω–∏–µ:
–ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Cursor –ø–æ–ª–Ω–æ—Å—Ç—å—é. Nx MCP –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π, –æ–±—ã—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç internal errors.

---

## üê≥ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –Ω–æ–≤—ã–º MCP —Å–µ—Ä–≤–µ—Ä–æ–º:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –±–µ–∑ –∫—ç—à–∞
docker-compose build --no-cache terag-api

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω
docker exec terag-api ls -la /app/src/cognitive/
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
terag_mcp_server.py
__init__.py
```

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TERAG MCP

### –¢–µ—Å—Ç 1: Health Check

–í Cursor –Ω–∞–ø–∏—Å–∞—Ç—å:
```
@terag health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "service": "TERAG v2.0",
  "health": {
    "neo4j": {"status": "connected"},
    "openai": {"status": "configured"},
    "memory_bank": {"status": "active"}
  }
}
```

### –¢–µ—Å—Ç 2: Metrics

```
@terag metrics
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "service": "TERAG v2.0",
  "metrics": {
    "RSS": 0.78,
    "COS": 0.84,
    "FAITH": 0.91,
    "Growth": 0.032,
    "Resonance": 0.85
  }
}
```

### –¢–µ—Å—Ç 3: Reasoning

```
@terag reason: –ù–∞–π–¥–∏ –∞–Ω–æ–º–∞–ª–∏–∏ –∑–æ–ª–æ—Ç–∞ –≤ Chu-Sarysu Basin
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "answer": "–ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞...",
  "sources": [...],
  "mini_graph": {...}
}
```

### –¢–µ—Å—Ç 4: Status

```
@terag status
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "service": "TERAG v2.0",
  "version": "2.0",
  "status": "operational",
  "core_modules_available": true
}
```

---

## üìä –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –°–µ—Ä–≤–µ—Ä | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏—è |
|--------|--------|----------|
| TERAG MCP | ‚úÖ –ì–æ—Ç–æ–≤ | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Cursor |
| GitHub MCP | üü° –¢—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω | –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω –∏ –æ–±–Ω–æ–≤–∏—Ç—å mcp.json |
| Docker MCP | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π |
| Nx MCP | üü° –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Cursor |
| Shadcn MCP | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π |

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ TERAG MCP —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–Ω
2. üü° –°–æ–∑–¥–∞—Ç—å GitHub —Ç–æ–∫–µ–Ω –∏ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. üü° –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Cursor
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-27
