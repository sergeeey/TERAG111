# AI-REPS Core Overview (Resonance Layer)

## Обзор системы

AI-REPS (AI Reasoning, Evaluation, and Planning System) - это когнитивная система с фокусом на резонансном слое, который обеспечивает синхронизацию и стабилизацию когнитивных процессов.

## Ключевые метрики

- **RSS** (Reasoning Stability Score): Стабильность рассуждений (0.0-1.0)
- **COS** (Cognitive Optimization Score): Оптимизация когнитивных процессов (0.0-1.0)
- **FAITH** (Feedback Integration and Trust): Интеграция обратной связи и доверие (0.0-1.0)
- **Growth**: Показатель роста и развития системы (0.0-1.0)
- **Resonance**: Фазовый резонанс когнитивных циклов (0.0-1.0)
- **confidence**: Уверенность системы в своих решениях (0.0-1.0)

## Архитектура резонансного слоя

### 1. Фазовый резонанс (`cognitive_resonance.py`)
- `update_phase()`: Обновление фазового состояния с дрейфом
- `phase_alignment_index()`: Индекс выравнивания фаз (PAI)
- Имитация согласования между когнитивными процессами

### 2. Система метрик (`metrics.py`)
- `heartbeat()`: Периодическое обновление метрик
- `get_metrics_snapshot()`: Получение текущего состояния
- Автоматическая подстройка Growth к целевому значению

### 3. Feedback-петля (`self_learning.py`)
- `accept_feedback()`: Прием целевых значений метрик
- Адаптивная подстройка внутренних состояний
- Коэффициент обучения ALPHA=0.15

### 4. Мониторинг здоровья (`health.py`)
- `get_health()`: Оценка состояния системы
- Статусы: ok/warning/critical
- Основано на фазовом дрейфе резонанса

## API эндпоинты

### GET /api/metrics
Возвращает текущие значения всех метрик с временной меткой.

### GET /api/health
Возвращает статус здоровья системы и фазовый дрейф.

### POST /api/feedback
Принимает целевые значения метрик для адаптивной подстройки.

### GET /metrics/prometheus
Экспорт метрик в формате Prometheus для мониторинга.

## Журнал когнитивных циклов

- **Файл**: `data/journal/journal.jsonl`
- **Формат**: JSON Lines с rolling window (500 записей)
- **Содержимое**: Каждый цикл reasoning с метриками, фазой и уверенностью
- **Автоматическая очистка**: Старые записи удаляются при превышении лимита

## Протокол самообучения

1. **Сбор данных**: Каждый heartbeat записывается в журнал
2. **Анализ трендов**: Фазовый дрейф влияет на Resonance
3. **Адаптация**: Feedback-петля корректирует целевые метрики
4. **Стабилизация**: Growth автоматически подстраивается к Resonance

## Критерии готовности

- ✅ GET /api/metrics возвращает все ключевые поля
- ✅ GET /api/health отражает фазовый дрейф
- ✅ POST /api/feedback сдвигает метрики к target
- ✅ journal.jsonl пополняется при каждом heartbeat
- ✅ Prometheus-метрики доступны
- ✅ Мини-дашборд отображает значения в реальном времени

## Следующие шаги

1. **WebSocket/SSE**: Live-графики для мониторинга
2. **Neo4j интеграция**: Resonance Graph по когнитивным состояниям
3. **Межагентная синхронизация**: Cognitive Synchronization Protocol
4. **Автоматическое планирование**: Self-Learning Engine с autoschedule