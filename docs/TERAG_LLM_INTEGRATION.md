# TERAG + Ollama LLM Integration

## üß† –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM –≤ TERAG

TERAG —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —è–∑—ã–∫–æ–≤—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ Ollama API.

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### üì° **API Endpoints**

1. **`GET /api/llm_query?question=<—Ç–µ–∫—Å—Ç>&model=<–º–æ–¥–µ–ª—å>&use_context=<bool>`**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å –≤ –ª–æ–∫–∞–ª—å–Ω—É—é LLM —á–µ—Ä–µ–∑ Ollama
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
     - `question` - —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
     - `model` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "qwen2.5:7b-instruct")
     - `use_context` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –≥—Ä–∞—Ñ–∞ –∑–Ω–∞–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
   
2. **`GET /api/llm/models`**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –≤ Ollama

### üîß **–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏**

–ù–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥–µ–ª–∏:
- `mistral:latest`
- `llama3:8b`
- `gemma2:9b`
- `nous-hermes2:10.7b`
- `qwen2.5:7b-instruct`
- `deepseek-coder:latest`
- `phi3:latest`
- `deepseek-coder:6.7b`

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. **–ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ API**

```bash
curl "http://127.0.0.1:8000/api/llm_query?question=Hello&model=mistral:latest&use_context=false"
```

### 2. **–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –≥—Ä–∞—Ñ–∞ –∑–Ω–∞–Ω–∏–π**

```bash
curl "http://127.0.0.1:8000/api/llm_query?question=–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–ª–∞—Ç–µ–∂–∏&model=qwen2.5:7b-instruct&use_context=true"
```

### 3. **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

```python
from src.core.ollama_client import query_ollama, query_with_context

# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
answer = query_ollama("–ü—Ä–∏–≤–µ—Ç! –ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?")

# –ó–∞–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
context = "–ü–ª–∞—Ç–µ–∂–∏ - —ç—Ç–æ –ø–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤..."
answer = query_with_context("–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–ª–∞—Ç–µ–∂–∏?", context)
```

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **Graph RAG —Ä–µ–∂–∏–º** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- TERAG –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç—Ä–∏–ø–ª–µ—Ç—ã –≤ –≥—Ä–∞—Ñ–µ –∑–Ω–∞–Ω–∏–π
- –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å + –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ LLM
- LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### 2. **LLM-only —Ä–µ–∂–∏–º**
- –í–æ–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ LLM
- LLM –æ—Ç–≤–µ—á–∞–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –≥—Ä–∞—Ñ–∞
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –¥–∏–∞–ª–æ–≥–∞

### 3. **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º**
- TERAG –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–Ω–∞–Ω–∏—è –∏–∑ –≥—Ä–∞—Ñ–∞
- –î–æ–ø–æ–ª–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ—Ç LLM
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–æ–ª–µ–µ –ø–æ–ª–Ω—ã–π –∏ —Å–≤—è–∑–Ω—ã–π –æ—Ç–≤–µ—Ç

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **100% –ª–æ–∫–∞–ª—å–Ω–æ** - –Ω–∏–∫–∞–∫–∏—Ö –æ–±–ª–∞—á–Ω—ã—Ö API
- ‚úÖ **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä
- ‚úÖ **8 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π** - –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â—É—é
- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - LLM —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ê–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```python
# TERAG –Ω–∞–π–¥–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –≥—Ä–∞—Ñ–µ –∑–Ω–∞–Ω–∏–π
# LLM –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö –∏ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
```

### –î–∏–∞–ª–æ–≥ —Å —Å–∏—Å—Ç–µ–º–æ–π
```python
# –ú–æ–∂–µ—Ç–µ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å TERAG –∫–∞–∫ —É–º–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
# –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è –∏–∑ –≥—Ä–∞—Ñ–∞
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
```python
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ LLM –¥–ª—è –æ–¥–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
# –°—Ä–∞–≤–Ω–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥–∞—à–±–æ—Ä–¥** - –¥–æ–±–∞–≤—å—Ç–µ –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (Graph RAG / LLM / –ö–æ–º–±–æ)
2. **–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥** - –ø–æ–¥–∫–ª—é—á–∏—Ç–µ Web Speech API
3. **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞** - —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
4. **–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç–≤–µ—Ç–æ–≤** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üö® –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Ollama —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- –ú–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ Ollama
- –î–æ—Å—Ç—É–ø –∫ `http://127.0.0.1:11434` (Ollama API)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω: `ollama list`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: `ollama pull <model>`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API: `curl http://127.0.0.1:11434/api/tags`

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å TERAG - —ç—Ç–æ **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ RAG —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM**, –∫–æ—Ç–æ—Ä–∞—è:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 8 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö LLM –º–æ–¥–µ–ª–µ–π




























